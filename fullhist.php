<?php

header('Content-Type: text/plain');

list($fname) = @glob('snapshot/ircd-hybrid-CURRENT-*ChangeLog');
readfile($fname);

?>
2005-09-27 17:49  knight

	* modules/m_info.c:
	  - OUTPUT_STRING_PTR -> OUTPUT_STRING

2005-09-27 16:15  adx

	* src/channel.c:
	  - fixed a simple bug spotted by Michael

2005-09-27 16:10  adx

	* src/channel.c:
	  - hopefully fixed an off-by-one bug that caused server numerics
	    during the connect burst

2005-09-27 11:44  adx

	* README.PLATFORMS:
	  - added db as FreeBSD port maintainer

2005-09-27 11:29  adx

	* src/s_conf.c:
	  - slight corrections to /kline nick

2005-09-27 08:43  adx

	* TODO, contrib/m_ctrace.c, contrib/m_ltrace.c, modules/m_admin.c,
	  modules/m_etrace.c, modules/m_info.c, modules/m_links.c,
	  modules/m_stats.c, modules/m_trace.c, modules/m_whois.c:
	  - fixed --disable-shared-modules

2005-09-25 23:10  adx

	* src/s_log.c:
	  - use CRLF when writing logs under w32

2005-09-25 23:06  adx

	* contrib/setup-win32.h:
	  - make ircd_prefix look nicer on win32 ie c:/ircd/blah instead of
	    C:\ircd/blah

2005-09-25 22:57  adx

	* src/fileio.c:
	  - () were missing here

2005-09-25 22:52  adx

	* include/fileio.h, src/fileio.c:
	  - continue libc vs API fixes

2005-09-25 22:21  adx

	* src/: fdlist.c, fileio.c:
	  - this should fix an old win32 bug I was always aware of but too
	    lazy to fix ;) basically we can't treat libc handles from open() as
	    the same "handlespace" as sockets. Under win32, libc handles are
	    artificial (indexes to libc array of open files), whereas sockets
	    are real handles from kernel. They might collide (although quite
	    unlikely regarding NT handle allocation scheme).

	  - solved by using win32 CreateFile / CloseHandle API instead of
	    open / close. Now both sockets and files exist in the same
	    handlespace (kernel objects)

2005-09-25 21:42  adx

	* src/fdlist.c:
	  - close_fds shouldn't use fd_close. Unnecessary overhead + fd_close
	    calls comm_setselect which can use (for example) the epoll fd;
	    results in a core if the epoll fd is closed already.

	    Just using close() on all descriptors is quite enough.

2005-09-25 21:13  adx

	* src/fdlist.c:
	  - don't call comm_setselect on non-sockets!

2005-09-25 16:10  knight

	* src/: ircd_parser.y, y.tab.c, y.tab.h:
	  - Fix same issue with reject_hold_time as join_flood_time
	    had. It was using NUMBER instead of timespec.

2005-09-25 16:07  knight

	* src/: ircd_parser.y, y.tab.c, y.tab.h:
	  - Fix parse error in config for join_flood_time.

2005-09-25 14:48  db

	* src/hostmask.c:
	  - trivial comment fix

2005-09-25 14:43  michael

	* src/hostmask.c:
	  - Fixed find_conf_by_address() so it actually works with encrypted
	    auth{} passwords.

2005-09-25 14:12  michael

	* src/s_conf.c:
	  - Fixed core with match_conf_password().  Too bad glibc's strcmp
	    doesn't test for pointers being NULL

2005-09-25 06:15  michael

	* RELNOTES:
	  - Updated RELNOTES

2005-09-25 05:44  michael

	* src/resv.c:
	  - Another episode of  "I propably shouldn't be coding on a sunday
	    morning without having a coffee first ..."
	    Accessing invalid memory isn't a nice thing ;-)

2005-09-25 04:17  michael

	* src/resv.c:
	  - Another fix to valid_wild_card_simple().  Must increase 'nonwild'
	    for escaped characters aswell.

2005-09-25 02:33  michael

	* src/resv.c:
	  - Fixed bug in valid_wild_card_simple() where we would treat escaped
	    wildcard characters (i.e. \*, \#, \?) as real wildcards.
	    Cleaned it up a tad while on it.

2005-09-25 02:05  michael

	* src/s_conf.c:
	  - Fixed the "KLINE nick" bug reported by pi.  We now always place a
	    kline on the sockhost field if the client is a local client or an
	    unspoofed remote client.  If it is a remote client with a spoof, a
	    kline on the host field will be placed.  Remember: sockhost is "0"
	    for remote clients that have a spoofed host.

	    Piotr: please look if everything works as advertised.

2005-09-24 08:38  michael

	* include/ircd_defs.h, modules/m_away.c, modules/core/m_kick.c,
	  modules/core/m_part.c, modules/core/m_quit.c,
	  modules/core/m_squit.c, src/resv.c, src/s_user.c:
	  - Added separate KICKLEN and AWAYLEN definitions

2005-09-24 05:30  michael

	* include/ircdauth.h:
	  - Remove old ircdauth.h

2005-09-24 05:27  michael

	* include/channel_mode.h, include/dbuf.h, include/event.h,
	  include/fdlist.h, include/fileio.h, include/handlers.h,
	  include/hook.h, include/hostmask.h, include/irc_string.h,
	  include/motd.h, include/rsa.h, include/s_auth.h,
	  include/s_misc.h, include/s_serv.h, include/s_stats.h,
	  include/send.h, include/userhost.h, src/hash.c, src/ircd.c,
	  src/ircd_parser.y, src/s_auth.c, src/s_bsd.c, src/y.tab.c:
	  - Misc. headerfile cleanups, fixed prototypes etc.

2005-09-22 12:01  adx

	* src/hostmask.c:
	  - fixed password issue (Unauthorized connection if someone was
	    connecting with a password but no password was defined in conf)

2005-09-20 11:47  db

	* src/: ircd_parser.y, y.tab.c, y.tab.h:
	  - bitlen should be pass 1 not pass 2
	  - minor edit, change tabs to spaces
	  - regenerate parser tables

2005-09-20 11:34  adx

	* TODO:
	  - updated my TODO

2005-09-20 11:33  db

	* src/s_conf.c:
	  - removed bogus check
	  - removed now unused variable

2005-09-20 11:15  db

	* src/: ircd_parser.y, s_conf.c:
	  - rewrote the convoluted mess that was there for classes

2005-09-20 10:59  adx

	* configure, configure.ac, include/patchlevel.h:
	  - restored optimization to -O2 in preparation for rc1 release
	  - revved patchlevel

2005-09-20 08:41  adx

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  help/opers/umode, src/ircd_parser.y, src/y.tab.c, src/y.tab.h:
	  - added reject_hold / join_flood_* settings to example confs
	  - moved join flood to channels{} section

2005-09-19 10:01  adx

	* RELNOTES:
	  - updated RELNOTES

2005-09-19 06:36  adx

	* contrib/win32build.bat, tools/win32/kill.c, tools/win32/rehash.c,
	  tools/win32/remotd.c:
	  - added win32 tools

2005-09-19 02:15  metalrock

	* configure, configure.ac, src/restart.c, src/whowas.c:
	   - Renamed shadowed declaration.
	   - Removed whitespace from includes on whowas.c
	   - Lower case v for voting to be consistent with other options.

2005-09-18 19:07  adx

	* contrib/Makefile.in, contrib/README, contrib/m_etrace.c,
	  help/opers/index, include/modules.h, modules/Makefile.in,
	  modules/m_etrace.c, src/modules.c:
	  - moved etrace to base, as per rb

2005-09-18 18:36  adx

	* contrib/Makefile.in, contrib/README, contrib/m_omotd.c,
	  contrib/help/opers/omotd, help/opers/index, help/opers/omotd,
	  include/modules.h, modules/Makefile.in, modules/m_omotd.c,
	  src/modules.c:
	  - moved /omotd to autoload
	  - fixed issue where ctrace,ltrace,etrace were not compiled with
	    contrib on static builds (but were referenced in modules.c ->
	  linking error)
	  - shall we move *trace to autoload?

2005-09-18 18:24  adx

	* include/fdlist.h, modules/m_help.c, modules/m_rehash.c,
	  modules/m_set.c, src/event.c, src/fdlist.c, src/ircd.c,
	  src/ircd_parser.y, src/y.tab.c, src/y.tab.h:
	  - call recalc_fdlimit periodically
	  - use setrlimit to raise max number of fds to the hard limit
	  - cosmetic changes

2005-09-18 17:48  adx

	* src/modules.c:
	  - mod_add_cmd(mkpasswd) on win32 too

2005-09-18 16:49  adx

	* src/s_bsd_win32.c:
	  - coded report_dns_servers for win32

2005-09-18 16:23  adx

	* src/s_serv.c:
	  - fixed a simple bug in fork_server

2005-09-18 16:09  adx

	* configure, configure.ac, contrib/setup-win32.h, include/client.h,
	  include/fdlist.h, include/ircd_defs.h, include/s_bsd.h,
	  include/s_serv.h, include/setup.h.in, src/fdlist.c, src/hook.c,
	  src/ircd.c, src/packet.c, src/restart.c, src/s_bsd.c,
	  src/s_bsd_sigio.c, src/s_bsd_win32.c, src/s_serv.c:
	  - merged functions like set_non_blocking, set_no_delay,
	    set_sock_buffers into setup_socket callback
	  - removed USE_SIGIO define + win32 related code from socket I/O,
	    now they use hooks instead
	  - sanified fork_server

2005-09-18 14:08  adx

	* include/hook.h, src/fdlist.c, src/s_bsd_poll.c,
	  src/s_bsd_select.c, src/s_bsd_sigio.c:
	  - (hopefully) adapted select, poll & sigio:poll to dynamic
	  HARD_FDLIMIT

2005-09-18 13:33  knight

	* doc/technical/fd-management.txt:
	  - More documentation cleanups. File management is discussed in
	    file-management.txt so there's no need to have duplicate
	    documentation of it in fd-management.txt.

2005-09-18 12:52  adx

	* include/hook.h, src/hook.c:
	  - improved /stats h, more useful and prettier
	  - fixed race in fdlist. Fdlist is initialized first, but I just
	    added a callback registration to it, which uses make_dlink_node()
	    and dlink_heap (not initialized yet). Resolved by changing hook.c
	    make_dlink_node's into MyMalloc's and free_dlink_nodes to MyFree.

2005-09-18 11:35  adx

	* include/fdlist.h, src/fdlist.c:
	  - added a global callback to handle hard_fdlimit change
	  - if the change occurs, notice opers

2005-09-18 10:46  adx

	* src/: s_bsd_devpoll.c, s_bsd_epoll.c, s_bsd_kqueue.c,
	  s_bsd_select.c:
	  - fixed i/o engines to do at most 128 events at a time
	    (they won't do such much anyway, but that's another story),
	    thus removing HARD_FDLIMIT / getdtablesize() references

	  - still to fix: select, poll, sigio(poll)

2005-09-18 10:27  michael

	* .indent.pro:
	  - Removed .indent.pro file.  Don't get the idea to run the sources
	  thru indent!

2005-09-18 10:26  adx

	* src/: ircd_parser.y, y.tab.c, y.tab.h:
	  - forgot to recalc_fdlimit when parsing ircd.conf max_clients=

2005-09-18 10:25  adx

	* configure, configure.ac, contrib/setup-win32.h,
	  include/defaults.h, include/fdlist.h, include/ircd.h,
	  include/m_info.h, include/restart.h, include/setup.h.in,
	  modules/m_rehash.c, modules/m_set.c, modules/core/m_die.c,
	  src/fdlist.c, src/fileio.c, src/ircd.c, src/ircd_parser.y,
	  src/ircd_signal.c, src/listener.c, src/restart.c, src/s_auth.c,
	  src/s_bsd.c, src/s_bsd_win32.c, src/s_conf.c, src/s_serv.c,
	  src/s_user.c, src/y.tab.c, src/y.tab.h:
	  - sanified the whole HARD_FDLIMIT, MAXCONN, MASTER_MAX, MAX_BUFFER,
	    GlobalSetOptions.maxclients, ServerInfo.max_clients mess

	  - now we have 0 hardcoded limits (uhm, maybe hard_fdlimit=32767 on
	    win32) plus 2 runtime settings -- hard_fdlimit obtained from the
	    current ulimit, and ServerInfo.max_clients. /REHASH FDLIMIT can be
	    used to recheck hard_fdlimit (although it is done automatically when
	  you change max_clients)

	  - unified restart/die code

	  - to do: some i/o engines statically assume how many fds they will
	    support on startup, fix them

	  - question: is it possible to change OS limits while ircd is
	    running? account hard limits are already set on the process..

2005-09-18 08:43  michael

	* src/channel_mode.c:
	  - Finally fixed ban chaching

2005-09-18 08:07  michael

	* modules/core/m_mode.c, src/channel_mode.c:
	  - It's possible that a newly added exception matches an already
	    silenced channelmember.  Must clear the CHFL_BAN_SILENCED bit here
	  too.

2005-09-18 07:41  michael

	* include/channel_mode.h, modules/core/m_sjoin.c,
	  src/channel_mode.c:
	  - Must always call clear_ban_cache() when removing a ban/exception,
	    even if quiet_on_ban is disabled, otherwise you would end up with
	    channelmembers having a stale CHFL_BAN_SILENCED flag.  Also have to
	    call clear_ban_cache() in case we kill our banlist in a SJOIN.
	  Spotted by adx.

2005-09-18 06:56  michael

	* include/channel.h, src/balloc.c, src/channel.c,
	  src/channel_mode.c:
	  - Fixed indenting in some places, untabified code etc.

2005-09-17 20:59  knight

	* contrib/m_services.c:
	  - Code speed clean-ups. I know there's a jumping debate as to
	    whether or not switch/case is truly faster than else/if
	    but in this case I felt it would be in the case of large
	    networks using services.

	    Since else/if's have to run through all conditions
	    this can cause a response time problem with large
	    numbers of queries so switch/case would be better
	    in this instance. Besides I was always taught in
	    college that the use of "hairy ifs" was always
	    bad in this case.

2005-09-17 18:33  adx

	* src/channel.c:
	  - fixed another lame bug of mine *sigh*

2005-09-17 18:16  adx

	* src/s_bsd_kqueue.c:
	  - fixed connect not working with kqueue

2005-09-17 16:43  adx

	* src/channel.c:
	  - fixed another problem with joinflood (integer overflow)

2005-09-17 16:32  adx

	* src/channel.c:
	  - this probably fixes the problem with ClearJoinFlood not being
	    done on a channel (therefore stopping further flood notices after
	    the first one)

2005-09-17 15:38  adx

	* configure, configure.ac:
	  - added better epoll detection

2005-09-17 15:11  adx

	* contrib/help/opers/index, contrib/help/users/index,
	  help/Makefile.in, help/opers/index, help/users/index:
	  - corrected help
	  - still not sure everything is covered

2005-09-17 14:32  knight

	* contrib/help/Makefile.in, contrib/help/opers/index,
	  contrib/help/users/.lock, contrib/help/users/index,
	  help/Makefile.in, help/opers/index, help/users/index:
	  - Gone back to static index files for help pages. Since help files
	    change very little and new ones are added rarely this isn't a
	    big problem. The commands 'expand' and 'column' caused infinite
	    loop issues on FreeBSD.

2005-09-17 13:56  knight

	* contrib/help/users/.lock:
	  - Lock users directory so it always downloads. Fixing Makefile
	  issue.

2005-09-17 13:51  knight

	* contrib/help/Makefile.in:
	  - Restored original Makefile behaviour. The rm -f statements had
	    nothing to do with the Makefile errors. It turns out the errors
	    were related to:

	    echo $$help >> users/index.tmp;

	    Which ONLY occured on Slackware. These leads me to believe that
	    coreutils is horribly broken on Slackware (no surprise). It works
	    everywhere else (Net/Open/FreeBSD, Gentoo, Debian and Red Hat).

2005-09-17 13:28  knight

	* contrib/help/Makefile.in:
	  - Added 'touch' conditions for distributions with broken coreutils.

2005-09-17 11:56  knight

	* contrib/help/Makefile.in:
	  - More fixes...

2005-09-17 11:46  knight

	* contrib/help/Makefile.in:
	  - Removed rm -rf of user.tmp even though UNIX systems are SUPPOSED
	    to force removal even if it doesn't exist, not break.

2005-09-17 11:00  michael

	* configure, configure.ac, src/ircd_parser.y, src/y.tab.c,
	  src/y.tab.h:
	  - Fixed core on REHASH
	  - Always use -O0 for betas/rcs

2005-09-17 09:51  knight

	* contrib/Makefile.in:
	  - Minor change.

2005-09-17 09:10  knight

	* contrib/help/Makefile.in, help/Makefile.in:
	  - Restored column code AGAIN. Metalrock I saw no infinite looping of
	    ANY kind and I tested this thoroughly with different versions
	    GNU make and BSD make as well as calling the Makefiles directly
	    and indirectly. Everything works fine.

2005-09-17 06:30  michael

	* contrib/ip_cloaking.c, include/s_user.h, src/ircd.c,
	  src/messages.tab, src/s_user.c:
	  - Dynamically rebuild usermode string for RPL_MYINFO when
	  adding/removing a mode

2005-09-17 00:46  metalrock

	* src/channel_mode.c:
	   - Clean up some of the spacing.

2005-09-17 00:40  metalrock

	* modules/m_rxline.c:
	   - rxline and unrxline.

2005-09-17 00:39  metalrock

	* modules/m_rkline.c:
	   - rkline, not kline.

2005-09-16 21:22  metalrock

	* contrib/help/Makefile.in, help/Makefile.in:
	   - Revert changes to help Makefiles as they run into an infinite
	   at make install.

2005-09-16 18:01  knight

	* messages/ircd-swedish.lang:
	  - Change e-mail to chatjunkies.org address.

2005-09-16 16:42  adx

	* src/s_bsd_epoll.c:
	  - fixed epoll

2005-09-16 16:13  michael

	* src/s_bsd_epoll.c:
	  - Defining _GNU_SOURCE is pointless here

2005-09-16 16:09  adx

	* src/s_bsd_epoll.c:
	  - this should fix epoll compile

2005-09-16 16:07  knight

	* src/s_bsd_epoll.c:
	  - Remove duplicate include

2005-09-16 13:44  knight

	* contrib/help/Makefile.in, help/Makefile.in:
	  - Have the index generate in a column'd style like in 7.0.x
	    for easier reading on IRC clients in 80 char terminals
	    or people who don't like scrolling.

2005-09-16 13:34  knight

	* contrib/help/Makefile.in:
	  - Merged r1.11 with r1.8. The Makefile.in from r1.8 worked perfectly
	    fine, I do not know what errors Stacy and pi had but they were
	    not Makefile related and the changes made in r1.9 broke the help
	    index. This situation has now been fixed.

2005-09-16 12:24  knight

	* src/s_bsd_epoll.c:
	  - Fixed compiling errors pertaining to missing epoll_functions().
	    The issue was <sys/epoll.h> was left out of the headers list
	    so s_bsd_epoll.c got confused.

2005-09-16 12:10  knight

	* src/channel.c:
	  - Another compile error from restrict_channels.

2005-09-16 12:00  knight

	* modules/core/m_join.c:
	  - Fixed compiling error relating to restrict_channels.
	    *slaps adx*

2005-09-16 11:28  knight

	* modules/m_info.c:
	  - Added restrict_channels to info struct.

2005-09-16 10:56  adx

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  include/s_conf.h, modules/core/m_join.c, src/channel.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/lex.yy.c, src/s_conf.c,
	  src/y.tab.c, src/y.tab.h:
	  - added channels { restrict_channels = yes/no; }; to reverse RESV
	    logic for closed/corporate networks with a static channel set
	  - fixed oper_pass_resv logic
	  - needs review

2005-09-16 10:27  knight

	* messages/ircd-dutch.lang:
	  - *oops* :x

2005-09-16 10:21  knight

	* messages/ircd-dutch.lang:
	  - Updated dutch translation file, probably needs proof-reading.

2005-09-16 10:11  knight

	* contrib/help/Makefile.in:
	  - Makefile clean-up. The users index temp file was not being
	    removed when it *needs* to be in order to add the contrib
	    user help pages.

2005-09-16 10:07  knight

	* contrib/help/Makefile.in:
	  - Makefile clean-ups. However for some strange reason
	    the help page FLAGS is not entered into the index
	    for users for some strange reason, but the symlink
	    is created. Someone please review this lol.

2005-09-16 10:07  db

	* src/ircd_parser.y:
	  - fix my own stupid core

2005-09-16 08:35  knight

	* modules/m_info.c:
	  - The module m_info has now been completely updated
	    to reflect the current configuration file. Everything
	    is in exact order so if you modify this make sure it's
	    in the right place.

	    Note: We really should re-write how this thing outputs.
	    the current output method is quite ugly and malformed
	    most of the time (e.g. [] never hug the descriptions).
	    So if someone would like to do that be my guest.

2005-09-16 05:39  adx

	* src/s_bsd_win32.c:
	  - wndhandle MUST NOT be static here, s_bsd.c uses it for
	  set_nonblocking

2005-09-15 21:40  metalrock

	* TODO:
	   - Update my TODO

2005-09-15 14:03  knight

	* modules/m_gline.c:
	  - *sigh*

2005-09-15 13:56  knight

	* modules/m_gline.c:
	  - People who use G-Line voting need to be able to
	    set_local_gline() as well.

2005-09-15 12:50  db

	* modules/m_gline.c:
	  - set_local_gline was never being called when GLINE_VOTING was
	    disabled this triggered a warning about set_local_gline being
	  defined but not used.

2005-09-15 07:46  adx

	* RELNOTES, etc/example.conf, etc/example.conf.quick,
	  etc/example.efnet.conf, include/s_conf.h, modules/m_info.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/lex.yy.c, src/s_conf.c,
	  src/y.tab.c, src/y.tab.h:
	  - got rid of general { maximum_links = ...; }, it didn't work
	  anyway.
	  - default to MAXIMUM_LINKS_DEFAULT (normally 0) if a class{} doesn't
	    specify max_links

2005-09-15 06:43  adx

	* src/: ircd_parser.y, y.tab.c, y.tab.h:
	  - allow accumulating more ip= entries in an exempt{} block
	  - added missing semicolons in ircd_parser.y

2005-09-15 06:18  adx

	* src/s_conf.c:
	  - allow MaxTotal(iline->class_ptr) == 0, we already treat this as
	    "no limits"

2005-09-15 05:21  adx

	* include/defaults.h, src/s_conf.c:
	  - by default a class should have no total clients limit,
	    MAXIMUM_LINKS_DEFAULT = 1 was very confusing

2005-09-15 03:17  adx

	* src/s_bsd_win32.c:
	  - fixed compile error

2005-09-15 02:27  adx

	* contrib/win32build.bat:
	  - fixed win32 build after adding epoll i/o

2005-09-14 23:14  metalrock

	* src/: y.tab.c, y.tab.h:
	   - Update y.tab.h and y.tab.c after parser changes.

2005-09-14 23:08  db

	* src/ircd_parser.y:
	  - make password encrypted *default* condition. Too many people
	    make mistkaes.

2005-09-14 22:23  knight

	* TODO:
	  - Semi-simplified my TODO a bit more.

2005-09-14 22:09  metalrock

	* INSTALL:
	   - Grammar correction.

2005-09-14 21:37  knight

	* RELNOTES:
	  - Updated RELNOTES

2005-09-14 21:27  metalrock

	* TODO:
	   - Update TODO since previous commit collided with knight's

2005-09-14 21:25  metalrock

	* RELNOTES, doc/serverhide.txt, etc/example.conf,
	  etc/example.efnet.conf, modules/m_info.c, modules/m_whois.c,
	  src/channel.c:
	   - Don't show local channels on remote /WHOIS.
	   - Updated documentation.

2005-09-14 21:20  knight

	* TODO:
	  - metalrock's TODO has been solved, time to get him more
	    work =P

2005-09-14 21:19  knight

	* doc/: channels.txt, index.txt:
	  - Documention Update: Removed channels.txt; no longer necessary
	    after metalrock squashed his TODO.

2005-09-14 20:47  metalrock

	* RELNOTES:
	   - Updated RELNOTES

2005-09-14 19:36  metalrock

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  include/s_conf.h, modules/m_info.c, modules/m_whois.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/lex.yy.c, src/s_conf.c,
	  src/y.tab.c, src/y.tab.h:
	   - Updated copyrights.
	   - Added hidden_name to allow customization of hidden servernames.

2005-09-14 13:25  knight

	* messages/ircd-swedish.lang:
	  - Updated swedish translation file thanks to a fellow operator
	    at ChatJunkies.

2005-09-14 12:29  db

	* etc/: example.conf, example.efnet.conf:
	  - removed ~ from ~operwall in examples. Too many people getting
	    caught with that and wondering why operwall no longer works.

2005-09-14 10:13  knight

	* contrib/ip_cloaking.c:
	  - Moved key definitions back to the top of the file
	    since adx feels people might not notice to change
	    them even though they are directed to read the
	    README.cloaking file before doing anything.

2005-09-14 10:01  knight

	* contrib/: ip_cloaking.c, m_services.c:
	  - Source code and comment clean-ups.

2005-09-14 06:27  adx

	* configure, configure.ac, src/s_bsd_devpoll.c, src/s_bsd_epoll.c,
	  src/s_bsd_kqueue.c, src/s_bsd_poll.c, src/s_bsd_select.c,
	  src/s_bsd_sigio.c:
	  - make all I/O engines compile (whether they work is another
	  question).
	  - removed unnecessary #includes
	  - please test it on freebsd, linux, linux with --enable-sigio,
	    anything with --enable-poll / --enable-select, solaris, windows

2005-09-14 06:00  adx

	* configure, configure.ac, include/setup.h.in:
	  - added check for epoll()

2005-09-14 05:47  adx

	* configure, configure.ac, src/s_bsd_poll.c, src/s_bsd_select.c:
	  - miscellaneous I/O fixes

2005-09-14 05:40  adx

	* configure, configure.ac:
	  - updated configure to offer --enable-epoll

2005-09-14 05:35  adx

	* src/s_bsd_poll.c:
	  - fixed compile error in poll

2005-09-14 05:34  adx

	* src/s_bsd_sigio.c:
	  - fixed sigio

2005-09-13 20:22  knight

	* src/s_bsd_kqueue.c:
	  - Fixed some compiling errors.

2005-09-13 16:12  knight

	* messages/ircd-german.lang:
	  - Removed a few numerics that really didn't need to be in
	    the german translation file since there is nothing to
	    be translated

	    Spotted by: Michael

2005-09-13 14:15  adx

	* include/fdlist.h, src/s_bsd_devpoll.c, src/s_bsd_epoll.c,
	  src/s_bsd_kqueue.c, src/s_bsd_poll.c, src/s_bsd_select.c,
	  src/s_bsd_sigio.c, src/s_bsd_win32.c:
	  - reworked i/o implementations, much cleaner now, fixed some bugs
	  - fixed possible crashes (although very unlikely to happen), we
	    shouldn't dereference fde_t * in the I/O loop, they can be freed by
	    the handlers, so *always* use fd values and lookup_fd()
	  - added epoll
	  - probably many of the I/O providers will not compile now, others
	    might work wrong. We are before an rc, it'd really be nice if
	    someone tested them!

2005-09-13 11:41  knight

	* messages/ircd-german.lang:
	  - Updated German localisation file thanks to a fellow operator
	    at ChatJunkies.

2005-09-13 10:40  knight

	* contrib/m_services.c:
	  - Removed ERR_ERRONEUSNICKNAME and RPL_NICKNAMEINUSE numerics.

2005-09-13 04:05  adx

	* src/s_user.c:
	  * show RPL_YOURID _after_ RPL_ISUPPORT

2005-09-13 01:28  adx

	* TODO:
	  * one other I missed

2005-09-13 01:24  adx

	* TODO:
	  - updated my TODO (2)

2005-09-13 01:22  adx

	* messages/: ircd-polish.lang, ircd-standard.example.lang:
	  * updated translations

2005-09-13 01:18  adx

	* TODO:
	  - updated my TODO

2005-09-12 23:53  db

	* include/s_conf.h, src/s_conf.c, src/s_serv.c:
	  - Aren't 3 line functions useless?
	    removed get_con_freq() it was only used in s_serv.c and easier to
	    just do in place.

2005-09-12 18:07  knight

	* TODO:
	  - Heh missed two other ones I wanted to have.

2005-09-12 17:59  knight

	* TODO:
	  - Added my list of TODOs for the future.

2005-09-12 16:42  db

	* src/: ircd_lexer.l, lex.yy.c:
	  - added missing lexer entries for CIDR_BITLEN and NUMBER_PER_CIDR

2005-09-12 16:08  db

	* src/messages.tab:
	  - This should have been a string !

2005-09-12 16:04  db

	* contrib/m_services.c:
	  - Don't do this flood control here, it's not necessary and could
	    core the server if the nick is remote.
	    Spotted by Michael.

2005-09-12 15:47  knight

	* src/messages.tab:
	  - Missed an extra conversion specifier for RPL_HOSTHIDDEN.
	    Spotted by Michael

2005-09-12 14:17  knight

	* src/messages.tab:
	  - Forgot to commit messages.tab :x

2005-09-12 14:05  knight

	* messages/ircd-standard.example.lang:
	  - Match numeric 440 to DALnet's Bahamut string.

2005-09-12 13:50  knight

	* messages/ircd-standard.example.lang:
	  - Pet peeve commit, line width difference

2005-09-12 13:41  knight

	* contrib/ip_cloaking.c, include/numeric.h,
	  messages/ircd-standard.example.lang, src/messages.tab:
	  - Numericified hidden host message (assigned as RPL_HIDDENHOST)
	    to numeric 396 which afaik is unused and matches ircu2.

2005-09-12 13:03  knight

	* contrib/m_services.c:
	  - Header clean ups.
	  - Numericified error messages.
	  - Match clean_nick_name to m_nick.c fixes

	  Reviewed by: Diane Notes: Probably needs more auditing and clean-ups
	         for clean_nick_name since I couldn't figure it out lol.

2005-09-12 09:35  adx

	* src/hash.c:
	  - oops, accidentally committed my debug code

2005-09-12 09:34  adx

	* src/: client.c, hash.c:
	  - fixed find_person

2005-09-12 08:04  adx

	* contrib/m_services.c:
	  - fix it more

2005-09-12 01:59  metalrock

	* messages/custom.lang:
	   - Add a space after server to make it look nicer.

2005-09-12 01:38  metalrock

	* src/lex.yy.c:
	   - need to update lex.yy.c after changing ircd_lexer.l

2005-09-12 00:41  adx

	* modules/core/m_nick.c:
	  - allow remote nicknames begin with a digit, this is VERY important
	    in introducing some protocol changes related to UIDs,
	    collision solving etc. And probably one of the reasons old hybrids
	    were pissing off the ratbox ppl ;)

2005-09-12 00:33  adx

	* include/hook.h, modules/m_stats.c, src/hook.c:
	  - limited hub/leaf stats to stats H
	  - added /stats h for listing registered callbacks

2005-09-11 23:07  adx

	* src/client.c:
	  - allow UID addressing for lusers in find_person if the target
	    client is not +i

2005-09-11 22:06  adx

	* include/s_user.h, src/s_user.c:
	  - turned uid_get into a callback, effectively allowing modules
	    to override the default generator. For instance this makes
	    permanent uids idea quite possible and easy to do in some 100-200
	  lines module

2005-09-11 21:57  adx

	* include/numeric.h, messages/ircd-polish.lang,
	  messages/ircd-standard.example.lang, src/messages.tab,
	  src/s_user.c:
	  - imported RPL_YOURID from ircnet, UIDs are now public.
	  - in the future commands should be reworked to accept uids as
	    arguments, and always use them in s2s communication.

2005-09-11 20:24  adx

	* TODO:
	  - updated TODO, removed some obsolete technical entries etc

2005-09-11 14:33  knight

	* etc/: example.conf, example.efnet.conf:
	  - Merge 1.83 with 1.81.

2005-09-11 14:28  knight

	* etc/: example.conf, example.efnet.conf:
	  - Badly written C/N-Line block for IPv6 server example, could cause
	    confusion *sigh*.

2005-09-11 11:59  michael

	* contrib/m_clearchan.c:
	  - The second list traversal of locmembers is unavoidable. Bleh

2005-09-11 11:38  michael

	* contrib/m_clearchan.c:
	  - Optimized kick_list() by getting rid of two extra loops

2005-09-11 08:13  knight

	* src/s_conf.c:
	  - Compile error in s_conf.c fixed. A period was used instead of a
	    comma in a print statement :x

2005-09-11 07:31  michael

	* src/s_misc.c:
	  - Imported date() bugfix from ircu.  TIME would give you a weird
	    looking TZ offset in case lt->tm_year differs from gm->tm_year

2005-09-11 06:44  michael

	* src/ircd.c:
	  - Fixed typo

2005-09-11 06:40  michael

	* modules/m_stats.c, src/ircd.c, src/ircd_lexer.l, src/s_conf.c,
	  src/s_user.c:
	  - Improved error reporting here and there, also made
	    error messages a bit more consistent

2005-09-11 04:04  adx

	* contrib/m_mkpasswd.c, contrib/m_services.c, src/client.c:
	  - fixed compile error in m_services, slight corrections here
	  - use rand() instead of random() in m_mkpasswd, basically because
	    random() generator is not initialized by the ircd and is
	    unsupported on win32.
	  - corrected find_person() prototype

2005-09-10 15:38  adx

	* contrib/ip_cloaking.c:
	  - do not send CHGHOST if called from register_local_user

2005-09-10 15:08  adx

	* contrib/m_services.c:
	  - fixed svsnick a bit

2005-09-10 14:45  michael

	* contrib/win32build.bat:
	  - Don't forget to create kline.conf

2005-09-10 13:44  michael

	* src/s_bsd_win32.c:
	  - Fixed uname() bug with windows 2003

2005-09-10 10:02  knight

	* contrib/m_services.c:
	  - acptr -> target_p for consistency

2005-09-10 09:51  michael

	* src/modules.c:
	  - Small improvement to load_all_modules()

2005-09-10 08:05  michael

	* src/dynlink.c:
	  - Replaced %lx conversion specifier with %p

2005-09-10 05:48  michael

	* include/defaults.h, include/modules.h, src/ircd.c, src/modules.c:
	  - Got rid of that stupid set_basename function

2005-09-10 03:46  michael

	* contrib/help/Makefile.in:
	  - Fixed broken 'make install' in contrib.  Reported by Stacy & pi

2005-09-09 17:19  knight

	* doc/challenge.txt:
	  - Another doc update. The scripting section should only refer about
	    the challange.irc script and tell users where it is. The code should
	    note be posted in the doc as that can cause minor confusion imo.

2005-09-09 16:06  adx

	* contrib/: README, win32build.bat:
	  - slight corrections

2005-09-09 14:00  knight

	* contrib/: README, confgen.pgsql, confgen.pl, m_services.c:
	  - More clean ups of SVSNICK; needs more testing obviously
	  - Removed confgen perl script and sql dump as it is useless
	    in 7.2 since it was designed for 7.0.x

2005-09-09 13:55  adx

	* include/modules.h:
	  - finish previous commit

2005-09-09 13:48  adx

	* src/modules.c: Fixes for STATIC_MODULES:
	  - moved help+uhelp from contrib to autoload
	  - do not install test_msgtab, silly

2005-09-09 13:43  adx

	* contrib/win32build.bat:
	  - remove objects in case of failed compile too

2005-09-09 13:38  adx

	* contrib/win32build.bat:
	  - don't compile example_module.c

2005-09-09 13:37  adx

	* contrib/example_module.c, contrib/m_change.c, contrib/m_ltrace.c,
	  contrib/setup-win32.h, contrib/spy_admin_notice.c,
	  contrib/spy_info_notice.c, contrib/spy_links_notice.c,
	  contrib/spy_motd_notice.c, contrib/spy_stats_notice.c,
	  contrib/spy_stats_p_notice.c, contrib/spy_trace_notice.c,
	  contrib/spy_whois_notice.c, contrib/win32build.bat,
	  src/modules.c:
	  - fixed contrib build with STATIC_MODULES
	  - allow win32 lusers to compile contrib

2005-09-09 13:10  adx

	* contrib/ip_cloaking.c, src/modules.c:
	  - fixed compile error in contrib/ip_cloaking.c when IPv6 is not
	  available
	  - fixed compile with STATIC_MODULES && BUILD_CONTRIB

2005-09-09 00:40  adx

	* src/hash.c:
	  - random() generator is never initialized, use rand()

2005-09-09 00:10  adx

	* src/ircd.c:
	  - minor simplification

2005-09-08 22:40  adx

	* contrib/win32build.bat:
	  - do not copy files like .cvsignore, Makefile.in

2005-09-08 22:34  adx

	* contrib/win32build.bat:
	  - fixed a stupid

2005-09-08 21:12  knight

	* src/csvlib.c:
	  - Removed the last HAVE_REGEX_H from the code.

2005-09-08 20:50  knight

	* include/modules.h, src/modules.c:
	  - Added missing msgtabs for rkline, sid_msgtab and uid_msgtab
	  - Removed #ifdef for REGEX_H
	  - Please review these changes...

2005-09-08 20:07  adx

	* modules/core/m_message.c:
	  - fixed core on every /msg or /notice when compiled with static
	  modules.

2005-09-08 19:56  adx

	* modules/core/m_sjoin.c:
	  - fixed 99% cpu problem that was general to hybrid but showed up on
	    win32 because of another platform-specific bug

2005-09-08 15:35  knight

	* include/send.h:
	  - #ifdef 0 -> #if 0

2005-09-08 13:50  adx

	* contrib/win32build.bat:
	  - create c:\ircd on install (md seems to do it automatically on
	  winnt)

2005-09-08 13:47  lusky

	* RELNOTES: another test to force a snapshot

2005-09-08 13:41  lusky

	* RELNOTES: test commit to force a snapshot

2005-09-08 13:37  lusky

	* RELNOTES: stub out beta2 in relnotes

2005-09-08 11:44  michael

	* include/send.h:
	  - Undef AFP for releases

2005-09-08 11:02  adx

	* contrib/win32build.bat:
	  - improved it a bit

2005-09-08 00:50  adx

	* modules/m_info.c:
	  - its now runtime information

2005-09-08 00:47  adx

	* contrib/win32build.bat:
	  - the same about help/ and etc/

2005-09-08 00:43  adx

	* src/s_bsd_win32.c:
	  - fixed a stupid causing a core under w32

2005-09-08 00:36  adx

	* contrib/win32build.bat:
	  - always copy the fresh binary in place

2005-09-08 00:29  adx

	* contrib/win32build.bat:
	  - removed useless border at the very end

2005-09-08 00:14  adx

	* modules/m_info.c:
	  - fixed info

2005-09-08 00:02  adx

	* modules/m_info.c:
	  - fixed core at oper /info

2005-09-07 23:52  metalrock

	* contrib/m_services.c:
	   - Simplify the help message.

2005-09-07 23:45  lusky

	* contrib/win32build.bat:
	  - fix setup.h creation
	  - fix build error handling

2005-09-07 23:10  metalrock

	* src/s_log.c:
	   - Fix compile warning.

2005-09-07 23:02  metalrock

	* include/s_conf.h, src/ircd.c:
	   - Fix missing declarations.

2005-09-07 22:54  adx

	* contrib/win32build.bat:
	  - minor change

2005-09-07 22:46  adx

	* lib/: .cvsignore, pcre/.cvsignore:
	  - added cvsignore entries for pcre Makefile

2005-09-07 22:43  adx

	* contrib/ip_cloaking.c, src/channel.c, src/csvlib.c, src/fdlist.c,
	  src/s_log.c:
	  - fixed compiler warnings
	  - fixed core in csvlib
	  - fixed a core on unloading ip_cloaking

2005-09-07 22:32  adx

	* README.PLATFORMS:
	  - sorted README.PLATFORMS
	  - removed some obsolete entry

2005-09-07 22:30  knight

	* README.PLATFORMS:
	  - Changed SPARC Linux maintainer to myself.

2005-09-07 22:27  adx

	* configure, configure.ac:
	  - default to -O2 in CFLAGS

2005-09-07 21:34  adx

	* Hybrid-team, src/version.c:
	  - moved kire down to the contributors list, as I see only two his
	    commits concerning one thing in the ChangeLog.

2005-09-07 21:07  adx

	* contrib/win32build.bat:
	  - miscellaneous corrections to the build script
	  - after downloading the binaries and installing the compiler, they
	    now have to do 2 things:
	    1) make sure the compiler BIN directory is in PATH
	    2) in case of Borland C++ Compiler 5.5, they need to prepare
	       the BCC32.CFG file, if not already created

2005-09-07 20:59  adx

	* contrib/: setup-win32.h, win32build.bat:
	  - rewritten win32 build script to be more clicker friendly
	  - also rearranged setup-win32.h a bit as it is going to be human
	  edited

2005-09-07 18:51  adx

	* contrib/win32build.bat:
	  - fix it more

2005-09-07 18:45  adx

	* contrib/win32build.bat:
	  - build pcre too

2005-09-07 16:44  knight

	* INSTALL:
	  - Add 'touch' instructions for the extra logging that Diane
	    implemented earlier this week.
	  - Minor cosmetics to fit in a 80 char terminal.

2005-09-07 16:39  knight

	* INSTALL:
	  - Reversion Merge...

2005-09-07 16:28  knight

	* INSTALL:
	  - Update Copyright Header
	  - Added missing ./configure knobs to the file
	  - Fix URL to ircd-hybrid forums.
	  - Update installation instructions
	    (log files do not require to be touch'd anymore)

2005-09-07 14:04  adx

	* src/s_bsd.c:
	  - this should fix the core on squitting a /jupe'd server

2005-09-07 12:59  db

	* include/s_conf.h, src/ircd_parser.y, src/lex.yy.c, src/y.tab.c,
	  src/y.tab.h:
	  - first part of adding CIDR_BITLEN and NUMBER_PER_CIDR

2005-09-07 12:40  adx

	* contrib/Makefile.in, include/s_conf.h, src/ircd_lexer.l,
	  src/lex.yy.c:
	  - make it compile again after Diane and Michael broke it ;P

2005-09-07 12:16  knight

	* doc/: operguide.txt, opermyth.txt:
	  - Removed opermyth.txt and operguide.txt. These are EFNet specific
	    docs that really do not belong in the ircd-hybrid documentation. I
	    already checked and they are on EFNet's website. IRC network
	    specific documentation really does not belong in the documentation
	    distributed with ircd-hybrid in my personal opinion and if I get
	  yelled at for that, so be it.

2005-09-07 11:08  knight

	* contrib/README:
	  - Removed reference to Unreal IRCd to please Michael =P

2005-09-07 11:03  knight

	* contrib/README:
	  - Fixed screwed up text caused by VIM's filters *kicks vim*. Also
	    removed /MAP from the README at the request of adx.

2005-09-07 10:57  knight

	* contrib/README:
	  - Conform to 80 character requirement

2005-09-07 10:51  knight

	* contrib/README.cloaking:
	  - Updated cloaking NOTICE example to reflect current IP cloaking
	  masking.

2005-09-07 10:49  knight

	* contrib/README.cloaking:
	  - Spelling and grammar fixes. Adjusted document to conform to 80
	    character requirement stated in guidelines.txt

2005-09-07 10:20  knight

	* modules/m_stats.c:
	  - Minor cosmetic change to my code additions.

2005-09-07 09:45  michael

	* include/s_conf.h, modules/m_info.c:
	  - Fixed a bug where we wouldn't show stats_i_oper_only and
	    stats_k_oper_only in /INFO
	  - Fixed the rest of the m_info.c compile errors

2005-09-07 09:08  michael

	* include/: msg.h, s_conf.h:
	  - Unbroke m_info.c
	  - Removed useless definition in msg.h

2005-09-07 09:05  knight

	* modules/m_info.c:
	  - OUTPUT_BOOLEAN -> OUTPUT_BOOLEAN_YN for opers_bypass_callerid.

2005-09-07 08:58  knight

	* contrib/m_services.c:
	  - Changed the behaviour of SVSNICK to more simulate the working
	    version I have on ChatJunkies. However the function still needs a
	    code audit by another pair of eyes.

2005-09-07 08:48  knight

	* modules/m_stats.c:
	  - More changes to STATS g. Originally I had STATS g just disabled
	    all together if G-Ling voting was not enabled. However it occured to
	    me this would cause confusion so I changed the behaviour of STATS g
	    to where if an operator or administrator issues STATS g to see
	    pending G-Lines but G-Line voting is disabled it will post a NOTICE
	    saying "This server does not support G-Line voting" and then the
	    usual end of stats report. This is more organised than disabling
	  STATS g all together.

2005-09-06 22:21  adx

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  include/s_conf.h, src/ircd_lexer.l, src/ircd_parser.y,
	  src/lex.yy.c, src/s_conf.c, src/s_user.c, src/y.tab.c,
	  src/y.tab.h:
	  - added invisible_on_connect = yes/no to general{}
	  - changed boolean int's to char:1
	  - removed useless if ypass == 2 checks in ircd_parser.y

2005-09-06 20:50  knight

	* modules/m_stats.c:
	  - Forgot to encompass the prototype and function for
	    stats_pending_glines in the #define for GLINE_VOTING knob :x

2005-09-06 13:35  adx

	* src/s_bsd_win32.c:
	  - ifdef'd PROCESSOR_ARCHITECTURE_AMD64, it is not defined on
	    older compilers

2005-09-06 11:51  adx

	* contrib/setup-win32.h, contrib/win32build.bat, modules/m_stats.c,
	  src/client.c, src/s_log.c, src/s_stats.c:
	  - fixed win32 build

2005-09-06 11:30  adx

	* src/s_bsd_win32.c:
	  - shut down the daemon gracefully on win32

2005-09-06 10:39  db

	* src/lex.yy.c:
	  - update lex.yy.c

2005-09-06 10:36  db

	* src/ircd_lexer.l:
	  - I reversed the test

2005-09-06 09:08  michael

	* src/: dynlink.c, modules.c:
	  - Go rid of num_mods by simply using dlink_list_length

2005-09-06 07:54  db

	* src/s_log.c:
	  - Don't try to do any logging if fb is NULL i.e. not readable.

2005-09-06 07:35  michael

	* modules/m_gline.c:
	  - That one should be an #ifdef. Spotted by lee

2005-09-05 22:25  db

	* src/: s_bsd.c, s_log.c:
	  - report to io_errlog
	    notice that log_oper_action() is now a misnomer in this case
	  - Don't try to fill in the non existent nick!user@host in this case

2005-09-05 19:45  adx

	* configure, configure.ac:
	  - fixed gline-voting knob

2005-09-05 19:38  knight

	* configure, configure.ac, include/setup.h.in, modules/m_gline.c,
	  modules/m_stats.c:
	  - Added configure option --enable-gline-voting to toggle G-Line
	    voting.  it configures and compiles but needs testing.

2005-09-05 15:39  knight

	* modules/m_info.c:
	  - Added opers_bypass_callerid to the table.

2005-09-05 14:49  db

	* include/s_log.h, src/s_log.c:
	  - turn struct Client * into const struct Client 8 in
	  log_oper_action()

2005-09-05 13:38  db

	* src/: ircd_parser.y, lex.yy.c, s_serv.c, y.tab.c, y.tab.h:
	  - adds back the vhost per connect block that we somehow lost going
	    from hybrid-6 to hybrid-7

2005-09-05 11:37  db

	* include/s_conf.h:
	  - removed two variables that were moved into ServerInfo months ago

2005-09-05 10:53  db

	* include/s_conf.h, include/s_log.h, src/ircd_lexer.l,
	  src/ircd_parser.y, src/lex.yy.c, src/s_conf.c, src/y.tab.c,
	  src/y.tab.h:
	  - make sure operspylog and ioerrlog directives work, though
	    they are dummied out for now.

2005-09-05 10:16  db

	* modules/m_challenge.c, modules/m_oper.c, src/s_log.c:
	  - missed the terminating \n for log_oper_action in m_oper.c and
	  m_challenge.c
	  - forgot a () around the +1 , this could have made it overflow

2005-09-05 08:08  db

	* src/s_log.c:
	  - minor comment tweak, correct input comments to log_oper_action()

2005-09-05 08:03  db

	* etc/example.conf, include/s_conf.h, include/s_log.h,
	  modules/m_challenge.c, modules/m_gline.c, modules/m_kline.c,
	  modules/m_oper.c, modules/core/m_kill.c, src/csvlib.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/lex.yy.c, src/s_conf.c,
	  src/s_log.c, src/y.tab.c, src/y.tab.h:
	  - Pretty much revamped the entire logging subsystem for now.
	    added independent file logging for kline, gline, kill
	    added fkilllog, fname_killlog, fklinelog, fname_klinelog,
	    fglinelog, fname_glinelog to the logging block logging{}
	    made log a synonym for logging i.e. log {} is now synonymous
	    with logging {}. Made synonyms for fuserlog == fname_userlog
	    foperlog == fname_operlog. Generalised logging function
	    reworked log_oper and log_failed_oper to use log_oper_action
	    all additional logging uses log_oper_action

	    Now, I must have more sleep.

2005-09-05 07:19  db

	* lib/pcre/Makefile.in:
	  - add dummy install: to make make install not complain for now

2005-09-05 05:45  db

	* contrib/m_services.c:
	  - *FINALLY* have proper credits direct from 'bane' himself

2005-09-04 15:13  db

	* contrib/m_services.c:
	  - Considering kre didn't write GetString in the first place, no
	    sense insulting him.
	  - Apparently, sidewndr (the original coder of hybserv) wrote
	  GetString
	  - The total file came via bane not kre, or something. The hybserv
	    guys ripped banes nick/name out of the code for some reason.

	    I hope I got the story right this time.

2005-09-04 10:48  adx

	* modules/core/m_sjoin.c:
	  - fixed possible core / protocol corruption on ts5 links

	  Spotted by: anfl

2005-09-04 08:08  michael

	* include/s_conf.h, modules/m_stats.c, src/s_conf.c:
	  - Fixed incorrect STATS k|K output with temporary rklines

2005-09-04 07:49  michael

	* contrib/setup-win32.h:
	  - Update setup-win32.h

2005-09-04 05:17  michael

	* src/balloc.c:
	  - Fixed an invalid assert in BlockHeapFree() which would -always- be
	    TRUE Only data pointers to our working adress space are linked into
	    the used_list, not a data pointer to a MemBlock itself.

	    BTW: the used_list can be removed in the future. We don't really
	         need it.  I leave it for now for debugging purpose

2005-09-04 04:41  michael

	* include/control.h, include/io.h, include/servlink.h,
	  servlink/Makefile.in, servlink/control.h, servlink/io.h,
	  servlink/servlink.h:
	  - Moved servlink headerfiles back into their servlink folder where
	    they actually belong to.  servlink is a standalone program and the
	    headers have nothing todo in include/

2005-09-03 16:14  michael

	* contrib/win32build.bat:
	  - Updated win32build.bat

2005-09-03 15:57  michael

	* modules/m_stats.c, src/hostmask.c, src/messages.tab,
	  src/s_conf.c:
	  - Updated RPL_STATSKLINE and RPL_STATSXLINE as discussed on irc
	  - Style corrections

2005-09-03 11:23  michael

	* help/opers/rxline:
	  - Fixed typo

2005-09-03 11:21  michael

	* help/opers/: rkline, rxline:
	  - Updated rxline and rkline help files

2005-09-03 08:30  michael

	* configure, configure.ac, include/setup.h.in, src/s_conf.c,
	  src/s_user.c:
	  - Fixed an older bug where we wouldn't test new rxlines against
	  active connections
	  - Removed regex.h configure check

2005-09-03 07:39  michael

	* lib/pcre/Makefile.in, lib/pcre/pcre_internal.h,
	  lib/pcre/pcre_xclass.c, src/irc_string.c:
	  - We now don't longer enforce caSelEsS matching.  People can now
	    specify the ?i option within the mask if they whish to have a
	    caseless match.  Just to give them more freedom ..

2005-09-03 06:04  michael

	* lib/pcre/: Makefile.in, config.h, pcre.h, pcre_compile.c,
	  pcre_globals.c, pcre_internal.h:
	  - Another round of pcre updates

2005-09-03 04:57  michael

	* lib/pcre/Makefile.in, lib/pcre/pcre.h, lib/pcre/pcre_compile.c,
	  lib/pcre/pcre_config.c, lib/pcre/pcre_exec.c,
	  lib/pcre/pcre_internal.h, lib/pcre/pcre_ord2utf8.c,
	  lib/pcre/pcre_tables.c, lib/pcre/pcre_ucp_findchar.c,
	  lib/pcre/pcre_valid_utf8.c, lib/pcre/pcre_xclass.c,
	  lib/pcre/ucp.h, lib/pcre/ucp_findchar.c, lib/pcre/ucpinternal.h,
	  lib/pcre/ucptable.c, modules/m_rkline.c, modules/m_rxline.c,
	  src/csvlib.c:
	  - Must use strcmp() when looking up RKLINES or RXLINES for
	    addition/deletion in order to play nice with metacharacters.
	  - Slimmed down pcrelib some more

2005-09-03 02:34  michael

	* lib/pcre/: Makefile.in, pcre.h, pcre_compile.c, pcre_dfa_exec.c,
	  pcre_get.c, pcre_internal.h, pcre_printint.c, pcre_refcount.c,
	  pcre_version.c:
	  - Removed files not required for ircd

2005-09-03 02:05  michael

	* Makefile.in, configure, configure.ac, help/opers/rxline,
	  include/irc_string.h, include/s_conf.h, include/stdinc.h,
	  lib/Makefile.in, lib/pcre/AUTHORS, lib/pcre/LICENCE,
	  lib/pcre/Makefile.in, lib/pcre/README, lib/pcre/config.h,
	  lib/pcre/pcre.h, lib/pcre/pcre_chartables.c,
	  lib/pcre/pcre_compile.c, lib/pcre/pcre_config.c,
	  lib/pcre/pcre_dfa_exec.c, lib/pcre/pcre_exec.c,
	  lib/pcre/pcre_fullinfo.c, lib/pcre/pcre_get.c,
	  lib/pcre/pcre_globals.c, lib/pcre/pcre_internal.h,
	  lib/pcre/pcre_ord2utf8.c, lib/pcre/pcre_printint.c,
	  lib/pcre/pcre_refcount.c, lib/pcre/pcre_study.c,
	  lib/pcre/pcre_tables.c, lib/pcre/pcre_try_flipped.c,
	  lib/pcre/pcre_ucp_findchar.c, lib/pcre/pcre_valid_utf8.c,
	  lib/pcre/pcre_version.c, lib/pcre/pcre_xclass.c, lib/pcre/ucp.h,
	  lib/pcre/ucp_findchar.c, lib/pcre/ucpinternal.h,
	  lib/pcre/ucptable.c, modules/Makefile.in, modules/m_rkline.c,
	  modules/m_rxline.c, modules/m_xline.c, src/Makefile.in,
	  src/csvlib.c, src/irc_string.c, src/ircd_parser.y, src/s_conf.c,
	  src/s_user.c, src/y.tab.c, src/y.tab.h:
	  - Added PCRE lib 6.3 hacked up for use in ircd-hybrid

2005-09-01 22:54  db

	* src/s_user.c:
	  - Really William (nenolod), this is really nitpicky. I have known
	    about this "bug" since I wrote it, the original "AAAAAA" just looked
	  *PRETTIER*

2005-09-01 21:37  db

	* src/channel.c:
	  - moved update of last join time into the if(), Piotr and I are
	    really not sure if it really matters. ;-)

2005-09-01 19:18  db

	* src/: channel.c, ircd.c:
	  - don't let it core if joinfloodcount is set to 0!

2005-09-01 18:58  db

	* src/: client.c, ircd.c, ircd_lexer.l, ircd_parser.y, lex.yy.c,
	  y.tab.c, y.tab.h:
	  - add /quote set options for JFLOODTIME, JFLOODCOUNT and REJECTTIME
	    (REJECT_HOLD)
	  - check REJECT_HOLD in unknowns check

2005-08-31 07:47  db

	* include/client.h, modules/m_set.c, src/client.c, src/s_conf.c,
	  src/s_user.c:
	  - move reject_delay to localClient
	  - change /set REJECTTIME to be in seconds rather than minutes

2005-08-31 07:05  adx

	* RELNOTES, TODO:
	  - updated RELNOTES and TODO

2005-08-30 22:13  db

	* include/client.h, include/ircd.h, include/ircd_defs.h,
	  modules/m_set.c, src/client.c, src/s_conf.c, src/s_user.c:
	  - re-added REJECT_HOLD but using capture

2005-08-30 21:11  db

	* include/channel.h, modules/core/m_message.c, src/channel.c:
	  - replace two ints in a struct Channel with one flag

2005-08-30 17:57  db

	* src/s_conf.c:
	  - find_user_host was missing a return 1, which meant, no one
	    could kline by nick.

2005-08-30 14:28  adx

	* contrib/m_clearchan.c, contrib/m_force.c, contrib/m_ojoin.c,
	  contrib/m_operspy.c, include/channel.h, include/ircd.h,
	  modules/m_lljoin.c, modules/m_set.c, modules/core/m_join.c,
	  modules/core/m_sjoin.c, src/channel.c, src/ircd.c:
	  - added join flood notification to opers
	  - code by Dianora and me
	  - needs a bit of testing

2005-08-30 12:20  knight

	* src/version.c:
	  - Added nenolod to contributors.

2005-08-30 07:42  michael

	* include/restart.h, modules/core/m_die.c, src/ircd_signal.c,
	  src/restart.c:
	  - Flush and close all connections on signal SIGTERM.
	    Added new function server_die() for this

2005-08-29 23:54  db

	* modules/core/m_kill.c:
	  - remove a core that happened
	    It is *possible* for an uid *not* to be found in the hash
	    If it is not in the hash table, it should be silently ignored and
	    no history tried on it.

2005-08-29 22:31  metalrock

	* contrib/Makefile.in:
	   - make depend before make

2005-08-29 17:02  db

	* Hybrid-team, include/numeric.h, modules/m_whois.c,
	  modules/core/m_kill.c, modules/core/m_message.c, src/client.c,
	  src/messages.tab, src/parse.c:
	  - applied nenolod's notarget patch to remove the NOTARGET numeric
	    the NOTARGET numeric could leak uids and is non TS6 standard
	  - added nenolod to contributors

2005-08-29 14:01  db

	* src/m_error.c:
	  - back out if (MyConnect()) for now. After discussion with Piotr,
	    servers may wish to give more than one error.

2005-08-29 07:22  adx

	* include/client.h, src/client.c:
	  - fixed ping_warning

2005-08-29 05:31  adx

	* RELNOTES, src/messages.tab:
	  - updated RELNOTES
	  - updated 004 to contain +D

2005-08-29 05:14  adx

	* src/client.c:
	  - expecting a PONG from a pending comm_connect_tcp (IsConnecting)
	    looks silly to me.

2005-08-29 05:10  adx

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  include/s_conf.h, src/client.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/lex.yy.c, src/s_conf.c, src/y.tab.c,
	  src/y.tab.h:
	  - added class{} option, ping_warning. If a server doesn't respond to
	    PING in this amount of time, opers are notified of the lag / 99% CPU
	  etc.
	  - totally untested, as usual. :)

2005-08-27 23:51  db

	* src/m_error.c:
	  - This is a *very* old bug.
	    If a *server* gives an error, then it has to be exited!
	    A "MyClient()" won't exit a server. This bug is in 7.1.x tree as
	    well.

2005-08-27 21:49  db

	* modules/core/m_message.c:
	  - added message hooks, useful for adding colour filtering, anti
	    spambot filtering etc. Also could be used for nefarious purposes. oh
	  well.

	    Written by nenolod, William Pitcock
	    Reviewed by Alan and Diane

2005-08-27 10:18  knight

	* contrib/: m_change.c, m_services.c:
	  - Last minute fixes, CHGHOST, CHGIDENT, CHGNAME and SVSNICK should
	  encap..

2005-08-26 21:47  knight

	* contrib/m_change.c:
	  - Moved the CHG* commands from the encapsulation tab to the server
	    tab which caused services not to work with CHGHOST *slaps adx*

2005-08-26 17:23  knight

	* etc/example.efnet.conf:
	  - Same stale option that existed in example.conf existed here as
	  well. Fixed.

2005-08-26 17:17  knight

	* etc/example.conf:
	  - Removed hidden_oper = yes; as it caused a parse issue. It's
	    actually an option for flags, not it's own individual option.

2005-08-26 11:03  knight

	* contrib/m_services.c:
	  - Cosmetic code clean ups. Someone however should talk to kreator,
	    his use of SVSNICK in NickServ still does not work with this module
	    however the OperServ on Anope works with it just fine so I cannot
	  figure it out.

2005-08-26 09:42  db

	* include/channel_mode.h, src/channel.c, src/channel_mode.c:
	  - cache ban code for quiet on ban
	    cache the result of is_banned() when quiet on ban is set.

2005-08-25 13:39  adx

	* contrib/ip_cloaking.c:
	  - fixed a nasty logic bug in ip_cloaking module which caused us to
	    reuse a umode flag instead of finding an unused one.

2005-08-25 13:14  db

	* src/channel.c:
	  - added a missing comment block, may as well use doxify style.

2005-08-25 11:13  adx

	* src/s_bsd.c:
	  - set ip type of service to 'Minimize Delay' on all ircd sockets

2005-08-25 06:16  michael

	* Hybrid-team, src/version.c:
	  - Removed extra comma on bane's name
	  - Updated version.c

2005-08-25 05:45  db

	* Hybrid-team:
	  - updated bane's entry

2005-08-23 14:00  db

	* include/s_auth.h, src/s_auth.c:
	  - make release_auth_client() public so an auth callback can use it

2005-08-23 10:06  db

	* src/client.c:
	  - back out my accidental commit adding if ... source_p != &me  test
	    it is not needed.

2005-08-22 16:55  db

	* src/s_conf.c:
	  - removed more duplicate code

2005-08-22 09:56  michael

	* modules/m_resv.c:
	  - Cosmetic fix to parse_resv(). s/xline/resv/

2005-08-22 06:48  michael

	* include/s_gline.h, src/s_misc.c:
	  - Removed unused prototypes in s_gline.h
	  - Fixed compiletime warnings in ssl_get_cipher()

2005-08-21 13:22  knight

	* etc/example.conf:
	  - Minor format issue :x

2005-08-21 13:19  knight

	* etc/example.conf, include/s_conf.h, modules/core/m_message.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/lex.yy.c, src/s_conf.c,
	  src/y.tab.c, src/y.tab.h:
	  - Added configuration option "opers_bypass_callerid" to general {}
	    to allow operators to message anyone even if they are +g. Disabled
	  by default.

2005-08-21 05:33  adx

	* contrib/: m_change.c, m_services.c, m_spoof.c:
	  - "You have no admin flag" => ERR_NOPRIVS

2005-08-21 03:33  michael

	* src/: version.c, version.c.SH:
	  - Killed version.c.SH and updated copyright header in version.c

2005-08-20 19:48  adx

	* include/packet.h, include/send.h, src/ircd.c, src/packet.c,
	  src/send.c:
	  - redid hooking method for io_debug.c - ircd is currently creating
	    the callback and io_debug should attach to it

	  - added init_callbacks() to ircd.c - should probably move more of
	    them there, since they are currently sitting in rather inappropriate
	    places, like init_uid (set_user_mode) etc

	  - Diane, please update io_debug.c to match these changes

2005-08-20 19:05  knight

	* src/version.c:
	  - Minor update; version.c didn't fully reflect the Hybrid-Team list.

2005-08-20 18:59  knight

	* Hybrid-team:
	  - Moved myself from contrib to core

2005-08-20 14:12  knight

	* help/opers/rkline:
	  - Stale text from rxline

2005-08-20 13:52  michael

	* Makefile.in, configure, configure.ac, include/Makefile.in:
	  - Removed include/Makefile.in

2005-08-20 13:35  michael

	* contrib/: Makefile.in, m_classlist.c:
	  - Fixed compile warning in m_classlist.c

2005-08-20 13:34  knight

	* etc/Makefile.in:
	  - Add in condition to touch rkline.conf.

2005-08-20 13:19  adx

	* contrib/ip_cloaking.c, contrib/spy_admin_notice.c,
	  contrib/spy_info_notice.c, contrib/spy_links_notice.c,
	  contrib/spy_motd_notice.c, contrib/spy_stats_notice.c,
	  contrib/spy_stats_p_notice.c, contrib/spy_trace_notice.c,
	  contrib/spy_whois_notice.c, include/hook.h, src/hook.c:
	  - redefined pass_callback as a vararg routine
	  - therefore fixed the bug where we used a stale va_list pointer
	    with pass_callback()

2005-08-20 12:49  michael

	* modules/m_rkline.c, src/client.c, src/s_conf.c:
	  - Fixed rklines and some older rxline bugs

2005-08-20 12:17  knight

	* help/opers/rkline:
	  - Another trivial update because Michael told me something as I did
	    the commit *argh* lol

2005-08-20 12:17  knight

	* help/opers/rkline:
	  - Trivial Update...

2005-08-20 12:08  knight

	* help/opers/rkline:
	  - Add missing help page for RKLINE

2005-08-20 12:08  knight

	* contrib/help/: Makefile.in, users/flags:
	  - Removed user help page for flags and have it symlink from opers

2005-08-20 11:03  michael

	* modules/m_kline.c, modules/m_rkline.c, modules/m_rxline.c,
	  modules/m_xline.c, src/s_conf.c:
	  - Fixed UNRKLINE not working for admins
	  - Removed redundant remoteban privileges check in m_unkline and
	    m_unxline.  parse_aline() already does that job for us.
	  - Fixed bug where we wouldn't remove local x-lines if "UNXLINE ON
	    *mask*" matches our server

2005-08-20 11:00  knight

	* doc/: Tao-of-IRC.940110, index.txt, kline.txt, messages.txt,
	  server-version-info, whats-new.txt, technical/README.TSora,
	  technical/hostmask.txt, technical/index.txt,
	  technical/rfc1459.txt, technical/rfc2812.txt,
	  technical/rfc2813.txt, technical/ts3.txt:
	  - Severe documentation spring cleaning

2005-08-20 10:00  michael

	* src/s_conf.c:
	  - parse_aline(): increase user and host buffer sizes to play nice
	    with regexp klines and to allow standard klines like
	  *u*s*e*r*n*a*m*e*@someho.st

2005-08-20 08:02  michael

	* src/: ircd_parser.y, s_conf.c, y.tab.c, y.tab.h:
	  - Fixed RKLINEs

2005-08-20 01:16  michael

	* contrib/: m_change.c, m_spoof.c:
	  - Added $Revision CVS kw to m_spoof.c and m_change.c

2005-08-20 01:04  michael

	* contrib/m_classlist.c:
	  - m_classlist.c: there may be more than one class matching the given
	    pattern so don't return after the first reported class.

2005-08-20 00:43  michael

	* contrib/m_capture.c:
	  - Misc. CAPTURE fixes

2005-08-19 22:52  knight

	* contrib/README:
	  - Severe spring cleaning of contrib README. Needed to be updated as
	    it had old or vague information. Probably needs to be proof read
	    before 7.2 release though.

2005-08-19 14:24  knight

	* contrib/: README, confgen.pgsql, confgen.pl:
	  - Added new version of confgen.pl
	  - Added PgSQL table dump for use with confgen.pl (TODO: Add MySQL
	  dump)
	  - Added confgen.pgsql to README

2005-08-19 14:07  db

	* src/s_user.c:
	  - trivial addition of "at" in between date and time of RPL_CREATED

2005-08-19 13:24  db

	* modules/m_gline.c:
	  - simplify mo_gline() I couldn't resist

2005-08-19 13:19  db

	* src/s_user.c:
	  - restore 003 numeric using built in __DATE__ __TIME__ which appears
	    to be a 'c' standard.

2005-08-19 13:06  michael

	* etc/example.conf, etc/example.efnet.conf, src/ircd_parser.y,
	  src/s_conf.c, src/y.tab.c, src/y.tab.h:
	  - Added regex support for kill{} blocks
	  - Fixed bug where we would leave an invalid auth{} item on the
	    auth_item list when there is no user= specified in auth{}

2005-08-19 11:29  db

	* src/: fdlist.c, s_bsd.c:
	  - fixed two off by one errors, which could cause a core or at least
	    cause an assert() to fail.
	  - Spotted by Piotr

2005-08-19 10:56  michael

	* include/defaults.h, include/s_conf.h, modules/Makefile.in,
	  modules/m_rkline.c, modules/m_stats.c, src/csvlib.c, src/ircd.c,
	  src/s_conf.c:
	  - Added support for regular expression based klines. Nothing tested
	    at all, but it compiles for now.

	    NOTE: It's an admin-only command since there is no sane way to check
	    for u@h masks being too broad.

2005-08-19 06:54  adx

	* include/fdlist.h, src/s_bsd.c:
	  - fixed possible core

2005-08-19 00:36  lusky

	* configure, configure.ac:
	  - flip order of SSL_LIBS to make solaris happy
	  - change tail back to the deprecated form that still works on
	  everything

2005-08-19 00:29  lusky

	* include/ircd.h, src/hash.c:
	  - fix missing prototype for get_ircd_platform()
	  - fix collision for random_key with older openssl

2005-08-19 00:10  lusky

	* src/version.c: fix missing include

2005-08-19 00:07  lusky

	* contrib/Makefile.in: clean & distclean for contrib/help

2005-08-19 00:00  lusky

	* contrib/setup-win32.h, contrib/win32build.bat, include/ircd.h,
	  include/ircd_defs.h, include/s_bsd.h, modules/m_info.c,
	  src/.cvsignore, src/Makefile.in, src/ircd.c, src/lex.yy.c,
	  src/s_bsd_win32.c, src/s_user.c, src/version.c:
	  - eradicate version.c.SH stuff, replace with uname() data
	  - wrap unistd.h include from lex.yy.c with autoconf ifdefs
	  - add stuff to build with VC7

2005-08-18 17:53  knight

	* contrib/ircd-hybrid.spec:
	  - ircd-hybrid should install in /usr/local/ircd not /usr/ircd to
	  satisfy LFHS

2005-08-18 17:38  knight

	* contrib/help/Makefile.in:
	  - Last minute fix, left out important echo statements by mistake :x

2005-08-18 17:31  knight

	* contrib/help/Makefile.in, help/Makefile.in:
	  - Updated contrib help pages Makefile, no longer clobbers core help
	  pages!
	  - Moved sort commands in both Makefiles to occur *after* the sed
	  stripping.
	  - Thoroughly tested, both work.

2005-08-18 16:53  knight

	* src/s_bsd.c:
	  - fde_t *fd_next_in_loop = NULL; was missing.

2005-08-18 15:48  adx

	* src/: fdlist.c, s_bsd.c:
	  - fixed core in comm_check_timeouts.
	    We were traversing the fd hash bucket by something like that:

	    for (hashv = 0; hashv < MAX_HASH; hashv++)
	      for (F = fd_hash[hashv]; F != NULL; F = F->hnext)

	    The problem is, F could get freed in the middle by timeout handlers.
	    This happened for example on ident timeout.

	  - There are probably similar bugs in s_bsd.c

2005-08-18 14:36  adx

	* src/listener.c:
	  - fixed compile error, spotted by knight-

2005-08-18 14:21  knight

	* contrib/help/Makefile.in, help/Makefile.in:
	  - Removed stale credits help page that no longer exists.
	  - TODO: For some reason the contrib help Makefile is screwing up.
	    The the index from the core help pages is being removed and
	    re-written and opers help pages are bleeding into the users index.
	    Needs fixing *ASAP*

2005-08-18 13:24  adx

	* src/s_auth.c:
	  - send REPORT_FAIL_ID if an ident server closes the connection

2005-08-18 13:21  adx

	* include/s_bsd.h, src/irc_getaddrinfo.c, src/listener.c,
	  src/packet.c, src/s_auth.c, src/s_bsd.c, src/send.c: win32 build
	  fixes:
	  - initialize errno properly when used
	  - s/close/closesocket/

	  other fixes:
	  - ircd was trying to parse an uninitialized buffer when a hard read
	    error occured in read_auth_reply

2005-08-18 13:03  db

	* src/s_auth.c:
	  - make this if match the one Piotr just committed. Same deal,
	    critical region but my initial code was for debugging purposes.

2005-08-18 12:26  adx

	* src/s_auth.c:
	  - fixed a relatively new (cvs only) race condition in auth code.
	    Basically comm_connect_tcp can call comm_connect_callback
	    *immediately*, if an instant connect() failure happens. Then,
	    auth_error would free the auth struct, before DNS reply was ever
	  received.

	  - this should prevent win32 build from crashing

2005-08-18 11:53  knight

	* contrib/help/: Makefile.in, opers/spoof, opers/uncapture:
	  - Added missing help page for UNCAPTURE.
	  - Revised SPOOF help page to include requirement of .include
	  "spoof.conf"

2005-08-18 11:47  knight

	* contrib/help/: Makefile.in, opers/flags, opers/svsnick,
	  users/flags:
	  - Added the last of the missing help pages for FLAGS and SVSNICK

2005-08-18 09:58  knight

	* configure:
	  - Rebuilt configure script for contrib help Makefile

2005-08-18 09:23  knight

	* contrib/help/: Makefile.in, opers/capture, opers/classlist,
	  opers/ctrace, opers/delspoof, opers/etrace, opers/ltrace,
	  opers/spoof:
	  - Added more missing contrib help pages. We still need one for
	    m_flags.so but I do not know enough about how it works to write one.

2005-08-18 08:56  knight

	* configure.ac:
	  - contrib help pages Makefile

2005-08-18 08:52  knight

	* configure, contrib/Makefile.in, contrib/help/Makefile.in:
	  - Added Makefile for contrib help pages. They will now instal when
	    'make install' is issued inside contrib/. We should probably add
	    the missing contrib help pages now.

2005-08-18 02:37  db

	* include/fdlist.h, include/fileio.h, include/hook.h, src/packet.c,
	  src/send.c:
	  - update io_debug hooks to use new hook format
	  - add HOOK_V2 and FILEIO_V2 #defines to hook.h and fileio.h
	    to allow io_debug.c to be backward and forward compatible for now.
	    There has to be a better solution than this...

2005-08-18 00:55  db

	* src/hook.c:
	  - add missing irc_string.h header

2005-08-18 00:45  db

	* modules/m_whois.c:
	  - rudimentary comment added for now

2005-08-18 00:32  lusky

	* src/s_bsd_win32.c: s/dlink_add/dlinkAdd

2005-08-18 00:31  lusky

	* src/hook.c: s/strcasecmp/irccmp to make win32 happy

2005-08-17 23:42  lusky

	* src/send.c: #ifdef out even more broken io_debug hook code for
	  now, restore later

2005-08-17 23:41  lusky

	* src/: packet.c, send.c: #ifdef out more broken io_debug hook code
	  for now, restore later

2005-08-17 23:36  lusky

	* modules/m_whois.c: Another missing va_list

2005-08-17 23:08  db

	* modules/m_whois.c:
	  - missing va_list args; for STATIC_MODULES

2005-08-17 22:40  db

	* include/modules.h, src/packet.c:
	  - #ifdef out broken io_debug hook code for now, restore later
	  - add missing prototype for tb_msgtab to modules.h

2005-08-17 21:36  knight

	* contrib/m_services.c:
	  - Fixed SVSNICK; Fudged up the message tab and put mo_svsnick in the
	    wrong place for servers :X. Tested with HybServ STABLE and CURRENT
	    and Anope STABLE and CURRENT.

2005-08-17 21:08  db

	* src/s_bsd.c:
	  - Yes, I forgot *this* time. I even compile tested, I even *noticed*
	    on another compile run when I was debugging the exit_client and
	    removed it then. ok ok IT'S DEAD IT'S GONE IT'S GONE TO VARIABLE
	    HEAVEN IT'S DECEASED

2005-08-17 20:52  db

	* include/client.h, include/ircd.h, modules/m_pass.c, src/ircd.c,
	  src/s_bsd.c, src/s_user.c:
	  - add a connect_id variable and set it in each client in
	    accept_connetion() this gives us an unique ID for every client that
	    connects. The unsigned int will eventually wrap but still unique
	    enough for us.  This id will be useful for such uses as iauthd.

2005-08-17 19:15  adx

	* src/client.c:
	  - fixed core in recurse_send_quits

2005-08-17 19:08  metalrock

	* contrib/m_services.c:
	   - Wrap long line

2005-08-17 18:36  metalrock

	* contrib/m_flags.c, contrib/m_services.c, contrib/m_spoof.c,
	  include/numeric.h, messages/ircd-standard.example.lang,
	  src/messages.tab, src/s_user.c:
	   - Numerified services down notice.
	   - parv[0] -> source_p->name
	   - Updated the need_id = yes to missing flag system.

2005-08-17 12:02  michael

	* contrib/m_flags.c, contrib/m_killhost.c, contrib/m_operspy.c,
	  contrib/m_services.c, include/common.h, include/ircd_defs.h,
	  modules/m_accept.c, modules/m_encap.c, modules/m_ison.c,
	  modules/m_map.c, modules/m_names.c, modules/m_restart.c,
	  modules/m_rxline.c, modules/m_userhost.c, modules/m_whois.c,
	  modules/core/m_kill.c, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/core/m_sjoin.c, src/channel.c,
	  src/channel_mode.c, src/csvlib.c, src/ircd_parser.y,
	  src/numeric.c, src/s_conf.c, src/s_log.c, src/s_serv.c,
	  src/s_user.c, src/send.c, src/y.tab.c:
	  - Removed BUFSIZE define.  Everything should be using IRCD_BUFSIZE
	  - Fixed memory leak in m_killhost()
	  - Style corrections here and there
	  - m_services.c: /me shoots knight

2005-08-17 11:27  knight

	* contrib/README:
	  - Removed stale m_tburst.c entry
	  - Added IP cloaking and Services modules entries with descriptions

2005-08-17 10:56  knight

	* contrib/m_services.c, include/modules.h, src/modules.c:
	  - Removed MAXLINE
	  - Added BotServ and HostServ Support for Anope Services

2005-08-17 10:38  knight

	* contrib/m_services.c, include/modules.h, src/modules.c:
	  - Removed SVSMODE, deemed useless.
	  - Added *secure* messaging (Thanks Michael)
	  - Source code clean up. Everything Works!

2005-08-17 09:45  michael

	* contrib/m_services.c:
	  - yet another deliver_services_msg() fix

2005-08-17 06:33  michael

	* contrib/m_services.c:
	  - Another fix to m_services.c

2005-08-17 06:22  michael

	* contrib/m_services.c:
	  - m_services.c was full of bugs and didn't even compile - Fixed.

2005-08-16 23:05  metalrock

	* contrib/m_services.c:
	   - Fixed a bunch of compilation errors.
	   - This still doesn't compile, please test compile before
	   committing!

2005-08-16 22:59  metalrock

	* contrib/ip_cloaking.c:
	   - Fix missing header.

2005-08-16 22:29  db

	* modules/core/m_server.c:
	  - sid was not being used in ms_sid() at all, so removed.
	  - name was being used in some cases, SID_NAME was being used in
	    others name was consistently replaced with SID_NAME in all cases.

2005-08-16 22:22  db

	* modules/m_pass.c:
	  - remove the id given to a connecting client, if it happens to be a
	    server with its own SID, then replace the id with the given SID

2005-08-16 21:25  db

	* include/s_auth.h, src/s_auth.c:
	  - Fixed a critical region bug
	    Basically, start_auth() is not guaranteed to be atomic.
	    This means that an auth response can occur before SetDNSPending
	    happens, thus incorrectly trying to free the auth twice.

2005-08-16 21:13  knight

	* contrib/m_services.c, include/modules.h, src/modules.c:
	  - Added SVSMODE support; Needs testing and possibly to support
	  channel modes.
	  - TODO: Will add SVSTOPIC support for setting topics through
	    SVSTOPIC with services that support the command.
	  - Moved macro generation again to a proper place, still needs
	  testing.

2005-08-16 20:47  knight

	* contrib/: ip_cloaking.c, m_services.c:
	  - Some CRC32 hash changes made to IP cloaking to avoid making the
	    hostnames to long.
	  - Moved the SERV_FUNC marcos to the end of the file to avoid 'funny'
	    generations.

2005-08-16 16:59  knight

	* contrib/m_services.c:
	  - Fixed minor typo; IsServ to IsServer

2005-08-16 16:42  knight

	* contrib/Makefile.in, contrib/m_services.c, include/modules.h,
	  src/modules.c:
	  - Initial Commit; Added services support for hybrid.
	  - Added SVSNICK and it's been tested and works
	  - Added services aliases using a port of hybserv's contrib module
	  - Everything needs testing and possible additions for other daemons!
	  - Added appropriate changes into modules.h and modules.c

2005-08-16 14:34  knight

	* modules/m_rehash.c:
	  - Minor #ifndef clean up, caused GCC 4 to have a severe coniption
	    fit by claiming there were orphaned brackets.

2005-08-16 11:14  knight

	* include/hook.h, src/hook.c:
	  - Fixed nasty segmental fault from MODRESTART caused by cb->name

2005-08-16 10:14  knight

	* contrib/README.cloaking:
	  - Another modules typo *sigh* *grrr*

2005-08-16 10:12  knight

	* contrib/README.cloaking:
	  - Minor syntax typo concerning modules {}.

2005-08-16 10:06  knight

	* contrib/README.cloaking:
	  - Revised README.cloaking to appropriately adjust for the fact IP
	    cloaking is now a module instead of a patch.

2005-08-16 06:11  adx

	* src/hook.c:
	  - updated copyright notice. spotted by Michael.

2005-08-16 06:03  adx

	* contrib/: 4000_ip-cloaking.patch, Makefile.in, README.cloaking,
	  ip_cloaking.c:
	  - modularised ip cloaking patch

2005-08-16 05:27  adx

	* contrib/: m_ctrace.c, m_etrace.c, m_ltrace.c, spy_admin_notice.c,
	  spy_info_notice.c, spy_links_notice.c, spy_motd_notice.c,
	  spy_stats_notice.c, spy_stats_p_notice.c, spy_trace_notice.c,
	  spy_whois_notice.c:
	  - fixed contrib to compile with the new hooking system

2005-08-16 04:01  adx

	* include/s_user.h, src/s_user.c:
	  - added hooks to allow special handling of certain usermodes

2005-08-16 03:33  adx

	* modules/m_topic.c:
	  - allow halfops change channel topic

2005-08-15 21:02  lusky

	* RELNOTES: test commit

2005-08-15 20:42  knight

	* Hybrid-team, include/modules.h, src/modules.c:
	  - Added missing contrib modules to modules.h and modules.c
	  - Removed m_tburst entry as that contrib module was moved into main
	    src as m_tb.c
	  - Moved my own entry in Hybrid-team to be in alphabetical order

2005-08-15 17:20  db

	* src/: client.c, s_serv.c:
	  - send_tb is not called from a hook at all anymore. fix comments,
	    remove now uneeded hook.h include.

2005-08-15 16:50  adx

	* include/hook.h, include/list.h, include/s_auth.h,
	  include/s_conf.h, modules/m_admin.c, modules/m_info.c,
	  modules/m_links.c, modules/m_motd.c, modules/m_stats.c,
	  modules/m_trace.c, modules/m_whois.c, src/hook.c, src/ircd.c,
	  src/s_auth.c, src/s_bsd.c, src/s_conf.c, src/s_user.c:
	  - imported callback/hook code from AISP in place of inefficient and
	    not very flexible earlier one

2005-08-15 15:41  knight

	* contrib/README.cloaking:
	  - Complete re-write of README.cloaking to be more specific and
	    detailed since IP cloaking is rarely used outside of UnrealIRCd and
	    ircu2. This should hopefully answer everyone's questions.

2005-08-15 14:08  adx

	* include/client.h, src/s_user.c:
	  - removed ALL_UMODES macro
	  - we are ready for umode modules.

2005-08-15 14:02  knight

	* contrib/README:
	  - Removed the entry for halfops.diff. This is a stale entry as we no
	    longer have a diff for that.

2005-08-15 13:54  adx

	* include/s_user.h, modules/core/m_nick.c, src/s_user.c:
	  - remove user_modes array
	  - rename user_modes_from_c_bitmask -> user_modes

	  (in preparation for modular usermodes)

2005-08-15 13:40  knight

	* contrib/README.cloaking:
	  - Added instructions and recommendations to alter the KEY entries
	    in cloak.c.

2005-08-15 13:16  knight

	* Hybrid-team: Submitted by: Reviewed by: Approved by: Obtained
	  from:

	  Added myself as a contributor *only* to the Hybrid-Team list

2005-08-15 13:07  knight

	* contrib/: 4000_ip-cloaking.patch, README, README.cloaking: Added
	  IP cloaking ability to ircd-hybrid as a contributive patch. Might
	  still need some testing but has proved relatively stable. Enjoy!

2005-08-15 07:45  michael

	* modules/m_stats.c, src/client.c, src/s_log.c, src/s_stats.c:
	  - Fixed compiletime warnings on 64bit architectures where 'uint64_t'
	    is defined with an 'unsigned long' instead of an 'unsigned long
	  long'.

	    And no, there is no 64bit architecture where a 'long long' is 128
	    bit wide, even if some people might think so.

2005-08-15 04:00  metalrock

	* contrib/vprintf_fix.patch:
	   - Updated vprintf_fix.patch

2005-08-15 03:50  metalrock

	* include/s_user.h, src/s_user.c:
	   - Removed shadowed declaration

2005-08-14 03:26  michael

	* etc/example.conf, etc/example.efnet.conf, include/resv.h,
	  modules/m_resv.c, modules/core/m_join.c, src/channel.c,
	  src/ircd_parser.y, src/match.c, src/resv.c, src/y.tab.c,
	  src/y.tab.h:
	  - A colon ':' needs to be treated as a wildcard character in order
	    to get valid_wild_card() working with ipv6 based klines.
	  - Use find_exact_name_conf() instead of find_matching_name_conf()
	    for removing RESVs.
	  - Fixed server matching bug in ms_unresv()
	  - Got rid of clean_resv_nick().  Actually we allow people to set
	    invalid RESVs. e.g. beginning with a '-' or [0-9] etc.  Such RESVs
	    won't take effect on a real nick anyway.  Wildcard sanity check is
	    now done by valid_wild_card_simple()
	  - Updated example configuration files
	  - # is now a wildcard character, so disallow non-admins to add a
	    RESV include a '#'.

2005-08-13 11:38  db

	* include/s_conf.h, modules/m_kline.c, modules/m_resv.c,
	  modules/m_rxline.c, modules/m_xline.c, src/s_conf.c:
	  - A compromise for now with Michaels suggestion
	    Add a parse_flag to parse_aline, there is only one parse option
	    available at the moment. Check for wild cards or not. Unkline type
	    functions should not test for wild cards.

2005-08-13 05:29  michael

	* etc/: example.conf, example.efnet.conf:
	  - Updated example configuration files

2005-08-13 01:15  db

	* include/hook.h, include/s_user.h, src/hook.c, src/s_bsd.c,
	  src/s_user.c:
	  - comment the hook.c functions.
	  - make sure all the hook events are initialised in init_hooks()
	  - add new hook event start_auth
	  - after uid is generated, start_auth event happens, if a local auth
	    hook is in place, the ircd can auth through that hook instead of
	    using the default ircd start_auth code, or use both. (TBD a bit
	  more actually)
	  - a little untested but works without a hook on start_auth for now

2005-08-12 21:50  db

	* src/: s_auth.c, s_bsd.c, s_conf.c, s_user.c:
	  - generate an UID in add_connection() early enough to be used for
	    start_auth i.e. for asynchronous authentication.

2005-08-12 15:53  michael

	* include/irc_string.h, src/channel_mode.c, src/irc_string.c,
	  src/s_conf.c:
	  - Got rid of pretty_mask as suggested by diane
	  - Removed "restricted" leftovers
	  - Cleaned up chm_ban, chm_except and chm_invex a bit

2005-08-12 02:31  db

	* src/s_conf.c:
	  - grrr changed interface forgot to change comment

2005-08-12 02:25  db

	* src/: s_conf.c, s_user.c:
	  - added flags_to_ascii() seemed obvious to me. Also simplified stats
	  U
	  - added more comments

2005-08-11 23:07  lusky

	* RELNOTES: another test commit

2005-08-11 22:23  lusky

	* RELNOTES: Test commit

2005-08-11 09:32  db

	* include/s_conf.h, modules/m_kline.c, modules/m_locops.c,
	  modules/m_resv.c, modules/m_rxline.c, modules/m_xline.c,
	  src/ircd_parser.y, src/s_conf.c, src/y.tab.c, src/y.tab.h:
	  - removed redundant CLUSTER_ flags as they were identical to SHARED_
	    flags moreover, with two sets of flags, it is easier to have a typo
	    (as I did) with duplicate flag bits.
	  - removed an unused find_matching_name_conf() for OPER_TYPE

2005-08-11 08:12  db

	* src/: ircd_parser.y, y.tab.c, y.tab.h:
	  - Take out obsolete code not needed with split_nuh()

2005-08-10 21:58  db

	* src/s_conf.c:
	  - oops, simple formatting fix

2005-08-10 21:54  db

	* src/s_conf.c:
	  - commented nick NULL usage for split_nuh()

2005-08-10 21:50  db

	* etc/example.conf, etc/example.efnet.conf, include/s_conf.h,
	  src/ircd_lexer.l, src/ircd_parser.y, src/y.tab.c, src/y.tab.h:
	  - added tkline txline tresv flags for share and cluster code

2005-08-10 21:06  db

	* include/channel_mode.h, include/s_conf.h, src/channel_mode.c,
	  src/ircd_parser.y, src/s_conf.c, src/y.tab.c, src/y.tab.h:
	  - get rid of split_user_host replace with split_nuh completely
	  - modify split_nuh() to put hostname into *host if nick pointer is
	    NULL originally split_nuh would parse that as a nick.

2005-08-10 18:39  db

	* Hybrid-team, src/channel_mode.c:
	  - move older non active members down the list in Hybrid-team
	  - make split_nuh do the string allocations, this greatly simplifies
	    add_id and del_id, i.e. no more strcpy in the worst case
	    fewer DupString() in the best case

2005-08-10 13:16  db

	* include/modules.h:
	  - commited patch fix from  Alan LeVee
	  alan.levee@prometheus-designs.net (knight-)

2005-08-10 11:48  adx

	* src/s_bsd.c:
	  - fixed client ssl

2005-08-10 11:25  db

	* src/s_conf.c:
	  - fixed comments which were no longer agreeing with
	    function/prototype (order change)

2005-08-10 11:04  michael

	* src/s_conf.c:
	  - Fixed bug in parse_aline() where opers were able to set a
	    remoteban with invalid parameters, i.e. a NUL servername "KLINE
	  *@someho.st ON :"
	  - Another cosmetic fix to parse_aline()

2005-08-10 00:34  db

	* src/s_conf.c:
	  - use upper case letters for perm, lower case for temp

2005-08-09 23:57  db

	* include/resv.h, modules/m_resv.c, modules/m_xline.c, src/resv.c,
	  src/s_conf.c:
	  - added temporary resvs
	  - tested interoperability

2005-08-09 15:45  db

	* include/s_conf.h, src/ircd_parser.y, src/s_conf.c, src/y.tab.c,
	  src/y.tab.h:
	  - cluster conf items do not need to include a MatchItem
	    no use was ever made of the user/host portions

2005-08-09 11:37  michael

	* etc/example.conf, etc/example.efnet.conf, include/s_conf.h,
	  modules/m_kline.c, modules/m_locops.c, modules/m_resv.c,
	  modules/m_rxline.c, modules/m_xline.c, src/ircd_parser.y,
	  src/s_conf.c, src/y.tab.c, src/y.tab.h:
	  - Fixed clustering once and for all.  Changes need to get backported
	    to 7.1.2 since clustering is broken there, too.

2005-08-09 07:26  db

	* src/s_conf.c:
	  - fixed bogus comments on cluster_a_line()
	  - renamed variable to make it a bit clearer action_type ->
	  cluster_type

2005-08-09 07:04  db

	* src/s_conf.c:
	  - comment the NULL reason pointer usage in parse_a_line()
	  - move reason checking after user and host checking

2005-08-09 06:58  db

	* modules/m_kline.c, modules/m_resv.c, modules/m_xline.c,
	  src/s_conf.c:
	  - parse_a_line does not need a reason pointer if it's for an unkline
	    etc.  So allow a NULL reason pointer and ignore it if present
	  instead of coring.
	  - Allow an ON * (or anything that matches local server) to apply
	    line locally i.e. kline something on * will kline locally as well.
	    i.e. this is putting back in the match() (noted by Michael)
	  - added more comments!

2005-08-09 06:21  db

	* include/s_conf.h, modules/m_kline.c, modules/m_resv.c,
	  modules/m_rxline.c, modules/m_xline.c, src/s_conf.c:
	  - changed parameter order to parse_aline() put parc,parv before
	  user,host

2005-08-09 06:02  db

	* modules/m_kline.c, modules/m_locops.c, modules/m_resv.c,
	  modules/m_rxline.c, modules/m_xline.c, src/s_conf.c:
	  - more cleanups to the cluster code
	  - use parse_a_line() when possible
	  - modify parse_a_line so it can take a NULL pointer to a temp line
	  parm
	  - rxline cannot cluster, #if 0 it for now
	  - locops, kline, resv, xline, rxline all tested.

2005-08-09 00:29  db

	* include/cluster.h, include/s_conf.h, modules/m_kline.c,
	  modules/m_locops.c, modules/m_resv.c, modules/m_rxline.c,
	  modules/m_xline.c, src/Makefile.in, src/cluster.c,
	  src/ircd_parser.y, src/s_conf.c, src/y.tab.c, src/y.tab.h:
	  - removed cluster.c and cluster.h, moved cluster_a_line() into
	    s_conf.c for now. It might not belong there either, but it's just
	  one function.

2005-08-08 23:55  db

	* modules/m_kline.c, modules/m_locops.c, modules/m_resv.c,
	  modules/m_rxline.c, modules/m_xline.c, src/cluster.c:
	  - I had reversed CAP_ and CLUSTER_ flags in most places.
	  - Fixed argument number for m_xline for both ENCAP and non ENCAP
	  cases

2005-08-08 17:28  db

	* include/cluster.h, modules/m_kline.c, modules/m_locops.c,
	  modules/m_resv.c, modules/m_rxline.c, modules/m_xline.c,
	  src/cluster.c:
	  - First pass at cleaning up the cluster mess
	    replace all the cluster_this_and_that() with one cluster_a_line()
	    Next pass will clean this up even more, but this is a good start.
	    Notably, cluster_a_line() is simple enough to be just moved into
	    s_conf.c

2005-08-07 17:26  adx

	* include/numeric.h, src/messages.tab:
	  - change RPL_ISCAPTURED and RPL_ISUNCAPTURED from 707-708 to 727-728
	    to avoid numeric conflicts with ratbox. Confusing clients is not
	    what we want to achieve.

	    They should now tell us about their new numerics, and we should do
	    so (via hybrid ml) as well.

2005-08-07 06:02  michael

	* doc/server-version-info, modules/m_version.c:
	  - Updated server-version-info
	  - Fixed small cosmetic bug in confopts() wich had an impact on
	    /VERSION output.  We always used to use a lowercase 'g' for
	    NO_FAKE_GLINES and an uppercase 'G' for GLINES, not vice versa.

2005-08-07 04:48  michael

	* etc/example.conf, etc/example.efnet.conf, include/s_conf.h,
	  modules/m_oper.c, src/ircd_parser.y, src/lex.yy.c, src/s_conf.c,
	  src/s_user.c, src/y.tab.c, src/y.tab.h:
	  - Added support for encrypted auth{} passwords

2005-08-06 18:15  michael

	* contrib/m_spoof.c, etc/example.conf, etc/example.efnet.conf:
	  - s/have_ident/need_ident/

2005-08-06 12:40  michael

	* etc/example.efnet.conf:
	  - hide_server_ips was originally set to 'yes' in example.efnet.conf

2005-08-06 12:30  michael

	* etc/example.conf, etc/example.efnet.conf, src/ircd_lexer.l,
	  src/lex.yy.c, src/y.tab.c, src/y.tab.h:
	  - ircd_lexer.l: It's maybe a better idea to leave it an optional
	    whitespace so we can allow .include<file> and/or .include"file"
	  - Copied example.conf to example.efnet.conf and made efnet specific
	    changes, e.g. removed SSL options etc. so we're again more or less
	    in sync with the base configuration file.

2005-08-06 08:57  db

	* src/s_user.c:
	  - add a few more comments

2005-08-06 07:26  michael

	* etc/example.conf:
	  - Updated example.conf

2005-08-06 07:01  michael

	* include/memory.h, src/balloc.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/lex.yy.c, src/memory.c, src/y.tab.c,
	  src/y.tab.h:
	  - Fixed invalid whitspace input pattern
	  - Added support for c++ comments
	  - Added better error reporting in case we cannot open an include
	  file

2005-08-04 20:04  metalrock

	* src/ircd.c:
	   - Add comment about what RXPATH is.

2005-08-04 19:53  metalrock

	* modules/m_kline.c, modules/m_stats.c, modules/m_testline.c,
	  modules/core/m_kill.c, modules/core/m_squit.c, src/csvlib.c,
	  src/ircd_parser.y, src/y.tab.c, src/y.tab.h:
	   - Made all the "no reasons" consistent.

2005-08-04 06:14  michael

	* src/s_serv.c:
	  - Fixed broken topicburst, i.e. added missing colon

2005-08-04 01:50  metalrock

	* src/: ircd_parser.y, y.tab.c, y.tab.h:
	   - Added missing remoteban = yes in ircd.conf.
	   - Spotted by zerocide.

2005-08-02 18:30  metalrock

	* src/s_user.c:
	   - Make the ircd compile again.

2005-08-02 18:18  adx

	* src/channel_mode.c:
	  - fixed b0rked halfop support

2005-08-02 13:06  db

	* doc/technical/send.txt:
	  - corrected send_message and added send_message_remote

2005-08-02 10:42  michael

	* include/s_user.h, modules/m_set.c, src/s_conf.c, src/s_user.c:
	  - Fixed bug where we wouldn't remove INVEX and/or EXCEPTS from
	    isupport after it's been disabled in the config

2005-08-02 10:19  michael

	* src/s_user.c:
	  - Misc. cleanups and fixes to isupport

2005-08-02 02:26  db

	* doc/technical/send.txt:
	  - corrected doc a bit more, removed obsolete functions

2005-08-02 02:20  adx

	* src/: ircd.c, s_log.c:
	  - don't reuse fd 2, always leave it as NULL when running in
	  background

2005-08-02 02:12  adx

	* include/fdlist.h, include/s_bsd.h, src/fdlist.c, src/s_bsd.c:
	  - move close_standard_fds() implementation to fdlist.c

2005-08-02 02:02  adx

	* doc/technical/send.txt:
	  - added info about my sendto_* changes

2005-08-01 19:01  adx

	* messages/: Makefile.in, custom.lang:
	  - added customized numerics

2005-08-01 18:46  db

	* src/send.c:
	  - serial number checking is not necessary here either

2005-08-01 18:10  db

	* src/s_log.c:
	  - if reopen on ircd.log fails, open it on /dev/null to try and keep
	    fd 2 stderr from being grabbed for something.
	    This is a corner case I am not too worried about.

2005-08-01 18:06  db

	* src/send.c:
	  - serial check is a waste of time

2005-08-01 10:18  db

	* src/: fileio.c, s_log.c:
	  - Trying to close NULL fb's is a bad idea, be a little anal about it

2005-07-31 14:01  db

	* modules/Makefile.in:
	  - change Makefile to reflect repo move of m_tburst.c to m_tb.c

2005-07-31 10:39  db

	* help/opers/: kline, rxline, xline:
	  - changed <time> to [time] it is an optional parameter

2005-07-31 10:35  db

	* help/opers/: kline, rxline:
	  - cleaned up help files

2005-07-31 06:11  michael

	* modules/m_rxline.c, modules/m_xline.c, src/listener.c:
	  - Added support for remote rx-lines
	  - Make sure we don't allow a remote UNXLINE unless the oper/admin
	    has flags = remoteban in their oper{}
	  - Improved sanity check for invalid port numbers

2005-07-31 01:32  adx

	* RELNOTES, contrib/m_clearchan.c, contrib/m_force.c,
	  contrib/m_ojoin.c, contrib/m_opme.c, doc/modes.txt,
	  etc/example.conf, etc/example.efnet.conf, help/opers/umode,
	  help/users/umode, include/client.h, include/send.h,
	  modules/m_invite.c, modules/m_knock.c, modules/m_lljoin.c,
	  modules/m_tb.c, modules/m_topic.c, modules/core/m_join.c,
	  modules/core/m_kick.c, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/core/m_part.c,
	  modules/core/m_sjoin.c, src/channel_mode.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/lex.yy.c, src/parse.c, src/s_user.c,
	  src/send.c, src/y.tab.c, src/y.tab.h:
	  - added umode +D: "deaf" (don't receive channel messages)
	  - added nodeaf as the second argument of sendto_channel_local.
	    if set to YES, IsDeaf clients will be omitted
	  - REMEMBER ** sendto_channel_butone, sendto_channel_local_butone
	    NOW IGNORE +D CLIENTS. Don't forget in case you need these
	    functions in the future.

2005-07-31 00:05  db

	* help/opers/: dline, kline:
	  - correct spelling
	    *SEPARATE* AAAAAAA not e

2005-07-30 23:48  db

	* help/opers/: dline, kline, rxline, xline:
	  - added help for rxline
	  - corrected doc in dline, kline. There is no more support for
	  ircd.conf
	  - add <time>

2005-07-30 23:32  adx

	* messages/ayb.lang, messages/ircd-croatian.lang,
	  messages/ircd-danish.lang, messages/ircd-dutch.lang,
	  messages/ircd-french.lang, messages/ircd-german.lang,
	  messages/ircd-norwegian.lang, messages/ircd-polish.lang,
	  messages/ircd-russian.lang, messages/ircd-spanish.lang,
	  messages/ircd-standard.example.lang, messages/ircd-swedish.lang,
	  src/messages.tab:
	  - restored original, Good hybrid numerics for local/global stats
	  - should you want these "new standards", edit your message files.
	    ircd will still accept two %d's more.

2005-07-30 18:37  metalrock

	* contrib/: m_jupe.c, m_killhost.c:
	   - Fix compile errors from exit_client changes.

2005-07-30 18:16  metalrock

	* help/opers/dmem, include/modules.h:
	   - dmem is gone.

2005-07-30 16:44  adx

	* include/client.h, include/s_serv.h, include/s_user.h,
	  modules/m_capab.c, modules/m_close.c, modules/m_cryptlink.c,
	  modules/m_motd.c, modules/m_post.c, modules/m_svinfo.c,
	  modules/core/m_kill.c, modules/core/m_nick.c,
	  modules/core/m_quit.c, modules/core/m_server.c,
	  modules/core/m_squit.c, src/client.c, src/m_error.c,
	  src/packet.c, src/parse.c, src/s_bsd.c, src/s_conf.c,
	  src/s_serv.c, src/s_user.c, src/send.c:
	  - cleaned up exit_client(), this should eliminate the bug
	    where we didn't send a valid SQUIT to a local server
	    being disconnected
	  - removed useless first parameter of exit_client
	  - changed return type of many functions to void
	    (CLIENT_EXITED is obsolete)

2005-07-30 16:07  db

	* modules/m_tb.c, src/modules.c:
	  - rename tburst_msgtab to tb_msgtab

2005-07-30 14:57  db

	* include/s_conf.h, src/s_serv.c:
	  - cosmetic. Change IsAwayBurst to IsConfAwayBurst to be consistent

2005-07-30 13:14  adx

	* src/: client.c, s_bsd.c:
	  - handle fd closing properly

2005-07-30 12:39  adx

	* src/client.c:
	  - fixed misleading comment

2005-07-30 05:38  michael

	* etc/example.conf, src/ircd_parser.y, src/y.tab.c, src/y.tab.h:
	  - Allow people to put "*" in vhost/vhost6 which simply means
	  INADDR_ANY

2005-07-29 23:35  metalrock

	* include/irc_res.h, modules/m_rxline.c, src/irc_res.c:
	   - Fix some compiler warnings.

2005-07-29 17:14  michael

	* include/irc_string.h, src/irc_string.c, src/s_conf.c:
	  - Rewrote strip_tabs()
	  - Fixed a strip_tabs() related bug in yyerror().  We are absolutely
	    not interested in the length of the source string! We are more
	    interested in the size of the destination buffer ...

2005-07-29 17:08  michael

	* src/: csvlib.c, s_user.c:
	  - Reverted recent parse_csv_file() changes

2005-07-29 15:11  db

	* include/s_conf.h, src/ircd_parser.y, src/y.tab.c, src/y.tab.h:
	  - allow flags = encrypted; in oper conf

2005-07-29 14:27  db

	* include/s_conf.h, src/ircd_parser.y, src/y.tab.c, src/y.tab.h:
	  - add not flags code to connect blocks
	  - clean up and add ClearConf... macros to s_conf.h

2005-07-29 12:11  db

	* src/s_serv.c:
	  - cleaned up some comments
	  - check if TopicBurst can be used, clear it if not
	  - use find_capability to clean up code

2005-07-29 10:58  adx

	* src/s_serv.c:
	  - fixed problem with ircd forking children which eat 99% cpu

2005-07-28 23:41  db

	* src/csvlib.c:
	  - If regcomp gets an error, don't even put it into the rxline list

2005-07-28 23:34  db

	* include/s_conf.h, src/ircd_parser.y, src/lex.yy.c, src/s_serv.c,
	  src/s_user.c, src/y.tab.c, src/y.tab.h:
	  - fixed typos
	  - fixed core in regexp handling

2005-07-28 18:30  db

	* etc/example.conf, include/s_conf.h, modules/m_tb.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/lex.yy.c, src/s_conf.c,
	  src/s_serv.c, src/y.tab.c, src/y.tab.h:
	  - added to channel block burst_topicwho
	  - check if server is capable of TB before using it
	  - check if TB is enabled before sending it as a capability

2005-07-28 17:17  db

	* include/s_conf.h, include/s_serv.h, modules/m_tb.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_serv.c:
	  - redo m_tburst.c to do TB instead of the older TBURST,
	    probably should repo move m_tburst.c to m_tb.c
	    Note, that the config flags are present but not completely done.
	    I'll do tomorrow.
	  - add better error checking

2005-07-28 12:57  db

	* src/s_bsd.c:
	  - fixed misleading comment

2005-07-28 12:52  adx

	* RELNOTES:
	  - updated RELNOTES

2005-07-28 12:26  adx

	* include/s_auth.h, src/client.c, src/s_auth.c:
	  - fixed race condition and memleak in auth

2005-07-28 10:46  db

	* src/s_conf.c:
	  - Make sure count is correct for valid_wild_card()

2005-07-28 00:08  adx

	* src/: s_serv.c, s_user.c:
	  - fixed the hidden_admin fix

2005-07-28 00:02  db

	* src/modules.c:
	  - move tburst here too

2005-07-27 23:57  db

	* contrib/Makefile.in, modules/Makefile.in:
	  - move compile of m_tburst.c from contrib to modules

2005-07-27 23:43  db

	* contrib/m_killhost.c, src/s_conf.c:
	  - fix comment on valid_wild_card
	  - fix m_killhost to use valid_wild_card() correctly

2005-07-27 23:31  db

	* modules/m_kline.c, modules/m_rxline.c, src/s_conf.c:
	  - add NULL check in parse_aline for remote server, if NULL then
	    flag the command as not supporting remote servers.
	  - rewrite m_rxline.c to use parse_aline
	  - rename functions in m_rxline to not be the same as xline (cosmetic
	  only)
	  - use NULL in mo_dline for no remote server support

2005-07-27 23:29  adx

	* src/s_bsd.c:
	  - fixed problem with connect{} not working when dns host= is passed

2005-07-27 23:07  adx

	* src/channel.c:
	  - fixed compile error (2)

2005-07-27 23:02  adx

	* modules/m_whois.c:
	  - fixed compile error

2005-07-27 22:23  adx

	* src/channel.c:
	  - fixed usage of uninitialized variable

2005-07-27 22:03  adx

	* src/: channel.c, channel_mode.c:
	  - fixed buffer overrun present in cvs since 20050710

2005-07-27 16:43  adx

	* src/numeric.c:
	  - let people have less %'s than normally in a customized numeric
	  reply

2005-07-27 16:35  adx

	* modules/m_whois.c, src/s_user.c:
	  - hide +a from /whois and send_umode() if they have the hidden_admin
	  flag

2005-07-27 16:00  michael

	* src/s_user.c:
	  - Removed extra test in register_local_user().  *source_p->id is
	  always NUL there

2005-07-27 12:56  adx

	* include/s_bsd.h, src/s_bsd.c, src/s_bsd_win32.c:
	  - cancel inherited events on windows sockets

2005-07-27 01:08  adx

	* src/s_conf.c:
	  - do not expire ips which are required to do throttling

2005-07-27 01:05  adx

	* src/: listener.c, s_bsd_win32.c:
	  - this was definitely missing here

2005-07-27 00:54  adx

	* src/s_auth.c:
	  - fixed auth lookups on win32

2005-07-27 00:38  adx

	* src/s_bsd_win32.c:
	  - fixed compile error

2005-07-27 00:37  adx

	* include/irc_res.h, modules/m_rehash.c, src/irc_res.c, src/ircd.c,
	  src/s_bsd_win32.c, src/s_conf.c:
	  - implemented winsock dns resolver support
	  - of course do not compile irc_res*.c when building win32 version

2005-07-26 22:29  metalrock

	* configure, configure.ac:
	   - Change hybrid 7.1 to 7.2

2005-07-26 21:11  adx

	* include/client.h, include/fdlist.h, include/s_bsd.h,
	  src/client.c, src/fdlist.c, src/fileio.c, src/ircd_parser.y,
	  src/listener.c, src/s_bsd.c, src/s_serv.c, src/y.tab.c,
	  src/y.tab.h:
	  - fixed SSL memory leak when dumping users early (like in
	  listener.c)
	  - do not use free_client for anywhere outside free_exited_clients,
	    it has asserts like IsDead and IsClosing
	  - report an error if they do flags = ssl while SSL is not available
	  - more close -> closesocket

2005-07-26 20:24  adx

	* README.PLATFORMS, include/fdlist.h, src/fdlist.c, src/fileio.c,
	  src/s_bsd.c, src/s_serv.c:
	  - added flag 'is_socket' to fde_t and similar parameter to fd_open
	  - on win32, use closesocket() instead of close() for sockets
	  - added Windows to README.PLATFORMS

2005-07-26 19:44  adx

	* include/irc_getnameinfo.h, include/ircd_defs.h, include/s_misc.h,
	  include/stdinc.h, modules/m_help.c, modules/m_stats.c,
	  src/csvlib.c, src/hash.c, src/irc_res.c, src/listener.c,
	  src/parse.c, src/s_bsd_win32.c, src/s_serv.c:
	  - managed to successfully compile and boot hybrid under w32
	  - current todo: closesocket instead of close, async dns lookups

2005-07-26 19:40  db

	* src/s_conf.c:
	  - Don't waste time passing a NULL to valid_wild_card()

2005-07-26 19:39  db

	* contrib/m_killhost.c:
	  - make sure nick and user are wildcard checked as well

2005-07-26 19:30  db

	* contrib/m_killhost.c:
	  - add n!u@h support. Used match() not strcmp. This may be dangerous.

2005-07-26 17:34  adx

	* src/s_bsd_win32.c:
	  - fixed s_bsd_win32

2005-07-26 17:26  adx

	* include/s_bsd.h:
	  - yet another compile error

2005-07-26 17:24  adx

	* src/client.c:
	  - fixed compile without HAVE_SOCKETPAIR
	  - note fork_server still won't work, someone should implement
	    pipes or so, and then test it

2005-07-26 17:07  adx

	* src/s_bsd_win32.c:
	  - fixed a stupid s/NO/YES/

2005-07-26 17:01  adx

	* include/irc_res.h, include/s_bsd.h, src/ircd.c,
	  src/s_bsd_devpoll.c, src/s_bsd_kqueue.c, src/s_bsd_poll.c,
	  src/s_bsd_select.c, src/s_bsd_sigio.c, src/s_bsd_win32.c:
	  - added win32 compatible network support
	  - turned comm_select 'delay' parameter into #define

2005-07-26 16:49  db

	* modules/m_kline.c:
	  - convert mo_dline to use parse_aline as well

2005-07-26 12:08  michael

	* src/csvlib.c:
	  - Removed x-line action leftovers
	  - Cleaned up parse_csv_line()

2005-07-26 11:29  michael

	* src/csvlib.c:
	  - Improved getline()
	  - Fixed core in write_conf_line()

2005-07-26 10:56  michael

	* modules/m_rxline.c, src/csvlib.c:
	  - Misc regex x-lines related bugfixes. e.g. csvlib not allowing ','
	    in config file entries.

2005-07-26 10:28  adx

	* etc/Makefile.in:
	  - create rxline.conf upon install

2005-07-26 10:24  adx

	* src/s_bsd.c:
	  - fixed core caused by uninitialized variable

2005-07-26 10:13  adx

	* src/client.c:
	  - DO NOT touch source_p->from for exiting local clients!

2005-07-26 09:13  michael

	* configure, configure.ac, include/hash.h, include/setup.h.in:
	  - Fixed compiletime warnings

2005-07-26 09:07  adx

	* contrib/m_ltrace.c:
	  - fix ltrace like trace

2005-07-26 07:48  michael

	* include/hash.h, include/whowas.h, modules/m_whowas.c, src/hash.c,
	  src/whowas.c:
	  - Got rid of hash_whowas_name()

2005-07-25 23:32  adx

	* include/client.h, include/fdlist.h, include/fileio.h,
	  include/irc_res.h, include/listener.h, include/s_auth.h,
	  include/s_bsd.h, include/s_serv.h, include/send.h,
	  modules/m_cryptlink.c, modules/m_set.c, modules/m_trace.c,
	  modules/m_whois.c, modules/core/m_server.c, src/balloc.c,
	  src/client.c, src/fdlist.c, src/fileio.c, src/irc_res.c,
	  src/irc_reslib.c, src/ircd.c, src/listener.c, src/packet.c,
	  src/restart.c, src/rsa.c, src/s_auth.c, src/s_bsd.c,
	  src/s_bsd_devpoll.c, src/s_bsd_kqueue.c, src/s_bsd_poll.c,
	  src/s_bsd_select.c, src/s_bsd_sigio.c, src/s_serv.c,
	  src/s_user.c, src/send.c: This massive commit gets rid of
	  fd_table, which is incompatible with Win32 (and its "genious" fd
	  allocation scheme), and introduces fd_hash[] with HARD_FDLIMIT
	  buckets instead.

	  Under UNIX, this is as fast as earlier - we are guaranteed to have
	  no more than one fd per hash bucket. Under Winsock, however, this
	  could take some more iterations, so I decided to speed up things:

	  Instead of keeping fd numeric values, we now store fde_t struct as a
	  part of Client, Listener etc. Generally, fd value is now used only
	  at the lowest I/O level, just before talking to the kernel. fd_* and
	  comm_* functions were modified to take arguments like 'fde_t *F'
	  instead of 'int fd'; so were I/O handlers for comm_setselect,
	  setflush etc.

	  I know only that it compiles. Someone should test it, and update the
	  docs.

	  Other things changed:

	  - fixed m_trace, which used to walk all global client list in order
	    to..  find the count of dependent clients and server. Now these
	    numbers are parts of struct Server
	  - various cleanups and style corrections
	  - fixed devpoll.c (by insight, someone using Solaris could verify)

2005-07-25 14:25  db

	* include/s_conf.h, modules/m_kline.c, modules/m_xline.c,
	  src/s_conf.c:
	  - Get rid of the duplicated parser code in each m_kline, m_xline
	    etc.  use a common parse_aline for all of this.

2005-07-25 00:52  adx

	* configure, configure.ac, include/ircd_defs.h, include/modules.h,
	  include/rlimits.h, include/s_conf.h, include/setup.h.in,
	  include/stdinc.h, modules/m_help.c, modules/m_kline.c,
	  modules/m_stats.c, modules/m_whois.c, src/channel.c,
	  src/channel_mode.c, src/hash.c, src/irc_getaddrinfo.c,
	  src/irc_res.c, src/irc_reslib.c, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/lex.yy.c, src/modules.c, src/s_auth.c,
	  src/s_bsd.c, src/s_conf.c, src/s_serv.c, src/s_user.c,
	  src/y.tab.c, src/y.tab.h:
	  - make hybrid compile under win32 (not yet run) -
	    tested with Borland C++ 5.5.1 and a specially crafted setup.h
	  - fixed compile when socketpair() is not available
	    (servlink won't work - FIXME)
	  - fixed compile with --enable-asserts (removed struct User
	  leftovers)
	  - added rxline to static modules, if regex.h is available

2005-07-24 04:25  michael

	* include/s_conf.h, src/s_conf.c:
	  - Fixed bug where we would free memory used by temporary (r)x-lines
	    but leave them linked in the temporary_xlines list on a REHASH.
	    But other than that, we should never remove temporary xlines on a
	    REHASH

2005-07-24 04:08  michael

	* modules/m_rxline.c, modules/m_xline.c, src/csvlib.c:
	  - xline actions (warn/silent/reject) are deprecated,
	    so don't make use of the action field

2005-07-24 01:49  db

	* include/s_conf.h, modules/m_kline.c, src/ircd_parser.y,
	  src/s_conf.c, src/y.tab.c, src/y.tab.h:
	  - commit first initial code consolidating all kline type parsing
	    added "parse_aline()" which does all the tkline parsing, the ON
	    parsing etc. Shoved into s_conf.c for now, Most certainly the
	  wrong place.
	  - fixed parser, since regexp.h needs <sys/types.h> first on FreeBSD

	  Seems to mostly work, remote kline was not working. oops.

	  I also should not be coding at 2am. Good night.

2005-07-24 00:36  db

	* src/s_user.c:
	  - regex.h needs <sys/types.h> on FreeBSD

2005-07-24 00:26  db

	* modules/m_rxline.c:
	  - regex.h needs <sys/types.h> on FreeBSD

2005-07-23 21:58  adx

	* contrib/m_change.c:
	  - allow 1-parameter form of /chgident etc, meaning the target is
	    the oper who issued the command
	  - I didn't test it and it's 4am, so please someone review ;-)

2005-07-23 21:47  michael

	* modules/m_rxline.c, src/ircd_parser.y, src/s_user.c, src/y.tab.c,
	  src/y.tab.h:
	  - Made regex x-lines caSe independent

2005-07-23 21:36  metalrock

	* contrib/help/opers/: chghost, chgident, chgname, clearchan,
	  forcejoin, forcepart, jupe, mkpasswd, ojoin, omotd, opme:
	   - Highly modified version of knight-'s help files.
	   - Will make the Makefile later.

2005-07-23 20:05  michael

	* src/: ircd_parser.y, y.tab.c, y.tab.h:
	  - I shouldn't write code at 2am

2005-07-23 19:56  adx

	* src/csvlib.c:
	  - make notices for /xline and temporary /xline consistent

2005-07-23 19:43  michael

	* src/: ircd_parser.y, y.tab.c, y.tab.h:
	  - Fixed typo

2005-07-23 19:42  adx

	* etc/example.efnet.conf, src/s_conf.c:
	  - Activate RPL_WHOISACTUALLY by default also on efnet.
	    Suggested by metalrock

2005-07-23 19:36  michael

	* etc/example.conf, etc/example.efnet.conf, src/csvlib.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/lex.yy.c, src/y.tab.c,
	  src/y.tab.h:
	  - Added regular expression support for gecos{} blocks

2005-07-23 19:12  adx

	* etc/example.conf, etc/example.efnet.conf, include/s_conf.h,
	  modules/m_whois.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/lex.yy.c, src/s_conf.c, src/y.tab.c, src/y.tab.h:
	  - added use_whois_actually to general{}

2005-07-23 15:55  michael

	* modules/m_rxline.c:
	  - Fixed memory leak in write_xline()

2005-07-23 15:07  michael

	* modules/m_rxline.c:
	  - Deal with errors returned from regcomp()

2005-07-23 14:34  michael

	* src/s_conf.c:
	  - Fixed nick based RESVs I broke with the last commit

2005-07-23 14:24  michael

	* modules/m_rxline.c:
	  - Forgot to add m_rxline.c

2005-07-23 14:21  michael

	* include/defaults.h, include/s_conf.h, modules/Makefile.in,
	  modules/m_stats.c, src/csvlib.c, src/ircd.c, src/s_conf.c,
	  src/s_user.c:
	  - Added regex support for XLINEs.  (Remote regex xlines are
	  currently not supported)

2005-07-23 00:44  metalrock

	* messages/ircd-standard.example.lang:
	   - Too few args in RPL_STATSUPTIME

2005-07-22 11:28  michael

	* contrib/m_clearchan.c, include/channel.h, modules/core/m_sjoin.c,
	  src/channel.c, src/channel_mode.c:
	  - Fixed the memory leak in m_sjoin.c:remove_ban_list

2005-07-21 23:15  db

	* modules/m_map.c:
	  - make map easier to read

2005-07-21 22:19  metalrock

	* configure, configure.ac:
	   - Update configure.ac with configure changes.

2005-07-21 20:29  db

	* configure:
	  - change default shown as 160 instead of 120

2005-07-21 20:23  db

	* configure, include/ircd_defs.h, src/s_conf.c:
	  - add CHANNELLEN to isupport
	  - make CHANNELLEN efnet compatible
	  - make TOPICLEN efnet compatible

2005-07-20 07:36  michael

	* include/channel.h:
	  - Doxyfied channel.h

2005-07-19 21:03  metalrock

	* help/opers/hash:
	   - Missed hash help from previous commit.

2005-07-19 21:03  metalrock

	* help/opers/: credits, gline, map, stats, testgecos:
	   - Removed credits (out of date).
	   - Added missing help documentation.
	   - Updated gline documentation with CIDR.

2005-07-18 18:49  metalrock

	* src/hash.c:
	   - Fix comment header.

2005-07-18 17:05  db

	* modules/core/m_sjoin.c:
	  - use two variables and precalculate lengths of nick/uid fields

2005-07-18 11:40  db

	* modules/core/m_sjoin.c:
	  - Only one doc header is needed for set_final_mode()
	  - Don't prefix the prefixes until after checking if it will fit

2005-07-18 10:28  db

	* modules/core/m_sjoin.c:
	  - more cleanups/speedups to m_sjoin.c

2005-07-18 10:12  michael

	* src/: y.tab.c, y.tab.h:
	  - Updated y.tab.c

2005-07-18 10:06  michael

	* src/ircd_parser.y:
	  - uh-oh.  must reset listener_flags right now after calling
	  add_listener()

2005-07-18 09:30  michael

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  include/list.h, include/listener.h, include/s_bsd.h,
	  src/ircd_lexer.l, src/ircd_parser.y, src/lex.yy.c,
	  src/listener.c, src/messages.tab, src/s_bsd.c, src/y.tab.c,
	  src/y.tab.h:
	  - Removed the hackish sslport thing and added new 'flags' directive
	    to listen{} blocks.  Current supported flags are 'ssl'
	    and 'hidden' (hidden from STATS P except if you're an
	    administrator)
	  - Changed ssl port to 6697, which is more or less the default ssl
	    port on nearly all networks that support ssl.
	  - Updated example configuration files

2005-07-17 08:19  michael

	* src/balloc.c:
	  - Let the ircd crash in case new_node->data becomes NULL, for what
	    reason ever.  This is actually a major bug, and restarting ircd
	    makes it impossible to do further debugging.
	  - Removed redundant NULL assignments.

2005-07-17 07:46  db

	* modules/core/m_sjoin.c:
	  - Somewhat faster in set_final_mode()
	    and remove_a_mode

2005-07-17 05:48  michael

	* modules/m_invite.c:
	  - Fixed the INVITE fix ;P

2005-07-16 21:06  db

	* modules/m_invite.c:
	  - only show "paranoid" mode if the channel is +ip

2005-07-16 10:20  michael

	* include/list.h, include/s_serv.h, src/list.c, src/s_serv.c:
	  - Moved make_server from list.c to s_serv.c

2005-07-16 09:49  michael

	* include/list.h, modules/m_stats.c, src/list.c:
	  - Removed count_links_memory.  It's now block_heap_report_stats' job
	    to report memory used by dlink nodes.

2005-07-16 09:29  db

	* src/s_conf.c:
	  - Can't call load_conf_modules() when compiled with static modules

2005-07-16 09:03  michael

	* configure, configure.ac, include/s_user.h, include/setup.h.in,
	  include/whowas.h, src/client.c:
	  - Removed last User struct remnants
	  - Cleaned up exit_one_client()
	  - Updated configure.ac. i.e. removed USER_HEAP_SIZE definition
	  - autoconf & autoheader

2005-07-16 08:19  michael

	* contrib/m_capture.c, contrib/m_ctrace.c, contrib/m_etrace.c,
	  contrib/m_killhost.c, contrib/m_ltrace.c, contrib/m_operspy.c,
	  contrib/spy_admin_notice.c, contrib/spy_info_notice.c,
	  contrib/spy_links_notice.c, contrib/spy_motd_notice.c,
	  contrib/spy_stats_notice.c, contrib/spy_stats_p_notice.c,
	  contrib/spy_trace_notice.c, include/channel.h, include/client.h,
	  include/s_user.h, modules/m_accept.c, modules/m_admin.c,
	  modules/m_away.c, modules/m_challenge.c, modules/m_gline.c,
	  modules/m_invite.c, modules/m_kline.c, modules/m_knock.c,
	  modules/m_lljoin.c, modules/m_locops.c, modules/m_names.c,
	  modules/m_pong.c, modules/m_resv.c, modules/m_stats.c,
	  modules/m_testmask.c, modules/m_trace.c, modules/m_userhost.c,
	  modules/m_who.c, modules/m_whois.c, modules/m_xline.c,
	  modules/core/m_join.c, modules/core/m_kill.c,
	  modules/core/m_message.c, modules/core/m_nick.c,
	  modules/core/m_sjoin.c, src/channel.c, src/channel_mode.c,
	  src/client.c, src/ircd.c, src/parse.c, src/s_log.c, src/s_serv.c,
	  src/s_user.c, src/send.c, src/whowas.c:
	  - Finally killed the User struct. Wasn't a biggie, but needs some
	    testing anyaway.
	  - Sorted out the confusing IsClient / IsPerson macro mix.  Now
	    there's just the IsClient(x) macro left which means x is a FULLY
	    registered Client if TRUE

2005-07-16 04:19  michael

	* src/hash.c:
	  - I knew c&p is evil ...

2005-07-16 04:12  michael

	* include/handlers.h, include/hash.h, include/modules.h,
	  modules/Makefile.in, modules/m_hash.c, src/hash.c, src/modules.c:
	  - Moved mo_hash() into its own module

2005-07-16 03:22  michael

	* include/channel.h, include/hash.h, src/channel.c, src/hash.c:
	  - Moved get_or_create_channel() to channel.c

2005-07-15 09:53  michael

	* src/channel.c:
	  - Killed a stupid strlen() in set_channel_topic()

2005-07-15 09:38  michael

	* src/channel.c:
	  - Doxyfied channel.c

2005-07-14 23:53  metalrock

	* help/Makefile.in:
	   - List the help topics in a list format.

2005-07-14 16:21  michael

	* doxygen.conf, include/balloc.h:
	  - Doxyfied balloc.h

2005-07-14 14:42  adx

	* etc/: example.conf, example.efnet.conf:
	  - more clear documentation for number_per_ip vs max_local/max_global

2005-07-14 13:32  db

	* etc/: example.conf, example.efnet.conf:
	  - document max_global and max_local better as well as number_per_ip

2005-07-14 13:00  michael

	* doxygen.conf, src/balloc.c:
	  - Doxyfied balloc.c

2005-07-14 07:30  michael

	* doxygen.conf:
	  - Make doxygen ignoring lex.yy.c, y.tab.c and y.tab.h

2005-07-14 07:22  michael

	* doxygen.conf:
	  - Updated doxygen.conf

2005-07-14 06:51  michael

	* doxygen.conf:
	  - Added doxygen.conf for later use

2005-07-14 02:44  metalrock

	* Makefile.in, configure, configure.ac, contrib/Makefile.in,
	  contrib/m_help.c, contrib/help/opers/accept,
	  contrib/help/opers/admin, contrib/help/opers/away,
	  contrib/help/opers/capab, contrib/help/opers/cburst,
	  contrib/help/opers/challenge, contrib/help/opers/client,
	  contrib/help/opers/close, contrib/help/opers/cmode,
	  contrib/help/opers/connect, contrib/help/opers/credits,
	  contrib/help/opers/cryptlink, contrib/help/opers/die,
	  contrib/help/opers/dline, contrib/help/opers/dmem,
	  contrib/help/opers/drop, contrib/help/opers/eob,
	  contrib/help/opers/error, contrib/help/opers/gline,
	  contrib/help/opers/help, contrib/help/opers/index,
	  contrib/help/opers/info, contrib/help/opers/invite,
	  contrib/help/opers/ison, contrib/help/opers/join,
	  contrib/help/opers/kick, contrib/help/opers/kill,
	  contrib/help/opers/kline, contrib/help/opers/knock,
	  contrib/help/opers/knockll, contrib/help/opers/links,
	  contrib/help/opers/list, contrib/help/opers/lljoin,
	  contrib/help/opers/llnick, contrib/help/opers/locops,
	  contrib/help/opers/lusers, contrib/help/opers/modlist,
	  contrib/help/opers/modload, contrib/help/opers/modrestart,
	  contrib/help/opers/modunload, contrib/help/opers/motd,
	  contrib/help/opers/names, contrib/help/opers/nburst,
	  contrib/help/opers/nick, contrib/help/opers/notice,
	  contrib/help/opers/oper, contrib/help/opers/operwall,
	  contrib/help/opers/part, contrib/help/opers/pass,
	  contrib/help/opers/ping, contrib/help/opers/pong,
	  contrib/help/opers/post, contrib/help/opers/privmsg,
	  contrib/help/opers/quit, contrib/help/opers/rehash,
	  contrib/help/opers/restart, contrib/help/opers/resv,
	  contrib/help/opers/server, contrib/help/opers/set,
	  contrib/help/opers/sjoin, contrib/help/opers/squit,
	  contrib/help/opers/stats, contrib/help/opers/svinfo,
	  contrib/help/opers/testline, contrib/help/opers/testmask,
	  contrib/help/opers/time, contrib/help/opers/topic,
	  contrib/help/opers/trace, contrib/help/opers/uhelp,
	  contrib/help/opers/umode, contrib/help/opers/undline,
	  contrib/help/opers/ungline, contrib/help/opers/unkline,
	  contrib/help/opers/unresv, contrib/help/opers/unxline,
	  contrib/help/opers/user, contrib/help/opers/userhost,
	  contrib/help/opers/users, contrib/help/opers/version,
	  contrib/help/opers/wallops, contrib/help/opers/who,
	  contrib/help/opers/whois, contrib/help/opers/whowas,
	  contrib/help/opers/xline, contrib/help/users/index,
	  contrib/help/users/info, contrib/help/users/notice,
	  contrib/help/users/privmsg, contrib/help/users/stats,
	  contrib/help/users/umode, help/Makefile.in, help/opers/accept,
	  help/opers/admin, help/opers/away, help/opers/capab,
	  help/opers/cburst, help/opers/challenge, help/opers/client,
	  help/opers/close, help/opers/cmode, help/opers/connect,
	  help/opers/credits, help/opers/cryptlink, help/opers/die,
	  help/opers/dline, help/opers/dmem, help/opers/drop,
	  help/opers/eob, help/opers/error, help/opers/gline,
	  help/opers/help, help/opers/info, help/opers/invite,
	  help/opers/ison, help/opers/join, help/opers/kick,
	  help/opers/kill, help/opers/kline, help/opers/knock,
	  help/opers/knockll, help/opers/links, help/opers/list,
	  help/opers/lljoin, help/opers/llnick, help/opers/locops,
	  help/opers/lusers, help/opers/modlist, help/opers/modload,
	  help/opers/modrestart, help/opers/modunload, help/opers/motd,
	  help/opers/names, help/opers/nburst, help/opers/nick,
	  help/opers/notice, help/opers/oper, help/opers/operwall,
	  help/opers/part, help/opers/pass, help/opers/ping,
	  help/opers/pong, help/opers/post, help/opers/privmsg,
	  help/opers/quit, help/opers/rehash, help/opers/restart,
	  help/opers/resv, help/opers/server, help/opers/set,
	  help/opers/sjoin, help/opers/squit, help/opers/stats,
	  help/opers/svinfo, help/opers/testline, help/opers/testmask,
	  help/opers/time, help/opers/topic, help/opers/trace,
	  help/opers/uhelp, help/opers/umode, help/opers/undline,
	  help/opers/ungline, help/opers/unkline, help/opers/unresv,
	  help/opers/unxline, help/opers/user, help/opers/userhost,
	  help/opers/users, help/opers/version, help/opers/wallops,
	  help/opers/who, help/opers/whois, help/opers/whowas,
	  help/opers/xline, help/users/info, help/users/notice,
	  help/users/privmsg, help/users/stats, help/users/umode,
	  modules/Makefile.in, modules/m_help.c:
	   - Added help back into the core.

2005-07-13 09:36  adx

	* contrib/m_capture.c:
	  - fixed a typo that caused remote /uncapture to fail

2005-07-13 08:59  adx

	* configure, configure.ac, include/fdlist.h, src/packet.c,
	  src/s_auth.c, src/s_bsd.c, src/send.c:
	  - we can send auth headers even through SSL, if only we start
	    auth lookups *after* finishing the handshake. (Suggested by
	    Michael)

2005-07-13 08:22  adx

	* modules/m_whois.c, src/s_user.c:
	  - why not show IP of remote unspoofed users?

2005-07-13 00:11  metalrock

	* modules/m_whois.c:
	   - Only show WHOISACTUALLY if local client and hide_spoof_ips = no.

2005-07-12 22:51  metalrock

	* src/s_conf.c:
	   - Missing CHANLIMIT.

2005-07-12 22:39  adx

	* src/s_bsd.c:
	  - fixed build when OpenSSL is unavailable

2005-07-12 22:37  db

	* include/modules.h, src/ircd.c, src/modules.c, src/s_conf.c:
	  - finally fix load of modules given in ircd.conf file
	    modules should not be loaded directly from parser, but loaded
	    after autoload modules are loaded.

	  - fixed typo that Piotr noticed in mo_modrestart, we were traversing
	    mod_paths instead of mod_list

2005-07-12 22:33  metalrock

	* src/s_user.c:
	   - STATUSMSG was in the wrong format.

2005-07-12 22:26  adx

	* src/: listener.c, s_auth.c, s_bsd.c:
	  - finally fixed client ssl. What we did wrong was using SSL_send
	    (to write auth headers) before doing full ssl handshake. The
	    handshake was blocked, because we get no read events before
	    release_auth_client.  Solution - don't send auth headers through
	  SSL.

2005-07-12 21:24  adx

	* src/: listener.c, s_auth.c, s_bsd.c:
	  - moved set_no_delay to listener.c. Now it can't be done earlier.
	  - style corrections

2005-07-12 19:12  adx

	* src/packet.c:
	  - added missing return after exit_client

2005-07-12 18:57  adx

	* src/s_user.c:
	  - forgot to add 'G' to umode list

2005-07-12 18:50  adx

	* src/packet.c:
	  - SSL_read returns only one packet at a time, even if there is
	    actually more of them queued. We need to repeat SSL_read till
	  SSL_ERROR_WANT_READ.

2005-07-12 14:46  adx

	* src/listener.c:
	  - fixed core on /stats P, introduced with client ssl changes.

2005-07-12 14:39  adx

	* src/: packet.c, send.c:
	  - reset retlen instead of errno. anyway, we have a simple and
	    working ssl implementation now.

2005-07-12 14:34  adx

	* include/fdlist.h, src/fdlist.c, src/packet.c, src/s_bsd.c,
	  src/send.c:
	  - fixed SSL I/O

2005-07-12 13:46  adx

	* src/ircd.c:
	  - move ssl context setup before read_conf_files. hurray, ssl works!
	  ;)
	  - make it a separate function: init_ssl()

2005-07-12 13:38  adx

	* src/: ircd_parser.y, y.tab.c, y.tab.h:
	  - don't leave file handle open on error

2005-07-12 13:29  adx

	* src/: ircd_parser.y, y.tab.c, y.tab.h:
	  - improved error reporting for SSL-related conf entries.

2005-07-12 12:19  db

	* src/modules.c:
	  - No code changes, just filling in more comment headers

2005-07-12 07:59  michael

	* src/y.tab.c:
	  - Updated y.tab.c

2005-07-12 07:19  db

	* include/modules.h, src/ircd.c, src/ircd_parser.y, src/modules.c:
	  - don't load modules immediately when given in ircd.conf add them to
	    a dlink_list and load them after load_all_modules but before
	    load_core_modules

2005-07-12 06:37  michael

	* include/modules.h, include/s_conf.h, src/csvlib.c:
	  - Fixed compile error as reported by Peter Evans
	  - Fixed another compiletime warning caused by illegal casting

2005-07-12 06:12  adx

	* src/: ircd.c, modules.c:
	  - moved add_capability(CAP_HOPS) to right place

2005-07-11 20:44  adx

	* modules/core/m_mode.c:
	  - the comment was ok, reverting that change

2005-07-11 19:35  metalrock

	* contrib/help/opers/testmask, doc/whats-new.txt:
	   - Documented testmask.

2005-07-11 19:19  metalrock

	* INSTALL, README.FIRST, TODO, configure, configure.ac,
	  tools/.cvsignore, tools/Makefile.in, tools/README,
	  tools/convertconf.c, tools/convertilines.c,
	  tools/convertklines.c, tools/viconf.c:
	   - Removed convertconf and viconf.
	   - Updated documentation.

2005-07-11 17:18  adx

	* modules/core/m_sjoin.c:
	  - the same here

2005-07-11 17:05  adx

	* src/channel.c:
	  - send_mode_list: don't break line if the overflowing character is a
	  space

2005-07-11 17:00  adx

	* modules/core/m_mode.c, modules/core/m_sjoin.c,
	  src/channel_mode.c:
	  - fixed BMASK

2005-07-11 16:13  adx

	* src/: s_conf.c, s_user.c:
	  - get rid of RPL_ISUPPORT tokens changing their positions on
	  /rehash.

2005-07-11 15:49  adx

	* src/s_conf.c:
	  - fixed a core in init_issupport

2005-07-11 15:40  adx

	* modules/m_accept.c, modules/m_list.c, src/ircd.c,
	  src/messages.tab, src/s_conf.c, src/s_user.c:
	  - moved a few add_isupport calls

2005-07-11 15:06  db

	* include/motd.h, include/s_user.h, include/supported.h,
	  modules/m_accept.c, modules/m_away.c, modules/m_knock.c,
	  modules/m_list.c, src/channel.c, src/ircd.c, src/motd.c,
	  src/s_conf.c, src/s_user.c:
	  - Added new add_isupport() and delete_isupport()
	    supported strings are generated on the fly with
	    add_isupport("FUNCTION", optional_string, optional_integer);
	    and destroyed with delete_isupport("FUNCTION");

2005-07-11 12:53  adx

	* src/: messages.tab, s_user.c:
	  - fixed some ssl-related messages

2005-07-11 12:33  metalrock

	* README.FIRST:
	   - Fix grammatical errors.

2005-07-11 12:32  adx

	* src/s_bsd.c:
	  - line too long in source

2005-07-11 12:26  metalrock

	* TODO:
	   - Update TODO

2005-07-11 09:15  adx

	* etc/: example.conf, example.conf.quick, example.efnet.conf:
	  - update example confs

2005-07-11 08:00  michael

	* include/numeric.h, messages/ircd-german.lang,
	  messages/ircd-polish.lang, messages/ircd-standard.example.lang,
	  src/messages.tab:
	  - Make RPL_WHOISSSL use the 275 numeric just to keep existing
	    standards with other ircds.  And no I don't know if rb uses it for
	  sth. else.  I don't care.
	  - Updated ircd-german.lang

2005-07-11 07:36  adx

	* src/s_user.c:
	  - fixed compiler warning

2005-07-11 01:00  metalrock

	* src/: y.tab.c, y.tab.h:
	   - Rebuilt y.tab.* with bison.

2005-07-11 00:20  db

	* src/ircd_parser.y:
	  - FLAGS_ALL was replaced by UMODE_ALL

2005-07-11 00:15  db

	* src/s_misc.c:
	  - Returning a pointer to an automatic variable is bad, declare it
	  static

2005-07-11 00:13  db

	* include/s_misc.h:
	  - fixed missing ; on end of prototype

2005-07-10 23:29  metalrock

	* configure, configure.ac:
	   - Use configure.ac to generate configure with autoconf.

2005-07-10 23:03  adx

	* configure, include/fdlist.h, include/listener.h,
	  include/numeric.h, include/s_bsd.h, include/s_conf.h,
	  include/s_misc.h, include/send.h, include/stdinc.h,
	  messages/ircd-polish.lang, messages/ircd-standard.example.lang,
	  modules/m_whois.c, src/fdlist.c, src/fileio.c, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/lex.yy.c,
	  src/listener.c, src/messages.tab, src/packet.c, src/s_bsd.c,
	  src/s_misc.c, src/s_serv.c, src/s_user.c, src/send.c,
	  src/y.tab.c, src/y.tab.h:
	  - added client SSL/TLS support, based on what I saw in knight's
	    patch.  I did completely no testing, you're welcome.

2005-07-10 21:19  metalrock

	* contrib/m_flags.c, contrib/m_killhost.c, contrib/m_spoof.c,
	  modules/m_gline.c:
	   - Added wildcard checking to killhost.
	   - Use the generic valid_wild_card function instead of a seperate
	     one for glines.
	   - Prototype cleanups.

2005-07-10 20:36  metalrock

	* contrib/README, contrib/m_change.c, contrib/m_etrace.c,
	  src/channel_mode.c:
	   - Documented etrace.
	   - Fixed core in etrace.
	   - Prototype cleanups.

2005-07-10 15:55  metalrock

	* etc/example.efnet.conf:
	   - Missing an s.

2005-07-10 15:46  adx

	* RELNOTES, contrib/help/opers/umode, contrib/help/users/umode,
	  doc/modeg.txt, doc/modes.txt, etc/example.conf,
	  etc/example.efnet.conf, include/client.h, src/client.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/lex.yy.c, src/y.tab.c,
	  src/y.tab.h:
	  - added umode +G, a softer and nicer variant of +g.

2005-07-10 09:53  michael

	* src/balloc.c:
	  - improved block allocator statistics. i.e. show free/used/total
	  elements

2005-07-10 08:45  michael

	* modules/m_stats.c:
	  - Make 'STATS z' show the number of active SAFELIST tasks and their
	    memory consumption.  Suggested by adx.

2005-07-10 08:30  michael

	* include/s_debug.h, modules/m_stats.c, src/Makefile.in,
	  src/s_debug.c:
	  - Moved count_memory() to m_stats() and removed s_debug.c

2005-07-10 08:03  michael

	* src/s_debug.c:
	  - Cleaned up count_memory() a bit

2005-07-10 06:12  adx

	* src/channel_mode.c:
	  - actualBan was not initialized here -> core

	  Spotted by: metalrock

2005-07-09 22:01  db

	* include/channel.h, modules/core/m_sjoin.c, src/channel.c,
	  src/channel_mode.c:
	  - use ban len set in struct Ban

2005-07-09 21:28  adx

	* src/channel.c:
	  - fixed calculations in send_mode_list

2005-07-09 20:44  db

	* include/channel.h, include/channel_mode.h, modules/m_knock.c,
	  modules/core/m_sjoin.c, src/channel.c, src/channel_mode.c,
	  src/messages.tab, src/s_debug.c:
	  - rewrite bans so we don't have to do sprintf() each time for ban
	    pattern matching. This splits up bans into nick!user@host pieces,
	  plus sockhost

2005-07-09 19:40  db

	* etc/: example.conf, example.conf.quick, example.efnet.conf:
	  - removed obsolete action in gecos examples

2005-07-09 19:38  michael

	* include/client.h:
	  - Removed outdated comment

2005-07-09 19:19  michael

	* src/hash.c:
	  - Fixed several sun cc related signed vs. unsigned compiletime
	    warnings.  Joan and me wanted to change all struct members to use
	    unsigned char types, but this would again cause other compile
	    warnings with strcpy and friends.

2005-07-09 18:59  db

	* modules/core/m_sjoin.c:
	  - remove annoying error message that might not be for an error at
	  all.

2005-07-09 16:07  lusky

	* HOWTO-CVS: add notes to self on how to create branches

2005-07-09 15:33  lusky

	* RELNOTES, contrib/ircd-hybrid.spec, include/patchlevel.h:
	  - bump patchlevel to 7.2beta1
	  - add beta verbiage back to RELNOTES

2005-07-09 15:29  lusky

	* HOWTO-CVS: add new branch info

2005-07-09 15:13  lusky

	* contrib/ircd-hybrid.spec, include/patchlevel.h: bump patchlevel
	  to 7.1.0

2005-07-09 15:07  adx

	* RELNOTES:
	  - s/a/b/

2005-07-09 15:07  adx

	* RELNOTES:
	  - added info about hybrid forum to RELNOTES

2005-07-09 15:04  lusky

	* RELNOTES:
	  - remove beta verbiage from RELNOTES

2005-07-09 15:01  adx

	* RELNOTES:
	  - updated RELNOTES

2005-07-09 14:48  lusky

	* contrib/ircd-hybrid.spec, include/patchlevel.h: bump patchlevel
	  to 7.1 for release build

2005-07-09 10:24  joant

	* src/: csvlib.c, match.c: Sun WorkShop C specific changes to
	  suppress "statement not reached" errors

2005-07-09 09:55  michael

	* src/s_user.c:
	  - Fixed compiletime warnings (extern vs. static declaration)

2005-07-09 09:27  adx

	* contrib/Makefile.in, contrib/README, contrib/m_change.c,
	  contrib/m_clearchan.c, contrib/m_ojoin.c, contrib/m_opme.c,
	  contrib/m_spoof.c, include/s_user.h, src/s_user.c:
	  - added m_change.c to contrib
	  - updated license of most contrib modules to GPL v2

2005-07-09 09:09  joant

	* configure, configure.ac: modifications for Solaris 10 and
	  associated new Sun WorkShop C

2005-07-08 21:52  michael

	* messages/: Makefile.in, README, ircd-polish.lang:
	  - Updated messages/Makefile.in, messages/README and
	  messages/ircd-polish.lang

2005-07-07 21:49  metalrock

	* src/Makefile.in:
	   - Alphabetize src/Makefile.

2005-07-07 16:47  adx

	* src/: y.tab.c, y.tab.h:
	  - rebuilt parser with bison 1.875

2005-07-07 16:36  michael

	* modules/m_kline.c:
	  - Added requested UNKLINE notice
	  - Fixed incorrect ERR_NOPRIVS usage

2005-07-07 14:38  adx

	* README.FIRST, configure, configure.ac, src/Makefile.in,
	  src/lex.yy.c, src/y.tab.c, src/y.tab.h:
	  - as with configure and autoconf, there is really no use forcing
	    people to install flex and bison in order to build the ircd parser.
	    In the end, lex.yy.c, y.tab.c and y.tab.h make a piece of plain C
	    code..

	  - remember to do flex ircd_lexer.l and/or bison -y -d ircd_parser.y
	    when you modify the parser.

2005-07-07 14:03  adx

	* BUGS, INSTALL, README.FIRST:
	  - updated documentation

2005-07-07 13:42  adx

	* contrib/m_capture.c:
	  - this _should_ fix m_capture

2005-07-07 11:52  db

	* RELNOTES:
	  - once I get the egg off of my face...

2005-07-07 11:27  db

	* RELNOTES:
	  - Fixed spelling

2005-07-07 11:04  michael

	* README.FIRST, RELNOTES:
	  - Updated RELNOTES and README.FIRST

2005-07-06 14:09  db

	* Hybrid-team:
	  - ddosen uses the nick bane.

2005-07-06 07:17  michael

	* src/crypt.c:
	  - Fixed typo in comment

2005-07-05 18:53  metalrock

	* modules/m_users.c, src/s_user.c:
	   - Fix compile errors.

2005-07-05 17:05  michael

	* include/hash.h, src/hash.c, src/ircd.c:
	  - Cleaned up previous safelist changes

2005-07-05 11:58  michael

	* include/client.h, include/hash.h, messages/ayb.lang,
	  messages/ircd-croatian.lang, messages/ircd-danish.lang,
	  messages/ircd-dutch.lang, messages/ircd-french.lang,
	  messages/ircd-german.lang, messages/ircd-norwegian.lang,
	  messages/ircd-polish.lang, messages/ircd-russian.lang,
	  messages/ircd-spanish.lang, messages/ircd-standard.example.lang,
	  messages/ircd-swedish.lang, modules/m_list.c, modules/m_users.c,
	  src/balloc.c, src/client.c, src/hash.c, src/ircd.c,
	  src/messages.tab, src/s_user.c:
	  - Massive SAFELIST speedup. A delay of 5 seconds wasn't really
	    acceptable, especially not on larger networks like EFNet where a
	    LIST could take up to a few minutes.

	  - RPL_LOCALUSER/RPL_GLOBALUSER numeric and block allocator
	    changes as discussed on IRC

2005-07-03 17:03  lusky

	* include/patchlevel.h: bump patchlevel to 7.1rc4

2005-07-03 15:32  db

	* Hybrid-team, src/irc_res.c: Date: Sun, 3 Jul 2005 21:03:40 +0200
	  (CEST) From: Dragan Dosen <ddosen@pauk.ffzg.hr>

	  Hi..

	  Every time I run /rehash or /rehash dns, there is one more new
	  timeout_resolver event in events list /stats E.

	  >From ircd.log (few lines like this one):

	          Event table is full! (50)

	  My ircd is ircd-hybrid-7.1rc3.

	  After that, I made one change in src/irc_res.c file, in function
	  restart_resolver(). Now, /rehash and /rehash dns works ok..

	  ...

	  They were right.

2005-07-01 21:44  db

	* BUGS, contrib/libc_vprintf.c, contrib/vprintf_fix.patch:
	  - added bug report and workaround

2005-07-01 19:02  michael

	* tools/convertconf.c:
	  - Fixed typo ..

2005-07-01 18:39  michael

	* tools/convertconf.c:
	  - Fixed convertconf so that it can deal with compressed links
	  ('little c')

2005-07-01 10:22  adx

	* RELNOTES:
	  - updated RELNOTES

2005-07-01 09:39  michael

	* src/channel.c:
	  - Fixed compile errors

2005-07-01 09:29  michael

	* src/channel.c:
	  - Got rid of check_banned()

2005-07-01 09:01  michael

	* src/channel.c:
	  - Cleaned up can_join() and destroy_channel()

2005-07-01 07:49  michael

	* RELNOTES:
	  - Updated RELNOTES

2005-06-30 21:16  db

	* etc/: example.conf, example.efnet.conf:
	  - added ~ documentation

2005-06-30 20:44  db

	* src/s_user.c:
	  - don't let IPs of our spoofed clients leak out as they connect to
	  us

2005-06-30 20:04  michael

	* modules/m_accept.c:
	  - Rewrote build_nicklist() to be more cleaner and readable

2005-06-30 19:37  michael

	* modules/m_accept.c:
	  - Rewrite list_accepts() and make sure to remove trailing spaces

2005-06-30 18:31  adx

	* modules/m_whois.c:
	  - apart from the s_user.c:introduce_client fix, it's a good idea to
	    avoid showing opers' IPs to non-admins for now, since there are
	    probably many broken servers around.

2005-06-30 15:49  michael

	* modules/m_accept.c, src/messages.tab:
	  - Changed RPL_ACCEPTLIST as discussed on IRC
	  - Misc. list_accepts() fixes

2005-06-29 19:59  metalrock

	* modules/m_invite.c:
	   - Only allow chanops to invite if channel is +i, even if
	     invite_ops_only = no.

2005-06-29 19:46  metalrock

	* doc/modeg.txt, modules/m_xline.c:
	   - Fix spelling error.

2005-06-29 19:42  metalrock

	* RELNOTES, doc/modeg.txt, etc/example.conf,
	  etc/example.conf.quick, etc/example.efnet.conf, include/s_conf.h,
	  modules/m_info.c, modules/m_invite.c, modules/m_links.c,
	  modules/m_testmask.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_conf.c:
	   - Added invite_ops_only config option.
	   - Updated umodeg documentation.

2005-06-29 07:10  michael

	* modules/m_whois.c:
	  - Take out the trailing space in the WHOIS channel list

2005-06-28 19:16  adx

	* contrib/m_spoof.c:
	  - it's better to have remote /spoof feature disabled by default.

2005-06-28 18:55  adx

	* modules/m_who.c:
	  - cleaned up /who

2005-06-28 17:31  metalrock

	* RELNOTES:
	   - Documented change to invite in RELNOTES

2005-06-28 17:26  adx

	* modules/m_names.c, src/channel.c:
	  - cleaned up /names, don't show @%+ status for clients that are
	    presented in context of an * pseudo-channel (not +i, but not on
	    any channels known to source_p)
	  - slight optimization for channel_member_names()

2005-06-28 16:20  adx

	* modules/m_whois.c:
	  - let +i users see themselves on wildcard /whois output
	    (spotted by Michael)

2005-06-28 16:16  adx

	* include/channel_mode.h, modules/m_whois.c, src/channel.c:
	  - removed unnecessary chptr!=NULL check from SecretChannel macro
	  - removed ParanoidChannel which was never used
	  - added PrivateChannel to check +p (regardless of +s state)
	  - fixed channel_pub_or_secret()
	  - use whois_person() instead of single_whois() if no wildcards

2005-06-28 16:03  db

	* modules/m_invite.c:
	  - reverted last invite commit. Only allow invite to chanops

2005-06-28 15:47  adx

	* include/channel_mode.h, modules/m_whois.c:
	  - cleaned up and simplified m_whois
	  - removed unused HiddenChannel macro
	  - PubChannel should check only +s (it used to check either +s or
	    +p), this way /whois replies will show private channels if they are
	  not secret.

2005-06-27 21:56  metalrock

	* modules/m_invite.c:
	   - Allow invites from non-ops when channel is not invite only.

2005-06-27 20:21  michael

	* modules/m_invite.c:
	  - Make sure source_p is a local client before calling
	  flood_endgrace() on it

2005-06-27 18:13  michael

	* include/send.h, modules/m_invite.c, src/send.c:
	  - Fixed an INVITE bug (spotted by diane)
	  - Removed sendto_one_prefix()

2005-06-26 20:32  metalrock

	* include/tools.h, src/list.c:
	   - Remove the rest of the slink stuff.

2005-06-26 20:18  db

	* configure, configure.ac, include/list.h, include/setup.h.in,
	  include/tools.h, src/ircd.c, src/list.c, src/tools.c:
	  - slink is not used so it is only wasting some memory.

2005-06-24 18:54  db

	* src/version.c.SH:
	  - NULL is not defined here and seeing as it is just 0 anyway, may as
	    well revert this part.

2005-06-24 18:45  db

	* RELNOTES:
	  - missed one

2005-06-24 18:07  db

	* RELNOTES:
	  - updated RELNOTES

2005-06-24 15:53  michael

	* src/: balloc.c, channel.c, client.c, dbuf.c, hash.c, list.c,
	  s_conf.c, s_user.c:
	  - Let BlockHeapAlloc() take care of zeroing the memory

2005-06-24 15:26  michael

	* doc/technical/iauth.txt, doc/technical/index.txt,
	  src/ircd_lexer.l, src/ircd_parser.y, src/ircdauth.c:
	  - Removed several iauth leftovers

2005-06-24 06:00  michael

	* src/version.c.SH:
	  - Updated version.c.SH

2005-06-24 02:06  michael

	* src/irc_res.c:
	  - Don't register a read event if we cannot open resolver's file
	    descriptor (which can happen if one does a simple "REHASH DNS" on a
	  full server)

2005-06-24 01:51  michael

	* src/: irc_res.c, listener.c, s_auth.c, s_bsd.c, s_serv.c:
	  - Removed a couple of redundant set_non_blocking() calls.  This job
	    is already done by comm_open() and comm_accept()

2005-06-24 01:31  michael

	* src/s_auth.c:
	  - Changes to use sendto_one() for sending AUTH notices in order to
	    work properly with non-blocking sockets

2005-06-23 18:29  adx

	* src/ircd_parser.y:
	  - flags were lost when multiple user="..." entries
	    were given in an oper{} block; fixed.

2005-06-23 12:04  michael

	* contrib/m_opme.c, modules/m_tb.c, src/s_conf.c:
	  - Replaced some %ld conversion specifiers with %lu
	  - Removed iphash_stats()

2005-06-23 07:38  adx

	* contrib/: m_capture.c, m_clearchan.c:
	  - fixed compile errors

2005-06-23 07:33  adx

	* contrib/m_capture.c, contrib/m_force.c, include/s_conf.h,
	  modules/m_kline.c, src/s_conf.c:
	  - make m_capture, m_force use ENCAP << this needs testing >>
	  - allow capturing a client regardless of its server
	  - propagate masked capture throughout the network.. oh yes.
	  - make valid_wild_card more flexible (accepts any number of
	    arguments to check) and fixed a bug which forbade /capture
	  somenick!*@* (for example).

2005-06-23 06:55  michael

	* contrib/m_killhost.c:
	  - Why should we reprint bufhost each time a client is exited??
	  Fixed.

2005-06-23 06:33  michael

	* contrib/m_ojoin.c:
	  - Stop OJOIN from sending malformed SJOINs

2005-06-23 06:03  michael

	* contrib/m_ojoin.c:
	  - Made OJOIN_MULTIJOIN the default and removed its dumb definition

2005-06-23 05:33  michael

	* contrib/m_clearchan.c, contrib/m_help.c, contrib/m_spoof.c,
	  include/channel_mode.h, include/hostmask.h, modules/m_testline.c,
	  modules/core/m_join.c, modules/core/m_sjoin.c,
	  src/channel_mode.c, src/hostmask.c:
	  - Fixed several compiletime warnings

2005-06-23 00:48  metalrock

	* contrib/m_spoof.c:
	   - Display missing flag instead of needing a yes/no.

2005-06-22 23:52  db

	* src/irc_string.c:
	  - revert last commit. NUL is a '\0' byte, not a NULL which is a
	    pointer Not the same at all.

2005-06-22 23:32  metalrock

	* src/irc_string.c:
	   - More NUL -> NULL

2005-06-22 23:27  metalrock

	* src/irc_string.c:
	   - NUL -> NULL

2005-06-22 20:16  db

	* modules/m_knock.c:
	  - Why use internal version of is_banned ?

2005-06-22 19:39  adx

	* contrib/m_operspy.c, etc/example.conf, etc/example.efnet.conf,
	  include/irc_string.h, include/numeric.h, include/s_conf.h,
	  messages/ircd-polish.lang, messages/ircd-standard.example.lang,
	  modules/m_whois.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/messages.tab, src/s_conf.c:
	  - use our native message translation system instead of
	    default_operstring & default_adminstring taken from ratbox

2005-06-22 18:45  michael

	* include/supported.h:
	  - Added ELIST to 005 tokens

2005-06-22 18:37  michael

	* modules/Makefile.in, modules/m_dmem.c, src/modules.c: -Removed
	  DMEM module

2005-06-22 18:12  adx

	* contrib/: Makefile.in, README, m_spoof.c:
	  - added m_spoof.c for comfortable, local and remote auth{}
	  configuration

2005-06-22 16:34  adx

	* modules/m_list.c:
	  - fixed compile error

2005-06-22 12:56  adx

	* contrib/m_operspy.c, include/irc_string.h, modules/m_list.c,
	  src/hash.c, src/match.c, src/resv.c:
	  - added match_chan() to match.c: use it when you're matching channel
	  names
	  - fixed safelist

2005-06-22 11:55  adx

	* contrib/m_operspy.c, modules/m_testline.c, src/resv.c:
	  - fixed match_find_resv() and /operspy list to work with # wildcards
	  - safelist still needs to be fixed
	  - misc style corrections

2005-06-22 11:42  adx

	* src/: irc_string.c, match.c:
	  - minor style fixes
	  - fixed compile warning

2005-06-22 11:29  adx

	* src/match.c:
	  - cleaned up match_esc and collapse* (2)
	  - finally introduced # wildcard ("any digit")
	  - question: what about client compatibility?

2005-06-22 10:59  adx

	* src/match.c:
	  - cleaned up match (1)

2005-06-21 17:34  michael

	* modules/m_invite.c:
	  - Added a missing colon

2005-06-21 14:34  db

	* src/messages.tab:
	  - corrected simple typo 707 was repeated twice

2005-06-20 06:52  michael

	* src/channel.c:
	  - Save a trailing space on each NAMES reply

2005-06-18 16:27  bill

	* contrib/help/opers/join:
	  - vchans are gone, remove them from help

2005-06-18 06:50  michael

	* src/send.c:
	  - Forgot the half of the sendto_one_prefix() changes

2005-06-18 06:46  michael

	* include/s_serv.h, include/send.h, modules/m_invite.c, src/ircd.c,
	  src/send.c:
	  - Fixed INVITE so we're again compatible with RB (added INVITE
	  timestamps, etc..)
	  - Disallow non-chanops to use the INVITE command.  I have no idea
	    why we did this.  There is not just one ircd that allows peons to
	    use the INVITE command; even the rfc says you must be a
	  channeloperator to use invite.
	  - Removed PARA capability.  let's always send a invite notice to all
	    channelops like we do in H6

2005-06-15 22:38  db

	* src/s_conf.c:
	  - variables should be initialised to 0 in case count_user_host does
	    not set any variables, i.e. *global. This fixes max_global bug in
	  class.

2005-06-15 01:46  lusky

	* include/patchlevel.h:
	  - bump patchlevel to 7.1rc3

2005-06-14 15:44  db

	* BUGS:
	  - FreeBSD 4.11 only had this bug briefly, it has been corrected.

2005-06-13 05:10  metalrock

	* INSTALL, RELNOTES:
	   - Fixed grammatical errors in INSTALL and added RELNOTES to
	   end of line for consistency.

2005-06-13 04:57  michael

	* etc/: example.conf, example.efnet.conf:
	  - Updated example configuration files

2005-06-13 04:53  michael

	* RELNOTES, include/hostmask.h, include/s_conf.h, src/hostmask.c:
	  - Removed CONF_FLAGS_PASS_IDENTD which also has no function in H6
	  - Prefix i-line with '$' if resv_exempt is defined
	  - Updated RELNOTES
	  - Fixed indenting in some places

2005-06-13 04:27  michael

	* RELNOTES:
	  - Updated RELNOTES

2005-06-13 04:22  michael

	* etc/example.conf, etc/example.efnet.conf, src/client.c,
	  src/ircd_lexer.l, src/ircd_parser.y:
	  - Fixed broken and undocumented can_idle feature

2005-06-12 20:29  michael

	* contrib/m_capture.c:
	  - Don't allow admins CAPTUR'ing themselves
	  - Removed tests which became unnecessary now

2005-06-12 20:17  michael

	* contrib/m_capture.c:
	  - Don't spit out UNCAPTURE notices if the target client wasn't
	  CAPTURE'd

2005-06-12 18:57  db

	* contrib/m_capture.c:
	  - no need to check for wildcard limit in uncapture

2005-06-12 18:42  db

	* contrib/m_capture.c, include/s_conf.h, modules/m_kline.c,
	  src/s_conf.c:
	  - moved valid_kline to s_conf.c (shared code)
	  - added n!u@h for capture and uncapture

2005-06-12 18:13  db

	* contrib/m_capture.c:
	  - capture can now take a user@host instead of a nick

2005-06-12 17:47  michael

	* modules/core/m_nick.c:
	  - Oops! forgot a return

2005-06-12 17:21  db

	* contrib/m_killhost.c:
	  - !IsPerson is sufficient in loop
	  - !IsOperGlobalKill is necessary
	  - ERR_NOPRIVILEGES is appropriate here since there is no flags

2005-06-12 17:06  michael

	* etc/example.conf, etc/example.efnet.conf, include/client.h,
	  include/s_conf.h, modules/core/m_join.c, modules/core/m_nick.c,
	  src/channel.c, src/ircd_lexer.l, src/ircd_parser.y, src/s_user.c:
	  - Added resv_exempt auth flag

2005-06-12 16:57  db

	* contrib/m_killhost.c, modules/core/m_die.c:
	  - change ERR_NOPRIVILEGES to ERR_NOPRIVS
	  - only check for permissions once at top in m_killhost not each time

2005-06-12 16:44  db

	* include/numeric.h, modules/m_trace.c, src/messages.tab:
	  - added RPL_TRACECAPTURED for /trace

2005-06-12 16:30  db

	* modules/m_who.c:
	  - captured clients are shown with # in /who info
	    i.e. ... Dia       H#  db@artemis.db.net (Diane Bruce)

2005-06-12 15:06  db

	* contrib/m_capture.c, src/s_user.c:
	  - only allow capture to admins for now
	  - add hook event for new client registration

2005-06-12 14:45  db

	* contrib/m_capture.c, include/client.h, modules/m_whois.c,
	  src/messages.tab:
	  - removed unnecessary CAPTURED flag
	  - rewrote SetCaptured etc. in terms of handler
	  - rewrote m_capture to use macros instead of hard coding
	  - prohibit capture of another oper
	  - moved : in capture and uncapture RPLs

2005-06-12 14:23  db

	* contrib/m_capture.c, include/client.h, include/numeric.h,
	  modules/m_whois.c, src/messages.tab:
	  - Improved m_capture somewhat. Added uncapture command. Note,
	    that I do not make sure the captured nick is not a server and is
	    not an oper. oper flags should really be cleaned out just in case.
	  - Added captured flag so /whois can show captured clients
	  - Added numeric for captured/uncaptured.

2005-06-12 14:09  michael

	* src/ircd_parser.y:
	  - Fixes to the recent parser changes

2005-06-12 13:05  db

	* src/: ircd_lexer.l, ircd_parser.y:
	  - parser changes to allow flags = ~blah
	  - re-add some of the old style parser code to allow old confs to be
	    used note, I will not add back such things as "action = reject;"
	    etc. which are now gone.

2005-06-12 09:56  db

	* BUGS, include/client.h, modules/m_accept.c, src/client.c:
	  - updated BUGS, removed no longer valid hostmasking bug, removed
	    tinycc (Those who use that, deserve what they get), added FreeBSD
	  kqueue bug
	  - When a client changes nick, don't lose their accept list. Thinking
	    about my original reason for blasting both lists, it doesn't seem
	  valid now.
	  - Allow /accept with no parameters and give accept list. I got tired
	    of always accidentally forgetten the *.
	  - When a new accept nick is added, list the entire updated list.

2005-06-12 09:49  adx

	* INSTALL:
	  - mention about --enable-halfops in INSTALL

2005-06-12 09:40  adx

	* RELNOTES:
	  - updated RELNOTES

2005-06-12 08:38  adx

	* src/client.c:
	  - rewritten recurse_send_quits to be more smart about servers
	    behind fakename

2005-06-12 06:59  adx

	* include/s_conf.h, src/ircd_parser.y:
	  - set no auth{} flags by default.

2005-06-11 23:27  michael

	* src/modules.c:
	  - Fixed build with static modules

2005-06-11 20:02  lusky

	* contrib/ircd-hybrid.spec, contrib/ircd.init.in, doc/Makefile.in,
	  etc/Makefile.in, include/Makefile.in, tools/Makefile.in:
	  - fix missing DESTDIR usage in Makefiles
	  - add redhat/fedora-compatible specfile and init script to contrib

2005-06-11 04:24  metalrock

	* contrib/Makefile.in:
	   - Remove m_whois from Makefile.

2005-06-11 04:16  metalrock

	* contrib/m_whois.c:
	   - WHOISACTUALLY has already been implemented in the base, delete
	   the outdated and non-TS6 compatible copy.

2005-06-11 03:41  db

	* modules/core/m_server.c:
	  - Make error message consistent with ms_sid

2005-06-11 03:36  db

	* modules/core/m_server.c:
	  - check for duplicate SID in mr_server as well as ms_sid
	    we didn't check for a locally connecting server having a duplicate
	    sid

2005-06-11 01:59  db

	* src/client.c:
	  - backed out added ERROR for now

2005-06-11 00:33  db

	* RELNOTES, contrib/Makefile.in, modules/Makefile.in,
	  src/ircd_parser.y:
	  - updated RELNOTES
	  - moved m_map.c from contrib to modules so updated Makefiles
	  - corrected invalid SID handling in parser

2005-06-10 21:36  michael

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  etc/simple.conf, src/ircd_parser.y:
	  - exit() ircd if someone specified an invalid SID

2005-06-10 21:09  db

	* src/: client.c, s_conf.c, s_serv.c:
	  - corrected several compile warnings

2005-06-10 21:09  db

	* modules/m_xline.c:
	  - added ms_xline as ENCAP handler

2005-06-10 14:44  db

	* modules/: m_whois.c, m_xline.c:
	  - Don't show the whois actually if the IP is 0

2005-06-10 12:41  db

	* src/: client.c, ircd.c, s_bsd.c, s_serv.c:
	  - Removed last remnants of IAUTH from client.c s_bsd.c
	  - Make sure me.id is 0 before checking for sid from config file
	  - Don't send PASS in TS6 form if no local sid

2005-06-10 10:06  db

	* modules/m_xline.c:
	  - clean up for better interoperability

2005-06-10 08:10  michael

	* src/channel.c:
	  - Fixed an INVITE bug that could be easily abused.  Details
	    regarding this bug have been discussed on IRC
	  - Cleaned up del_invite()

2005-06-08 16:17  db

	* modules/m_xline.c:
	  - Ok, this should fix txlines from other servers, I'll test later
	    tonight after meeting.

2005-06-08 15:40  db

	* modules/m_xline.c:
	  - oops, that should have been a == 0

2005-06-08 15:19  db

	* modules/m_xline.c:
	  - added unxline of temporary xline
	    All temp un?line code should be integrated into one place and
	    generalised.

2005-06-08 05:02  metalrock

	* src/s_conf.c:
	   - get_printable_conf leftovers.

2005-06-08 04:57  metalrock

	* src/messages.tab:
	   - Missing a parameter.

2005-06-08 00:08  metalrock

	* src/modules.c:
	   - Only add CAP_HOPS if we support halfops first.

2005-06-07 23:58  metalrock

	* include/s_serv.h, src/modules.c:
	   - Added CAP_HOPS for halfop compatibility with hybrid 7.0
	   - Spotted by zerocide.

2005-06-07 21:38  db

	* modules/m_whois.c:
	  - fixed core in /whois .oops

2005-06-07 19:08  michael

	* src/: hostmask.c, s_conf.c:
	  - Fixed small memory leak with temporary xlines
	  - Fixed a 'STATS k' core

2005-06-07 18:49  db

	* contrib/m_operspy.c, contrib/m_whois.c, include/client.h,
	  modules/m_challenge.c, modules/m_knock.c, modules/m_oper.c,
	  modules/m_rehash.c, modules/m_userhost.c, modules/m_whois.c,
	  modules/core/m_nick.c, src/channel.c, src/client.c, src/s_auth.c,
	  src/s_bsd.c, src/s_conf.c, src/s_serv.c, src/s_user.c:
	  - move sockhost from localclient to client
	  - copy ip if available in m_nick.c in ms_uid
	  - add whois actually

2005-06-07 09:45  michael

	* etc/: example.conf, example.efnet.conf:
	  - Updated example configuration files

2005-06-07 09:27  michael

	* modules/m_kline.c:
	  - Cleaned up this ill-looking valid_user_host()

2005-06-07 09:18  michael

	* include/hostmask.h, include/s_conf.h, include/s_gline.h,
	  modules/m_gline.c, modules/m_kline.c, modules/m_stats.c,
	  src/client.c, src/csvlib.c, src/hostmask.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c, src/s_gline.c:
	  - Added support for CIDR glines as requested by joan.
	  - Fixed bug in remove_tkline_match() where we would access invalid
	    memory every time a temporary k-line is removed.
	    remove_tdline_match: likewise

2005-06-06 07:38  bill

	* include/ircd.h:
	  - per diane, rehashed_xlines is no longer necessary

2005-06-06 06:57  db

	* src/: ircd.c, s_conf.c:
	  - rehashed_xlines is no longer necessary because xlines are now
	    checked in the same place klines are checked.

2005-06-06 00:23  bill

	* src/ircd.c: Submitted by: Reviewed by: Approved by: Obtained
	  from:

	  - added definition for rehashed_xlines

2005-06-04 08:27  michael

	* include/client.h, modules/m_xline.c, src/client.c, src/ircd.c:
	  - Merged check_xlines() into conf_check_klines() and cleaned it up a
	  tad

2005-06-03 20:04  michael

	* src/s_conf.c:
	  - Fixed a 'STATS o' bug as reported by bill

2005-06-03 18:47  michael

	* include/s_conf.h:
	  - Added default_adminstring and default_operstring char pointers to
	    struct config_file_entry

2005-06-03 17:10  michael

	* contrib/m_operspy.c, contrib/m_whois.c, modules/m_whois.c:
	  - Fixed a typo

2005-06-03 17:00  db

	* modules/m_map.c:
	  - Only allow opers to see SIDs of servers

2005-06-03 17:00  michael

	* contrib/m_operspy.c, contrib/m_whois.c, etc/example.conf,
	  etc/example.efnet.conf, messages/ayb.lang,
	  messages/ircd-croatian.lang, messages/ircd-danish.lang,
	  messages/ircd-dutch.lang, messages/ircd-french.lang,
	  messages/ircd-german.lang, messages/ircd-norwegian.lang,
	  messages/ircd-polish.lang, messages/ircd-spanish.lang,
	  messages/ircd-standard.example.lang, messages/ircd-swedish.lang,
	  modules/m_whois.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/messages.tab, src/s_conf.c:
	  - Added default_operstring and default_adminstring

2005-06-03 16:50  db

	* etc/: example.conf, example.efnet.conf:
	  - added wording for max_local and max_global

2005-06-03 13:22  db

	* src/client.c:
	  - Added "helper" function for banning clients

2005-06-03 12:43  db

	* etc/example.conf, etc/example.efnet.conf, include/s_conf.h,
	  modules/m_info.c, src/client.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c:
	  - get rid of kline_with_connection_closed replace with kline_reason
	    (idea stolen from ratbox)
	  - While at it, clean up the exit reason code.
	    This could be simplified even more with a tiny "helper" function
	    if someone would do it. *hint*

2005-06-02 22:41  db

	* src/client.c:
	  - aconf->passwd in a gline message should have been aconf->reason

2005-06-02 21:10  db

	* etc/example.conf, include/s_conf.h, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c:
	  - Added general{} block expire_tklines_notice yes / no

2005-06-02 20:54  db

	* include/s_conf.h, modules/m_stats.c, modules/m_testline.c,
	  src/hostmask.c, src/s_conf.c:
	  - Get rid of get_printable_conf

2005-06-02 19:42  db

	* include/s_conf.h, modules/m_kline.c, modules/m_xline.c,
	  src/client.c, src/s_conf.c:
	  - rewrote conf system a bit, allowing for more code re-use
	  - added temp xlines

2005-06-01 17:31  db

	* include/s_conf.h, modules/m_kline.c, modules/m_xline.c,
	  src/s_conf.c:
	  - moved valid_tkline() into s_conf.c for now anyway

2005-06-01 16:24  db

	* src/: messages.tab, s_conf.c:
	  - get rid of last remnants of xline warning in m_stats.c

2005-06-01 15:26  db

	* src/: messages.tab, s_conf.c:
	  - ok, fixed stats U to no longer show (null) if missing user/host
	  - added @ for user@host in messages.tab

2005-06-01 14:40  db

	* modules/m_stats.c:
	  - ERR_NOPRIVS should be ERR_NOPRIVILEGS here for now

2005-06-01 14:23  db

	* modules/: m_connect.c, m_gline.c, m_kline.c, m_operwall.c,
	  m_rehash.c, m_restart.c, m_set.c, m_stats.c, m_xline.c:
	  - Missed third param to ERR_NOPRIVS

2005-06-01 14:18  michael

	* src/match.c:
	  - match() improvements

2005-06-01 14:02  db

	* modules/m_connect.c, modules/m_gline.c, modules/m_kline.c,
	  modules/m_operwall.c, modules/m_rehash.c, modules/m_restart.c,
	  modules/m_set.c, modules/m_stats.c, modules/m_xline.c,
	  src/client.c, src/ircd_parser.y, src/s_user.c:
	  - ERR_NOPRIVILEGES means you aren't an oper, ERR_NOPRIVS means you
	    are an oper but don't have the necessary privileges for that
	    command.  This impacts m_kline, m_rehash, m_restart, m_operwall,
	    m_gline, m_connect m_set, m_stats
	  - rewrote m_xline.c duplicated logic from m_kline.c for ON server
	  - removed "action" in xline, no one was using it anyway.
	    This impacts m_xline and ircd_parser.y

2005-05-31 19:18  michael

	* src/resv.c:
	  - Have match_find_resv() traversing the resv_channel_list dlink list
	    instead of indexing thru the entire hashtable

2005-05-31 19:10  michael

	* include/hash.h, include/resv.h, src/hash.c, src/resv.c:
	  - Moved match_find_resv() to resv.c

2005-05-31 07:15  metalrock

	* modules/m_testline.c:
	   - testgecos, not testline

2005-05-31 06:45  metalrock

	* messages/ircd-standard.example.lang:
	   - Update lang file.

2005-05-31 06:42  metalrock

	* include/modules.h, modules/m_testmask.c, src/modules.c:
	   - Fix build with static modules.

2005-05-31 00:01  db

	* modules/: Makefile.in, m_testline.c, m_testmask.c:
	  - corrected documentation in m_testline.c slightly (nothing is
	  returned)
	  - added our own version of m_testmask.c

2005-05-30 23:03  db

	* include/s_conf.h, src/client.c, src/messages.tab, src/s_conf.c,
	  src/s_user.c:
	  - add X line usage counts
	  - prepare to switch to x vs. X

2005-05-30 22:04  db

	* src/csvlib.c:
	  - fixed spelling mistake.

2005-05-30 21:32  db

	* include/hash.h, modules/m_testline.c, src/hash.c:
	  - added look for resv channels and resv nicks in m_testline.c
	    I don't think it belongs there but..

2005-05-30 20:47  michael

	* src/s_serv.c:
	  - Cleaned up show_capabilities() a bit

2005-05-30 20:43  db

	* src/resv.c:
	  - No functional code changes so left untested for now
	  - added header comments, removed unused #if 0 code

2005-05-30 20:30  michael

	* etc/example.efnet.conf:
	  - Removed extraneous */

2005-05-30 18:42  db

	* etc/: example.conf, example.efnet.conf:
	  - added documentation for burst_away

2005-05-30 18:29  michael

	* etc/example.conf, etc/example.efnet.conf, include/s_conf.h,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c, src/s_serv.c:
	  - Added burst_away feature

2005-05-30 17:46  db

	* modules/m_testline.c, src/messages.tab:
	  - clean up m_testline.c

	  Still need to add resv checking.

2005-05-30 17:18  michael

	* modules/m_stats.c:
	  - Fixed a STATS ? bug I introduced

2005-05-30 12:20  adx

	* contrib/m_force.c:
	  - fixed desync when forcejoining an existing &channel
	  - update last_joined_time also when joining an *existing* channel
	  - allow FORCEJOIN to be handled via ENCAP as well
	    (maybe it's the better way?)

2005-05-30 12:02  adx

	* contrib/m_force.c:
	  - fixed invalid SJOIN message in m_force, which could cause desyncs
	    with non-TS6 servers when creating new channels.

2005-05-30 09:19  michael

	* configure, configure.ac, include/client.h, include/s_stats.h,
	  include/setup.h.in, include/stdinc.h, modules/m_stats.c,
	  src/client.c, src/messages.tab, src/packet.c, src/s_bsd.c,
	  src/s_log.c, src/s_stats.c, src/send.c:
	  - Fixed a "STATS t" bug not showing the correct number of servers
	  - Made the send/recv byte counters 64bit ints.  This way we can deal
	    with values up to 16 Exabyte without requiring us to have a seconds
	    counter to handle overflows.

2005-05-29 20:26  michael

	* src/motd.c:
	  - And other compilers may complain due to a missing default.  Let's
	  fix this right

2005-05-29 19:44  metalrock

	* include/numeric.h, messages/ircd-french.lang,
	  messages/ircd-polish.lang, messages/ircd-standard.example.lang,
	  src/motd.c:
	   - Removed unused numeric.
	   - Updated translations with new numerics.
	   - gcc 3.* doesn't like } after a :

2005-05-29 16:33  db

	* modules/m_testline.c, modules/core/m_message.c, src/messages.tab:
	  - (char *) is redundant in front of a strchr() (m_testline.c)
	  - added numerics for umode g

2005-05-29 11:05  michael

	* src/ircd_parser.y:
	  - Fixed broken operwall operflag
	  - Removed redundant specific_ipv4_vhost assignmet

2005-05-29 09:49  michael

	* src/ircd_signal.c:
	  - Delete ircd.pid on SIGTERM

2005-05-29 08:55  db

	* include/client.h, include/numeric.h, modules/m_admin.c,
	  modules/m_links.c, modules/core/m_mode.c, src/client.c,
	  src/messages.tab, src/motd.c, src/send.c:
	  - brought over numerics from ratbox
	  - simplified me/from id vs. name (as per adx)
	  - cleaned up motd.c code as part of bringing in oper motd numerics

2005-05-29 02:06  metalrock

	* src/ircd_lexer.l:
	   - Missing hidden_oper from scanner.

2005-05-29 01:51  metalrock

	* src/ircd_lexer.l:
	   - Missing remoteban in the scanner.

2005-05-28 23:46  michael

	* etc/example.conf, etc/example.efnet.conf, include/client.h,
	  modules/m_kline.c, modules/m_operwall.c, modules/m_stats.c,
	  src/ircd_parser.y:
	  - finish off new remoteban, operwall and hidden_oper oper flags.
	    (oper_spy currently doesn't do anything)

2005-05-28 23:33  adx

	* modules/core/m_sjoin.c:
	  - make ms_sjoin break the rewritten line if necessary

2005-05-28 23:09  adx

	* modules/core/m_sjoin.c, src/channel.c:
	  - one more fix for SJOIN line breaking calculations

2005-05-28 23:00  adx

	* src/channel.c:
	  - fixed desync due to sending SJOIN longer than BUFSIZE
	    (incorrect line breaking calculations)

2005-05-28 22:53  adx

	* configure, configure.ac, contrib/halfops.diff,
	  contrib/m_clearchan.c, contrib/m_force.c, contrib/m_ojoin.c,
	  include/channel_mode.h, include/setup.h.in, include/supported.h,
	  modules/m_invite.c, modules/core/m_join.c, modules/core/m_kick.c,
	  modules/core/m_message.c, modules/core/m_sjoin.c, src/channel.c,
	  src/channel_mode.c, src/messages.tab:
	  - reintegrated contrib/halfops.diff with the source.
	    By default, halfops are disabled, you can use --enable-halfops
	    to add support for them from the configure level.

	    This was done after consulting with the coders, and don't touch
	    it before you do so as well. (After all, there's no rational
	    reason to keep this out of the main tree.)

2005-05-28 21:11  db

	* src/ircd_parser.y:
	  - This more or less makes the conf parser compatible with old style
	    ircd-7 and current ratbox.

2005-05-28 20:59  michael

	* src/packet.c:
	  - FINALLY fixed that damn lag issue

2005-05-28 16:44  michael

	* src/ircd_parser.y:
	  - Fixed broken spoofs

2005-05-28 15:58  db

	* messages/ircd-danish.lang:
	  - updated Xride's contact info

2005-05-28 15:55  db

	* Hybrid-team:
	  - Added Xride, who did our Danish translations. At his request.

2005-05-28 15:25  michael

	* include/send.h, src/s_serv.c, src/send.c:
	  - The incrementation of current_serial is now not longer required -
	  removed

2005-05-28 15:00  adx

	* include/balloc.h:
	  - fixed compiler warning about struct Client being undefined

2005-05-28 14:56  adx

	* include/client.h, src/s_serv.c:
	  - this fixes desyncs on huge bursts. Basically the bug was in
	    abusing target_p->serial to mark channel members as already
	    bursted.  Now, we use FLAGS_BURSTED instead.

2005-05-28 14:35  adx

	* src/s_serv.c:
	  - reverted last commit. We still have the problem with abusing
	    target_p->serial which is for other means.

2005-05-28 14:27  adx

	* src/s_serv.c:
	  - fixed serial not being incremented in burst_members()

2005-05-28 13:30  adx

	* modules/core/m_server.c:
	  - fixed arguments order for DLINK_FOREACH_SAFE

2005-05-28 13:22  adx

	* modules/core/m_server.c:
	  - next patch to handle masked servers. This stops us from
	    propagating SID messages for servers behind a mask. Note this breaks
	    ratbox compatibility, but they aren't gonna use server masking with
	    TS6 anyway.. This is currently intended for hybrid-only networks.

2005-05-28 09:48  michael

	* modules/m_map.c:
	  - Simple mod to show all SIDs (if we have any) in MAP.  Idea taken
	  from RB.

2005-05-28 09:38  michael

	* modules/m_map.c, include/balloc.h, src/balloc.c, src/channel.c,
	  src/client.c, src/dbuf.c, src/hash.c, src/list.c, src/s_conf.c,
	  src/s_debug.c, src/s_user.c:
	  - Another mempool statistics improvement
	  - replace a strncat with strlcat

2005-05-27 16:16  adx

	* src/parse.c:
	  - first patch to handle servers hidden behind fakename="..."
	    with TS6 enabled. Not tested yet..

2005-05-27 08:17  michael

	* etc/: example.conf, example.efnet.conf:
	  - Fixed grammatical errors here, too

2005-05-26 08:38  metalrock

	* etc/example.conf:
	   - Fix grammatical errors.

2005-05-26 08:21  metalrock

	* src/ircd_parser.y:
	   - ircd_parser.y:537: error: `IRC_MAXSID' undeclared (first use in
	   this function)

2005-05-26 06:50  michael

	* include/s_conf.h, src/ircd_parser.y:
	  - removed unused ip_value struct

2005-05-25 21:24  michael

	* modules/m_encap.c:
	  - Fixed bug in ms_encap where we always executed a wrong message
	  handler

2005-05-25 21:19  michael

	* src/ircd_parser.y:
	  - Added a missing bracket

2005-05-25 19:26  michael

	* etc/: example.conf, example.efnet.conf:
	  - Updated configuration files

2005-05-25 16:56  michael

	* src/ircd_parser.y:
	  - I didn't know we have a working IsAlNum(). Cool :P

2005-05-25 16:08  michael

	* src/ircd_parser.y:
	  - Improved SID sanity check

2005-05-25 13:43  michael

	* etc/example.conf, etc/example.conf.quick, modules/m_stats.c,
	  src/hostmask.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_conf.c, src/s_user.c:
	  - added test to make sure a SID starts with a digit
	  - added support for  class "name"{},  connect "name"{} and
	    oper "name"{}  style blocks
	  - rewrote all oper, auth and connect config options to use the new
	    "flag =" directive, as discussed on IRC
	  - removed "auth::restricted" leftovers

2005-05-25 09:59  michael

	* servlink/: control.c, io.c:
	  - Made send_error spit out the real error string if inflateInit,
	    deflateInit, inflate or deflate fails, not just the error code.

2005-05-23 06:16  michael

	* etc/example.conf, include/s_conf.h, modules/m_info.c,
	  modules/m_version.c, src/s_conf.c:
	  - removed crypt_oper_password leftovers

2005-05-23 06:09  michael

	* RELNOTES, etc/example.conf, etc/example.conf.quick,
	  etc/example.efnet.conf, etc/simple.conf, modules/m_info.c,
	  modules/m_oper.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_serv.c:
	  - Removed old general:crypt_oper_password config option I added some
	    months ago and replaced it with operator:encrypted.  This makes it
	    possible to enable or disable password encryption for each single
	  oper block.
	  - Fixed compiletime warning in m_info.c

2005-05-22 19:57  metalrock

	* contrib/halfops.diff:
	   - Update halfops diff with current code.

2005-05-22 19:33  adx

	* modules/m_info.c:
	  - fix for previous commit

2005-05-22 18:06  adx

	* modules/m_info.c, src/version.c.SH:
	  - make /info show empty lines

2005-05-22 15:39  joshk

	* configure, configure.ac: fix apple gcc detection

2005-05-22 15:15  joshk

	* modules/m_whois.c: fix a typo (first commit in months!)

2005-05-22 15:05  michael

	* modules/: m_invite.c, m_kline.c, m_whois.c:
	  - Fixed compiletime errors caused by previous commit :(
	  - m_invite() is only called for local users, so there is no sense to
	    report an ERR_NOTARGET if we weren't able to find the target nick

2005-05-22 13:35  michael

	* RELNOTES:
	  - typo ;P

2005-05-22 13:29  michael

	* RELNOTES, modules/core/m_sjoin.c:
	  - Fixed possible channeldesyncs with TS5 servers as discussed on IRC

2005-05-22 13:20  michael

	* RELNOTES, contrib/m_operspy.c, contrib/m_whois.c,
	  include/client.h, modules/m_gline.c, modules/m_invite.c,
	  modules/m_ison.c, modules/m_kline.c, modules/m_lljoin.c,
	  modules/m_userhost.c, modules/core/m_kick.c,
	  modules/core/m_kill.c, modules/core/m_message.c,
	  modules/core/m_sjoin.c, src/channel_mode.c, src/client.c,
	  src/parse.c, src/s_serv.c, src/s_user.c:
	  - Don't allow locally connected users to do hash lookups by ID, e.g.
	    disallow MODE 0BYAAAAAB +xyz

2005-05-21 17:48  michael

	* src/s_user.c:
	  - Removed an outdated XXX

2005-05-19 18:54  michael

	* contrib/m_jupe.c:
	  - Don't allow jupes to be set with a NUL reason

2005-05-19 10:10  michael

	* contrib/m_operspy.c:
	  - mo_operspy() has grown into a big bad evil monster.  Rewrote most
	    of it, so it's again readable.

2005-05-18 22:00  lusky

	* include/patchlevel.h:
	  - bump patchlevel to 7.1rc2

2005-05-17 18:38  michael

	* RELNOTES, modules/core/m_nick.c:
	  - fixed buggy array size which was causing strlcpy to cut off
	    the 50th char of a gecos/realname.  (We're using sizeof(array)
	    as the 3rd strlcpy parameter, BTW)

2005-05-16 12:52  michael

	* RELNOTES, modules/core/m_message.c:
	  - Allow users messaging themselves even if +g
	  - Updated RELNOTES

2005-05-12 12:21  michael

	* include/listener.h, src/listener.c:
	  - Removed unused Listener struct members

2005-05-12 12:01  michael

	* include/client.h, src/listener.c, src/packet.c:
	  - Fixed bug where we could overflow the signal queue when using RT
	    signals.  This also improves daemon's accept efficiency by accepting
	    all pending connections in a single run.
	  - Removed unused definitions in client.h

2005-04-27 00:40  metalrock

	* modules/m_info.c:
	   - Removed extra bracket preventing compile.

2005-04-26 21:59  metalrock

	* contrib/README:
	   - Delete the note that says you need to add the --enable-halfops
	   switch to enable halfops.

2005-04-26 21:57  metalrock

	* contrib/halfops.diff:
	   - Update halfops diff with current changes.

2005-04-26 09:36  michael

	* contrib/example_module.c, contrib/m_clearchan.c,
	  contrib/m_force.c, contrib/m_jupe.c, contrib/m_ojoin.c,
	  contrib/m_opme.c, modules/m_eob.c, modules/m_info.c,
	  modules/m_list.c, src/client.c:
	  - fixed indenting here and there
	  - updated copyright headers

2005-04-26 05:09  michael

	* RELNOTES:
	  - Updated RELNOTES

2005-04-26 04:36  michael

	* src/hash.c:
	  - Again, XOR in a 8-bit random number to reduce the risk of hash
	    degeneration attacks.

2005-04-26 04:24  michael

	* src/hash.c:
	  - Rewrote most of the horrible hash function to use the new
	    Fowler/Noll/Vo algorithm.  Several tests have shown a very low
	    collision rate even with UIDs, so let's stick with it for now.

2005-04-24 08:43  michael

	* README.FIRST, tools/README.mkpasswd, tools/mkpasswd.c:
	  - removed OpenVMS leftovers

2005-04-21 21:43  lusky

	* contrib/vms.diff:
	  - delete vms patch

2005-04-21 00:09  metalrock

	* RELNOTES:
	   - Fixed 2 typos in the RELNOTES

2005-04-20 22:44  lusky

	* RELNOTES:
	  - Update RELNOTES for both 7.1rc1 and 7.1rc2

2005-04-19 09:35  lusky

	* configure, configure.ac, include/patchlevel.h:
	  - bump patchlevel to 7.1rc1
	  - change package version to 7.1

2005-04-19 09:34  lusky

	* etc/Makefile.in:
	  - kludge to work with Solaris make

2005-04-11 10:46  db

	* include/client.h, modules/m_admin.c, modules/m_links.c,
	  modules/core/m_mode.c, src/client.c, src/send.c:
	  - This fixes TS6 compability with m_links m_admin etc.
	    Note that 'c' functions were added to client.c instead of more
	    complex macros.

	  #define ID(x)                   (HasID(x) ? (x)->id : (x)->name)
	  #define ID_or_name(x,client_p)  ((IsCapable(client_p, CAP_TS6) &&
	  HasID(x)) ? (x )->id : (x)->name)

	    ID_or_name alone is pretty complex a compiler call is going to work
	    out just as efficiently with a decent compiler.

	    In keeping with my philosophy throughout, pre-calculation of mostly
	    static strings has also been done when possible. i.e. We know that
	    we are either going to be using an ID or a name, so precalculate
	    that once and use it instead of trying to calculate it each time
	    in a printf like function.

2005-03-29 14:25  michael

	* include/balloc.h, src/balloc.c, src/s_debug.c:
	  - balloc.c: removed unreachable code
	  - added block_heap_get_* functions and made use of it

2005-03-27 19:56  michael

	* configure, configure.ac, include/setup.h.in, src/dynlink.c:
	  - removed outdated configure check for underscore prepended symbol
	  names

2005-03-03 20:14  michael

	* src/packet.c:
	  - Since we don't use linebufs anymore, the Low-Bandwith DoS as
	    described on http://www.securiteam.com/unixfocus/5CP0Q0AD5W.html
	    doesn't apply to 7.1, but doing a flood control on unregistered
	  client connections wouldn't hurt.

2005-02-24 18:13  michael

	* INSTALL:
	  - Reverted previous changes to the INSTALL file.  Hitting ctrl-c to
	    suppress/abort the commit notification email is nothing new, btw.

2005-02-24 17:47  androsyn

	* INSTALL: pwned

2005-02-15 08:43  michael

	* include/list.h, src/list.c:
	  - list.c:make_dlink_node(): It's a good idea to set lp->data to NULL
	    since we use the blockallocator for allocating dlink nodes.  Good
	    for debugging purposes and to prevent trouble caused by invalid
	  pointers.

	    One could replace the now three NULL assignments with a memset, but
	    I prefer a simple assignment for now.

2005-02-02 19:06  michael

	* src/parse.c:
	  - fixed small issue where we would accept commands like 7HOI3 as
	    a valid WHOIS

2005-01-14 15:48  michael

	* INSTALL, RELNOTES, TODO, doc/technical/debug_api.txt,
	  doc/technical/hostmask.txt, doc/technical/index.txt:
	  - updated RELNOTES and some other docs in preparation for an rc

2005-01-11 16:10  db

	* modules/core/m_server.c, src/s_auth.c:
	  - add some rudimentary catching of duplicate adds to dlink lists
	    fail with asserts if NDEBUG is not set

2005-01-11 15:17  db

	* contrib/: README, confgen.pl:
	  - added confgen.pl. Apparently it generates config files from SQL
	    database.  I know very little else about it, but it may be useful to
	    someone hence placed into contrib.

2005-01-07 23:04  michael

	* src/s_conf.c:
	  - Fixed broken build

2005-01-07 20:43  joshk

	* src/s_conf.c: Hi, ma! Fix extraneous "int ret" in
	  lookup_confhost.

2005-01-04 00:52  michael

	* src/: ircd_lexer.l, s_conf.c:
	  - Fixed small bug where yyerror() would report an invalid line
	  number when dealing with multi-line C comments
	  - Made lineno an unsigned integer type
	  - And while we are on it, add never-interactive to scanner's options
	  to speed it up a bit

2005-01-02 00:10  michael

	* src/ircd_parser.y:
	  - fixed a try_connections() core reported by metalrock

2005-01-01 14:09  michael

	* doc/challenge.txt:
	  - updated challenge.txt to reflect the new location of the RSA
	  respond tool

2005-01-01 11:14  michael

	* src/: s_bsd.c, send.c:
	  - fixed incorrect send/recv byte count statistics and a more
	    or less possible LocalUser.sendB short int overflow

2004-12-30 23:37  metalrock

	* modules/core/m_server.c:
	   - Fixed wrong error message in ms_sid.
	   - Moved hostname length check up in ms_server for efficiency.

2004-12-20 17:47  michael

	* Hybrid-team:
	  - changed my email address
	  - fixed the team list so that it is in alphabetical order

2004-12-04 09:49  db

	* include/balloc.h, src/balloc.c:
	  - trivial change to get rid of some confusion here.
	    We used to have a 'blalloc.c' but renamed it to 'balloc.c' the
	    #ifdefs and comments should reflect that. This does not change the
	    code functionally, it is merely cosmetic.

	  Reported by Rachel Llorenna <rachies@gmail.com> (frequency)

2004-11-29 00:40  metalrock

	* modules/m_info.c:
	   - It's counted by bytes and not by lines now, spotted by wacky.

2004-11-10 09:32  michael

	* include/s_stats.h, src/s_stats.c:
	  - s_stats.c: fixed incorrect counting of clients, servers and
	  unknown closes in tstats()

2004-11-08 23:09  db

	* contrib/Makefile.in:
	  - I think this is the right place to add it. If I had my druthers,
	    I think /ltrace should have been modified to add gecos. however.

2004-11-08 23:02  db

	* contrib/m_etrace.c:
	  - added a version of etrace.

2004-11-08 22:59  db

	* src/: irc_res.c, irc_reslib.c:
	  - we were only ever reading 1 nameserver, off by one error
	  - when doing a /dns rehash, resolver fd not re-opened, this
	    immediately leads to the server forever failing to resolve from that
	  point on.

	    code looked over by cyrogen, and tested. I approve.

2004-11-03 02:23  db

	* modules/core/m_server.c: if a pending connect happens to have the
	  same name as an incoming server connect exit it *unless* it also
	  happens to be the same client.

2004-10-31 17:51  adx

	* modules/core/m_server.c: This is a continuation of the previous
	  fix. We need to kill connections that are in progress also when a
	  server is connecting through a remote side or they will be unhashed
	  again.

2004-10-31 17:44  adx

	* include/s_serv.h, modules/m_connect.c, modules/core/m_server.c,
	  src/s_serv.c:
	  - fixed a bug when a fully connected server is not present in the
	    main name hash table. This happened when you started a connection
	    with /connect or AUTOCONN, and before it suceeded, a new server had
	    connected to the ircd with the same name. The second one would
	    connect and the first one (which was in progress, with
	    client_p->name set, but not added anywhere except unknown_list)
	    would be rejected soon with exit_client.  That exit_client call
	    would do del_from_hash_table(client_p->name), effectively taking the
	    first, just connected server out of the hash table.  -- Spotted by
	  db

	    The main change of this fix is adding a check to mr_server that
	    exits all pending connections before introducing the new server.
	    del_from_hash_table(not added name) won't hurt, and done early
	    enough, will prevent ircd from doing odd things.

	    This patch also replaces repeated code of looking up the
	    unknown_list for pending connections by a single function called
	    find_servconn_in_progress. One more fix is that the old algorithm
	    did just irccmp(pending_conn->name, conf->name), which didn't
	    support hostmasking very well. (Now, it is a bidirectional match.)

2004-10-31 16:29  metalrock

	* modules/: m_kline.c, m_xline.c:
	   - Dissalow '"' in kline and xline host/gecos.
	   Reviewed by: db

2004-10-31 15:27  adx

	* src/client.c:
	  - fixed TS bug in change_local_nick. Basically what we did was
	    update client's TS always, even when no real change occured (for
	    example, flood protection stopped it or we were only changing
	  upper/lowercase).

	    This was causing a desync, because other servers didn't know about
	    the NICK command halted due to flooding. This also refers to h7.0
	    (well, h7.1 is coming) and possibly h6.

2004-10-29 10:24  adx

	* src/irc_res.c:
	  - applied stu's patch for IPv6 rDNS lookups

	  Bug reported by: a lot of users Patch submitted by: Stuart Walsh
	  <stu@ipng.org.uk>

2004-10-23 10:47  adx

	* contrib/: Makefile.in, help/opers/cjoin, help/opers/index,
	  help/users/index:
	  - removed help for cjoin

2004-10-20 11:27  adx

	* contrib/m_killhost.c:
	  - fixed core in contrib/m_killhost. Commit from rev 1.9 to 1.10
	    removed the assign 'reason = parv[2]' but the unset variable
	    'reason' was still being used.

2004-10-08 13:41  db

	* contrib/example_module.c:
	  - tiny documentation change to example_module.c
	    last argument in a msgtab is reserved for quarantined clients.

2004-10-07 23:01  metalrock

	* include/m_info.h:
	   - MAXIMUM_LINKS_DEFAULT is a duplicate of maximum_links

2004-10-07 15:35  metalrock

	* include/m_info.h:
	   - CLIENT_FLOOD does not exist anymore, we have client_flood in
	   m_info.c now.

2004-10-07 14:28  adx

	* include/ircd_defs.h, src/match.c:
	  - fixed match_cidr

2004-10-06 14:35  adx

	* src/channel_mode.c:
	  - reverted last change

2004-10-06 10:01  adx

	* src/channel_mode.c:
	  - fixed redundant MODE message problem (on simple modes)

2004-10-03 03:54  metalrock

	* src/: ircd.c, s_conf.c:
	   - idletime was not being set in the right place so idletime never
	   worked.

2004-10-03 02:28  metalrock

	* src/client.c:
	   - Fixed null kline reason for anti-idle kline.

2004-10-03 02:17  metalrock

	* modules/m_info.c:
	   - The idle time in /info is displayed in seconds, not minutes

2004-09-25 10:34  adx

	* Hybrid-team:
	  - updated my email

2004-08-02 01:41  metalrock

	* contrib/halfops.diff:
	   - Forgot to update the halfops diff before the beta release, but oh
	   well the old patch still applied cleanly, just a pile of offset
	  notices.

2004-07-26 21:28  lusky

	* include/patchlevel.h:
	  - bump patchlevel to hybrid-7.1beta1

2004-07-23 16:55  metalrock

	* Hybrid-team:
	   - Removed ievil from Hybrid-Team file per request.

2004-07-22 11:45  bill

	* Hybrid-team:
	  - per his request, move AndroSyn to contributors

2004-07-22 00:05  bill

	* Hybrid-team:
	  - oops, not lists. for the bugs list

2004-07-22 00:02  bill

	* Hybrid-team:
	  - updated hybrid team file

2004-07-21 03:17  metalrock

	* contrib/help/opers/dline:
	   - dlines have an oper reason field, show this in the help doc.

2004-07-18 20:32  michael

	* README.PLATFORMS, RELNOTES:
	  - updated README.PLATFORMS and RELNOTES

2004-07-18 17:52  metalrock

	* doc/modes.txt:
	   - Removed a double 'a'.

2004-07-16 20:12  lusky

	* Hybrid-team, INSTALL, README.FIRST, RELNOTES, doc/ircd.8,
	  doc/messages.txt, messages/README:
	  - change all the-project.org email addresses to ircd-hybrid.org

2004-07-16 19:58  joshk

	* Hybrid-team: move k9 to contributors list, fix his email, by
	  personal request

2004-07-07 23:40  erik

	* include/msg.h:
	  - Added ENCAP_HANDLERS preprocessor definition, so modules can
	    conditionally compile msgtabs for backwards compat

2004-07-07 20:27  erik

	* contrib/example_module.c, contrib/m_capture.c,
	  contrib/m_classlist.c, contrib/m_clearchan.c, contrib/m_ctrace.c,
	  contrib/m_flags.c, contrib/m_force.c, contrib/m_help.c,
	  contrib/m_jupe.c, contrib/m_killhost.c, contrib/m_ltrace.c,
	  contrib/m_mkpasswd.c, contrib/m_ojoin.c, contrib/m_omotd.c,
	  contrib/m_operspy.c, contrib/m_opme.c, modules/m_map.c,
	  contrib/m_whois.c, modules/m_tb.c, include/ircd_handler.h,
	  include/msg.h, modules/m_accept.c, modules/m_admin.c,
	  modules/m_away.c, modules/m_capab.c, modules/m_cburst.c,
	  modules/m_challenge.c, modules/m_close.c, modules/m_connect.c,
	  modules/m_cryptlink.c, modules/m_dmem.c, modules/m_drop.c,
	  modules/m_encap.c, modules/m_eob.c, modules/m_gline.c,
	  modules/m_info.c, modules/m_invite.c, modules/m_ison.c,
	  modules/m_kline.c, modules/m_knock.c, modules/m_links.c,
	  modules/m_list.c, modules/m_lljoin.c, modules/m_llnick.c,
	  modules/m_locops.c, modules/m_lusers.c, modules/m_motd.c,
	  modules/m_names.c, modules/m_nburst.c, modules/m_oper.c,
	  modules/m_operwall.c, modules/m_pass.c, modules/m_ping.c,
	  modules/m_pong.c, modules/m_post.c, modules/m_rehash.c,
	  modules/m_restart.c, modules/m_resv.c, modules/m_set.c,
	  modules/m_stats.c, modules/m_svinfo.c, modules/m_testline.c,
	  modules/m_time.c, modules/m_topic.c, modules/m_trace.c,
	  modules/m_user.c, modules/m_userhost.c, modules/m_users.c,
	  modules/m_version.c, modules/m_wallops.c, modules/m_who.c,
	  modules/m_whois.c, modules/m_whowas.c, modules/m_xline.c,
	  modules/core/m_die.c, modules/core/m_join.c,
	  modules/core/m_kick.c, modules/core/m_kill.c,
	  modules/core/m_message.c, modules/core/m_mode.c,
	  modules/core/m_nick.c, modules/core/m_part.c,
	  modules/core/m_quit.c, modules/core/m_server.c,
	  modules/core/m_sjoin.c, modules/core/m_squit.c, src/hash.c,
	  src/m_error.c, src/modules.c: o Added encap handler type; updated
	  all msgtabs o Added basic handlers for receiving knock, kline,
	  unkline, gline, operwall via encap

	  Submitted by: erik Reviewed by: everyone

2004-07-02 21:10  metalrock

	* configure:
	   - Update configure with the new configure.ac

2004-06-23 04:24  joshk

	* configure.ac: dont' use  = gcc, use

2004-06-14 11:25  bill

	* modules/m_trace.c, src/channel_mode.c:
	  - fixed trace core discovered by jack
	  - fixed ban desync bug discovered by lee

2004-05-24 17:57  bill

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  modules/m_connect.c, modules/m_trace.c:
	  - cosmetic fix to Remote Connect notice
	  - fixed trace handling params
	  - made no_create_on_split enabled by default in the example confs

2004-05-17 20:17  metalrock

	* contrib/halfops.diff, modules/core/m_sjoin.c, src/messages.tab:
	   - Removed modes that don't exist in myinfo reply.
	   - Fixed issue where TS6 enabled servers would remove banlist
	   even if channel has old TS.
	   - Updated halfop patch.

	   sjoin diff reviewed by bill.

2004-05-16 16:19  metalrock

	* modules/m_stats.c:
	   - Fixed stats : return * instead of random things.

	   Reviewed by: everyone

2004-05-12 01:30  metalrock

	* contrib/m_killhost.c:
	   - Fix broken killhost.
	   Reviewed by: everyone

2004-05-08 01:15  metalrock

	* modules/m_tb.c:
	   - Fix tburst logic

	  Reviewed by: bill, ievil

2004-04-27 19:21  metalrock

	* contrib/: halfops.diff, m_force.c:
	   - Fixed screwy sjoin when a user is forcejoined into a channel
	   without a status.
	   - Updated halfop patch for this change.
	   - Reported by wacky.

2004-04-25 23:36  metalrock

	* tools/rsa_respond/configure:
	   - Rebuilt rsa_respond configure with autoconf 2.59 and fix its
	   permissions.  Reported by: wacky

2004-04-21 23:40  bill

	* Hybrid-team, contrib/m_operspy.c, doc/whats-new.txt,
	  modules/core/m_nick.c, modules/core/m_sjoin.c: Submitted by:
	  Reviewed by: Approved by: Obtained from:
	  - per Riedel's request, update his contact information

	  As reported by Lee:

	  - UIDs must be killed on nick collisions, fixed
	  - sjoin code now propogates ban removal after SJOIN

2004-04-12 00:01  metalrock

	* modules/m_xline.c:
	   - Fixed xlines being screwy caused by junk pointer.

2004-04-11 22:11  metalrock

	* contrib/halfops.diff:
	   - Oops, halfop patch in m_sjoin.c applied twice.

2004-04-11 21:57  metalrock

	* contrib/halfops.diff, contrib/m_force.c, include/channel_mode.h,
	  modules/m_invite.c, modules/m_knock.c, modules/m_topic.c,
	  modules/core/m_message.c, modules/core/m_sjoin.c, src/channel.c:
	   - Fix for broken halfops and broken halfops patch.
	   - Removed stale halfop code from source.

	   Reviewed by: Arnvid

2004-04-05 19:27  ievil

	* modules/core/: m_join.c, m_sjoin.c: <sarcasm> Once upon a time
	  said the story teller... Was this little band of params.  They all
	  were controlled by the MAXMODEPARAMS which told them how many they
	  could be in this merry little group of mode params. But the lparms
	  thought that 4 was enough and he couldn't count and he was near
	  sighted.  So little day Lee 'Serial Killer' Oswald came along and
	  kill'd an param.  OOHHH said the lparms, you killed two of my
	  friends.. I so dearly need to replace them... But lparms had forgot
	  that he had set them to 4, so he just inserted 2 new friends into
	  there... 4-1+2 = 5 ;)..  The lparm thought this was a good idea. He
	  counted them all.. Yes that was exactly what I had he thought, and
	  walzed to the big bad MAXMODEPARAMS.  The MAXMODEPARAMS looked at
	  him.. No you cannot go here he said... and slaid them all with a big
	  bad Segment Violation sword... Shrug said the MAXMODEPARAMS ... if
	  had only learnt to use my values instead of his own static ones..
	  </sarcasm>

	  And btw... red wine is good for your healt...

	  Short story by Arnvid 'ievil' Karstad, fix by Lee (fl) and bug
	  invented by booze :)

	  Submitted by:  Arnvid Reviewed by:   Arnvid Obtained from: Lee
	  'SerialKiller' Oswald

2004-04-03 23:56  metalrock

	* modules/m_ping.c:
	   - Fix server crash caused by ping trying to get an sid of a
	   non-directly connected remote server found by Sarisa.

	  Submitted by: Sarisa Reviewed by: db Approved by: db

2004-03-31 21:53  bill

	* modules/m_ping.c, modules/m_pong.c, src/client.c, src/s_serv.c:
	  Submitted by:	lee Reviewed by: Approved by:	diane Obtained from:

	  - fixed ping to accept ids where possible

2004-03-26 15:25  metalrock

	* modules/m_xline.c, src/messages.tab, src/s_conf.c:
	   - Fixed broken xlines.
	   - Only allow the words "REJECT", "WARN", and "SILENT" as
	   xline types, not numbers.
	   - Output stats X with the first char of the type instead
	   of numbers.

	  Reviewed by: everyone

2004-03-23 13:58  metalrock

	* modules/m_xline.c:
	   - Unrevereted previous fix to xline.

	   Approved by: ievil

2004-03-23 05:10  bill

	* modules/m_xline.c:
	  - reverted un-approved commit

2004-03-23 01:07  metalrock

	* modules/m_xline.c:
	   - Check if the xline is valid before placing the xline!

	   Reviewed by: me since nobody was around

2004-03-22 17:52  metalrock

	* contrib/m_operspy.c:
	   - Fixed server crash when ms_operspy gets less than 2 params
	     and removed assert when ms_operspy gets more than 2 params.

	   Reviewed by: db

2004-03-20 13:18  metalrock

	* contrib/README:
	   - Updated README with all contrib modules.
	   Reviewed by: db

2004-03-20 13:18  metalrock

	* contrib/: m_classlist.c, m_ctrace.c:
	   - Fixed crash due to not enough params.
	   Reviewed by: db

2004-03-17 13:34  db

	* src/client.c:
	  - If find_chasing is handed an uid, then its no longer present. uids
	    aren't put into any history hash at all. So. Return ERR_NOTARGET

2004-03-16 23:08  db

	* include/numeric.h, modules/m_invite.c, modules/m_whois.c,
	  modules/core/m_kill.c, modules/core/m_message.c,
	  src/messages.tab, src/parse.c:
	  - added new numeric ERR_NOTARGET, undernet have agreed to use this
	    as well and it will be added to the TS6 spec.
	    The problem is, there are some cases when we used to send an
	    ERR_NOSUCHNICK but with an id we have no nick to reply about.

	  Quickly reviewed by Bill.

2004-03-16 20:34  db

	* modules/core/m_kill.c:
	  - uids are no longer prefixed with a '.' so use an IsDigit() check

2004-03-16 04:11  metalrock

	* modules/m_xline.c:
	   - Check to see if we are sending the xline out to remote
	   servers before we return a "already klined" and exit.

2004-03-15 20:49  bill

	* modules/m_trace.c, src/s_serv.c: Submitted by:	Lee
	  - hunt_server() must also deal with finding our own SID, also we do
	    not want to search SIDs for messages from non-local clients
	  - fix potential leak of ID information in trace

2004-03-15 19:24  db

	* modules/m_ping.c:
	  - restore SPING functionality. ircu does not use SIDs for ping/pong
	    neither shall we.

2004-03-15 16:04  db

	* src/s_serv.c:
	  - revert. as pointed out by Michael, nicks have to be searched as
	    well as servers. *sigh*

2004-03-15 06:02  metalrock

	* src/s_serv.c:
	   - Look for servers in the global server list, not in the
	   global client list.
	   Reviewed byy: db

2004-03-12 17:15  db

	* modules/m_trace.c:
	  - RFC says numbers cannot be in command names
	    and it makes sense that they shouldn't. So renamed TRACE6 to
	    TRACES trace4 to TRACEF

2004-03-11 11:23  db

	* src/s_serv.c:
	  - This case should not happen, i.e. I don't understand how Jack
	    manage to trip it. But the test is good practice anyway.

2004-03-10 03:19  metalrock

	* contrib/help/opers/cmode:
	   - Anonymous ops don't exist anymore, removed from help.
	   - Made cmode +l description make sense.

2004-03-06 17:45  metalrock

	* modules/core/m_join.c:
	   - Fixed case in which /join #emptychan,#existchan gives you ops in
	     both #empty chan and #existchan reported by Garion. What we were
	     doing was if #emptychan was empty, then set them as op status, but
	     not changing their flags back to non-op if #existchan emptycheck
	     fails, therefore user gets op status in #existchan. I tested this
	     fix with Garion and verified working.

2004-03-06 17:28  michael

	* messages/ircd-german.lang:
	  - ircd-german.lang fixes

2004-03-03 06:31  metalrock

	* src/ircd_parser.y:
	   - Fixed compile error caused by previous modules fix.

2004-03-03 00:06  db

	* include/modules.h, src/dynlink.c, src/modules.c:
	  - rewrote mod list code to use our dlink code instead of the **
	  array

	  reviewed by Michael, jack

2004-03-02 17:19  metalrock

	* src/channel.c:
	   - Bad Diane, didn't test before commit =). Fixed compile error.

2004-03-02 12:02  db

	* include/channel.h, src/channel.c, modules/core/m_sjoin.c:
	  - If a malformed SJOIN is received, i.e. one with no users on
	    channel i.e. from my old persistent channels botch, ignore it and
	    destroy the channel. (Yes, I should not have been sending 0 member
	  channels)

	  reviewed by Michael

2004-03-02 02:54  bill

	* src/s_serv.c:
	  - we should send servernames, rather than sids in PINGs, since this
	    param can take wildcards.
	  - this fixes bug #896257

2004-02-28 01:12  metalrock

	* doc/operguide.txt, doc/whats-new.txt, etc/example.conf,
	  etc/example.conf.quick, etc/example.efnet.conf,
	  modules/m_encap.c, modules/m_stats.c, modules/m_xline.c,
	  src/client.c, src/hash.c, src/match.c, src/modules.c:
	   - Fixed some spelling errors and Lazylinks.as.implemented.txt does
	   not exist anymore.

2004-02-27 04:26  metalrock

	* src/s_conf.c:
	   - Display no reason or nothing if reason or oper_reason is null
	   instead of displaying an ugly <NULL>

2004-02-27 04:22  metalrock

	* modules/m_stats.c:
	   - Fix server crash in stats e due to not enough params.

2004-02-27 03:25  metalrock

	* contrib/README:
	   - Added examples to the contrib README so confused people
	   will stop telling me the README is too hard to understand.
	   - Also fixed some typos in the README.

2004-02-23 22:36  michael

	* include/client.h, src/send.c:
	  - removed 'IsRegisteredUser' macro, which is the same as 'IsClient'

2004-02-23 02:23  metalrock

	* modules/core/m_nick.c:
	   - Fix sever crash when parv[8] is null.

2004-02-18 08:51  metalrock

	* contrib/m_clearchan.c, contrib/m_force.c, contrib/m_opme.c,
	  modules/m_invite.c, modules/m_topic.c, modules/core/m_mode.c,
	  modules/core/m_sjoin.c:
	   - Send the REAL channel name to clients, not what the
	   other servers say the channel name is. This prevents
	   stuff like local channel name = #blah and remote name
	   is #BLAH, and #blaH on other servers, but when remote
	   actions are done in the channel, the user gets all
	   different kinds of channel names like blah kicks blah out
	   of #BLAH or blah kicks blah out of #blaH when the local
	   channel name is #blah... You get the picture... This also
	   makes the channels on the network more synchronized.

	  Reviewed by: ievil

2004-02-16 17:37  joshk

	* configure, include/setup.h.in: Re-autoconfize with autoconf 2.59.

2004-02-14 14:59  metalrock

	* modules/core/m_nick.c:
	   - Fixed long gecos error not showing and made code more robust.
	  Reviewed by: ievil

2004-02-12 22:48  metalrock

	* modules/m_xline.c:
	   - parv[2] is the xline, parv[1] is the servermask.

2004-02-12 21:22  metalrock

	* modules/m_resv.c:
	   - Fixed broken resv/unresv logic.

2004-02-12 01:58  metalrock

	* modules/m_resv.c:
	   - Oops, counted the number of params wrong, why do arrays have
	   to start with a 0, arg!

2004-02-12 00:28  metalrock

	* modules/m_resv.c: Fixed broken remote unresv

2004-02-12 00:01  metalrock

	* modules/core/m_message.c:
	   - Fix server crash from not enough parameters being send to
	   ERR_TOOMANYTARGETS

	  Reviewed by: db

2004-02-11 11:42  db

	* src/csvlib.c:
	  - added more logging info to XLINES i.e. what ACTION and reason

2004-02-11 11:41  db

	* modules/m_xline.c:
	  - use of an unitialised variable (target_server) would cause a
	  SIGSEGV
	  - simplified logic a bit

2004-02-11 04:49  db

	* include/hash.h:
	  - removed unused prototyped

2004-02-10 17:17  metalrock

	* src/csvlib.c:
	   - Removed unused variable in csvlib.c

2004-02-10 01:00  db

	* modules/m_xline.c:
	  - fixed a core. the check for NULL reason was in the wrong place

2004-02-10 00:33  db

	* src/csvlib.c:
	  - fixed trashing of conf files due to un kline/un xline operation
	    strchr() in the wrong place on the wrong buffer. reworked the code
	    to make getfield() recognise \n as equivalent to \0 end of string

	  Reviewed by jack

2004-02-02 23:16  michael

	* src/version.c.SH:
	  - fixed build/generation number creation

2004-02-02 22:59  michael

	* include/parse.h, src/ircd.c, src/parse.c:
	  - more message-tree improvments and logic fixes

2004-02-01 00:34  metalrock

	* src/s_conf.c:
	   - Oops, left off the extern.

2004-02-01 00:25  metalrock

	* include/s_conf.h, src/s_conf.c:
	   - Fixed some more comparisons between signed and unsigned ints.

2004-01-31 15:34  michael

	* src/match.c:
	  - match.c:collapse: forgot to remove an useless post increment

2004-01-31 14:02  michael

	* src/match.c:
	  - match.c: revised collapse()

2004-01-31 13:24  adx

	* src/hash.c:
	  - corrected a magic number

2004-01-31 12:42  adx

	* src/: client.c, s_serv.c:
	  - corrections for the server code
	  - use global_serv_list instead of global_client_list when sending
	    SERVERs and SIDs to a just-connected server, this saves even a
	    million of CPU cycles on efnet.

2004-01-31 12:03  adx

	* contrib/m_jupe.c, include/client.h, modules/m_links.c,
	  modules/core/m_server.c, src/client.c, src/ircd.c, src/s_serv.c:
	  - removed redundant serv->up, use servptr->name instead

2004-01-31 10:03  adx

	* src/parse.c:
	  - removed redundant test

2004-01-30 23:57  metalrock

	* include/s_conf.h:
	   - Removed double declaration of yy_aconf.

2004-01-30 15:53  adx

	* modules/m_pong.c:
	  - ClearPingSent is to be used from read_packet, no need to place it
	    in m_pong handler.

2004-01-30 03:30  metalrock

	* modules/m_info.c:
	   - Fix server crash in /info due to missing parameter

2004-01-27 00:58  metalrock

	* modules/m_xline.c: Removed unused variable 'pattern'

2004-01-25 22:35  metalrock

	* include/s_conf.h, modules/core/m_join.c, modules/core/m_sjoin.c,
	  src/csvlib.c, src/s_auth.c, src/s_conf.c:
	   - Fixed some unsigned/signed int compiler warnings.
	   - Removed extra %m parameter in s_auth.c.

2004-01-25 20:57  metalrock

	* modules/core/m_join.c:
	   - Sync the remove_our_modes and remove_a_mode in m_join from
	   m_sjoin.

2004-01-24 14:25  adx

	* src/client.c:
	  - optimized find_person

2004-01-24 14:16  adx

	* src/parse.c:
	  - cleaned up remove_unknown and cancel_clients (the latter should
	    probably be named else)

2004-01-22 22:48  joshk

	* servlink/Makefile.in: another DESTDIR bustage

2004-01-22 19:46  joshk

	* src/Makefile.in: Fix DESTDIR.

2004-01-17 15:21  metalrock

	* contrib/halfops.diff, modules/core/m_sjoin.c:
	   - Removed double mbuf = '\0' in sjoin and updated halfops patch.

2004-01-17 12:41  db

	* modules/core/m_sjoin.c:
	  - This will fix the mysterious garbage introduced on sjoins
	  - optimised the code a bit as well.

	  reviewed by Michael

2004-01-17 11:16  db

	* src/parse.c:
	  - fix one off errors resulting in trace6 being seen as trace etc.
	  - optimised code as per Michaels suggestions

	  reviewed by Michael

2004-01-15 20:02  metalrock

	* src/s_serv.c:
	   - TS6 glitch in ping response

2004-01-15 17:27  metalrock

	* modules/core/m_sjoin.c:
	   - Fix bug in which during sjoins of less than 4 nicks, extra spaces
	   would appear after the last nickname of the modeline. Also, this
	   fix makes MAXMODEPARAMS more flexible... in case anyone wants to
	  tinker with that..

	   Reviewed by: ievil

2004-01-12 00:01  jmallett

	* README.PLATFORMS: I do not have time to (nor presence of mind to
	  automate) test, build, and maintain workingness of ircd-hybrid
	  presently.  I hope to again in the future, but it is clear to me
	  that it requires a more active role than I can take.  PS: I can't
	  build on Panther, someone might want to look at my old Mac OS X
	  stuff again, gcc doesn't like -shared here.

2003-12-31 21:09  joshk

	* src/csvlib.c: Fix a 'buf' vs. 'buff' goofup in csvlib.c that was
	  causing some memory access errors on Linux (and probably others too)

	  Reviewed by:	a1kmm

2003-12-30 20:54  metalrock

	* src/s_user.c: Missing restricted notice after motd if user is
	  restricted

2003-12-30 15:56  ievil

	* Hybrid-team: And just adding myself .. Diane told me to along
	  time ago.. but I really wanted someone else to do it.. :)

2003-12-20 19:56  metalrock

	* modules/m_kline.c:
	   - A server is supposed to notice you the added temp kline
	   notice, not the setter.

2003-12-20 18:01  metalrock

	* src/irc_getnameinfo.c:
	   - Don't allow ':' to be the first character of a hostname or we
	   end up with all sorts of crazy errors.

	   Reviewed by: db, joshk

2003-12-11 14:33  db

	* src/send.c:
	  - fix missing %s this could core in m_encap.c

2003-12-08 19:29  metalrock

	* src/fdlist.c:
	   - Fix memory leak.  Approved by: db

2003-12-06 18:01  metalrock

	* modules/m_stats.c:
	   - RPL_STATSKLINE now needs 7 params, /stats G only had 6.

2003-12-05 18:33  metalrock

	* configure, configure.ac, include/setup.h.in:
	   - Change the meaning of TS5_ONLY to mean need a minimum TS of 5,
	   not only TS5 since TS6 is now the preferred TS.
	   Reviewed by: ievil

2003-12-05 17:35  metalrock

	* modules/m_stats.c, src/hostmask.c:
	   - Don't show the oper reason to users requested stats k.

2003-12-05 02:06  metalrock

	* include/s_conf.h, modules/m_kline.c, modules/m_stats.c,
	  modules/m_testline.c, src/hostmask.c, src/messages.tab,
	  src/s_conf.c:
	   - Fixed oper_reason not working in /dline
	   - Fixed oper_reason showing up in remote klines! definate no no.
	   - Show the oper_reason in /stats reports and /testline, a set
	   oper_reason is a junk feature if it isn't used!
	   - Rewrote testline notices to be in sync with hybrid 6 which is
	   much less confusing than the current notices.
	   - Added oper_reason to remote klines.

	   Reviewed by: ievil

2003-12-03 02:39  metalrock

	* contrib/m_mkpasswd.c:
	   - Make mkpasswd more efficient, more robust, more clear.  Reviewed
	  by: ievil

2003-11-29 23:17  metalrock

	* messages/: ircd-french.lang, ircd-spanish.lang,
	  ircd-standard.example.lang:
	   - RPL_MYINFO should NEVER be translated not changed in the lang
	   files.  Reviewed by:	A1kmm

2003-11-25 00:08  db

	* include/irc_res.h, src/irc_res.c:
	  - Finally fix the delete_resolver_queries() code
	    There is no way that &request->query was pointing to anything
	    sane.  vptr is a pointer to a struct DNSQuery, so make it so
	    instead of being cutsey with a void * (grrr)
	    so now query is a pointer to the constructed DNSQuery malloc
	    by s_auth.c and stuck into localClient. ok, so whats
	    &request->query? d'uh Simplify it by simply using the same
	  allocated pointer in the request.

2003-11-23 17:36  db

	* include/s_conf.h, src/s_conf.c: Before, we had a dlink_node
	  called conf_node in ConfItem, for the list of confs belonging to a
	  client.  But this is not safe, as there can be more than one client
	  sharing the same ConfItem.

	  This patch removes conf_node from the structure, and instead
	  dynamically allocates the dlink_nodes.

	  submitted by: A1kmm reviewed by: cryogen, dianora, michael

2003-11-21 23:58  db

	* modules/m_who.c:
	  - be paranoid about list manipulation here. A client doing the /who
	    could flood itself off...

2003-11-09 22:45  joshk

	* src/send.c: Fix mismatched format/parameter with a more or less
	  safe cast from size_t to unsigned long.

2003-11-08 18:30  metalrock

	* modules/core/m_nick.c:
	   - An unregistered client can never be an oper.
	   Reviewed by: joshk

2003-11-05 00:23  metalrock

	* modules/core/m_message.c:
	   - Removed useless return in msg_client.

	   Reviewed by: db, bill

2003-11-04 21:19  lusky

	* RELNOTES:
	  - removed old -7 release notes
	  - added BETA warning

2003-11-04 17:30  bill

	* modules/core/: m_join.c, m_kick.c: Submitted by:	cryogen Reviewed
	  by:	me
	  - when we are propogating remote messages to CAP_TS6 servers, it is
	    possible that the originating server is not-ts6, so we have to
	    ensure they have a UID/SID before attempting to reference it

2003-11-02 16:16  garion

	* modules/core/: m_join.c, m_nick.c: Submitted by:	Garion Reviewed
	  by:	cryogen Approved by:	Dianora

	  Changed the juped channel numeric to ERR_BADCHANNAME.  Changed the
	  juped nick numeric to ERR_ERRONEOUSNICKNAME.

2003-11-01 18:24  metalrock

	* src/send.c:
	   - Got rid of send.c:131: warning: unsigned int format, long
	   unsigned int arg (arg 5) Reviewed by: cryogen

2003-11-01 01:58  joshk

	* configure, configure.ac, etc/Makefile.in: Use system's test
	  binary if it's at all possible, fall back with test.  Reason being
	  is that the test binary usually is more robust, supporting -ef which
	  is used in etc/Makefile.in.

2003-11-01 01:57  joshk

	* include/modules.h, src/modules.c, contrib/m_flags.c:
	  - test_msgtab is so confusing. Use flags_msgtab for m_flags.c,
	  please!

2003-11-01 01:18  joshk

	* contrib/Makefile.in, modules/m_tb.c, include/modules.h,
	  src/modules.c: m_tburst.c:
	   - Don't modify default_server_capabs.
	   - Wrap _mod{init,deinit} in #ifndef STATIC_MODULES modules.[ch]:
	   - Add the tburst msgtab in modules.c.  Makefile.in:
	   - Build tburst for static builds.

	  Reviewed by:	db, metalrock

2003-11-01 01:15  db

	* src/parse.c:
	  - fixed formatting in one place
	  - There is no reason to allocate an extra child if at the end of
	    a command string. i.e. do not waste memory.
	  - Added more comments on how the trie works. comments good.
	  - Corrected addition/deletion code into the trie. links is a counter
	    of references to a MessageTree. Deallocate when there are no more
	    references to a MessageTree, not before.

	    reviewed by joshk, cryogen and the invisible ghost that visits me
	  every halloween. His name is Fred.

2003-10-30 20:27  bill

	* contrib/m_operspy.c:
	  - use channel names in RPL_WHO when possible

2003-10-30 14:52  bill

	* contrib/m_operspy.c, include/msg.h, src/parse.c:
	  - removed operspy hiding, now that it is legal on efnet
	  - removed un-needed MFLG_HIDDEN (this removes some clutter from
	  parse())

2003-10-30 03:29  bill

	* src/s_user.c:
	  - add our own sid to the id hash table, so find_server() works even
	    when we are trying to find ourself.  this fixes bts #832892

2003-10-29 17:59  bill

	* src/send.c:
	  - fixed verbose compile warning

2003-10-29 17:37  bill

	* modules/m_capab.c, modules/m_pass.c, modules/core/m_kill.c,
	  src/ircd.c, src/s_serv.c:
	  - only enable ts6 if an SID is specified in ircd.conf
	  - mo_kill() would bail if the person didn't have kline = yes, this
	    should also check for global_kill = yes.  fixed.

2003-10-26 23:28  metalrock

	* src/modules.c:
	   - Added missing dummy handler to modules.c
	   Approved by: db

2003-10-25 00:43  metalrock

	* modules/core/m_kick.c:
	   - Fixed magical kicks coming from mysterious places.

	  Reviewed by: joshk

2003-10-24 07:59  michael

	* src/s_user.c:
	  - fixed small memory leak that can happen if an user
	    doesn't responds to a CHALLENGE

2003-10-24 07:38  michael

	* include/tools.h, src/hash.c, src/tools.c:
	  - fixed a couple of warnings reported by valgrind

2003-10-24 07:27  michael

	* src/balloc.c:
	  - balloc.c: fixed the build of the non mmap() version

2003-10-24 07:08  michael

	* contrib/m_jupe.c, contrib/m_operspy.c, include/fileio.h,
	  include/s_conf.h, modules/m_away.c, modules/m_cryptlink.c,
	  modules/m_ison.c, modules/m_names.c, src/client.c, src/csvlib.c,
	  src/fileio.c, src/ircd.c, src/motd.c, src/s_log.c, src/s_serv.c:
	  - got rid of redundant strlen()'s

2003-10-23 20:50  metalrock

	* modules/m_trace.c:
	   - Fixed typo. The second me.id should be me.name in
	   report_this_status() Approved by: billy-jon

2003-10-22 19:36  stu

	* README.FIRST, README.PLATFORMS, configure, configure.ac:
	  - Take over responsibility for FreeBSD/TenDRA
	  - remove -O2 from default CFLAGS in HEAD.  It doesnt achieve much
	    and it hinders debugging somewhat

	  Approved by: General Concensus

2003-10-22 05:08  metalrock

	* contrib/m_ojoin.c:
	   - Fixed double ojoin caused by sending an SJOIN twice when
	   we were supposed to send 1 SJOIN to non-TS6 servers and
	   1 to TS6 servers

	  Reviewed by:billy-jon

2003-10-21 18:49  bill

	* modules/core/m_message.c:
	  - fixed bug in /msg user@server or user%host@server (we would send
	    just :nick to the recipient, rather than :nick!user@host)
	  - added missing TS6 possibilities in m_message.c

2003-10-20 22:31  metalrock

	* contrib/m_whois.c:
	   - Synced contrib whois with stock whois.

2003-10-20 21:39  bill

	* modules/m_kline.c, modules/m_llnick.c, src/client.c:
	  - replaced some for()s with DLINK_FOREACH() or DLINK_FOREACH_SAFE()
	    while in search of this ellusive core

2003-10-20 21:27  bill

	* modules/m_whois.c, src/parse.c:
	  - take UIDs/SIDs for parv[1] (target param) for remote whois
	  requests
	  - when propogating remote numerics, be sure to use ->name rather
	    than parv[], since parv[] could be an ID

2003-10-16 19:42  bill

	* src/channel_mode.c:
	  - fix for metalrock's 'fix' -- you only need to check the first char
	  in the nick mask

2003-10-16 19:13  stu

	* configure, configure.ac, include/client.h, include/s_serv.h,
	  modules/m_cryptlink.c, src/irc_reslib.c, src/s_serv.c:
	  - Refined support for TenDRA - it compiles and works, yay!
	  - -I/usr/include -> -Ysystem
	  - some signedness fixes as a result, TenDRA is very ISO anal, way
	    more so than gcc..

	   Fear of: josh
	   Reviewed by: Bill

2003-10-16 18:23  bill

	* src/s_serv.c:
	  - oops, we attempted to use ->name for the ID param in SID

2003-10-16 18:06  bill

	* modules/core/m_sjoin.c:
	  - fixed some buffer magic in remove_ban_list()

2003-10-16 09:47  stu

	* src/ircd.c:
	  - fixed static modules bug.. we, er, 'forgot' to load all the
	  msgtabs

2003-10-16 02:55  metalrock

	* src/channel_mode.c:
	   - Do not allow the char ":" to be any part of the nickname
	   field of a ban. Spotted by Bram Matthys.

2003-10-14 23:23  metalrock

	* modules/m_map.c:
	   - Fix for buffer overflow in map spotted by ievil.

	   Submitted by: ievil
	   Reviewed by: ievil
	   Obtained from:	ievil

2003-10-14 22:25  bill

	* src/: channel.c, s_serv.c:
	  - when bursting channel info, use UID rather than NICK where
	  appropriate
	  - add missing : to BMASK
	  - use SID whenever possible when introducing servers

2003-10-14 21:37  bill

	* modules/core/m_mode.c, src/channel.c:
	  - cleaned up send_mode_list() quite a bit
	  - be sure we neither accept nor attempt to propogate null bans

2003-10-14 17:58  bill

	* modules/core/m_server.c, src/channel.c:
	  - do not try and send BMASK if ban list is empty
	  - do not send SIDs to non-ts6 servers when introducing a ts6 server
	  - DO use SIDs ton ts6 servers to introduce a ts6 server

2003-10-14 08:09  adx

	* src/hash.c:
	  - fixed bug that simplified hash degeneration attacks (ircd uses
	    rand() and only this generator is initialised).

2003-10-13 22:25  metalrock

	* modules/m_tb.c:
	   - ConfigServerHide.hide_servers ? me.name : me.name (obviously
	   there is something wrong with that statement). Fixed.

2003-10-13 21:51  metalrock

	* contrib/halfops.diff, modules/core/m_sjoin.c:
	   - Remove bans after a netrejoin, not add them.
	   - Remove our bans and modes, and then join the clients and give
	   them modes, not remove the bans after everything is done.
	   - Updated halfops.diff with current changes.

	   Reviewed by: billy-jon
	   Approved by:	billy-jon

2003-10-13 21:32  bill

	* modules/core/m_server.c, src/s_serv.c:
	  - be sure we use SIDs wherever possible when introducing servers

2003-10-13 20:51  metalrock

	* modules/core/m_nick.c:
	   - Added a check to make sure the server a nick introduction says
	   the nick is coming from really exists, else, kill the nick so
	   we don't crash the server when the nick's server == NULL.

	  Reviewed by: billy-jon

2003-10-13 14:37  metalrock

	* contrib/halfops.diff:
	   - Added sjoin fix into halfop patch.

2003-10-13 04:25  michael

	* modules/m_stats.c:
	  - simplified stats_operedup() a tad

2003-10-13 03:13  bill

	* modules/core/m_sjoin.c:
	  - translate target list from UIDs to NICKs for clients

2003-10-12 23:58  metalrock

	* contrib/halfops.diff:
	   - Updated halfop patch for TS6.

2003-10-12 23:03  metalrock

	* doc/kline.txt:
	   - Remote klines are already supported, another documentation
	   update.

2003-10-12 22:38  bill

	* contrib/: m_clearchan.c, m_force.c, m_ojoin.c, m_opme.c:
	  - make contrib/ modules ts6 compatible

2003-10-12 22:15  metalrock

	* BUGS, HOWTO-CVS, Hybrid-team, INSTALL, README.FIRST,
	  README.PLATFORMS, TODO, doc/LazyLinks.txt, doc/guidelines.txt,
	  doc/kline.txt, doc/messages.txt, doc/opermyth.txt, doc/resv.txt,
	  doc/serverhide.txt, doc/whats-new.txt,
	  doc/technical/Persistent_Clients.txt, doc/technical/README.TSora,
	  doc/technical/event.txt, doc/technical/file-management.txt,
	  doc/technical/network.txt, doc/technical/send.txt,
	  doc/technical/ts5.txt, doc/technical/ts6.txt, etc/example.conf,
	  etc/example.conf.quick, etc/example.efnet.conf, etc/simple.conf,
	  src/parse.c:
	   - Updated documentation.
	   - Added a space for "not enough parameters" error notice, it was
	   missing one.
	   - Added ts6 documentation.
	   - Added sid to example confs.
	   - Upped default_split_user_count for efnet from 10000 users to
	   40000.
	   - example.efnet.conf was reviewed by efnet server admin.
	   - Removed completed TODO entries from TODO.
	   Reviewed by: joshk

2003-10-12 21:39  bill

	* modules/core/m_sjoin.c, src/parse.c:
	  - same as previous commit, use find_person() where appropriate

2003-10-12 21:35  bill

	* modules/core/m_kill.c:
	  - in ms_ functions where you're dealing with potentially a UID, you
	  must use find_person() rather than find_client()

2003-10-12 21:10  bill

	* src/s_serv.c:
	  - consistent default for remote client ips during UID introduction

2003-10-12 20:59  bill

	* src/client.c:
	  - oops, small buglet in sendto_server() call sent nick changes twice
	  to ts6 servers

2003-10-12 20:32  bill

	* modules/core/m_join.c:
	  - fixed another ts6 bug that would cause channel desync

2003-10-12 19:08  bill

	* include/client.h, modules/core/m_nick.c:
	  - more robust checking in ID_or_name()
	  - fixed nick collide bug
	  - fixed server introduction bug

2003-10-11 21:16  bill

	* modules/core/m_sjoin.c:
	  - oops, switch IsCapable() to HasID() to check for TS6 support from
	  a remote server:

2003-10-11 21:02  bill

	* src/client.c:
	  - be sure to call hash_del_id() in exit_client()

2003-10-11 20:48  bill

	* src/: channel_mode.c, client.c, parse.c:
	  - more ts6 cleanups

2003-10-11 19:47  bill

	* modules/core/m_mode.c:
	  - fixed tmode

2003-10-11 19:23  stu

	* src/channel_mode.c: fix compile warning, cast time_t to unsigned
	  long

2003-10-11 19:20  bill

	* modules/core/m_mode.c, src/channel_mode.c:
	  - actually use tmode

2003-10-11 18:51  metalrock

	* modules/m_set.c:
	   - The correct way to compare strings :)
	   Reviewed by:	cryogen, joshk

2003-10-11 18:51  bill

	* src/s_serv.c:
	  - oops, omitted SID in SID command, how wonderful

2003-10-11 18:41  metalrock

	* modules/m_set.c:
	   - Tell the user they need more args when they type try to set
	   autoconn without the correct number of args instead of "Value less
	   than 0 illegal for AUTOCONN".  Reviewed by:	joshk

2003-10-11 18:36  bill

	* src/s_serv.c:
	  - turns out this can happen, so lets deal with it properly

2003-10-11 18:35  stu

	* src/channel.c: added TS6 to channel bursts, in particular BMASK.
	  Side effect of this is send_mode_list() now takes a pointer to the
	  channel struct instead of just the name(we need the chan ts)

2003-10-11 18:19  bill

	* src/s_serv.c:
	  - should be find_server() here, not find_client()

2003-10-11 17:56  bill

	* src/: client.c, hash.c, s_user.c:
	  - fixed more ts6 buglets

2003-10-11 17:39  stu

	* src/s_serv.c: passify gcc and its whiney little mouth

2003-10-11 16:47  bill

	* modules/core/m_server.c, src/s_serv.c:
	  - more ts6 cleanups

2003-10-11 14:20  metalrock

	* contrib/halfops.diff:
	   - Updated halfops patch for current source.

2003-10-11 08:29  bill

	* modules/core/m_join.c, src/channel.c, src/parse.c, src/s_serv.c:
	  - more ts6 cleanups

2003-10-10 22:15  bill

	* modules/core/m_kill.c, modules/core/m_mode.c,
	  modules/core/m_nick.c, modules/core/m_squit.c, src/client.c,
	  src/ircdauth.c, src/send.c:
	  - this finishes all the remaining implementation of TS6 that I can
	  think of
	  - this needs now to be heavily tested

2003-10-10 19:29  bill

	* modules/core/m_join.c:
	  - proper fix

2003-10-10 19:27  metalrock

	* modules/core/m_join.c:
	   - Missing a %s in m_join().

2003-10-10 18:41  bill

	* modules/core/: m_join.c, m_kick.c:
	  - more progress towards completion of TS6 code

2003-10-10 15:01  metalrock

	* src/ircd.c:
	   - Helps if I add a ; after the line

2003-10-10 14:58  metalrock

	* src/ircd.c:
	   - We need to change back to DPATH after we have gone into the
	   modules dir so that the core file will end up in DPATH instead of
	  the modules dir.

2003-10-08 18:03  metalrock

	* contrib/m_ctrace.c, modules/m_trace.c:
	   - Removed pointless IsClient checks in trace modules

2003-10-07 22:59  metalrock

	* modules/core/m_join.c, modules/core/m_mode.c, src/channel_mode.c:
	   - Casted time_t to unsigned long.
	   - Removed redundant add_id prototype.
	   Reviewed by: cryogen

2003-10-07 18:37  bill

	* contrib/m_killhost.c, contrib/m_opme.c, include/channel_mode.h,
	  include/client.h, include/s_serv.h, include/s_user.h,
	  modules/m_admin.c, modules/m_away.c, modules/m_capab.c,
	  modules/m_gline.c, modules/m_info.c, modules/m_ison.c,
	  modules/m_kline.c, modules/m_knock.c, modules/m_links.c,
	  modules/m_list.c, modules/m_lljoin.c, modules/m_operwall.c,
	  modules/m_pass.c, modules/m_ping.c, modules/m_stats.c,
	  modules/m_topic.c, modules/m_trace.c, modules/m_version.c,
	  modules/m_wallops.c, modules/m_who.c, modules/m_xline.c,
	  modules/core/m_join.c, modules/core/m_kill.c,
	  modules/core/m_message.c, modules/core/m_mode.c,
	  modules/core/m_nick.c, modules/core/m_part.c,
	  modules/core/m_server.c, modules/core/m_sjoin.c,
	  src/channel_mode.c, src/client.c, src/csvlib.c, src/ircd.c,
	  src/motd.c, src/parse.c, src/s_serv.c, src/s_user.c, src/send.c:
	  Submitted by: Reviewed by: Approved by: Obtained from:
	  - fixed remote xline ob1 buglet
	  - working on finishing TS6 implementation

	  Tested:

	  admin away connect encap eob gline info invite ison (couldn't
	  generate remote request, but code looks right) kline knock links
	  list (not verified, remote stuff only used with lazylinks) lljoin
	  (not verified, i don't think there is anything for ts6 here) llnick
	  (not verified, same as lljoin) locops lusers names (only remote
	  stuff is lazylinks, which sucks) nburst (lazylinks only) operwall
	  ping (im not sure about this fix, someone please check it) pong resv
	  stats svinfo topic trace version wallops who (not verified, remote
	  stuff only w/ lazylinks) whois xline

	  Still to test/implement (if someone else wants to do this, feel free
	  =)): modules/core/* src/*

2003-10-04 17:43  metalrock

	* src/s_serv.c:
	   - Missing a ; after the assert.

2003-10-04 17:14  stu

	* src/s_serv.c: Added an assert in write_links_file().  There's a
	  core in here which i think is the result of an overflow.  But I
	  can't be sure.  This will tell us one way or the other.

2003-10-04 15:56  metalrock

	* src/modules.c:
	   - Woops, read it wrong, that / is supposed to be there.

2003-10-04 15:47  metalrock

	* Hybrid-team:
	   - Added Garion to the hybrid team, welcome!

2003-10-04 15:45  metalrock

	* src/modules.c:
	   - Left out a MyFree(base_autoload) and found an extra /
	   load_all_modules()

2003-10-04 15:31  metalrock

	* contrib/m_flags.c, etc/example.conf, etc/example.conf.quick,
	  etc/example.efnet.conf, etc/simple.conf, include/defaults.h,
	  include/modules.h, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/modules.c, src/s_conf.c, src/s_user.c:
	   - Gotten rid of base_path in modules{} in the ircd.conf since
	   the modules dir is hardcored and cannot be changed so why should
	   the user have to specify exactly where it is when we already know?
	   - Corrected old hyb6 notices to hyb7 notices in m_flags.c
	   - Kill the ircd if the core modules fail to load, don't let it
	   just run without modules loaded.
	   - Corrected a spelling error in s_conf.c.
	   Reviewed by: cryogen

2003-10-03 18:52  garion

	* src/hash.c: Ah well, three times lucky, or something.  Removed
	  the cause of the warning in hash.c: a chptr which wasn't used.

2003-10-03 14:39  garion

	* include/hash.h: Added hash_get_chptr(..).  Patch reviewed and
	  approved by cryogen.

2003-10-03 14:32  garion

	* src/hash.c: Changed > HASHSIZE to >= HASHSIZE in hash_get_chptr
	  to avoid accessing non-existing array element.

2003-10-03 14:28  garion

	* src/hash.c: Added struct Channel * hash_get_chptr(unsigned int
	  hashv) to be able to get access to the channel hash in a module.
	  Fix reviewed and approved by cryogen.

2003-10-03 05:40  stu

	* modules/m_kline.c: Corrected previous fix.  We do actually need
	  to convert to minutes to do the check rather than just prevent the
	  seconds multiplication

2003-10-02 21:19  metalrock

	* modules/m_kline.c:
	   - Update prototype for valid_tkline so it will compile.

2003-10-02 19:27  stu

	* modules/m_kline.c: Forced commit to add the commit log i forgot
	  from 7.5011.

	  - Add a minutes paramter to valid_tkline() to differentiate between
	    getting a time in seconds and minutes, because in mo_kline we have
	    minutes and in ms_kline we have seconds

2003-10-02 19:22  stu

	* modules/m_kline.c: Spotted by: metalrock Reviewed by: metalrock,
	  bill Fixed bug: #816350

2003-09-30 17:43  stu

	* modules/core/m_nick.c:
	  - Fix core on NICK command from a server with no source or a server
	  source.  We VERY nearly let servers change their nickname :)

	  Bug spotted by jack.  This closes bug #814913

	  Reviewed by: bill Approved by: me, bill

2003-09-29 23:25  db

	* src/s_user.c:
	  - typo. grumble. I should have test compiled. target_p->source_p

2003-09-29 22:24  db

	* modules/core/m_server.c, src/s_serv.c, src/s_user.c:
	  - last patches for sid/uid code before converting to ts6
	  - Don't try to send an IP if its not a local client
	  - send uid/sid if sid capable server only

2003-09-29 15:05  metalrock

	* modules/Makefile.in:
	   - Removed a redundant join in make depend for modules.

2003-09-29 01:09  metalrock

	* modules/m_stats.c, src/messages.tab:
	   - Put RPL_STATSLINKINFO into a form_str() format since the rfc says
	   it is a required numeric and so we can translate it into other
	   langs!!! Exciting :)
	   Reviewed by: db, Michael

2003-09-28 23:16  bill

	* src/ircd_parser.y:
	  - oops, must use DupString() here

2003-09-28 23:08  bill

	* modules/m_kline.c: Reviewed by:	db
	  - ms_kline() cleanups

2003-09-28 02:07  metalrock

	* contrib/: README, halfops.diff:
	   - Put halfops into a patch in contrib and fix a bug where an opped
	   and halfoped user can kick another user in a +p channel.
	   Reviewed by: ievil

2003-09-27 22:15  metalrock

	* configure, configure.ac, contrib/m_ojoin.c, include/setup.h.in,
	  include/supported.h, modules/core/m_kick.c,
	  modules/core/m_sjoin.c, src/channel_mode.c:
	   - Removed halfops finally!
	   Reviewed by: ievil

2003-09-27 21:17  joshk

	* messages/ircd-french.lang: Small number of grammatical fixes.

2003-09-27 20:58  metalrock

	* contrib/m_operspy.c:
	   - Cleaned up m_operspy.c a bit with a form_str instead of the long
	   way for spitting out the unknown command numeric.
	   Reviewed by: joshk

2003-09-27 19:45  bill

	* src/ircd_parser.y:
	  - added extra sanity checking in gline{} parsing

2003-09-27 19:34  bill

	* etc/example.conf, etc/example.efnet.conf, include/s_conf.h,
	  src/ircd_parser.y:
	  - apparentely the documentation on gline ACLs was not clear enough,
	    but by default a gline WILL BE ACCEPTED, so DO NOT add rules for
	  glines you want to be accepted AND propogated
	  - finished removal of redundant GDENY_ALLOW

2003-09-27 19:19  bill

	* modules/m_stats.c, src/ircd_parser.y, src/s_conf.c:
	  - moved stats S (cluster) into stats U (shared) since they are so
	  similar
	  - added more flags to shared/cluster stats, so they are
	    distinguishable from one-another (note: ratbox should be doing the
	  same thing soon)
	  - added default server/user/host for cluster entries
	  - added V to stats V output
	  - reverted previous s_conf.c fix to actually give useful information

2003-09-26 10:38  michael

	* src/channel_mode.c:
	  - channel_mode.c: removed a pointless post-increment

2003-09-26 10:34  michael

	* src/s_conf.c:
	  - fixed core on 'STATS S'

2003-09-26 06:49  bill

	* modules/m_stats.c:
	  - oops, change stats_servers() to use only 'v', and as such only
	  display 'v' as part of RPL_STATSDEBUG

2003-09-26 06:35  bill

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  modules/m_gline.c, src/ircd_parser.y, src/s_conf.c:
	  - robustly tested gline ACLs, made necessary changes
	  - updated documentation to finish

2003-09-25 23:35  bill

	* include/s_conf.h, modules/m_gline.c, src/ircd_parser.y,
	  src/s_conf.c:
	  - finish up implementation of gline ACL
	  - this still needs testing

2003-09-25 18:25  bill

	* contrib/m_operspy.c, src/ircd_parser.y, src/s_conf.c:
	  - added sanity check to operspy
	  - second in series of gline ACL commits

2003-09-25 17:16  bill

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  include/s_conf.h, modules/m_stats.c, src/csvlib.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c:
	  - added gline ACLs (more commits pending)
	  - updated example.* documentation

2003-09-22 23:53  db

	* contrib/: Makefile.in, m_capture.c, m_ctrace.c,
	  spy_admin_notice.c, spy_info_notice.c, spy_motd_notice.c,
	  spy_stats_p_notice.c, spy_trace_notice.c:
	  - cleaned up some style in spy* modules. no code changes.
	  - made sure dummy handler was defined in m_ctrace.c
	  - added m_capture.c /quote capture nick
	    nick captured no longer can send messages or join/part channels
	    however, it will not ping out.

2003-09-21 05:59  michael

	* include/s_conf.h, include/s_log.h, modules/m_info.c, src/ircd.c,
	  src/ircd_parser.y, src/s_conf.c, src/s_log.c:
	  - added 'struct logging_entry' and cleaned up this logging related
	  variables salad

2003-09-21 03:09  metalrock

	* modules/core/: m_join.c, m_message.c:
	   - Fix the following compile warnings:
	   core/m_join.c:51: warning: useless keyword or type name in empty
	   declaration core/m_message.c:49: warning: useless keyword or type
	   name in empty declaration Reviewed by: joshk

2003-09-20 02:05  bill

	* modules/core/: m_join.c, m_message.c:
	  - now this new join compression as been tested

2003-09-20 00:47  bill

	* contrib/m_force.c, contrib/m_operspy.c, include/channel.h,
	  modules/m_invite.c, modules/m_knock.c, modules/m_list.c,
	  modules/m_resv.c, modules/m_topic.c, modules/m_who.c,
	  modules/core/m_join.c, src/ircd_parser.y:
	  - removed pointless IsChannelName() macro, IsChanPrefix() does the
	  same, but is cleaner
	  - ripped target compression from m_message.c and stuck it into
	    m_join to handle multi-target JOINs properly

2003-09-19 21:23  bill

	* src/: ircd.c, ircd_parser.y:
	  - moved initial loading of modules to during the conf parsing,
	    rather than after.  this assures that load_all_modules() and
	    load_core_modules() happens before the individually loaded modules
	  are loaded

2003-09-19 21:05  db

	* modules/core/m_message.c, src/parse.c:
	  - When removing a command, be sure to zero out the function pointer
	    corresponding to the command. This ensures that it won't match
	    even if the command is removed.

2003-09-19 19:20  metalrock

	* modules/core/m_sjoin.c:
	   - Fix the annoying "comparison between signed and unsigned int"
	   compile warning.  Reviewed by: billy-jon

2003-09-19 18:13  bill

	* include/inet_misc.h, src/parse.c, src/s_bsd.c, src/s_serv.c:
	  - initalize some values to NULL to prevent warnings
	  - moved INADDR_NONE to inet_misc.h, and added an include for it to
	  s_serv.c and s_bsd.c

2003-09-19 16:23  joshk

	* src/s_bsd_devpoll.c:
	  - src/s_bsd_devpoll.c: #error if neither devpoll.h or sys/devpoll.h
	  were found, initialize cur_handler to NULL to prevent a warning.

2003-09-18 20:44  bill

	* modules/core/m_nick.c:
	  - removed an if() and replaced it with an assert(), since that
	  should never happen

2003-09-18 18:51  bill

	* modules/core/m_mode.c, modules/core/m_sjoin.c, src/hash.c:
	  - minor cleanups/speedups to m_mode() and ms_sjoin()

2003-09-18 10:06  joshk

	* configure, configure.ac, include/setup.h.in: Okay, make sure
	  HAVE_SYS_DEVPOLL_H and company get defined even when we force usage
	  of devpoll. This should fix Solaris devpoll issues.

2003-09-18 05:14  bill

	* include/s_conf.h, modules/m_gline.c, src/csvlib.c, src/s_conf.c,
	  src/s_serv.c:
	  - constify some things with glines, csv, and s_conf
	  - cleaned up glines a bit, got rid of a bunch of un-needed variables
	  - changed gline request/trigger notices to be more consistent with
	    kline/dlines, also more compact.
	  - fixed s_serv.c to compile on solaris, which does not define
	  INADDR_NONE

2003-09-17 20:19  bill

	* modules/m_gline.c:
	  - when the 3rd gline was remote, the trigger notice would occur
	  before the requesting notice.  fixed.

2003-09-17 19:28  bill

	* modules/m_gline.c:
	  - fixed a bug in how we handle old style gline requests and their
	  logging
	  - moved the two assert() calls from the previous commit once again
	  to reflect this change

2003-09-17 13:16  bill

	* modules/m_gline.c:
	  - moved two misplaced assert()s

2003-09-16 00:37  metalrock

	* modules/core/m_join.c:
	   - Cleaned up spaces/formatting in m_join while i was looking for a
	   bug that turned out to be a hoax :)
	   Reviewed by: joshk

2003-09-15 19:24  metalrock

	* include/s_bsd.h, src/client.c, src/irc_getnameinfo.c,
	  src/s_bsd.c, src/s_conf.c, src/s_serv.c:
	   - Fixed missing connection failed notice.
	   - Fixed shadowed declaration.
	   - Do not attempt to autoconnect to a server when it is already
	   being connected to.
	  - Removed double server connection error notice.
	   Reviewed by: Diane, Michael

2003-09-15 18:34  db

	* include/client.h, src/client.c:
	  - free_client() should be global to match make_client()
	    We really should have a set of defined API's and decide which
	    functions modules should have access to.

2003-09-14 22:26  bill

	* src/s_serv.c:
	  - fixed some indents

2003-09-14 21:44  bill

	* src/: ircd_parser.y, messages.tab, s_conf.c: Submitted by:
	  metalrock
	  - this fixes bug #789616.  I re-worked the stats U output a bit to
	  be more useful and descriptive.

2003-09-14 20:56  metalrock

	* src/channel_mode.c:
	   - Writing code to cancel out mode changes is just dumb. For 1, it
	   leads to desyncing the irc clients and 2, writing code for every
	   bad combo and having the possibility that we missed a combo and
	   have to rewrite it to account for the mode combo. Just allow all
	   combos to happen and be done with it! All irc clients support it
	   anyways, so should the ircd.  Reviewed by: billy-jon

2003-09-14 18:23  bill

	* src/send.c:
	  - added typecast to shutup compile warning
	  - fixed bug #771890, sendto_match_servs() should not complain if no
	  servers are found

2003-09-14 18:14  bill

	* src/send.c: Submitted by:	metalrock
	  - this fixes bug #800743.  sendto_match_servs() would end up calling
	  send_format() twice

2003-09-14 17:39  bill

	* src/dynlink.c:
	  - added additional sanity checks into load_a_module(), this fixes
	    bug #801749.  the problem was we'd load the same module twice if it
	    was in modules/ and modules/autoload on a modrestart

2003-09-14 17:22  bill

	* src/ircd_parser.y: Submitted by:	darix
	  - fixed bug #801742, auth{} flags/spoof would only work on first
	  hostmask

2003-09-14 08:01  adx

	* etc/: example.conf, example.conf.quick, example.efnet.conf,
	  simple.conf:
	  - removed some hints that are no longer true

2003-09-13 15:04  metalrock

	* include/channel.h, include/ircd.h, servlink/io.c, src/dbuf.c,
	  src/ircd.c:
	   - Get rid of the "comparison between signed and unsigned int"
	   warnings.
	  - Fixed implicit declarations in dbuf.c
	   Reviewed by: ievil

2003-09-11 01:50  bill

	* modules/core/m_quit.c:
	  - restore code for Client Quit which somehow disappeared

2003-09-11 00:19  joshk

	* contrib/Makefile.in, doc/Makefile.in, etc/Makefile.in,
	  include/Makefile.in, messages/Makefile.in, modules/Makefile.in,
	  servlink/Makefile.in, src/Makefile.in, tools/Makefile.in:
	  - Add DESTDIR support. This closes SF.net bug#801753 without much
	  issue.

2003-09-11 00:00  metalrock

	* etc/example.conf.quick:
	   - Missed a file in the last cvs commit

2003-09-10 23:41  metalrock

	* etc/example.conf, etc/example.efnet.conf, include/defaults.h,
	  include/m_info.h, include/s_conf.h, modules/m_info.c,
	  modules/core/m_kill.c, src/client.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c:
	   - Added kill_chase_time_limit to ircd.conf. Used to be in config.h
	   till it was forgotten when config.h was done away with.  Reviewed
	  by: ievil

2003-09-10 07:37  michael

	* modules/m_oper.c, src/s_log.c:
	  - calling log_failed_oper() after a successful OPER'up ? doesn't
	    make any sense at all. i guess no one ever used the syslog'ing
	    feature, this bug is still present in -7 STABLE

2003-09-10 07:31  michael

	* include/s_conf.h, modules/m_info.c, src/ircd_parser.y,
	  src/s_conf.c:
	  - fixes to get the stupid 'spoof notice' working again
	  - added 'hide_spoof_ips' to /info

2003-09-10 07:29  michael

	* src/: s_conf.c, s_user.c:
	  - removed redundant NUL assignment

2003-09-08 20:32  metalrock

	* modules/core/m_nick.c:
	   - Removed unused variable "nmodes".

2003-09-08 19:39  metalrock

	* include/ircd_handler.h, modules/core/m_nick.c, src/s_user.c:
	   - Fix server crash when nick's server == NULL.
	   - Don't allow ':' to be the first char in the hostname or we end up
	   breaking things Reviewed by: ievil

2003-09-05 20:38  joshk

	* etc/example.conf: Disable autoconn on the example connect block.
	  It's annoying when 192.168.0.1 actually exists on your network and
	  you're trying out the test config. Also make a note that it's by
	  default disabled anyway.

2003-09-04 00:40  metalrock

	* modules/core/m_nick.c:
	   - Revert the fixes, this needs a bit more thinking.

2003-09-04 00:24  metalrock

	* modules/core/m_nick.c:
	   - Need to account for nick changes too, fix of previous fix.

2003-09-03 23:51  metalrock

	* modules/core/m_nick.c:
	   - Fix server crashing from invalid nick from server.
	   - Do not send notices to servers!
	   Reviewed by: joshk

2003-09-03 20:57  joshk

	* src/rsa.c:
	  - Prior to 0.9.7, rsa_st.version was an int. It's now long.
	  Conditionally check for both.

2003-08-29 02:05  michael

	* modules/m_testline.c:
	  - fixed core and some other TESTLINE related weirdness

2003-08-22 19:34  metalrock

	* modules/m_tb.c:
	   - Fixed logical error on tburst.
	   Reviewed by: joshk

2003-08-22 03:51  michael

	* include/s_log.h, src/client.c, src/dynlink.c:
	  - made ilog() use GNU format __attribute__
	  - fixed compile warnings

2003-08-21 17:31  michael

	* include/client.h, src/s_conf.c, src/s_serv.c:
	  - removed unused FLAGS_CHKACCESS

2003-08-21 17:16  michael

	* src/client.c:
	  - fixed sanity check. Server.up is a fixed size array, it is never
	  NULL

2003-08-21 17:12  michael

	* include/client.h, include/ircd.h, include/s_misc.h,
	  src/channel.c, src/client.c, src/event.c, src/ircd.c, src/list.c,
	  src/s_gline.c, src/s_user.c:
	  - miscellaneous cleanups

2003-08-19 21:59  michael

	* src/channel_mode.c:
	  - fixed random add_id() cores

2003-08-19 20:02  michael

	* include/client.h, include/ircd.h, include/s_user.h,
	  modules/m_version.c, src/client.c, src/s_debug.c, src/s_user.c:
	  - re-managed stupid LocalUser/Client/User memory counting
	  - moved serveropts[] to m_version.c

2003-08-19 19:45  metalrock

	* modules/m_map.c:
	   - Fixed map chopping off the servername if servername was longer
	   than 50 chars.
	  - Cleaned up the map display format so it looks cleaner.
	   Reviewed by: joshk, ievil, Michael

2003-08-19 14:13  stu

	* src/s_auth.c: Need to free DNSQuery when we time out the auth
	  too, or we'll leak yet again

2003-08-19 14:02  adx

	* etc/Makefile.in:
	  - small change to Makefile.in to deal with installations in sources
	    directory

2003-08-19 13:52  adx

	* src/: irc_res.c, s_auth.c, s_bsd.c, s_conf.c, s_serv.c:
	  - fixed various memory leaks related to resolver code
	  - fixed problems when serv_connect() is called, but we don't have
	    resolved the hostname yet
	  - conf_dns_callback removes the connect{} entry in case of DNS
	  failure

2003-08-19 11:43  stu

	* src/irc_res.c: We should only send T_AAAA first if we support
	  IPV6.  Spotted by adx.

2003-08-19 08:15  stu

	* src/: s_auth.c, s_bsd.c, s_conf.c, s_serv.c: Fixed a few memory
	  leaks in the resolver callbacks Removed unused defines from s_serv.c

2003-08-18 19:31  joshk

	* doc/Makefile.in, include/Makefile.in, modules/Makefile.in: Some
	  Makefile monkey-business to facilitate custom installs.

2003-08-17 01:34  metalrock

	* etc/example.efnet.conf:
	   - Updated efnet conf. use_invex = yes, use_except = yes, max_bans =
	   100.  Reviewed by: ievil

2003-08-17 01:14  joshk

	* contrib/m_help.c:
	  - m_help.c: fix duplicate newline, and also make sure that the first
	    line of text sent is always a RPL_HELPSTART.

2003-08-17 00:34  joshk

	* contrib/: m_help.c, help/opers/index:
	  - m_help.c: Fix not checking for # in the first fbgets() in
	  sendhelpfile().
	  - help/opers/index: replace some indents with spaces

2003-08-16 22:24  metalrock

	* contrib/help/opers/: index, motd, squit, stats, undline, ungline,
	  unkline, unresv, unxline, version, xline:
	   - Updated help files and added help for xline and unxline.
	   Reviewed by: ievil

2003-08-16 19:32  metalrock

	* contrib/m_help.c:
	   - Added missing handler to m_help.
	   Reviewed by: ievil

2003-08-16 15:50  metalrock

	* modules/m_xline.c:
	   - Fix for remote xline and unxline. Also fixes null reason crash.
	   Reviewed by: ievil

2003-08-16 07:18  stu

	* src/s_auth.c: fixed logic error when ip and host do not match
	  meaning host too long message as displayed too

2003-08-15 23:33  metalrock

	* modules/m_resv.c:
	   - Fixed remote resv/unresv not working.
	   - Corrected "UNRESV" not "RESV" when we are doing a /unresv without
	   sufficient params.  Reviewed and Approved by: db

2003-08-15 16:24  metalrock

	* modules/m_kline.c:
	   - Fix incorrect temp dline comment and timestamping due to invalid
	   dlbuffer.  Reviewed by: Michael

2003-08-13 17:10  michael

	* modules/m_stats.c:
	  - m_stats.c: fixed a few compile warnings (missed casts)

2003-08-13 16:35  metalrock

	* src/s_user.c:
	   - The disable_auth feature needs to be consistent with ratbox and
	   hybrid 7 stable and not strip the ident automatically.
	   Approved by: Michael

2003-08-13 05:57  michael

	* modules/m_stats.c, src/s_conf.c:
	  - s_conf.c:make_conf_item(): add a new gline to the gline_items
	  double link list! :p
	  - m_stats.c: fixed invalid 'STATS G' output

2003-08-13 05:52  michael

	* modules/m_stats.c:
	  - m_stats.c: got rid of some very old DEBUGMODE remnants

2003-08-13 02:03  metalrock

	* src/s_user.c:
	   - Fix for disable_auth still checking for ident.
	   Reviewed by: billy-jon

2003-08-12 17:39  metalrock

	* src/hostmask.c:
	   - Left out the user check portion in kline_exempt.
	   Reviewed by: Michael

2003-08-12 17:22  metalrock

	* src/hostmask.c:
	   - Fix for kline_exempt.
	   Reviewed by: Michael

2003-08-11 14:43  metalrock

	* modules/m_kline.c:
	  - Add the date/timestamp to remote klines as well.
	  - Cleaned up some redundant code in kline.
	   Reviewed by: stu

2003-08-11 08:40  adx

	* src/Makefile.in:
	  - fixed typo

2003-08-11 08:32  stu

	* src/: client.c, irc_res.c: This should fix the resolver cores

2003-08-10 17:30  adx

	* src/channel_mode.c:
	  - fixed logic in my code

2003-08-10 17:24  adx

	* src/channel_mode.c:
	  - Fixed MODE +x-x / -x+x <nick> <nick> where no changes were shown
	    but the first mode won. Currently no real changes to member status
	    are made.
	  - Show +x-x / -x+x style modes on channel - they're used to deal
	    with desyncs, plus +o-o is important because it gives a remote user
	    ability to desync the channel (by removing CHFL_DEOPPED status)
	  - Allow +hv combos as they're (unlike +oh) relatively harmless and
	    because we already allow to have +v and another status at the same
	    time.

2003-08-10 08:30  michael

	* src/s_conf.c:
	  - fixed core in detach_conf() and detach_all_confs()

2003-08-09 23:54  stu

	* src/listener.c: forced commit to log previous changes.

	  - changed the listener code to bind to 2 seperate sockets for ipv6 -
	  one v4 and one v6.  This fixes odd behaviour with openbsd systems
	  and some others.

2003-08-09 23:52  stu

	* src/irc_res.c: back out a commit that shouldnt have happened that
	  I tried to cancel..

2003-08-06 00:58  michael

	* src/: ircd_parser.y, s_conf.c:
	  - fixed remote KLINE/UNKLINE

2003-08-05 12:23  michael

	* include/client.h, src/client.c, src/s_serv.c, src/s_user.c:
	  - removed obsolete user->refcnt and serv->user (H6 remnant. used by
	  m_trace)

2003-08-04 05:39  adx

	* etc/example.conf, etc/example.efnet.conf, src/hostmask.c:
	  - show gline_exempt, can_flood, restricted and !need_password
	    in /stats i prefixes

2003-08-04 04:58  michael

	* include/s_conf.h, modules/m_stats.c, src/client.c, src/s_conf.c,
	  src/s_user.c:
	  - removed the first parameter of the oper_privs_as_string()
	    function.  the Client pointer is not longer necessary, we set the
	    operflags in oper_up() for now.
	  - fixed a few comments

2003-08-03 10:22  michael

	* contrib/m_clearchan.c, include/memory.h, modules/m_admin.c,
	  modules/m_away.c, modules/m_cryptlink.c, modules/m_encap.c,
	  modules/m_kline.c, modules/m_oper.c, modules/m_ping.c,
	  modules/m_post.c, modules/m_user.c, modules/m_version.c,
	  modules/m_whowas.c, src/client.c, src/hash.c, src/match.c,
	  src/memory.c, src/s_gline.c, src/s_user.c, src/sprintf_irc.c:
	  - style fixes only

2003-08-03 09:01  adx

	* src/: hostmask.c, ircd_parser.y:
	  - made /stats i show spoofs to opers in the first field

2003-08-02 07:23  adx

	* contrib/m_operspy.c:
	  - fixed OPERSPY returning invalid numerics due to parv[0] misuse
	    when MFLG_HIDDEN is set

2003-08-01 12:29  michael

	* src/s_conf.c:
	  - fixed core on 'STATS h' (need at least one leaf_mask to reproduce
	  this core)

2003-08-01 08:24  michael

	* src/channel.c:
	  - fixed random remove_user_from_channel() cores

2003-07-31 19:13  michael

	* include/list.h, include/s_user.h, src/ircd.c, src/list.c,
	  src/s_debug.c, src/s_user.c:
	  - moved make_user, initUser and free_user to s_user.c
	  - renamed initUser() to init_user()
	  - declared make_user() as 'static'

2003-07-25 19:49  michael

	* include/balloc.h, include/client.h, include/event.h,
	  include/ircd_getopt.h, src/balloc.c, src/channel.c, src/client.c,
	  src/event.c, src/getopt.c:
	  - declared a few internal used functions as 'static'

2003-07-25 19:16  michael

	* include/client.h, include/hash.h, include/s_user.h,
	  modules/core/m_nick.c, modules/core/m_server.c,
	  modules/core/m_sjoin.c, src/client.c, src/hash.c, src/modules.c,
	  src/s_user.c:
	  - miscellaneous cleanups and optimizations
	  - changed perform_nick_collides and change_local_nick to void
	  functions

2003-07-25 19:11  michael

	* src/s_gline.c:
	  - fixed broken glines

2003-07-25 14:37  adx

	* src/channel_mode.c:
	  - restored original code which doesn't allow combining +hv or +oh
	    (a la hybrid-7.0)

2003-07-24 15:14  michael

	* modules/m_cryptlink.c:
	  - added a missing semicolon

2003-07-24 15:07  michael

	* modules/m_cryptlink.c:
	  - another bogus_host() cleanup

2003-07-23 11:26  adx

	* src/: ircd_lexer.l, ircd_parser.y:
	  - removed fallback_to_ip6_int leftover

2003-07-22 08:23  adx

	* etc/example.conf, etc/simple.conf, include/s_conf.h,
	  src/ircd_parser.y, src/s_conf.c:
	  - added a few initializations to set_default_conf
	  - miscellaneous corrections

2003-07-22 07:14  adx

	* src/s_user.c:
	  - localClient->confs collects struct ConfItem's, not struct
	    AccessItem's.  Fixes strange behaviour during user registration.

2003-07-22 06:57  adx

	* src/ircd_parser.y:
	  - use yyerror() instead of sendto_realops_flags when reporting
	    conf errors. This gives us the line number, contents and also logs
	    the error.

2003-07-22 06:33  adx

	* src/: ircd_parser.y, s_conf.c:
	  - make get_client_class() and get_printable_conf()
	    return the actual class name
	  - use "default" instead of "unknown" in get_client_class,
	    otherwise it can interfere with real class names
	  - the last attached class always wins, e.g. if you have
	    an auth{} with class="users" and oper{} with class="opers",
	    the latter should always be choosen by get_client_ping,
	    get_sendq etc.
	  - don't mark the default class for deletion
	  - check_class and detach_* use MaxTotal<0 as the deletion flag,
	    I guess clear_out_old_conf should too. Due to this bug, unused
	    classes were not freed.
	  - replace existing classes instead of adding new ones if names
	  match..
	  - ..but don't allow defining multiple classes with the same name

2003-07-21 14:27  db

	* src/: ircd_parser.y, s_conf.c: s_conf.c
	  - rename class0 to class_default, class 0 is a throwback to the old
	    numeric class idea.
	  - clean up the default class code. class_default only needs to be
	  built once
	  - CONF_CLIENT type does not necessarily have a conf->name, so
	  reflect that.

	  ircd_parser.y
	  - conf_add_class_to_conf was being called too early in the auth code

2003-07-21 13:18  adx

	* src/: ircd_parser.y, s_user.c:
	  - fixed core when you put two spoof="..." lines into an auth{}
	    block, if the latter is longer than HOSTLEN characters.

2003-07-21 13:09  adx

	* etc/: example.conf, example.conf.quick, example.efnet.conf,
	  simple.conf:
	  - fixed typo

2003-07-21 06:45  michael

	* contrib/m_force.c:
	  - m_force.c: halfop prefix is '%' not '+'
	               make sure we don't send a SJOIN with a space prefixed
	               nickname

2003-07-20 21:58  michael

	* contrib/m_jupe.c, include/ircd.h, modules/core/m_server.c,
	  src/channel.c, src/client.c, src/ircd.c, src/s_serv.c,
	  src/s_user.c:
	  - removed Count.server. use dlink_list_length(&global_serv_list)
	  - m_server.c/m_jupe.c: fixed logic in bogus_host()

2003-07-19 23:34  db

	* src/hash.c:
	  - There is no such thing as a !== operator in 'c'. Not yet anyway.
	    Lets hope the ANSI committee doesn't do it in c2003 or something.

2003-07-19 19:05  michael

	* src/motd.c:
	  - motd.c: slight cosmetic fixes. missed a leading '0' if minute
	  count is <10

2003-07-19 18:56  michael

	* src/hash.c:
	  - hopefully fixed the stupid hash_del_* cores

	    submitted by: adx, Michael

2003-07-19 15:33  michael

	* src/Makefile.in:
	  - distclean should not delete version.c.SH

2003-07-19 05:57  michael

	* src/s_debug.c:
	  - s_debug.c: fixed incorrect ban/except/invex memory count
	               added channel-topic memory usage statistic
	               various cleanups

2003-07-19 05:29  michael

	* modules/core/m_quit.c:
	  - m_quit.c: replaced a strlcat() with strlcpy()

2003-07-19 01:23  metalrock

	* src/client.c:
	   - Fixed logical error in hide_server_ips and hide_spoof_ips.
	   Reviewed by: joshk

2003-07-18 18:19  metalrock

	* contrib/m_whois.c, src/s_serv.c:
	   - Updated contrib whois module with stock whois module.
	   - Fixed hide_server_ips leakage in autoconnect notice.
	   Reviewed by: billy-jon

2003-07-18 18:05  bill

	* modules/m_trace.c: Submitted by:	Tomas Q (xanith)
	  - removed pointless if() in trace code that would prevent -w users
	  from seeing class counts

2003-07-18 14:10  bill

	* contrib/m_operspy.c, modules/m_whois.c:
	  - added local oper notice of operspy logging calls
	  - much cleaner, and more efficient method for disallowing remote
	  whois calls

2003-07-17 21:11  metalrock

	* modules/m_kline.c:
	   - Get rid of shadowed declaration warning and made user and host
	   local variables.  Reviewed by: Rodder

2003-07-17 20:41  joshk

	* Makefile.in, configure, configure.ac:
	  - configure, configure.ac: If we can't figure out how to make
	  depend, just skip it. cc -MM sadly doesn't work all the time... We
	  should confirm what works with each compiler.
	  - Makefile.in: Prevent make recursion when a directory is not
	  present. (Stale code)

2003-07-17 03:00  joshk

	* src/ircd_parser.y: Oops, a ; was forgotten at the end of a line.
	  Broke some bisons.

2003-07-17 02:25  metalrock

	* TODO, contrib/m_ctrace.c, contrib/m_ltrace.c, contrib/m_whois.c,
	  etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  etc/simple.conf, include/s_conf.h, modules/m_trace.c,
	  src/client.c, src/hostmask.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c, src/s_user.c:
	   - Coded hide_spoof_ips option into ircd.conf.
	   - Cleaned up the trace module's horrible if statements.
	   - Added joshk's patch to not show own spoofed ips if hide_spoof_ips
	   is defined.  Reviewed by: joshk

2003-07-17 02:18  joshk

	* src/Makefile.in: make distclean should delete anything pertaining
	  to version.c! not just version.c.last.

2003-07-15 20:35  michael

	* modules/m_stats.c:
	  - fixed 'STATS p' to show the correct oper privileges

	    BI #771927

2003-07-11 13:55  db

	* src/ircd_parser.y:
	  - freeing the dlink node one is about to dlinkDelete results in bad
	    (tm) things happening. This should fix jacks core.

2003-07-11 05:20  michael

	* modules/m_who.c:
	  - fixed core on '/who *'

2003-07-11 00:48  metalrock

	* src/ircd_parser.y:
	   - Fixed server hanging on /rehash
	   Submitted by: db
	   Reviewed by: joshk

2003-07-09 00:17  db

	* src/ircd_parser.y:
	  - prevent NULL user or host in a CollectItem from coring the ircd
	    in the parser

2003-07-08 23:32  joshk

	* modules/Makefile.in:
	  - This fixes .depend breakage for core modules. Before, core modules
	  would be listed in .depend as if they were in just modules,
	  effectively making them useless. Now prepend core/ to the core
	  modules .depend entries with some careful sed work.

2003-07-08 23:15  db

	* src/: ircd_parser.y, s_conf.c:
	  - fixed stats U (shared confs) wrong var being printed in s_conf.c
	    double allocate of a shared conf in ircd_parser.y

2003-07-08 17:06  joshk

	* Hybrid-team, Makefile.in, contrib/Makefile.in, doc/Makefile.in,
	  etc/Makefile.in, include/Makefile.in, include/modules.h,
	  messages/Makefile.in, modules/Makefile.in, modules/m_gline.c,
	  modules/m_kline.c, servlink/Makefile.in, src/Makefile.in,
	  src/modules.c, tools/Makefile.in:
	  - most Makefile.ins: include .PHONY sections and remove unused vars
	  - Hybrid-team: change some corny wording
	  - modules.[ch], m_gline.c, m_kline.c: Fix the static build

2003-07-08 16:54  michael

	* modules/m_invite.c:
	  - m_invite.c: fixed *outdated* comment

2003-07-08 13:06  joshk

	* src/s_conf.c:
	  - Finally inline (un)map_to_conf

	  Approved by:	db

2003-07-08 13:01  joshk

	* README.FIRST, doc/whats-new.txt: Ongoing documentation updating
	  in preparation for 7.1

2003-07-08 12:59  joshk

	* include/: resv.h, sprintf_irc.h:
	  - Unused `find_nick_resv' removed and made a note about
	  `vsnprintf_irc' not actually being defined in sprintf_irc.c.

2003-07-08 10:44  michael

	* src/channel_mode.c:
	  - get_channel_access: make sure that member != NULL before doing
	  anything

	    spotted by adx

2003-07-08 00:02  db

	* modules/m_unkline.c:
	  - removed no longer used m_unkline.c as its functionality is now
	    combined with m_kline.c

2003-07-08 00:01  db

	* include/client.h, modules/Makefile.in, modules/m_gline.c,
	  modules/m_kline.c, modules/m_unkline.c, modules/m_xline.c,
	  src/client.c, src/csvlib.c, src/ircd.c, src/s_conf.c:
	  - first part of kline cleanups
	  - combined m_unkline.c code with m_kline.c code to be consistent
	  - renamed check_klines to check_conf_klines()
	  - Don't call check_conf_klines() directly from anywhere but the
	    io_loop in ircd.c

2003-07-07 23:59  db

	* src/ircd_parser.y:
	  - Fixed typo. Dupstring should have been DupString

2003-07-07 20:37  michael

	* src/match.c:
	  - match.c: fixed wrong comment. irccmp() returns 0 if s1 is equal to
	  s2, 1 if not

2003-07-07 20:33  michael

	* src/channel_mode.c:
	  - get_channel_access(): removed unused Channel pointer
	                          added an assert()

2003-07-07 17:18  michael

	* include/cluster.h, include/s_conf.h, modules/m_kline.c,
	  modules/m_locops.c, modules/m_resv.c, modules/m_stats.c,
	  modules/m_unkline.c, modules/m_xline.c, src/channel.c,
	  src/client.c, src/cluster.c, src/csvlib.c, src/ircd_parser.y,
	  src/list.c, src/s_conf.c:
	  - redid clusters to use the new configuration code
	  - added 'STATS s|S' (reports cluster items)
	    using RPL_STATSULINE for now. maybe we could add a
	    new numeric for clusters.
	  - removed unnecessary casts

2003-07-07 12:56  joshk

	* include/client.h, include/modules.h, include/s_conf.h,
	  src/dynlink.c:
	  - Modules unloading crash fix by Greg Prosser
	  - Remove unused functions find_tkline and remove_client_from_list

2003-07-07 10:08  michael

	* src/channel_mode.c:
	  - fixed compiletime error with --enable-halfops

2003-07-07 08:43  michael

	* TODO, contrib/m_opme.c, include/channel.h,
	  include/channel_mode.h, src/channel_mode.c:
	  - replaced change_channel_membership() with two macros
	  - updated TODO

2003-07-07 08:27  michael

	* contrib/m_opme.c:
	  - m_opme.c: removed +ohv compatibility code
	              fixed wrong casts

2003-07-07 02:53  joshk

	* src/s_serv.c: Fix cryptlinks, this is fallout from adx making
	  localClient->passwd non-static.

2003-07-07 01:18  joshk

	* doc/Makefile.in: I missed this one

2003-07-07 01:15  joshk

	* contrib/Makefile.in, modules/Makefile.in: Like this, we will be
	  able to safely override $(prefix) on the command line, a la 'make
	  prefix=/usr/local/ircd/ircd2 install' (which just bit me, as it
	  tried to remove some directory in the hardcoded prefix. @prefix@ is
	  now only used once, and later on referred to as ${prefix} so nothing
	  else must be overridden.

2003-07-07 00:59  joshk

	* contrib/m_ctrace.c, src/ircdauth.c: class.h is gone! replace with
	  s_conf.h where necessary

2003-07-06 22:12  db

	* src/s_conf.c:
	  - a conf item which was a HUB_TYPE would not be removed correctly,
	    as the code was only trying to dlinkDelete from the leaf list only

2003-07-06 20:50  db

	* include/class.h, src/class.c, src/s_serv.c:
	  - No more class.c/class.h, its rolled into s_conf.c now

2003-07-06 19:38  db

	* include/client.h, include/s_serv.h, modules/m_cryptlink.c,
	  modules/core/m_server.c, src/client.c, src/s_serv.c:
	  - fixed goof in s_serv.c with not setting up server_conf properly,
	    this would have caused cryplinks simply to not work.
	  - ->s_conf is now in terms of ConfItem instead of AccessItem

2003-07-06 15:10  michael

	* src/s_user.c:
	  - fixed core. don't call detach_conf() for remote clients.

	    evil diane! ;-)

2003-07-05 15:08  joshk

	* contrib/m_ltrace.c: Fix warnings from missing s_conf.h include

2003-07-05 02:20  db

	* contrib/m_classlist.c, contrib/m_jupe.c, contrib/m_ltrace.c,
	  contrib/m_operspy.c, include/hostmask.h, include/s_conf.h,
	  modules/m_challenge.c, modules/m_connect.c,
	  modules/m_cryptlink.c, modules/m_gline.c, modules/m_kline.c,
	  modules/m_oper.c, modules/m_resv.c, modules/m_stats.c,
	  modules/m_testline.c, modules/m_trace.c, modules/m_xline.c,
	  modules/core/m_message.c, modules/core/m_server.c,
	  src/Makefile.in, src/class.c, src/client.c, src/csvlib.c,
	  src/hostmask.c, src/ircd.c, src/ircd_parser.y, src/list.c,
	  src/motd.c, src/resv.c, src/s_bsd.c, src/s_bsd_devpoll.c,
	  src/s_bsd_kqueue.c, src/s_bsd_poll.c, src/s_bsd_select.c,
	  src/s_bsd_sigio.c, src/s_conf.c, src/s_debug.c, src/s_gline.c,
	  src/s_serv.c, src/s_user.c, src/send.c:
	  - Here is the mega commit for re-working the config subsystem
	    All config items are now "subclassed" from struct ConfItem
	  - class confs are now really just another form of a ConfItem so
	    class.c class.h goes away, to be integrated into s_conf.c (for
	    now)
	  - managed to free up an unnecessary structure element in struct
	    AccessItem while at it (no reason to carry the classname here!)
	  - further cleanups will have to be done in hostmask/kline/gline etc.
	    code to cleanly use struct ConfItems natively. We can save a lot of
	    memory this way eventually.

	    Reviewed by adx, Michael, joshk, metalrock, me
	    Go find more bugs and fix 'em

2003-07-05 00:41  joshk

	* include/: rsa.h, s_bsd.h, s_serv.h: Removing some externed but
	  never defined or used functions.
	  (decrypt_data, crypt_data, start_collect_zipstats, get_my_name)

	  There are more but they shall be done after the next megacommit :)

2003-07-04 21:27  db

	* src/hash.c:
	  - move the exceeding sendq test before doing the actual send of
	    channel list in case the client is still over the high water mark
	    for sendq from last channel list burst.

	    Suggested by Piotr, hence reviewed by him too. ;-)

2003-07-04 08:09  adx

	* src/channel_mode.c:
	  - allow channel members combine +ohv. This unfortunately breaks
	    hybrid-7.0 compatibility on networks with halfops support.
	    You therefore need to have all servers running 7.1 with
	    --enable-halfops if you want to keep your servers synchronised.

2003-07-04 07:45  adx

	* doc/technical/hostmask.txt, etc/example.conf,
	  etc/example.conf.quick, etc/example.efnet.conf, include/client.h,
	  include/hostmask.h, include/s_conf.h, modules/m_kline.c,
	  modules/m_pass.c, modules/m_stats.c, modules/m_testline.c,
	  src/hostmask.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/ircdauth.c, src/s_bsd.c, src/s_conf.c, src/s_serv.c,
	  src/s_user.c:
	  - added need_password to auth{} blocks, if it is set to "no", then
	    we can allow users who don't supply the correct password to
	    connect using another auth{} entry.
	  - made localClient->passwd char * rather than a static array.
	    Note we still need to keep it throughout the connection, because
	    a registered user can issue (masked) /stats I.
	  - testline takes an optional second parameter: connection password
	  - style corrections

2003-07-03 10:54  michael

	* src/s_auth.c:
	  - s_auth.c: 'const' corrections
	              removed useless typedef

2003-07-03 03:06  joshk

	* configure, configure.ac: Oops, fixing bustage.

2003-07-02 23:54  joshk

	* configure, configure.ac, include/setup.h.in, src/csvlib.c:
	  - configure&co.: allow strtok_r usage on Solaris by #defining
	  __EXTENSIONS__.
	  - src/csvlib.c: Build warning on solaris... we're really never going
	  to get here because it's an infinite loop with no breaks in it.

2003-07-02 22:57  db

	* src/hash.c:
	  - Check for a hash name not being found in the hash in all the
	    hash_del_* functions. Apparently, ircu does not care if this happens
	    and would core...  hybrid does not add the server name to the hash
	    until after a successful link, unlike ircu, which apparently adds it
	    before. This caused a core in /connect. Personally, I am happier
	    wasting the cycles checking for a name not found in the hash..

2003-07-02 13:32  michael

	* configure, configure.ac, contrib/m_jupe.c, include/handlers.h,
	  include/hash.h, include/setup.h.in, modules/core/m_nick.c,
	  modules/core/m_server.c, src/channel.c, src/client.c, src/hash.c,
	  src/ircd.c, src/match.c, src/modules.c, src/parse.c, src/resv.c,
	  src/s_debug.c, src/s_serv.c, src/s_user.c:
	  - imported new hash alghoritm. the alghoritm is borrowed
	    from ircu and was written by Andrea Cocito "Nemesi"

	    - code slimmed
	    - reduced risk of hash degeneration attacks (original alghoritm
	      improved by the pseudorandom coding of character weights)
	    - HASHSIZE is now one for all hash tables and is controlled by
	    --enable-small-net
	  - added mo_hash
	    - style cleanups
	    - added some asserts
	    - optimized irccmp

	  submitted by: adx & Michael reviewed by : adx

2003-07-01 12:45  adx

	* include/s_bsd.h, src/ircd.c, src/s_bsd_devpoll.c,
	  src/s_bsd_kqueue.c, src/s_bsd_poll.c, src/s_bsd_select.c,
	  src/s_bsd_sigio.c:
	  - fixed the value of 'delay' parameter passed to comm_select()
	  - fixed some issues connected with sigio
	  - turned comm_select() into a void function
	  - various optimizations and style cleanups to select loop
	  implementations

	  Optimizing io_loop() and using dbuf's instead of linebuf's should
	  give a noticeable performance improvement in comparision with 7.0,
	  especially on networks with little traffic.

	  I haven't tested the /dev/poll implementation, I hope I didn't break
	  anything.

2003-07-01 07:19  michael

	* src/s_serv.c:
	  - s_serv.c: reverted back to 7.357. we don't create an  'User' block
	    for a server... never. client_p->user is NULL at this point, hence
	    ircd will crash.  please test your code the next time  BEFORE  you
	    commit your changes.

2003-07-01 00:43  joshk

	* src/s_serv.c:
	  - src/s_serv.c: If we fail because we discover that we're a leaf
	  node and not a hub, better tell the operators so they can fix it up
	  real fast.

2003-06-30 21:19  joshk

	* contrib/m_opme.c: Bleh, #endif

2003-06-30 21:18  joshk

	* contrib/m_opme.c: Missing #ifdef fixes the !USE_HALFOPS build.

2003-06-30 14:52  joshk

	* configure: Probably a good idea to run autoconf

2003-06-30 13:49  adx

	* configure.ac, include/ircd.h, include/setup.h.in, src/ircd.c,
	  src/s_bsd_devpoll.c, src/s_bsd_kqueue.c, src/s_bsd_poll.c,
	  src/s_bsd_select.c, src/s_bsd_sigio.c:
	  - instead of short-polling-and-long-sleeping, wait for I/O events
	    (hey, comm_select has an argument!).

2003-06-30 12:09  adx

	* contrib/m_opme.c, modules/core/m_sjoin.c, src/channel_mode.c:
	  - don't combine +hv (stay compatible with hybrid 7.0)
	  - don't mark "our" users as deopped! (it's apparently useless and
	    breaks simple MODE commands..) (Reported by Michael)

2003-06-30 03:10  joshk

	* src/s_conf.c: I made clear_conf_items a bit more stylish, but
	  people might find it's overkill. I see it as easier to expand this
	  way. But at any rate, we walk through server_items now in addition
	  to the rest and delete_conf_item the lot; fixing /stats c.

2003-06-30 00:49  metalrock

	* modules/m_challenge.c:
	   - Removed redundant declaration.
	   Reviewed by:joshk

2003-06-30 00:38  joshk

	* contrib/Makefile.in, src/s_conf.c:
	  - Fix problems caused by assumptions about match_esc. It DOES return
	  1 on success, and it seems that the arg with the * and ? must be the
	  first.
	  - Fix parallel make in contrib when all was paired with install.

	  Reviewed by:	metalrock

2003-06-29 20:23  joshk

	* src/s_conf.c:
	  - This is exactly why source with fishy whitespace that compiles
	  right should always warn you that something is about to go horribly
	  wrong.  (Check out the diff.)

2003-06-29 18:46  michael

	* contrib/m_clearchan.c, contrib/m_force.c, contrib/m_operspy.c,
	  include/channel.h, modules/core/m_join.c, modules/core/m_kick.c,
	  modules/core/m_part.c, src/channel.c, src/client.c:
	  - optimized remove_user_from_channel() by killing another redundant
	    find_channel_link() call
	  - changed remove_user_from_channel() to a void function

2003-06-29 14:09  joshk

	* configure, configure.ac, include/irc_string.h,
	  include/setup.h.in, src/crypt.c, src/match.c: Okay, my hand has
	  been smacked. Back to irccmp().

2003-06-29 13:28  adx

	* src/s_conf.c:
	  - all shared{} blocks with type=all (and other combined types) are
	    simply broken if it's not a masked comparision..

2003-06-29 11:06  adx

	* contrib/Makefile.in:
	  - don't compile example_module.c every time contrib is made.
	    This file is for coders only and we assume they know
	    how to build a module.

2003-06-28 22:48  joshk

	* src/irc_string.c: oopsie, this missed the cut last time. sorry
	  for the bustage

2003-06-28 22:44  joshk

	* configure, configure.ac, include/irc_string.h,
	  include/setup.h.in, src/match.c:
	  - Another episode of "let's use native functions." irccmp and
	  ircncmp are simply strcasecmp and strncasecmp, so let's use them if
	  we can!

2003-06-28 20:54  joshk

	* RELNOTES, configure, configure.ac:
	  - RELNOTES: Sync with 7.0
	  - configure, configure.ac: use $ac_cv_c_compiler_gnu instead of
	  testing $CC = gcc

2003-06-28 19:58  joshk

	* messages/ircd-french.lang:
	  - Fix a few untranslated messages.

2003-06-28 18:03  wiz

	* modules/m_who.c:
	  - /who * sends you a list of the members of the channel you joined
	    last, so it shouldn't send "*" back, it should send the name of the
	  channel back.

	  Reported by: Lee

2003-06-28 14:01  joshk

	* configure, configure.ac, include/irc_string.h,
	  include/setup.h.in, include/stdinc.h:
	  - include/irc_string.h, configure et al: (experimental) Use native
	  strtok_r instead of our strtoken() if possible.
	  - configure: Oops, the check for {l,s}rand48 was shadowed. Sorry
	  about that.
	  - include/stdinc.h: Provide a surrogate stddef.h, if it's not
	  availbale.  Just in case... and also make that strtoken #define so
	  it uses strtok_r.

2003-06-27 23:33  db

	* modules/m_connect.c, src/ircd_parser.y, src/s_conf.c,
	  src/s_serv.c:
	  - corrected m_connect.c to use find_matching_name_conf() instead
	    of find_exact_name_conf() to find server names. (as pointed out by
	    Michael)
	  - cleanups in style in s_serv.c
	  - cleaned up a few logic mistakes, in oper code in s_conf.c
	  - attach_connect_block() in s_conf.c was using old config list for
	    looking for servers, of course it would never find them there!

2003-06-27 03:35  joshk

	* configure, configure.ac, src/s_conf.c:
	  - src/s_conf.c: This should fix the segfault jack experienced, but
	  there's a thinko lying around somewhere still. *pours coffee on
	  Diane*
	  - configure, configure.ac: gcc -MM is better if it's available. Less
	  cruft.  Also a few cosmetic things.

2003-06-27 00:39  db

	* include/s_conf.h, modules/m_challenge.c, modules/m_connect.c,
	  modules/m_oper.c, modules/m_stats.c, src/ircd_parser.y,
	  src/s_conf.c, src/s_serv.c:
	  - This sanitizes server confs now. Not been thoroughly tested.
	  - also fixed a few spots where I missed changes i.e. m_challenge.c
	  m_oper.c

2003-06-26 12:44  michael

	* include/client.h:
	  - client.h: removed obsolete 'lastrecvM' integer

2003-06-26 08:19  michael

	* include/listener.h, include/s_conf.h, include/whowas.h,
	  modules/m_challenge.c, src/balloc.c, src/hash.c, src/listener.c,
	  src/s_serv.c, src/s_user.c:
	  - fixed some nasty casts
	  - removed unused prototypes
	  - fixed compile warnings caused by comparison between
	    unsigned and signed

2003-06-26 07:36  db

	* modules/m_challenge.c:
	  - brought m_challenge into the new world order
	    i.e. use the new config system to lookup operator structs instead
	    of no longer working system

2003-06-26 00:49  joshk

	* src/csvlib.c:
	  - src/csvlib.c: add CLASS_TYPE to the conf_types with which we do
	  squat

2003-06-26 00:46  joshk

	* contrib/m_classlist.c, src/s_conf.c:
	  - contrib/m_classlist.c: fix for ClassItem fallout
	  - src/s_conf.c: fix warnings for !IPV6

	  Reviewed by:	db

2003-06-26 00:35  db

	* include/class.h, include/s_conf.h, modules/m_stats.c,
	  modules/m_trace.c, src/class.c, src/ircd_parser.y, src/s_conf.c,
	  src/s_debug.c, src/s_serv.c:
	  - This unifies the Class code with the other configitem code
	    Now ClassItems (old struct Class) are treated the same as
	    Xlines, Olines, resvs. etc. same lookup code in s_conf.c is
	    used for classes now.

	    Reviewed by joshk, who will be committing the fix to m_classlist
	    immediately afterwards ;-)

2003-06-25 21:41  joshk

	* configure, configure.ac:
	  - Shut cc -xM up with 2>/dev/null
	  - Some reducing of message lengths, quite painful on 80x24...

2003-06-25 21:25  joshk

	* configure, configure.ac, servlink/io.c, tools/Makefile.in:
	  - tools/Makefile.in: cosmetic changes
	  - configure, configure.ac: forgot to set $SunWorkShop. also use
	  makedepend if possible, not just on HPUX - it's good enough.
	  - servlink/io.c: Some wrongly #ifdef'd code is now corrected; this
	  may break compressed cryptlinks. We'll see.

2003-06-25 12:54  joshk

	* contrib/m_operspy.c:
	  - Fix fallout from Michael's last commit.

2003-06-25 05:22  michael

	* include/irc_reslib.h, src/irc_res.c, src/irc_reslib.c,
	  src/list.c:
	  - irc_reslib.c: declared internal used functions as 'static'
	  - list.c: fixed a compile warning caused by the previous commit

2003-06-25 04:46  michael

	* include/channel.h, include/client.h, modules/m_knock.c,
	  modules/m_lljoin.c, modules/core/m_join.c, modules/core/m_kill.c,
	  src/channel.c, src/client.c, src/hash.c, src/list.c,
	  src/s_serv.c:
	  - removed channel->members and client->user->joined.   get the
	    number of channelmembers via dlink_list_length(&channel->members)
	    and the number of channels an user has joined via
	  dlink_list_length(&client->user->channel)
	  - added a few assert()'s

2003-06-24 20:41  joshk

	* configure, configure.ac:
	  - sanity checks for --maxconn (unlimited || (>65536) = 65536)

	  Suggested by: metalrock

2003-06-24 10:23  michael

	* modules/m_names.c, modules/m_oper.c, modules/m_time.c,
	  modules/core/m_message.c, src/m_error.c:
	  - m_error/m_time/m_names/m_message: added missing DUMMY message
	  handler
	  - m_oper.c: initialize 'name' with parv[1] rather than assign it

2003-06-24 06:37  michael

	* modules/m_connect.c:
	  - m_connect.c: 'pending_connection->name' is never NULL. changed to
	  ->name[0]

2003-06-24 05:39  michael

	* include/s_user.h, modules/m_gline.c, modules/m_ison.c,
	  modules/m_pong.c, modules/m_stats.c, src/channel_mode.c,
	  src/rsa.c, src/s_conf.c, src/s_log.c, src/s_user.c, src/whowas.c:
	  - several char/int constifications
	  - moved various local variables in the inner most scope

	    (hopefully for a better optimization)

2003-06-24 00:18  joshk

	* src/version.c.SH: Hullo, it's 2003...

2003-06-23 22:36  joshk

	* TODO, configure, configure.ac, include/setup.h.in,
	  modules/core/m_kick.c, modules/core/m_sjoin.c, src/irc_res.c:
	  - TODO: updated.
	  - configure, configure.ac, setup.h.in: check for lrand48() and
	  srand48()
	  - iauth/source/res.c, src/irc_res.c: change #ifdefs from LRAND48 to
	  HAVE_LRAND48 and HAVE_SRAND48.
	  - modules/core/m_kick.c, modules/core/m_sjoin.c: fix some bad ifdefs
	  for halfops

2003-06-23 20:55  metalrock

	* include/s_user.h, modules/m_lusers.c, src/s_user.c:
	   - Fixed issue in which /lusers servername servername would give you
	   the wrong results. According to ircnet and old hybrid 6, /lusers
	   should give you the lusers of the local server, /lusers anything
	   should give you the lusers of the local server, /lusers anything
	   servername/mask should give you the lusers of the servername/mask.
	  Reviewed by: joshk

2003-06-23 20:29  michael

	* src/s_debug.c:
	  - s_debug.c: fixed wrong counting of channelmemory. chptr->chname
	               is a fixed-size array of 'CHANNELLEN+1' bytes.
	               strlen(chptr->chname) is just wrong.

2003-06-22 22:39  db

	* src/ircd_parser.y:
	  - This should fix the cores with second user= in operator {} block
	    class pointer would have been NULL

2003-06-22 21:31  joshk

	* configure, configure.ac, include/setup.h.in, src/ircd_parser.y:
	  - Add #ifdef HAVE_LIBCRYPTO around a MyFree for a
	  cryptlinks-specific variable.
	  - Add a AC_MSG_RESULT(no) to the core IPv6 check.
	  - Use the more complicated strl{cat,cpy} test only if cc is gcc.

2003-06-22 18:35  metalrock

	* etc/: example.conf, example.conf.quick, example.efnet.conf:
	   - Fixed my typos in the logging portion of ircd.conf
	   Reviewed by: joshk

2003-06-22 13:47  michael

	* modules/m_topic.c:
	  - m_topic.c: small optimization.  (saved an unnecessary
	    find_channel_link() call if the channel is not secret)

2003-06-22 12:30  db

	* src/ircd_parser.y:
	  - more cleanups to the parser code, get rid of the reliance on
	    internal data structures of s_conf.c

2003-06-21 23:28  michael

	* src/send.c:
	  - send.c: added 2 assert()'s

2003-06-21 22:37  db

	* src/ircd_parser.y:
	  - This fixes the oconf_items link list.
	    basically, we always used to use a struct ConfItem to replicate
	    multiple user@host names. Rather than do that, I've introduced
	    a struct CollectItem into ircd_parser.y itself. This does add
	    more copying back and forth, but serves to keep more separation
	    between the internals of s_conf.c and friends and the actual
	    ircd.conf parser.

2003-06-21 21:06  joshk

	* contrib/vms.diff, src/version.com:
	  - Remove src/version.com too

2003-06-21 20:52  joshk

	* README.VMS, clean.com, make.com, contrib/m_help.c,
	  contrib/vms.diff, include/defaults.h, include/memory.h,
	  include/s_log.h, include/setup_vms.h, include/stdinc.h,
	  modules/descrip.mms, modules/core/descrip.mms,
	  servlink/descrip.mms, src/descrip.mms, src/event.c, src/getopt.c,
	  src/ircd.c, src/ircd_lexer.l, src/s_bsd.c, src/s_bsd_qio.c,
	  src/s_debug.c, src/s_log.c, src/s_serv.c, tools/descrip.mms: Rip
	  out VMS support from the mainline tree and put it into a diff (for
	  now.) Any complaints should have been voiced on the hybrid list a
	  while ago when I announced my intention to remove it.

2003-06-21 19:44  michael

	* modules/: m_challenge.c, m_kline.c:
	  - m_challenge.c: removed a pointless 'return'
	  - m_kline.c: replaced a strcpy() with strlcpy()
	               fixed wrong cast

2003-06-21 16:52  metalrock

	* include/s_conf.h:
	   - This is the proper fix for s_conf.h. I hate it when patches get
	   out of date and don't apply cleanly anymore.  Reviewed by: joshk

2003-06-21 16:38  joshk

	* configure, configure.ac, include/setup.h.in:
	  - Fix the strl{cat,cpy} test.
	  - We no longer use getopt.h, but we have our own getopt. Remove the
	  test.
	  - Fix some --disable-xxx stuff.

2003-06-21 16:36  joshk

	* include/s_conf.h: Fix jack's build bustage of missing
	  config_file_entry members

2003-06-21 16:10  metalrock

	* doc/channels.txt:
	   - Forgot to add this file during the previous cvs commit

2003-06-21 16:09  metalrock

	* TODO, contrib/m_force.c, contrib/m_whois.c, doc/index.txt,
	  doc/serverhide.txt, etc/example.conf, etc/example.conf.quick,
	  etc/example.efnet.conf, include/s_conf.h, include/s_log.h,
	  include/supported.h, modules/m_admin.c, modules/m_info.c,
	  modules/m_kline.c, modules/m_links.c, modules/m_lusers.c,
	  modules/m_motd.c, modules/m_ping.c, modules/m_stats.c,
	  modules/m_time.c, modules/m_users.c, modules/m_version.c,
	  modules/m_whois.c, modules/core/m_join.c, modules/core/m_nick.c,
	  src/channel.c, src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c,
	  src/s_log.c:
	   - Redid ircd.conf items: Moved oper_pass_resv out of channel{} and
	   put it into general{}
	  - Moved logging items from general{} to logging{}.
	   - Removed non_redundant_kline option, who would want redundant
	   kline anyways?
	  - Moved disable_remote_commands out of serverhide{} and put it into
	   general{}
	  - Moved disable_local_channels out of serverhide{} and out it into
	   channel{}
	  - Changed notices in m_force to numerics.
	   - Added channel documentation.
	   Reviewed by: billy-jon

2003-06-21 13:13  db

	* modules/m_stats.c, src/s_conf.c:
	  - This partially fixes /stats o for now. The code for generating the
	    oconf_list itself is still broken. I'll fix that later today.

2003-06-21 10:09  michael

	* src/channel_mode.c:
	  - optimized channel_modes() a bit. it's really easy, if len != 0 we
	    know that client_p is  eiher a  server or a channelmember, not
	    necessary to traverse client_p->user->channel again if we have both
	  +k and +l.

2003-06-21 08:26  michael

	* include/channel.h, modules/core/m_part.c, src/channel.c:
	  - added small function 'can_send_part'.  basically the same function
	    like can_send() but much more cleaner..  ok,  this is *lame*,  but
	    'PART' is a very frequently used function and I want to save as many
	    instructions as possible.

2003-06-21 01:30  joshk

	* configure, configure.ac, include/setup.h.in, src/modules.c:
	  - General changes to make the modules code a bit more portable. We
	  now figure out the extension of the modules in configure. Better
	  than TimeMr14C's kludge, and seeing as we may have shared modules
	  support for Win32 RSN, best to work out the kinks now.

2003-06-21 00:08  michael

	* modules/core/m_quit.c:
	  - m_quit.c: removed an unused header include

2003-06-20 23:55  michael

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  include/s_conf.h, modules/m_info.c, modules/core/m_quit.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c:
	  - removed 'client_exit' config option. it's now hardcodet(and a bit
	    faster).  the "Quit: " prefix is standard in the next hybrid6
	    release, so I don't want to waste an extra configuration option for
	  that.

2003-06-20 23:40  joshk

	* TODO: Update my TODO

2003-06-20 21:28  michael

	* src/ircd_parser.y:
	  - ircd_parser.y: added two missing break's. jump out of the
	                   loop if we have what we want...

2003-06-20 21:11  joshk

	* configure, configure.ac, doc/resv.txt, include/setup.h.in,
	  src/Makefile.in: o configure.ac, configure, setup.h.in:
	   - completely reworked checks for shared modules support, removed
	     a lot of repetitive tests. split into stages.
	   - only check for dyld.h if you're on a mac ($AppleGCC = yes)
	   - don't repeat the whole 'lets use static modules' stuff, put it at
	   the end and instead continually check for $shared_modules = yes
	   - lumped some AC_CHECK_FUNCS into one call
	   - use crypt.c if there is no crypt available (affects:
	   src/Makefile.in)
	  - Add a few explanatory comments
	   - Fixed warnings for when u_int{16,32}_t were not available
	   - Don't use our own variables to see whether either (v)snprintf
	   were available, use autoconf's built in ones
	   - m4-quoted some strings for cleanliness
	   - GCC doesn't accept '-a' wrt profile builds, just pull it out

	  o doc/resv.txt: isnt -> isn't

2003-06-20 13:11  joshk

	* doc/ircd.8:
	  - we don't have a -debug switch anymore.
	  - added -xlinefile and merged descriptions of -[kdx]linefile into
	  one entry

2003-06-20 06:29  michael

	* modules/m_ison.c:
	  - m_ison.c: fixed typo. the rfc1489 "Registration of a Cyrillic
	              Character Set" doesn't say anything about how to handle 'ISON' ;-)
	  s/rfc1489/rfc1459/

2003-06-19 21:48  joshk

	* configure, configure.ac, tools/rsa_respond/configure,
	  tools/rsa_respond/configure.ac:
	  - tools/rsa_respond/: looks like $Id: fullhist.php,v 1.1 2005/11/03 18:52:18 adx Exp $ needed m4 quotage. fixed.
	  - top-level configure(.ac): follow suit

2003-06-19 21:43  joshk

	* tools/rsa_respond/: .cvsignore, Makefile, Makefile.in, README,
	  configure, configure.ac: Add a rudimentary configure to
	  tools/rsa_respond. It's not as foolproof as our top level one, but
	  does the trick.

2003-06-19 10:27  michael

	* include/channel_mode.h, modules/core/m_mode.c,
	  src/channel_mode.c:
	  - small get_channel_access() optimization

2003-06-18 22:32  db

	* include/s_conf.h, include/s_user.h, modules/m_challenge.c,
	  modules/m_oper.c, src/ircd_parser.y, src/s_conf.c, src/s_user.c:
	  - The oper confs are now in a separate link list.
	    There are now two functions for searching for matching confs in
	    their various link lists... find_matching_name_conf() and
	    find_exact_name_conf()

	    The side effects are, we now have a separate link list for most
	    of the config items not in kline/iline handling code (hostmask.c
	    etc.)

	    I am considering moving "name" into the base ConfItem... *ponders*

2003-06-18 13:33  joshk

	* README.PLATFORMS, README.VMS, contrib/README,
	  doc/technical/ts5.txt:
	  - README.PLATFORMS: Mark TenDRA and VMS as broken.
	  - Other documentation fixes, its -> it's and thats -> that's ...
	  - Add a warning file to iauth for anyone who dareth venture in
	  there.

2003-06-18 05:17  joshk

	* modules/Makefile.in: Missed one - some style fixes for
	  hpux_shared.

2003-06-18 05:15  michael

	* src/fdlist.c:
	  - fdlist.c: made 'STATS F' look nicer (using a numeric now)

2003-06-18 05:14  joshk

	* contrib/Makefile.in, include/modules.h, src/modules.c: Some
	  modules can't be built statically for contrib because they call
	  static functions in their _modinits and _moddeinits. Relegate these
	  elsewhere and only build them if you're building shared.

2003-06-18 03:51  joshk

	* TODO, configure, configure.ac, contrib/Makefile.in,
	  contrib/m_clearchan.c, contrib/m_mkpasswd.c, contrib/m_ojoin.c,
	  contrib/m_opme.c, modules/m_tb.c, include/modules.h,
	  modules/Makefile.in, src/modules.c:
	  - contrib/mkpasswd.c: rename test_msgtab to mkpasswd_msgtab
	  - configure, configure.ac: AC_PROG_RANLIB made redundant by POSIXly
	  correct 's' option for ar.
	  - contrib/Makefile.in: Allow support for HPUX and static modules by
	  using ar's 'r' option to add and replace objects in libmodules.a,
	  and forcing a rebuild of modules.c and a relink of the ircd itself.
	  - many contrib/ files: wrap _modinit and company within #ifndef
	  STATIC_MODULES.
	  - src/modules.c, include/modules.h: add #ifdef-wrapped mod_add_cmds
	  for all of the contrib msgtabs.
	  - modules/Makefile.in: stop using ranlib

2003-06-18 02:26  metalrock

	* INSTALL, configure, configure.ac, contrib/m_ltrace.c,
	  include/defaults.h, include/m_info.h, include/s_conf.h,
	  include/setup.h.in, modules/m_trace.c, src/fdlist.c, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/listener.c,
	  src/restart.c, src/s_auth.c, src/s_bsd.c, src/s_bsd_poll.c,
	  src/s_bsd_select.c, src/s_bsd_sigio.c, src/s_conf.c:
	   - Removed max_clients from configure.
	   - Set OS's Max open files as the maximum number of connections the
	   ircd can handle.
	  - Added --with-maxconn=NUMBER to configure to override OS's fd
	   limits.
	  - Removed extra HARD_FD_LIMIT_ AND MAXCONNECTIONS definition and
	   replaced it with HARD_FD_LIMIT. We don't need 3 declarations of the
	   same thing.
	  - Removed junk max_buffers = blah from ircd.conf parsing, was never
	   used and was never defined in ircd.conf.  Reviewed by: joshk

2003-06-17 22:21  joshk

	* configure, configure.ac, include/setup.h.in:
	  - My mistake; I went grepping for MAXCLIENTS and found nothing
	  relevant, so I quickly pulled that out. Turns out it was MAX_CLIENTS
	  that was the pertinent one :( Backing out last configure-related
	  checkins.

2003-06-17 21:28  joshk

	* configure, configure.ac, include/setup.h.in,
	  modules/m_cryptlink.c:
	  - configure and company: MAXCLIENTS define is no longer used - pull
	  it.
	  - modules/m_cryptlink.c: thats -> that's

2003-06-17 21:10  db

	* src/client.c:
	  - Make sure client in global ip hash gets removed if its remote
	    *oops*

	    Suggested by Michael:

2003-06-17 20:52  joshk

	* BUGS, INSTALL, README.FIRST, RELNOTES, TODO, contrib/m_ojoin.c,
	  contrib/help/opers/info, contrib/help/opers/set, doc/ircd.8,
	  doc/messages.txt, include/packet.h, modules/m_info.c,
	  src/Makefile.in, tools/convertklines.c: Documentation changes; no
	  code affected. Update references to config.h (point to defaults.h
	  and such), talk more about configure, and point people to our SF.net
	  bug tracker (will work soon as Jon enables anonymous access to it)

	  Yeah, and lazylinks are
	    ____  _   _ ____ _____ _____ ____
	   | __ )| | | / ___|_   _| ____|  _ \
	   |  _ \| | | \___ \ | | |  _| | | | |
	   | |_) | |_| |___) || | | |___| |_| |
	   |____/ \___/|____/ |_| |_____|____/ ,

	  so I made a note of this in my TODO.

2003-06-17 20:15  metalrock

	* doc/whats-new.txt, etc/example.conf, etc/example.conf.quick,
	  etc/example.efnet.conf, include/s_conf.h, modules/m_connect.c,
	  src/client.c, src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c,
	  src/s_serv.c:
	   - Added hide_server_ips to ircd.conf.
	   Reviewed by: Michael, db, joshk

2003-06-17 20:02  joshk

	* include/Makefile.in, include/modules.h, src/ircd_parser.y,
	  src/modules.c, src/s_conf.c:
	  - src/modules.c, src/ircd_parser.y, src/s_conf.c, include/modules.h:
	  get rid of the superfluous *_pending stuff. oh well, it helped me
	  learn about dlink_lists :)
	  - include/Makefile.in: the user currently sees:

	  Installing header files...  mkdir -p /path/to/includes/

	  This kind of looks silly, so reverse the two. Cosmetic change.

	  Reviewed by:	db (modules stuff)

2003-06-17 16:09  joshk

	* Makefile.in:
	  - oops, sorry, this took out distclean for contrib

2003-06-17 16:05  joshk

	* Makefile.in, configure, configure.ac, include/inet_misc.h,
	  include/setup.h.in, modules/core/m_server.c, src/balloc.c,
	  src/class.c, src/inet_misc.c:
	  - configure, configure.ac, setup.h.in:
	     + Add a check for in6addr_any, it's not in Mac OS X but easily
	     defined.  + Since strlcat and strlcpy seem to be found in OS X,
	     but there is no prototype, do a more in depth check for these two
	     functions.
	     + "$GCC" -> "$ac_cv_c_compiler_gnu"
	     + Change wording of !select-error
	  - balloc.c: don't need the #ifdef wrapping
	  - class.c: #define BAD_PING -1 -> (-1) to ensure good style
	  - inet_misc.[ch]: add the in6addr_any stuff wrapped in ifdefs
	  - modules/core/m_server.c: thats -> that's
	  - Makefile.in: oops, CLEAN_DIRS -> INSTALL_DIRS

2003-06-17 01:22  joshk

	* TODO, configure, configure.ac:
	  - Update my TODO.
	  - Fix poll->select typo in configuren.

2003-06-17 00:13  joshk

	* src/irc_string.c:
	  - Make basename behave like the XPG/libc basename, where the return
	  result is stored on the stack.

	  Reviewed by:	michael

2003-06-16 23:58  joshk

	* configure, configure.ac, src/Makefile.in, src/descrip.mms,
	  src/dynlink.c, src/modules.c, src/s_conf.c:
	  - configure, configure.ac:
	     + use DYNLINK_C substitution to decide to waste time building
	     dylink.c or not.
	     + make sure select exists, don't unconditionally fall back on it,
	     warn the user instead.
	  - src/Makefile.in: see above
	  - src/dynlink.c: don't bother wrapping file in #ifndef
	  STATIC_MODULES
	  - src/descrip.mms: as such, make sure we don't build this file on
	  VMS!
	  - src/s_conf.c: #ifndef STATIC_MODULES, call the pending functions,
	  if not, don't; there will be unresolved symbols.
	  - src/modules.c: fix an off by one malloc error which caused
	  modrestart to smash the stack after awhile

2003-06-16 18:35  metalrock

	* src/s_conf.c:
	   - Missing declaration of match_item.
	   Reviewed by: joshk

2003-06-16 17:26  db

	* src/s_conf.c:
	  - This should clear up the memory leak I introduced. oops

2003-06-16 16:57  joshk

	* configure, configure.ac, messages/Makefile.in,
	  modules/Makefile.in:
	  - configure, configure.ac: some HPUX port work.
	  - messages/Makefile.in: remove the trailing ; from the mkdir
	  statement, breaks some systems
	  - modules/Makefile.in: don't invoke make *again*...!

2003-06-16 15:02  joshk

	* contrib/example_module.c, include/supported.h, src/modules.c:
	  - contrib/example_module.c: document a bit further, remove
	  unnecessary includes and refer to some files that people will find
	  useful
	  - src/modules.c: make base_valid a char, too.
	  - include/supported.h: it's still kind of a kludge, but much less of
	  a kludge.  at any rate the effect is the same :)

	  Reviewed by:	db

2003-06-16 14:21  michael

	* contrib/m_help.c, include/ircd_defs.h:
	  - removed unused/obsolete definitions

2003-06-16 11:16  michael

	* include/s_serv.h, include/s_user.h, src/s_auth.c, src/s_serv.c,
	  src/s_user.c:
	  - moved 'MaxClientCount' and 'MaxConnectionCount' to s_user.h
	  - s_auth.c: defined auth_doing_dns_list / auth_doing_ident_list as
	  'static'

2003-06-16 08:04  michael

	* src/hash.c:
	  - hash.c: fixed wrong size parameter of 2 strlcpy()'s. it should be
	            HOSTLEN+1, or better 'sizeof(dst)'

2003-06-16 05:18  michael

	* include/channel.h:
	  - channel.h: changed 'flood_noticed' to a char type. the value is
	               either 1 or 0.  of course, memory is cheap, but this is really a
	  waste ;-)

2003-06-16 03:37  metalrock

	* include/s_conf.h, modules/m_xline.c:
	   - find_u_conf is now find_matching_name_conf.
	   Reviewed and approved by: db

2003-06-16 01:32  db

	* modules/m_kline.c:
	  - s/maching/matching/ typos are fun

2003-06-16 00:01  joshk

	* src/list.c:
	  - src/list.c: fix an XXX that could have affected 64-bit
	  cleanliness.

2003-06-15 23:57  metalrock

	* modules/core/m_kick.c:
	   - Fixed compilation warning with uninitialized variable.
	   Reviewed and approved by: db

2003-06-15 23:07  db

	* include/resv.h, include/s_conf.h, modules/m_kline.c,
	  modules/m_resv.c, modules/m_unkline.c, modules/m_xline.c,
	  modules/core/m_nick.c, src/client.c, src/csvlib.c, src/resv.c,
	  src/s_conf.c, src/s_debug.c, src/s_user.c:
	  - ok, more in the config subsystem rework. xlines/ulines can use
	    struct MatchItem for now. Perhaps later as I go, I might use
	    more specialised structs for ulines vs. xlines..
	  - klines/unklines are now in terms of struct ConfItem * instead of
	    struct AccessItem

	    Note, that config items are now variable size... instead of
	    allocating a fixed sized struct ConfItem, we can vary the size.

	  (Yes, josh. I haven't inlined stuff yet. I will I promise!)

2003-06-15 20:38  metalrock

	* include/defaults.h:
	   - Updated comments in defaults.h so it matches the code.
	   Reviewed and approved by: db

2003-06-15 15:00  joshk

	* include/s_zip.h, src/s_log.c, configure, configure.ac:
	  - Studies show that nothing in the source uses s_zip.h anymore.
	  - s_log.c: Be smart about which syslog.h to include...
	  - configure/configure.ac: tweak some syslog sanity checks, ie if
	  syslog.h AND sys/syslog.h are both not present, don't enable
	  anything.

2003-06-15 14:47  michael

	* include/msg.h, modules/m_accept.c, modules/m_resv.c:
	  - msg.h: removed unused definition
	  - m_accept.c/m_resv.c: fixed wrong message flags. those commands are
	                         not available for unregistered connections.

2003-06-15 06:56  michael

	* src/s_user.c:
	  - s_user.c:introduce_client: introducing a CLIENT as a SERVER? bad
	  idea... s/SID/UID/

2003-06-15 05:27  michael

	* src/ircd_lexer.l:
	  - replaced a sprintf() with snprintf()

2003-06-14 21:16  db

	* src/resv.c:
	  - != NULL when these functions are returning int, was an ooopsies

2003-06-14 18:00  michael

	* etc/: example.conf, example.conf.quick, example.efnet.conf:
	  - updated ircd.conf example files

2003-06-14 14:38  michael

	* modules/core/m_kick.c:
	  - fixed broken m_kick().   remove an user from a channel
	    if ms_target != NULL (if we have a valid channel link),
	    not if ms_target == NULL ....

	    reported by: adx

2003-06-14 14:28  adx

	* src/: ircd_lexer.l, ircd_parser.y:
	  - merged TYES and TNO into TBOOL, where yylval.number keeps
	    the logical value

2003-06-14 14:11  db

	* include/resv.h, include/s_conf.h, modules/m_gline.c,
	  modules/m_kline.c, modules/m_resv.c, modules/m_xline.c,
	  src/csvlib.c, src/resv.c, src/s_conf.c:
	  - This cleans up the config system a bit more
	    All csv writes are done in terms of struct ConfItem * instead of
	    struct AccessItem * (m_kline, m_xline, m_gline, m_resv)
	  - separated out the struct ConfItem * link lists for ulines/xlines
	    for now obvious next candidates are opers, clusters...

2003-06-14 13:31  adx

	* include/s_conf.h, include/s_log.h, modules/m_info.c,
	  src/ircd_parser.y, src/s_conf.c, src/s_log.c:
	  - moved use_logging to logging{} block

2003-06-14 12:47  adx

	* modules/m_names.c, src/channel.c, src/messages.tab:
	  - fixed a buffer overflow (rather unexploitable) in
	    channel_member_names that caused ircd to core in several
	  circumstances
	  - slight optimizations, changed RPL_NAMREPLY numeric definition to
	    be more convenient

2003-06-14 10:15  michael

	* modules/m_invite.c:
	  - m_invite(): we are safe that 'source_p' is always a local client,
	                not necessary to check for 'MyConnect(x)'

2003-06-14 10:11  adx

	* src/channel_mode.c:
	  - don't allow channel members to have both +h and +o.
	    (it's in order to be compatible with hybrid 7.0)

2003-06-14 09:58  michael

	* modules/m_gline.c, modules/m_invite.c, src/ircd.c, src/s_serv.c,
	  src/whowas.c:
	  - ircd.c: removed 2 memset()'s
	  - removed unnecessary casts

2003-06-14 01:45  wiz

	* etc/: example.conf, example.efnet.conf:
	  - Corrected previous inaccurate splitcode definition in example.conf
	  - Fixed lots of various spacing all over the example configs

	  Reviewed by: joshk

2003-06-13 23:53  joshk

	* include/common.h, include/setup.h.in, configure, configure.ac:
	  - include/common.h: no need for a NULL definitoin, that's just
	  silly!
	  - <usual configure suspects>: make the fallback u_int32_t a unsigned
	  long int, and remove the excessive check for unsigned int.

2003-06-13 23:38  db

	* include/s_conf.h, modules/m_gline.c, modules/m_kline.c,
	  modules/m_xline.c, src/client.c, src/csvlib.c, src/ircd_parser.y,
	  src/s_conf.c, src/s_user.c:
	  - The next step... in reworking the conf system
	    Now xline/ulines use struct MatchItem *
	  - More of the conf system is now in terms of struct ConfItem
	    including m_gline, m_kline etc.
	  - write_conf_line() is now in terms of a ConfItem

2003-06-13 22:16  joshk

	* src/modules.c: Grr, missed one.

2003-06-13 22:08  joshk

	* src/: ircd_parser.y, modules.c:
	  - Fix the build for older gccs and bisons.

2003-06-13 21:23  joshk

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  etc/simple.conf, include/defaults.h, include/modules.h,
	  src/ircd.c, src/ircd_lexer.l, src/ircd_parser.y, src/modules.c,
	  src/s_conf.c:
	  - Kill AUTOMODPATH and MODPATH by using a 'pending' dlink_list to
	  hold all the modules you're about to load as you read from
	  ircd.conf. Then, in load_all_modules and after a rehash, call
	  load_pending() to load the modules in that queue. The first of many.
	  - This introduces a *REQUIRED* base_path directive in modules {}
	  (same as old MODPATH in typical installations.)
	  - Updated examples to reflect as such

	  Reviewed by:	db

2003-06-13 18:07  joshk

	* src/resv.c:
	  - Fix bugzilla bug #4; adding a resv in ircd.conf, starting ircd,
	  killing the resv and rehashing will not remove the resv until a full
	  restart.

	  Suggested by:	michael

2003-06-13 17:32  joshk

	* src/modules.c:
	  - Missed completing a format in src/modules.c. (reported by Michael)

2003-06-13 17:17  joshk

	* TODO, include/modules.h, src/modules.c, tools/viconf.c:
	  - TODO: just pointing something out
	  - include/modules.h, src/modules.c: change a bunch of fatty char x
	  [PATH_MAX +1] allocations into MyMalloc and strlen checks. Save the
	  memory!
	  - tools/viconf.c: fix warning on OpenBSD.

	  Reviewed by:	stu

2003-06-13 03:40  joshk

	* configure, configure.ac, include/irc_string.h, include/modules.h,
	  include/setup.h.in, include/stdinc.h, src/dynlink.c,
	  src/irc_string.c, src/ircd_parser.y, src/modules.c,
	  src/version.c.SH:
	  - configure, configure.ac, setup.h.in:
	     + Tru64 cc supports -O2.
	     + add checks for basename and libgen.h
	  - irc_string.[ch], modules.[ch], dynlink.c, ircd_parser.y: remove
	  calls to irc_basename -> basename, and don't free the variable we
	  use to hold it, move basneame to irc_string, keeping it in modules
	  is stupid
	  - irc_string.c: remove inet(_)pton[46]. it's not used any longer
	  - src/version.c.SH: allow for quoted uname -a answers

	  Reviewed by: db (somewhat, she fell asleep)

2003-06-13 01:33  metalrock

	* INSTALL:
	   - The diff db used was slightly out of date, "see point 8" should
	   say "see point 7".

2003-06-13 00:45  db

	* INSTALL:
	  - updated INSTALL doc from diff supplied by Jack (metalrock)

	  reviewed by: me

2003-06-12 22:31  db

	* include/s_conf.h, src/s_conf.c:
	  - I hate address arithemetic, but anyway... remove void *conf;
	    from struct ConfItem, just "butt" the two up together.. the old
	    hack of char conf[0]; could perhaps be used instead..

2003-06-12 20:35  db

	* contrib/m_operspy.c:
	  - ConfItem -> AccessItem

2003-06-12 19:13  db

	* include/s_conf.h, modules/m_gline.c, modules/m_kline.c,
	  modules/m_xline.c, src/client.c, src/csvlib.c, src/hostmask.c,
	  src/ircd_parser.y, src/s_conf.c, src/s_gline.c:
	  - second pass at cleaning up the conf system.
	    Now as access_items are created, add them to the conf item list as
	    well Nothing is done with the global list yet... thats next

	  Reviewed by: cryogen

2003-06-12 18:05  db

	* include/class.h, include/client.h, include/hostmask.h,
	  include/s_bsd.h, include/s_conf.h, include/s_gline.h,
	  include/s_misc.h, include/s_serv.h, include/s_user.h,
	  modules/m_challenge.c, modules/m_connect.c,
	  modules/m_cryptlink.c, modules/m_gline.c, modules/m_kline.c,
	  modules/m_oper.c, modules/m_stats.c, modules/m_testline.c,
	  modules/m_unkline.c, modules/m_xline.c, modules/core/m_server.c,
	  src/class.c, src/client.c, src/csvlib.c, src/hostmask.c,
	  src/ircd_parser.y, src/s_bsd.c, src/s_conf.c, src/s_debug.c,
	  src/s_gline.c, src/s_serv.c, src/s_user.c:
	  - Ok, first pass at cleaning up the conf system.
	    Basically, lets rename ConfItem into AccessItem for starters.
	    AccessItem should only be used for old named I/K/D lines. So, this
	    is the first pass at that.

	  reviewed by: Billy-jon

2003-06-12 11:17  michael

	* contrib/m_force.c, include/channel_mode.h, include/supported.h,
	  modules/m_invite.c, modules/m_knock.c, modules/m_topic.c,
	  modules/core/m_kick.c, modules/core/m_message.c,
	  modules/core/m_part.c, modules/core/m_sjoin.c, src/channel.c,
	  src/channel_mode.c:
	  - initial commit /restorage of the 'channel halfops' code

	    reviewed by: adx

2003-06-11 23:40  joshk

	* INSTALL, README.PLATFORMS, configure, configure.ac,
	  etc/Makefile.in, etc/ircd.motd, include/channel.h,
	  include/channel_mode.h, include/client.h, include/config.h,
	  include/config.h.dist, include/defaults.h, include/fdlist.h,
	  include/irc_string.h, include/ircd.h, include/ircd_defs.h,
	  include/m_info.h, include/modules.h, include/msg.h,
	  include/numeric.h, include/rsa.h, include/s_auth.h,
	  include/s_bsd.h, include/s_conf.h, include/s_gline.h,
	  include/s_serv.h, include/s_stats.h, include/s_user.h,
	  include/s_zip.h, include/send.h, include/setup.h.in,
	  include/stdinc.h, include/supported.h, modules/m_gline.c,
	  tools/convertconf.c:
	  - configure.ac, configure: MASSIVE changes: a lot of fixes for
	  --enable where only --disable was expected, style fixes, condensing
	  tests...added syslog and efnet stuff from config.h.
	  - config.h, config.h.dist <defunct>: all of the stuff that was
	  pertinent either went to defaults.h or configure.
	  - all files including config.h: replace with inclusion of setup.h,
	  defaults.h, or both.
	  - INSTALL: fix some wording, add documentation wrt new syslog
	  options.
	  - README.PLATFORMS: OpenBSD/i386 is mine now.
	  - etc/Makefile.in: since the default motd is only one line, just
	  echo it into the destination if it's not there
	  - ircd.motd<defunct>: Gone.

	  Reviewed by:	metalrock

2003-06-11 21:08  metalrock

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  include/config.h, include/s_conf.h, modules/m_version.c,
	  modules/core/m_sjoin.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_conf.c:
	   - Added ignore_bogus_ts option to ircd.conf so it can be configured
	   without recompiling the ircd.  Reviewed by: joshk

2003-06-11 20:38  metalrock

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  include/s_conf.h, modules/m_info.c, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/parse.c, src/s_conf.c, src/s_log.c:
	   - Removed redeclaration of find_command in parse.c.
	   - Added use_logging to ircd.conf where you can turn logging on and
	   off with use_logging = yes/no.

	   Reviewed by: joshk

2003-06-11 17:10  db

	* modules/m_kline.c:
	  - Ok, NULL oper_reason would core.
	    fixed.

2003-06-11 01:43  db

	* src/channel.c:
	  - reduce checksplit delay event from 60 to 10 seconds, this is a low
	    impact load. recommended by jason (wiz)

2003-06-11 00:06  joshk

	* configure, configure.ac, include/setup.h.in:
	  - Grr, fix socklen_t test on BSD

2003-06-10 20:07  joshk

	* contrib/m_ojoin.c:
	  - contrib/m_ojoin.c: Remove the invalid mode symbol warning and
	  replace with the standard no such channel string.

2003-06-10 18:29  joshk

	* configure, configure.ac, contrib/m_ojoin.c, contrib/m_operspy.c,
	  include/setup.h.in:
	  - contrib/m_operspy.c: fix mispelled operspy_log and user->server
	  instead of user->server->name
	  - contrib/m_ojoin.c: Make the ability of /OJOIN to join multiple
	  channels easily removable with a #define. Also some un-K&Rage.
	  - configure, configure.ac: simplify the socklen_t check, and remove
	  usage of echo -n because it does not work in all shells (ie IRIX and
	  Tru64 sh)

2003-06-10 17:23  bill

	* contrib/m_operspy.c:
	  - combined local and remote logging function into one
	  - changed format of logging notice and logfile entries
	  - always log operspy uses prior to command execution
	  - always include nick!user@host server for nickname targeted operspy
	  uses

2003-06-10 01:24  joshk

	* configure:
	  - For some reason, this missed the last commit. Stupid CVS...

2003-06-10 01:22  joshk

	* configure.ac, contrib/m_ojoin.c:
	  - configure, configure.ac:
	  	+ Fix the $YACC check, it would have broken if someone actually had
	  	'yacc' as their parser generator.
	  	+ If we know gcc is being used, don't bother checking for the other
	  	C compilers. Saves time...
	  	+ Also some experimental code that I accidentally let in, is now
	  	out.  It did not affect the build.
	  - contrib/m_ojoin.c:
	  	+ Rewrite mo_ojoin to be more generic and flexible. Also add some
	  	#ifdef USE_HALFOPS, Michael says these might be coming back as an
	  	option sooner or later.

	  Reviewed by:	db (m_ojoin.c)

2003-06-10 00:00  db

	* contrib/: encap+olog.diff, readme_encap+olog.txt:
	  - removing files that belonged in STABLE not HEAD

2003-06-09 22:16  bill

	* contrib/: encap+olog.diff, readme_encap+olog.txt:
	  - reverted previous commit
	  - moved encap/operspy log changes into encap+olog.diff
	  - added readme for encap+olog.diff

2003-06-09 19:23  bill

	* contrib/Makefile.in, contrib/m_operspy.c, contrib/operspy_log.c,
	  include/msg.h, include/parse.h, modules/m_encap.c, src/parse.c:
	  - slightly more sane implementation of ENCAP
	  - merged operspy logging into m_operspy.c
	  - removed operspy_log.c

2003-06-09 16:48  bill

	* contrib/Makefile.in, contrib/m_operspy.c, contrib/operspy_log.c,
	  contrib/help/opers/umode, include/msg.h, include/parse.h,
	  modules/m_encap.c, src/parse.c, src/send.c:
	  - completed implementation of ENCAP commands, its the same as
	    before, just be sure to give ENCAP Message items the MFLG_ENCAP
	  flag.
	  - added local operspy logging
	  - added operspy_log.c, which will parse remote servers' OPERSPY
	    usage warnings, and optionally locally log and/or send out a notice
	  to +y opers
	  - updated umode documentation
	  - fixed bug in sendto_match_servs()

2003-06-09 14:00  michael

	* include/s_gline.h, modules/m_gline.c, src/s_gline.c:
	  - memory is cheap. slight modifications to use a fixed-size
	    array for  gline_pending.reason.  just to get rid of some
	    Dupstring fun. We use Bill's  'REASONLEN'  definition for
	    this. (120 byte)+1byte NIL termination.

2003-06-09 03:38  joshk

	* configure, configure.ac, include/setup.h.in:
	  - configure, configure.ac:
	     + Add --enable-halfops option which defines USE_HALFOPS, for
	     later.  + Fix bison check, autoconf sets YACC to yacc if nothing
	     else is found, unconditionally. So make sure we check that the file
	  exists.

2003-06-09 02:22  michael

	* contrib/m_killhost.c:
	  - fixed broken m_killhost module

2003-06-08 10:38  michael

	* contrib/m_opme.c, include/channel_mode.h, src/channel_mode.c,
	  src/s_serv.c:
	  - optimized change_channel_membership().  we already know the status
	    of a channelmember. the find_channel_link() call is just
	    redundant.

2003-06-08 08:33  michael

	* src/channel_mode.c:
	  - slight cleanups to channel_modes(). we use a mode table for now

2003-06-07 13:27  michael

	* modules/m_pong.c, src/class.c, src/client.c, src/hash.c,
	  src/irc_res.c, src/ircd.c, src/m_error.c, src/parse.c,
	  src/resv.c, src/s_bsd.c, src/s_bsd_devpoll.c, src/s_bsd_kqueue.c,
	  src/s_bsd_poll.c, src/s_bsd_qio.c, src/s_bsd_select.c,
	  src/s_bsd_sigio.c, src/s_conf.c, src/s_serv.c, src/send.c:
	  - removed unused header includes

2003-06-07 11:41  michael

	* modules/m_invite.c:
	  - m_invite.c: fixed sendto_channel_remote call with an invalid
	    value. it should be CHFL_CHANOP not ONLY_CHANOPS (remnant of
	    the peons/voiced/ops dlink list removal)

	    spotted by adx

2003-06-07 11:20  adx

	* contrib/m_operspy.c, include/channel.h, include/channel_mode.h,
	  modules/m_invite.c, modules/m_topic.c, modules/m_who.c,
	  modules/core/m_kick.c, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/core/m_part.c, src/channel.c,
	  src/channel_mode.c:
	  - now, has_member_flags() takes a struct Membership, not Client and
	    Channel pointers (like get_member_status() - for the sake of
	    optimization).
	  - made /MODE and /KICK return ERR_NOTONCHANNEL instead of
	    ERR_CHANOPRIVSNEEDED if sender's not on the channel.
	  - added a sanity test to find_channel_link() that will prevent ircd
	    from crashing in case the function is called for a server.
	  - miscellaneous corrections.

2003-06-07 08:00  michael

	* contrib/m_operspy.c, include/channel.h, modules/m_invite.c,
	  modules/m_topic.c, modules/m_who.c, modules/core/m_kick.c,
	  modules/core/m_message.c, modules/core/m_mode.c,
	  modules/core/m_part.c, src/channel.c, src/channel_mode.c:
	  - replaced is_chan_op, is_voiced and is_deopped functions
	    with just one function 'has_member_status()'

	    it makes things easier for the upcoming modular
	    channelmode code.

2003-06-07 07:05  michael

	* src/irc_reslib.c:
	  - irc_reslib.c: reverted to 7.19

	    requested by: Juli Mallett

2003-06-07 05:56  michael

	* contrib/m_clearchan.c, contrib/m_force.c, contrib/m_mkpasswd.c,
	  contrib/m_ojoin.c, contrib/m_operspy.c, include/channel_mode.h,
	  include/client.h, modules/m_who.c, modules/core/m_join.c,
	  modules/core/m_message.c, modules/core/m_sjoin.c,
	  src/channel_mode.c:
	  - removed unused/redundant definitions
	  - m_mkpasswd.c: fixed compiletime warning
	  - style corrections

2003-06-07 03:44  michael

	* src/irc_reslib.c:
	  - irc_reslib.c: strcasecmp() -> irccmp()
	                  style corrections

2003-06-07 03:15  metalrock

	* contrib/m_whois.c:
	   - Removed the 3 horrible show_ip() functions and replaced it with a
	   simple ifdef check.
	  - Updated ms_whois with stock ms_whois.
	   Reviewed by: Michael

2003-06-07 01:26  joshk

	* contrib/m_help.c, contrib/m_operspy.c, modules/.cvsignore:
	  - modules/.cvsignore: so_locations is created on a few operating
	  systems
	  - contrib/m_operspy.c, contrib/m_help.c: throw in a few consts
	  - contrib/m_operspy.c: fix a shadowed declaration of something that
	  already existed.

	  Reviewed by:	metalrock

2003-06-06 23:06  db

	* src/parse.c:
	  - Added more comments (BUGS/limitations) about the trie.

2003-06-06 19:19  bill

	* contrib/m_operspy.c, modules/m_whois.c:
	  - added local logging of succesful OPERSPY calls, turned on by
	    default, logs to LOGPATH/operspy.<oper name>.log
	  - fixed whois bug
	  - removed un-needed macro check in ms_whois()

2003-06-06 04:44  michael

	* include/client.h:
	  - removed obsolete SetOper* definitions

2003-06-06 03:17  michael

	* include/client.h, include/s_serv.h, src/ircd_parser.y:
	  - client.h: removed some unused definitions
	  - ircd_parser.y: corrected a small logic error

2003-06-06 00:31  michael

	* include/channel.h, include/ircd.h, include/s_conf.h,
	  modules/core/m_die.c, src/channel.c, src/channel_mode.c,
	  src/client.c, src/irc_reslib.c, src/ircd_parser.y, src/motd.c,
	  src/packet.c, src/parse.c, src/restart.c:
	  - m_die.c: we have to call send_queued_all() before we exit
	    otherwise we don't send an 'ERROR' to our local connected
	    servers
	  - channel.c: changed allocate_topic() to a void function
	  - irc_reslib.c: moved FBFILE *file into parse_resvconf()
	  - various style corrections

2003-06-05 11:47  adx

	* src/irc_reslib.c:
	  - move char input[] inside the function itself
	  - remove the memset() not needed
	  - cleaned up resolv.conf parser a bit

2003-06-05 11:02  adx

	* src/: irc_reslib.c, parse.c:
	  - fixed logic in /etc/resolv.conf parser, that could lead to
	    overwritting arbitrary bytes in memory - odd things might happen..

2003-06-04 02:25  michael

	* include/ircd.h, include/numeric.h, modules/m_gline.c,
	  modules/m_kline.c, modules/m_stats.c, modules/m_unkline.c,
	  modules/m_xline.c, modules/core/m_kill.c, modules/core/m_quit.c,
	  modules/core/m_sjoin.c, modules/core/m_squit.c,
	  src/channel_mode.c, src/ircd.c, src/ircd_parser.y, src/numeric.c:
	  - please don't use global string arrays
	  - various style corrections

2003-06-04 00:28  metalrock

	* modules/core/m_quit.c:
	   - Reverted m_quit.c back to previously working copy.
	   Reviewed and Approved by: Michael

2003-06-03 22:10  joshk

	* configure, configure.ac, modules/Makefile.in,
	  modules/core/m_quit.c, modules/core/m_sjoin.c:
	  - configure{.ac}: -Wundef is pretty useless, and spammy on FreeBSD
	  - modules/Makefile.in: fix stuff that makes sensitive SysV make on
	  IRIX break
	  - modules/core/m_quit.c, m_sjoin.c: fix behavior of m_quit, fix core
	  in m_sjoin

2003-06-03 22:07  db

	* src/parse.c:
	  - removed a return that was prematurely terminating the recursion,
	    thus not showing all names in the trie. oops.

2003-06-03 20:49  joshk

	* include/channel.h, include/class.h, include/control.h,
	  include/irc_res.h, modules/m_encap.c, modules/core/m_kill.c,
	  modules/core/m_quit.c, modules/core/m_sjoin.c, src/channel.c,
	  src/class.c, src/irc_res.c, src/parse.c, tools/mkpasswd.c:
	  - include/channel.h, include/class.h, modules/m_encap.c,
	  src/channel.c, include/control.h, src/class.c, src/irc_res.c: throw
	  in some const and unsigneds
	  - src/parse.c: add missing prototypes, likewise throw in some const
	  and unsigned
	  - tools/mkpasswd.c: squash unnecessary externs.
	  - modules/core/m_kill.c: change to no_reason.
	  - modules/core/m_quit.c: refactor a bit to only need two conditional
	  branches.
	  - modules/core/m_sjoin.c: refrain from using 'nothing.' variable
	  will soon be removed

2003-06-03 20:43  db

	* src/channel_mode.c:
	  - No, must return the original pointer if s is modified. Just like
	  hybrid-6

2003-06-03 19:41  bill

	* modules/m_unkline.c, src/send.c:
	  - reverted previous m_unkline.c 'fix'
	  - made sendto_match_servs() use send_message() rather than
	    send_message_remote() as that is what sendto_server() uses for all
	  servers, local or otherwise

2003-06-03 12:57  joshk

	* src/channel_mode.c, src/irc_string.c, src/irc_getnameinfo.c,
	  src/ircd_parser.y, src/packet.c, configure, configure.ac:
	  - configure, configure.ac: tweak warnings
	  - src/irc_string.c: add an assert and cast to suppress warning.
	  - src/channel_mode.c: fix check_string to use EmptyString(x) and
	  star, fix a cast
	  - src/irc_getnameinfo.c: use socklen_t for a_socklen
	  - src/packet.c: repair a cast

2003-06-03 12:41  joshk

	* modules/m_gline.c, modules/m_kline.c, modules/m_stats.c,
	  modules/m_unkline.c, modules/m_xline.c, include/ircd.h,
	  src/ircd.c, src/s_auth.c, modules/core/m_sjoin.c,
	  modules/core/m_squit.c:
	  - First round of commits.
	  - Mostly everything: use a global no_reason, star, and nothing
	  string to save memory and reduce warnings with lost qualifiers.
	  - src/s_auth.c: use #ifdef

2003-06-03 10:39  db

	* src/s_conf.c:
	  - if above limits allow on if there is an exempt for the class and
	    give the nice notice about having an exempt. Otherwise, drop the
	  user.

2003-06-03 10:10  michael

	* src/: class.c, client.c, list.c, resv.c, s_conf.c, s_serv.c:
	  - removed some pointless casts

2003-06-03 07:06  michael

	* src/s_serv.c:
	  - s_serv.c:delete_capability() fixed core caused
	    by invalid read of already free()'d memory

2003-06-02 23:24  michael

	* include/hash.h, modules/m_who.c, modules/m_whois.c, src/parse.c,
	  src/send.c:
	  - fixed several compile time warnings

2003-06-02 19:16  metalrock

	* modules/m_unkline.c:
	   - We need to remove the remote unkline, not pass it onto another
	   capable server once we recieve the kline and forget about it. This
	   fix removes the remote unkline if the local server matches the
	   unkline mask and send the remote unkline off to other remote
	   unkline capable servers.  Reviewed and Approved: by Diane

2003-06-02 18:26  db

	* src/parse.c:
	  - You need to reference count if you are going to be removing
	  entires...

2003-06-02 15:49  joshk

	* include/memory.h: For what it's worth:
	  - iauth/source/.cvsignore: add 'iauth'
	  - iauth/include/log.h, iauth/source/log.c: quickly sidestep
	  namespace collision with glibc
	  - all the rest: fix some missing includes
	  - include/memory.h: style fixes

2003-06-02 14:18  db

	* src/parse.c:
	  - cleaned trie a bit more, removed unused defines etc. added more
	  comments

2003-06-02 04:03  db

	* include/parse.h, src/modules.c, src/parse.c:
	  - And now, the trie code parser

2003-06-02 02:11  db

	* modules/m_who.c:
	  - fixes "/who #channel o" bug as reported by Hwy

2003-06-02 02:09  db

	* src/s_conf.c:
	  - fixed one off error I introduced. iphash has already got the count
	  added.

2003-06-02 01:35  michael

	* modules/m_who.c:
	  - fixed a core in m_who.c
	    + reported by: metalrock

2003-06-02 00:38  db

	* src/client.c:
	  - remove the lame sendto's that was attempting to send NOTICEs
	    to non existent clients. oops. this one was spotted by Jason (wiz)

2003-06-01 19:46  joshk

	* configure, configure.ac, etc/Makefile.in, include/balloc.h,
	  messages/ircd-french.lang, modules/Makefile.in,
	  modules/m_challenge.c, modules/m_cryptlink.c, src/Makefile.in,
	  src/balloc.c, src/ircd.c, src/rsa.c:
	  - rsa.c, m_challenge.c, m_cryptlink.c, modules/Makefile.in: assume
	  we have -lcrypto if we are building these at all - if SSL detection
	  fails they will not build!
	  - include/balloc.h: removed several unnecessary #defines when an
	  #ifndef NOBALLOC where they are really used is necessary
	  - src/ircd.c: like here.
	  - messages/ircd-french.lang: fixed more untranslated stuff
	  - src/Makefile.in: don't build balloc.c if we chose to disable it.
	  - etc/Makefile.in: fix adx's bustage, == vs. =
	  - configure, configure.ac: add necessary hooks for all of those
	  changes

2003-06-01 18:10  metalrock

	* include/userhost.h:
	   - Wrong filename and description in comment

2003-06-01 17:21  joshk

	* src/s_user.c:
	  - s_user.c: throw another %s in to fix build warning and logic error

2003-06-01 17:13  joshk

	* src/event.c:
	  - Merge ejb's VMS-specific event scheduling changes.

2003-06-01 16:55  db

	* include/userhost.h:
	  - I noticed this missing first ;-) sorry gang

2003-06-01 14:47  joshk

	* include/modules.h, include/sprintf_irc.h, src/dynlink.c,
	  src/getopt.c, src/ircd.c, src/s_bsd.c, src/s_debug.c,
	  src/s_log.c, src/s_serv.c:
	  - getopt.c, ircd.c, s_bsd.c, s_debug.c, s_serv.c: More VMS -> __vms
	  stuff.
	  - s_log.c, modules.h, dynlink.c: style; use #ifdef instead of #if
	  defined(foo) if only comparing one thing
	  - sprintf_irc.h: ircs[n]printf doesn't exist. we use the
	  irc_string.h s[n]printf if it was not found by configure.

2003-06-01 14:45  db

	* include/class.h, include/client.h, include/hash.h, src/client.c,
	  src/hash.c, src/ircd_parser.y, src/s_conf.c, src/s_serv.c,
	  src/s_user.c:
	  - Ok, this adds the first cut of the global/local/ident limits
	    apparently so desired by EFnet admins. An earlier cut was reviewed
	    by Piotr
	  (adx) but please be my guest to review further.

	    :reviewed by adx.

2003-06-01 12:23  adx

	* etc/Makefile.in:
	  - patch for etc -> make install to allow installing with
	    prefix being the source directory

2003-06-01 11:05  adx

	* contrib/m_operspy.c, contrib/m_whois.c, include/channel.h,
	  modules/m_names.c, modules/m_who.c, modules/m_whois.c,
	  src/channel.c:
	  - made get_member_status() take a struct Membership * instead of
	    channel and client pointers. That's because we often already have
	    a pointer to Membership structure, so we don't need to look it up
	    again.
	  - use get_member_status() in more places.

2003-06-01 10:38  adx

	* contrib/m_operspy.c, contrib/m_whois.c, include/channel.h,
	  modules/m_names.c, modules/m_whois.c, src/channel.c,
	  src/s_serv.c, src/send.c:
	  - added locmembers to struct Channel. This will speed up various
	    send.c functions connected with channels.
	  - remove_user_from_channel was returning invalid values
	    (always 0, even though the channel could get destroyed).
	    It didn't core because the return value has been never used.
	  - channel_chanop_or_voice => get_member_status. Added second
	    parameter to control whether we can combine modes like @+
	  - show @+ on WHOIS (as earlier versions did)
	  - slight optimizations and cleanups

2003-06-01 07:48  adx

	* include/channel.h, src/channel.c, src/channel_mode.c:
	  - small optimizations
	  - we don't need find_user_link(). chptr->members is used only when
	    traversing the list of channel members, not to find a Membership
	    structure

2003-06-01 07:28  michael

	* modules/core/m_kick.c:
	  - fixed possible core in m_kick.c. don't try to send a user@host
	    prefixed KICK to a channel if the KICK comes from a server

2003-06-01 06:23  michael

	* src/channel.c:
	  - oops. that should be ms == NULL not ms != NULL

2003-06-01 06:20  michael

	* src/channel.c:
	  - small can_send() optimizations. one find_channel_link()
	    call is more than enough

2003-06-01 05:42  adx

	* modules/core/m_quit.c:
	  - fixed possible m_quit overflow on VMS.
	    (Spotted by: joshk)

2003-06-01 04:48  michael

	* contrib/m_opme.c, include/channel.h, include/channel_mode.h,
	  src/channel.c, src/channel_mode.c:
	  - slight cleanups to change_channel_membership()

2003-06-01 00:00  metalrock

	* src/channel_mode.c:
	   - We need to give user the op flag after they have gotten ops.
	   Reviewed by: Michael

2003-05-31 23:08  michael

	* src/channel.c:
	  - this should fix the missing space between nicknames.
	    + submitted by: Diane

2003-05-31 22:38  db

	* src/channel.c:
	  - The comments for is_voiced were being used for is_deopped.
	    confusing.  fixed.

2003-05-31 22:37  db

	* modules/core/m_mode.c:
	  - a server calling is_deopped will core us. Don't do that.

2003-05-31 21:01  joshk

	* configure, configure.ac, include/dalloca.h:
	  - configure, configure.ac:
	  	+ Fix a probable logic error. ($CPPFLAGS versus $CFLAGS)
	  	+ Profile builds, at least with the flags we give it, only work
	  	with gcc. Warn and ignore if this is not the case.
	  	+ Style fixes: remove unneeded 'x'ing and quoting.
	  - include/dalloca.h: Change #if __TINYC__ to #ifdef __TINYC__

2003-05-31 19:42  metalrock

	* contrib/: spy_admin_notice.c, spy_info_notice.c,
	  spy_links_notice.c, spy_motd_notice.c, spy_stats_notice.c,
	  spy_stats_p_notice.c, spy_trace_notice.c, spy_whois_notice.c:
	   - Missing #include "tools.h"

2003-05-31 18:46  db

	* modules/m_join.c:
	  - removed this file, its now in core

2003-05-31 17:43  db

	* include/config.h, include/config.h.dist, modules/m_kline.c:
	  - base max tkline or tdline time off of a define MAX_TDKLINE_TIME in
	  config.h

2003-05-31 14:54  adx

	* modules/core/m_join.c:
	  - forgot to add m_join.c before committing

2003-05-31 14:52  adx

	* contrib/m_clearchan.c, contrib/m_operspy.c, contrib/m_opme.c,
	  contrib/m_whois.c, include/channel.h, include/channel_mode.h,
	  modules/Makefile.in, modules/m_invite.c, modules/m_knock.c,
	  modules/m_names.c, modules/m_who.c, modules/m_whois.c,
	  modules/core/m_message.c, modules/core/m_mode.c,
	  modules/core/m_sjoin.c, src/channel.c, src/channel_mode.c,
	  src/client.c, src/modules.c, src/s_debug.c, src/s_serv.c,
	  src/send.c: This commit removes multiple channel member lists
	  like chptr->chanops, chptr->chanops_voiced etc. This was originally
	  designed as an optimalization, but indeed it introduced a whole
	  layer of complexity.  We came to a conclusion that the best approach
	  would be having two lists: chptr->members and chptr->locmembers (the
	  latter not supported yet, but we are about to add it).

	  This can speed up things as well, because now we have struct
	  Membership, which is used not only with chptr->members, but also
	  with client_p->user->channel. Therefore it allows us to determine if
	  someone is an op by checking only 10 entries for channels s/he is on
	  (instead of a channel ops list which may contain hundreds of users).
	  Another advantage is that it's now easy to modularise the code (in
	  opposite to situation when we have 12 members hard-coded lists).
	  Most of these code changes by Michael, reviewed, supplemented and
	  corrected by me.

	  Other modifications:
	  - fixed CLEARCHAN. It's wrong to send KICK messages to an oper which
	    has not yet been informed that they're on the channel... Also
	    changed prefix format from :n to :n!u@h when sending KICKs to local
	  users.
	  - moved JOIN to core modules. Server, which doesn't understand the
	    ":%s JOIN 0" message, could easily get desynced.
	  - miscellaneous cleanups and style corrections.

2003-05-31 05:34  metalrock

	* src/modules.c:
	   - tools.h must be before modules.h or it doesn't compile in some
	   systems

2003-05-31 04:40  michael

	* src/dynlink.c:
	  - dynlink.c: added a missing header include

2003-05-31 03:01  lusky

	* configure, configure.ac, doc/technical/README.openssl,
	  doc/technical/cryptlink.txt, etc/example.conf,
	  etc/example.conf.quick, etc/example.efnet.conf, include/s_serv.h,
	  modules/m_cryptlink.c, servlink/control.c, src/s_serv.c,
	  tools/encspeed.c:
	  - removed lame old hack that worked around openssl 0.9.6a bug with
	    setting blowfish key size
	  - Switch BF/256 support to BF/168.  OpenSSL won't do more than a
	  168bit key.

2003-05-31 02:14  michael

	* include/modules.h, src/irc_res.c, src/irc_reslib.c,
	  src/modules.c:
	  - modules.c: small modifications to use an embedded dlink node
	               inside the module_path struct
	  - style fixes

2003-05-31 01:54  joshk

	* Makefile.in, doc/whats-new.txt:
	  - Makefile.in: simplify a little bit, style fixes too
	  - [WIP] doc/whats-new.txt: Added some stuff about upcoming 7.1. Keep
	  adding to this file as you all see fit! we will delete the 7.0 lines
	  sooner or later.

2003-05-31 01:10  metalrock

	* modules/m_stats.c:
	   - Fixed compilation warning from wrong type.
	   Reviewed by: Michael

2003-05-31 00:46  metalrock

	* modules/m_kline.c:
	   - tkline_time is not a boolean (from the last tkline_time fix). It
	   was fixed for klines, but not for dlines!

2003-05-30 20:52  michael

	* src/class.c:
	  - class.c:get_sendq(): we should return 'DEFAULT_SENDQ' if we can't
	    find a class for a client, not BAD_CLIENT_CLASS(-3)...

2003-05-30 04:05  michael

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  modules/m_capab.c, modules/m_close.c, modules/m_rehash.c,
	  modules/m_set.c, modules/m_stats.c, src/class.c,
	  src/ircd_parser.y, src/numeric.c, src/s_conf.c:
	  - style corrections
	  - removed unused header includes
	  - updated example configuration files

2003-05-30 01:37  metalrock

	* modules/m_kline.c:
	   - We should set tkline_time to 10 days ONLY if tkline_time > 14400,
	   not 1400.

2003-05-30 00:59  db

	* modules/m_gline.c:
	  - If a gline has already been place by someone on the local server,
	    no need to send it to anyone but oper attempting to place the
	    gline

	  Submitted by Jack, approved by me.

2003-05-29 23:17  joshk

	* contrib/README, src/Makefile.in:
	  - contrib/README: add m_help blurb
	  - src/Makefile.in: you can't change the ircd name without editing
	  config.h anyway; why complicate things

2003-05-29 21:03  db

	* modules/m_kline.c:
	  - repeat after me "An integer is not a boolean." Thank you.
	    just a few style corrections

2003-05-29 19:29  metalrock

	* modules/: m_kline.c, m_unkline.c:
	   - We need to check for already_placed_kline in remote klines too.
	   - remote unklines should be valid even if the user gives extra junk
	   after the servername (like reason).  Reviewed by: Michael

2003-05-29 03:42  metalrock

	* src/s_user.c:
	   - Renamed int index to int i, make it consistent with the rest of
	   the file and to get rid of the shadowed declaration of index from
	   /usr/include/strings.h

2003-05-29 02:53  metalrock

	* include/config.h.dist:
	   - Bring config.h.dist up to date with config.h.dist (My internet
	   died in the middle of cvs commit and now its half broken, force
	   committing)

2003-05-29 02:39  metalrock

	* include/config.h.dist: Bring config.h.dist up to date with
	  config.h.dist

2003-05-29 02:10  joshk

	* configure, configure.ac:
	  - Fix duplicate -I/usr/local/includes. According to jack they've
	  been there since 7.0beta and it was a one line fix :)

2003-05-29 01:19  db

	* modules/m_stats.c:
	  - change passwd to reason in stats g

2003-05-29 01:17  db

	* include/config.h:
	  - oops. forgot this change in config.h to change gline.conf to
	  ETCPATH

2003-05-29 01:16  db

	* include/config.h, modules/m_gline.c, src/csvlib.c:
	  - Gave the gline system a good cleanup
	    first off, there is a perfectly good logging system "ilog()"
	    lets use it. all this messing about in m_gline itself is messy.
	    So lets write a kline.conf type file to gline.conf, but put the
	    expire time into the log so we can restore the glines after a
	    restart...

2003-05-29 00:06  joshk

	* README.FIRST, README.PLATFORMS, configure, configure.ac,
	  include/rlimits.h, include/setup.h.in, src/ircd.c:
	  - README.{FIRST,PLATFORMS}: Rejoice! Tru64 builds and WORKS!
	  - configure, configure.ac:
	      + fix zlib message display, add /usr/local/include to include
	      path for Tru64; its cc does not do this automatically.
	      + Silence mkdep with 2>/dev/null on Tru64 because it is noisy.
	      + COMPLETELY fix the OpenSSL check because it was creating two
	      int mains, one that we didn't know about (autogenerated by
	      AC_LANG_PROGRAM) + Add -expect_unresolved '*' to PICFLAGS for Tru64.
	      + Simplify the $cf_openssl_ciphers check at the end.
	  - (new) rlimits.h, ircd.c: replace the iffy configure test for
	  RLIMIT_* with good ole preprocessor mojo.

2003-05-28 23:57  db

	* src/ircd.c:
	  - remove redundant assign

2003-05-28 23:35  db

	* include/config.h, include/s_conf.h, modules/m_kline.c,
	  modules/m_resv.c, modules/m_unkline.c, modules/m_xline.c,
	  src/csvlib.c, src/ircd.c, src/s_conf.c:
	  - cleaned up the conf system a bit more. Its not "safe" to rely
	    on a struct ConfItem type.
	  - Its not a KlineType its a ConfType. more descriptive of actual
	  use.

2003-05-28 20:58  db

	* contrib/m_classlist.c, modules/m_tb.c, include/class.h,
	  include/s_serv.h, modules/m_encap.c, modules/m_gline.c,
	  modules/m_kline.c, modules/m_knock.c, modules/m_trace.c,
	  modules/m_unkline.c, src/channel.c, src/ircd.c,
	  src/ircd_parser.y, src/modules.c, src/s_conf.c, src/s_serv.c:
	  - fixed two things here. First off, corrected all the MaxLinks()
	    etc.  I somehow had missed.
	  - Secondly add_capability now adds the given CAPAB to
	    default_server_capabs if the third flag is 1 for yes. otherwise, the
	    mask comes indirectly from the ConfItem

2003-05-28 20:23  joshk

	* configure, configure.ac:
	  - Generic OSF support is buggy. Kill it until we can test it.
	  - More Tru64 stuff. Since Tru64's ABI natively uses PIC (awesome!),
	  all we have to do is use -shared. I think. We shall see.
	  - Append -g to $IRC_CFLAGS if possible. We always test if $CC can be
	  run, so don't add it in special cases. Just to make it slightly more
	  generic.

2003-05-28 19:40  db

	* include/class.h, src/class.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c:
	  - more cleanups to class/conf system
	    renamed structure elements etc.

2003-05-28 19:24  michael

	* src/s_conf.c:
	  - simplified oper_privs_as_string()

2003-05-28 17:11  bill

	* contrib/m_clearchan.c, contrib/m_ctrace.c, contrib/m_force.c,
	  contrib/m_jupe.c, contrib/m_ltrace.c, contrib/m_ojoin.c,
	  contrib/m_opme.c, modules/m_connect.c, modules/m_gline.c,
	  modules/m_info.c, modules/m_kline.c, modules/m_rehash.c,
	  modules/m_restart.c, modules/m_set.c, modules/m_stats.c,
	  modules/m_unkline.c, modules/m_xline.c, modules/core/m_die.c,
	  modules/core/m_kill.c, modules/core/m_squit.c, src/listener.c,
	  src/modules.c, src/s_conf.c, src/s_user.c:
	  - replaced most IsOperAdmin() calls with IsAdmin() so we are using
	    the usermode, rather than the operator {} flag.
	  - replaced all 'You need bleh = yes;' notices with ERR_NOPRIVILEGES
	  - removed client_msgtab references
	  - IsOperHiddenAdmin() mismatch with A/O in stats p
	  - added IsOperHiddenAdmin() check in umode +a

2003-05-28 17:02  db

	* include/class.h, include/s_conf.h, src/class.c,
	  src/ircd_parser.y:
	  - clean up the class names in class struct, removed some no longer
	    used code in get_sendq()

2003-05-28 16:12  db

	* src/s_conf.c:
	  - Move around this if, so its once again alphabetical. This also has
	    the side effect of removing a core.

2003-05-28 15:23  joshk

	* configure, configure.ac, include/modules.h, src/modules.c:
	  - configure, configure.ac: add structure for Tru64 support
	  - modules.[hc]: remove crusty client_msgtab stuff that breaks the
	  build on Tru64.

2003-05-28 14:10  bill

	* include/ircd_defs.h, modules/m_gline.c, modules/m_kline.c,
	  src/channel_mode.c:
	  - truncate kline/dline reasons with new REASONLEN #define in
	  ircd_defs.h, for added safety
	  - constify del_id a bit

2003-05-28 12:56  db

	* src/channel_mode.c:
	  - Apparently, (though no one has ever told the hybrid group
	    directly) admins don't like redundant mode checking. ok. It would
	    have been nice if you had have told us directly. I've left the
	    original code snippets in place.

2003-05-28 12:46  db

	* contrib/spy_whois_notice.c, modules/m_whois.c:
	  - allow remote whois notices
	    *sigh* Personally, I have never liked the loss
	    of privacy, but so be it. This is what the admins want.
	    We just code. Not set policy.

2003-05-28 12:37  db

	* include/client.h, include/ircd.h, include/s_conf.h,
	  modules/m_stats.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_conf.c:
	  - Added the "hidden_admin = yes" that some admins apparently want..

2003-05-28 07:48  michael

	* include/channel_mode.h:
	  - removed some unused definitions

2003-05-28 03:18  michael

	* modules/core/m_nick.c:
	  - fixed broken NICK propagation

2003-05-28 03:06  metalrock

	* modules/core/m_server.c:
	   - Missing %s in ms_sid.
	   Approved by: db

2003-05-28 02:01  metalrock

	* src/s_bsd_qio.c:
	   - We aren't ratbox, changed header to the correct ircd

2003-05-28 01:02  joshk

	* README.FIRST, include/s_user.h, modules/Makefile.in,
	  src/descrip.mms, src/s_bsd_qio.c, src/s_user.c:
	  - README.FIRST: we build on HPUX too
	  - include/s_user.h, src/s_user.c: HPUX build requires us to make
	  MAXUID IRC_MAXUID because of namespace conflicts
	  - src/descrip.mms, src/s_bsd_qio.c: Imported from ratbox for the VMS
	  build; requires some event stuff to be ported. Work in progress.
	  - modules/Makefile.in: add all: dependency on .depend

2003-05-28 01:01  metalrock

	* include/config.h.dist:
	   - Brought config.h.dist up to date with config.h

2003-05-27 23:33  joshk

	* Makefile.in, configure, configure.ac, include/setup.h.in,
	  servlink/Makefile.in, src/Makefile.in:
	  - Makefile.in: we don't have .depend-stamp anymore, don't remove it
	  - src/Makefile.in, servlink/Makefile.in: make all now depends on
	  .depend like it should
	  - configure, configure.ac, include/setup.h.in: looks like the test
	  can't be *that* simple if we want things to work our way.

2003-05-27 23:14  joshk

	* configure, configure.ac:
	  - Greatly simplify the zlib test. And fix it for cases where it
	  isn't available.
	  - Fall back to static modules if dynamic linking is not possible,
	  instead of dying stupidly and making the user pick up the pieces.

2003-05-27 21:41  joshk

	* include/config.h, include/s_log.h, include/setup_vms.h,
	  include/stdinc.h, modules/descrip.mms, modules/core/descrip.mms,
	  src/descrip.mms, src/s_log.c:
	  - Merge all of ejb's recent VMS changes.

2003-05-27 20:18  db

	* modules/m_kline.c:
	  - Jack found duplicated code that had crept in from the botched
	    merge with conflicts. fixed.

2003-05-27 19:43  db

	* modules/m_gline.c:
	  - ->passwd is now ->reason here too

2003-05-27 16:48  db

	* src/send.c:
	  - Ok. This is why I like function header comments.
	    send_message_remote() really should be something like
	    "send_message_to_directly_connected_server()" or something.
	    In any case, I've added a function header and checked now for a
	    remote non local server send which will core otherwise.

2003-05-27 16:20  metalrock

	* src/s_serv.c:
	   - Fix for infinite loop on /connect [remote server] port [remote
	   server].  Submitted by Michael, tested by me.

2003-05-27 15:55  db

	* src/whowas.c:
	  - Not sure how this happens, or if this is the right fix...
	    but it is possible for an exiting client to have a NULL
	    user->server portion, thus coring in the whowas code. I suspect
	    this has to be from a "half registered" client.

2003-05-27 13:45  joshk

	* include/dbuf.h, src/dbuf.c, src/packet.c, src/send.c: Change the
	  prototype for dbuf_put to eliminate the need for tmpdata.

2003-05-27 13:11  joshk

	* configure, configure.ac, include/setup.h.in,
	  messages/ircd-french.lang, src/dbuf.c, src/irc_res.c,
	  src/s_bsd_devpoll.c:
	  - configure, configure.ac, include/setup.h.in: check for devpoll.h
	  and sys/devpoll.h
	  - src/s_bsd_devpoll.c: use devpoll.h if that's available, then fall
	  back to sys/devpoll.h
	  - src/dbuf.c: ISO C compliance for the HPUX build
	  - messsages/ircd-french.lang: update my translation

2003-05-26 14:51  joshk

	* contrib/: README, README.disable_identd:
	  - contrib/README.disable_identd: obsolete
	  - contrib/README: remove mention of the disable_identd diff, make
	  mention of challenge.irc

2003-05-26 14:35  joshk

	* contrib/disable_identd.diff, etc/example.conf,
	  etc/example.conf.quick, etc/example.efnet.conf, etc/simple.conf,
	  include/s_conf.h, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_auth.c:
	  - Merge the disable_identd.diff patch into HEAD.
	  - Modify example conf files to reflect this new feature

2003-05-26 14:11  db

	* src/s_conf.c:
	  - If you are going to call gethost_byname(...aconf->dns_query)
	    one really should delete_resolver_queries on it using
	    aconf->dns_query... This should explain the odd resolver cores
	    Jack was getting.

2003-05-26 13:56  joshk

	* configure, configure.ac, contrib/disable_identd.diff,
	  include/setup.h.in:
	  - configure, configure.ac, setup.h.in: We don't use the CYGWIN
	  #define anymore, take it out.
	  - contrib/disable_identd.diff: Bring up to date.

2003-05-26 01:43  db

	* include/client.h, modules/core/m_nick.c, modules/core/m_server.c,
	  src/channel_mode.c, src/client.c, src/hash.c, src/s_serv.c,
	  src/s_user.c:
	  - Add and correct more support for CAP_SID
	    every client is now capable of having a uid, so moved id field
	    to client struct proper from user struct.

2003-05-26 00:55  metalrock

	* src/s_conf.c:
	   - Fixed extra junk showing up at the end of oper privs (Fix from
	   Michael)
	  - Alphabeticalized oper privs.
	   Approved by: Michael

2003-05-26 00:14  db

	* modules/core/m_nick.c:
	  - style cleanup only

2003-05-26 00:05  db

	* modules/core/: m_nick.c, m_server.c:
	  - initial code to handle SID/UID messages incoming.
	    SID needs finishing work, UID is 99% working.

2003-05-25 23:06  joshk

	* BUGS, include/dalloca.h, src/ircd_parser.y:
	  - BUGS: note that tinycc support is a little crippled atm
	  - include/dalloca.h: new header for tinycc compatibility
	  - src/ircd_parser.y: include said header all the time; the header
	  itself in #ifdef __TINYC__ so it's ok

2003-05-25 21:01  stu

	* include/s_gline.h, src/irc_res.c, src/s_gline.c:
	  - defining externs in header files without the extern keyword is a
	    bad idea kids - define pending_glines in s_gline.c instead.
	  - ina -> inp in irc_res.c dispose with ina.  No point in having two
	    vars doing the same thing

2003-05-25 20:55  joshk

	* include/servlink.h, servlink/control.c, servlink/io.c,
	  src/ircd_lexer.l, src/ircd_parser.y:
	  - servlink/*.c, include/servlink.h: z_stream z_stream chokes tinycc,
	  call the member 'stream' instead.
	  - src/ircd_parser.y, src/ircd_lexer.l: AUTH conflicts with OpenBSD's
	  RPC namespace.

2003-05-25 20:14  joshk

	* tools/Makefile.in:
	  - Repair tools/ building on OpenBSD (and in general too, old way was
	  braindamaged and didn't quite work depending on ../include/setup.h.)

2003-05-25 19:41  joshk

	* Makefile.in, TODO, contrib/Makefile.in, src/Makefile.in,
	  src/modules.c, tools/mkkeypair:
	  - Update my TODO
	  - Makefile.in: contrib not part of base depend dirs
	  - contrib/Makefile.in: make sure .depend is there before doing
	  anything
	  - src/Makefile.in: force a make in ../modules if MODULES_LIBS is
	  libmodules.a
	  - src/modules.c: include s_serv.h for STATIC_MODULES
	  - mkkeypair: make it more than a quick hack, read from stdin for
	  entropy - better than nothing

2003-05-25 19:08  db

	* include/s_user.h, src/ircd.c, src/s_user.c:
	  - Thinking about it, sid_get() sid_init() were bad names to use.
	    reverted to uid_get() and uid_init()

2003-05-25 18:36  db

	* src/s_user.c:
	  - This finishes the new sid generator code that josh made me
	    conflict with.  Its done recursively for now.

2003-05-25 18:13  joshk

	* configure, configure.ac, modules/Makefile.in, src/descrip.mms,
	  src/s_user.c:
	  - modules/Makefile.in: IRIX linker creates a 'so_locations' file,
	  remove this in make clean.
	  - src/descrip.mms: remove MD5.OBJ
	  - src/s_user.c: add a return NULL; for an unfinished function to
	  silence a build warning

2003-05-25 03:11  metalrock

	* modules/m_cryptlink.c:
	   - Removed stale include md5.h

2003-05-25 02:06  db

	* src/modules.c:
	  - add_capability() must be called from here for STATIC module
	  support

2003-05-25 01:56  db

	* include/md5.h, include/s_conf.h, include/s_serv.h,
	  include/s_user.h, modules/m_xline.c, src/Makefile.in, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/md5.c, src/s_serv.c,
	  src/s_user.c:
	  - got rid of the horrible md5 UID remnant. (yay!)
	    more work on upcoming SID implementation for EFnet

2003-05-25 01:10  db

	* src/csvlib.c:
	  - added code to convert digits greater than 10 for %d in
	  write_csv_line()

2003-05-25 00:41  michael

	* src/s_conf.c:
	  - forgot to remove the old version of oper_privs_as_string()

2003-05-25 00:37  db

	* contrib/m_killhost.c, contrib/m_opme.c, include/client.h,
	  include/s_serv.h, modules/m_away.c, modules/m_gline.c,
	  modules/core/m_kill.c, modules/core/m_message.c,
	  modules/core/m_part.c, src/channel_mode.c, src/s_serv.c,
	  src/s_user.c, src/send.c:
	  - rename CAP_UID as CAP_SID in preparation for new proposed EFnet
	    UID scheme

2003-05-25 00:25  michael

	* src/: ircd_parser.y, s_conf.c:
	  - reworked oper_privs_as_string() a bit

2003-05-25 00:24  db

	* modules/m_tb.c, include/s_serv.h, modules/m_capab.c,
	  modules/m_encap.c, modules/m_gline.c, modules/m_kline.c,
	  modules/m_knock.c, modules/m_unkline.c, src/channel.c,
	  src/ircd.c, src/s_serv.c:
	  - This commit "dlinks" the CAPAB system, gets rid of the static
	    CAPAB table we used to have.
	    There are three new functions.
	    add_capability(const char *capability_name, int flag);
	    delete_capability(const char *capability_name);
	    find_capability(const char *capability_name);

	    To add a new CAPAB, add a new CAP_ to s_serv.h
	    Make sure it gets added via add_capability() somewhere. A number
	    are defaulted in ircd.c at start up for now.
	    (initialize_server_capabs()) Others are done in the modules they
	    are used in. i.e. CAPAB_GLN is added in m_gline.c

2003-05-25 00:15  michael

	* include/: client.h, s_conf.h:
	  - reworked oper_privs_as_string() a bit

2003-05-25 00:07  joshk

	* Makefile.in, doc/messages.txt, doc/modes.txt, tools/mkpasswd.c:
	  - tools/mkpasswd.c: change some leftover #if[n]def VMS to __vms
	  - doc/messages.txt: custom.lang doesn't exist anymore
	  - doc/modes.txt: add a friendly header
	  - Makefile.in: add indents for style

2003-05-24 23:40  metalrock

	* src/s_serv.c:
	   - Reverted hunt_server fix, if we can't find a match()'ing client
	   we leave the loop with target_p!=NULL -Michael

2003-05-24 23:20  joshk

	* contrib/m_opme.c:
	  - m_opme.c: reverted to 1.35 because jack complained

2003-05-24 23:08  metalrock

	* src/s_serv.c:
	   - Fix infinite loop in hunt_server.
	   Submitted by Michael, tested and confirmed to work by me.

2003-05-24 23:04  joshk

	* configure, configure.ac, contrib/m_opme.c, doc/resv.txt,
	  doc/whats-new.txt, include/Makefile.in, src/csvlib.c,
	  src/descrip.mms, tools/Makefile.in: Many small fixes.

	  - src/csvlib.c: ++bytes; ++bytes; -> bytes += 2;
	  - src/descrip.mms: add CLUSTER.OBJ
	  - tools/Makefile.in: remove lone ../include/setup.h target which
	  runs configure, it's a hack that's not worth implementing all around
	  - include/Makefile.in: remove targets that should never get called
	  - doc/whats-new.txt, doc/resv.txt: update against newest resv stuff
	  - configure, configure.ac: remove -Wunused and -W from warnings,
	  former is really verbose and it's not really pertinent to bug fixing
	  - contrib/m_opme.c: don't depend on chan_is_opless being true; an
	  admin can use m_ojoin to accomplish the samething (albeit with
	  somewhat less convenience.) But, we bump the requirement to
	  IsOperAdmin as it is in m_ojoin.

2003-05-24 23:03  metalrock

	* modules/m_unkline.c:
	   - Temp dline code needs temp undline as well! Added.
	   Reviewed by: Diane

2003-05-24 21:44  joshk

	* include/memory.h:
	  - It's #ifdef __vms, not #ifdef __VMS

2003-05-24 21:05  michael

	* include/class.h, include/client.h, include/listener.h,
	  include/s_conf.h, include/s_user.h, include/whowas.h,
	  modules/core/m_sjoin.c, src/channel.c, src/class.c, src/client.c,
	  src/listener.c, src/s_conf.c, src/s_log.c, src/s_user.c,
	  src/whowas.c:
	  - fixed a compile time warning
	  - char constifications
	  - style corrections

2003-05-24 20:39  joshk

	* README.PLATFORMS: (Forced commit)
	  - Since wcampbel hasn't been doing much on the Cygwin port as of
	  late, transfer ownership of the port to James LaPlant (aka
	  Wombling_) who has been slaving over it.

2003-05-24 17:33  joshk

	* README.PLATFORMS, configure, configure.ac:
	  - Minor: strip trailing slash from a specified OpenSSL basedir.

2003-05-24 17:15  joshk

	* configure, configure.ac, include/inet_misc.h, include/setup.h.in:
	  - Check for all headers first before any tests.
	  - Use a Linux style sockaddr_storage if sockaddr_in has no sin_len
	  member, BSD style doesn't work on Cygwin.

2003-05-24 16:59  db

	* modules/m_trace.c:
	  - only define mo_trace4, mo_trace6 if IPV6 is defined

2003-05-24 15:53  joshk

	* README.FIRST, README.PLATFORMS, TODO:
	  - Some documentation updates/cleanups

2003-05-24 15:47  db

	* modules/m_trace.c:
	  - This mod adds /trace6 and /trace4 to the usual /trace. Only works
	    on local server.

	    Reviewed by Cryogen

2003-05-24 15:25  michael

	* include/cluster.h, include/s_conf.h, modules/m_kline.c,
	  modules/m_locops.c, modules/m_resv.c, modules/m_unkline.c,
	  modules/m_xline.c, src/cluster.c, src/csvlib.c, src/s_conf.c,
	  src/send.c:
	  - fixed core caused by find_cluster()
	  - added clear_clusters()
	  - various optimizations&cleanups to new cluster code

2003-05-24 14:42  joshk

	* modules/: m_unkline.c, m_xline.c:
	  - user->server is user->server->name now (once in m_kline, twice in
	  m_xline)
	  - m_kline.h doesn't exist anymore

2003-05-24 14:37  db

	* include/modules.h, modules/m_xline.c, src/modules.c:
	  - added missing STATIC defs for unresv_msgtab unxline_msgtab etc.

2003-05-24 14:12  db

	* modules/m_resv.c:
	  - added back csv code that accidentally got deleted

2003-05-24 13:45  db

	* include/s_conf.h, modules/m_kline.c, modules/m_resv.c,
	  modules/m_stats.c, src/s_conf.c, src/send.c:
	  - added temporary dline code.

2003-05-24 13:02  bill

	* modules/m_kline.c:
	  - changed max tkline duration from 1 day to 10

2003-05-24 12:15  bill

	* etc/example.conf, etc/example.conf.quick, etc/example.efnet.conf,
	  include/cluster.h, include/irc_string.h, include/resv.h,
	  include/s_conf.h, include/s_serv.h, modules/Makefile.in,
	  modules/m_kline.c, modules/m_locops.c, modules/m_resv.c,
	  modules/m_unkline.c, modules/m_xline.c, src/Makefile.in,
	  src/cluster.c, src/ircd_lexer.l, src/ircd_parser.y, src/match.c,
	  src/messages.tab, src/resv.c, src/s_conf.c, src/send.c:
	  - added cluster code, we can now cluster
	    kline/unkline/xline/unxline/resv/unresv/locops
	  - documented cluster{} blocks in examples
	  - fixed some indenting in conf examples
	  - added specific type checking to shared {} blocks,
	    you can now specify what of
	    kline/unkline/xline/unxline/resv/unresv you want to share
	  - finished shared{} server implementation, remote everything
	    works as it should now
	  - added general{} entry min_nonwildcard_simple (from ratbox)
	    which controls the minimum non wildcard chars there must be
	    in an xline
	  - changed RPL_STATSXLINE to be a bit more useful

2003-05-24 08:28  db

	* src/s_user.c:
	  - update comment in show_lusers() header

2003-05-24 08:26  db

	* include/s_user.h, modules/m_lusers.c, src/s_user.c:
	  - restore parv[1] arg to m_lusers.c
	    user can now get totals of a domain for global and local
	    i.e. /lusers *.uk
	    will count up number of clients in *.uk globally and locally.

	    This one was requested by an efnet admin

2003-05-24 07:43  db

	* contrib/m_classlist.c:
	  - Add sanity tests. These cases "shouldn't" happen but if they did,
	    the server would core.

2003-05-24 05:55  michael

	* include/m_kline.h:
	  - forgot to cvs remove m_kline.h

2003-05-24 05:25  michael

	* include/ircd.h, include/s_gline.h, modules/m_gline.c,
	  modules/m_kline.c, modules/m_xline.c, src/s_gline.c:
	  - removed m_kline.h
	  - slight changes to have pending glines use an embedded dlink node
	  - style corrections (m_gline.c)

2003-05-24 04:02  michael

	* contrib/m_clearchan.c, contrib/m_force.c, contrib/m_ojoin.c,
	  contrib/m_operspy.c, include/channel.h, include/class.h,
	  modules/m_join.c, modules/m_lljoin.c, modules/m_names.c,
	  modules/m_trace.c, src/channel.c, src/class.c, src/ircd.c:
	  - various logic&style corrections to channel.c
	  - fixed possible core in m_clearchan.c
	  - renamed initclass() to init_class()

2003-05-24 03:01  db

	* include/s_auth.h, src/irc_res.c, src/s_auth.c:
	  - cleaned up the confusing s_auth.c code
	    Now have two link lists, one for doing auth, one for doing dns.
	    And well self-commented to boot. wooo!
	  - cleaned up irc_res.c code a bit as well
	    folded dlink_node into request object, note simplification of
	    rem_request()

	    reviewed by Michael

2003-05-24 01:48  joshk

	* configure, configure.ac, doc/ircd.8, etc/Makefile.in,
	  etc/example.conf, etc/example.efnet.conf:
	  - Only install the example.efnet.conf file if using --enable-efnet,
	  otherwise install example.conf only.
	  - Make references in both files that more examples are available in
	  etc/.
	  - doc/ircd.8: nitpicking

2003-05-24 01:01  db

	* src/channel.c, src/channel_mode.c, include/channel.h:
	  - stuff the node pointer for bans inside the Ban structure itself

	    reviewed by Michael

2003-05-23 23:29  joshk

	* include/config.h.dist:
	  - Sync config.h.dist with config.h

2003-05-23 23:25  db

	* include/config.h, include/resv.h, include/s_conf.h,
	  modules/m_resv.c, src/csvlib.c, src/ircd.c, src/resv.c,
	  src/s_conf.c:
	  - This adds cresv.conf and nresv.conf for channel resvs and nick
	    resvs respectfully. An oper can now save their nick/channel resvs
	    to these files. They are restored at server startup.
	    As part of csvlib.c, unresv is done as well.

2003-05-23 21:56  michael

	* src/: ircd.c, s_conf.c:
	  - not necessary to nullify ConfigItemList on startup.
	    ConfigItemList is already 0 initialized.

2003-05-23 21:40  joshk

	* etc/Makefile.in:
	  - Touch {c,n}resv.conf if not already there now that our csv-based
	  resv's are finalized.

2003-05-23 21:17  stu

	* tools/viconf.c:
	  - This is more like it

2003-05-23 20:44  db

	* tools/viconf.c:
	  - looks like the sense of this #ifdef was backwards
	    should have been an #ifndef

2003-05-23 20:35  db

	* src/ircd.c, modules/m_kline.c:
	  - Lets do klines the same way they were done in hybrid-6 shall we?
	    in hybrid 6 and before, instead of doing the check_klines()
	    immediately, we did them after the current loop in io_loop() by
	    checking a rehashed flag. So, I have added a rehashed_klines and
	    rehashed_xlines flag for now.  WHY do people not report bugs like
	    this? WHY? I had to discover this one over IRC and way after the
	  fact..

2003-05-23 20:14  db

	* src/: client.c, irc_res.c, s_auth.c:
	  - irc_res.c 'authoritative' not 'authoritive'
	  - in both client.c/s_auth.c make sure dns_query is NULL'ed out when
	    done with, make sure pending DNS bit is turned off when answer is
	    returned

2003-05-23 20:08  michael

	* include/s_user.h, modules/core/m_mode.c, src/s_user.c:
	  - renamed user_mode() to set_user_mode()
	  - s_user.c: removed unused header includes

2003-05-23 18:36  michael

	* doc/vchans.txt:
	  - removed doc/vchans.txt

2003-05-23 15:47  joshk

	* include/stdinc.h:
	  - Add some #ifdef __vax stuff.

2003-05-23 15:06  joshk

	* README.VMS, configure, configure.ac, include/config.h,
	  include/config.h.dist, include/setup.h.in, include/setup.h_vms,
	  include/setup_vms.h, include/stdinc.h, src/ircd_lexer.l,
	  tools/Makefile.in, tools/viconf.c:
	  - configure, configure.ac, tools/Makefile.in, tools/viconf.c,
	  include/ setup.h.in: make sure we have wait.h somewhere, if we
	  don't, don't hold up the whole build just because we can't build
	  viconf (only thing which needs it)
	  - README.VMS: updated 'last tested version'
	  - include/config.h{.dist}: intelligently include the right setup.h,
	  take out #undef MSGPATH
	  - setup_vms.h: update from ejb to work with current source
	  - ircd_lexer.l: readd the #ifdef __vms #include "setup_vms.h" part
	  - include/stdinc.h: more #ifdef VMS -> #ifdef __vms

2003-05-23 14:37  metalrock

	* include/config.h.dist, src/descrip.mms:
	   - Updated config.h.dist with current changes in config.h.
	   - scache doesn't exist anymore, removed from descrip.mms.

2003-05-23 13:53  joshk

	* contrib/m_help.c, src/descrip.mms, src/ircd.c, src/ircd_signal.c,
	  src/s_debug.c, tools/mkpasswd.c, TODO, include/config.h: VMS port
	  lives again!

	  - most files: replace #ifdef VMS with #ifdef __vms
	  - remove IRCDAUTH.OBJ from descrip.mms, it is broken
	  - Add some more defines. #undef HAVE_MMAP is broken, will look into
	  it shortly.
	  - tools/mkpasswd.c: put some more #ifdefs so people only see what
	  they *can* do in mkpasswd -h
	  - src/ircd_signal.c: VMS doesn't have SIGTRAP
	  - TODO: update my TODO

	  Assisted by:	ejb

2003-05-23 12:09  joshk

	* src/irc_reslib.c:
	  - Fix last of the strict-aliasing warnings, in irc_reslib.c

	  Reviewed by:	db

2003-05-23 11:38  joshk

	* contrib/m_killhost.c: Repair a build warning and possibly a
	  related core - compare server-> name, not server to something else.

2003-05-23 01:52  joshk

	* RELNOTES, src/csvlib.c:
	  - RELNOTES: sync with rc10
	  - csvlib.c: fix uninitialized variable-caused core

	  Verified by:	metalrock

2003-05-23 00:46  metalrock

	* contrib/m_classlist.c:
	   - Typo in comment and added notice for class that failed lookup.
	   Reviewed by: juli

2003-05-23 00:24  joshk

	* include/irc_reslib.h:
	  - Forgot to commit this, fixing bustage.

2003-05-23 00:10  metalrock

	* contrib/m_classlist.c:
	   - Missing a : after NOTICE, bad bad.
	   Reviewed by: juli, joshk

2003-05-22 23:08  db

	* src/csvlib.c:
	  - parse a non quoted field, return it as a string for now. really
	    should verify a non quoted field is a sequence of digits...

	    Michael had a quick look, other lookovers would be nice ;-)

2003-05-22 23:04  joshk

	* src/irc_reslib.c: Repair another strict-aliasing warning. Two
	  left, though; not sure what should be done for them.

2003-05-22 22:45  joshk

	* modules/m_cryptlink.c, src/s_conf.c:
	  - m_cryptlink.c: fix a strict-aliasing warning
	  - s_conf.c: fix an unused variable warning

	  Reviewed by:	db

2003-05-22 22:32  db

	* src/s_conf.c:
	  - cleaned up csv parse file parsing some more. use a common function
	    to parse CONF_KILL, CONF_DLINE, CONF_XLINE for now
	  "parse_conf_file()"

2003-05-22 21:23  metalrock

	* tools/convertconf.c:
	   - Need to remove convertconf-example.conf from CONFPATH as well

2003-05-22 21:04  joshk

	* etc/: Makefile.in, convertconf-example.conf: this is not a good
	  thing to have lying around. someone might use it as an actual
	  *example*..

2003-05-22 19:16  michael

	* include/fileio.h, include/s_user.h, modules/core/m_nick.c,
	  src/fileio.c, src/list.c, src/s_user.c, tools/viconf.c:
	  - fixed a core that can happen if user->server == NULL
	    + reported by metalrock
	  - rearanged register_remote_user() to be more saner
	  - fixed compile warning

2003-05-22 16:19  jmallett

	* src/balloc.c: Remove redundant assignment.

2003-05-22 15:10  joshk

	* configure, configure.ac, contrib/Makefile.in:
	  - configure, configure.ac: Fix depend stuff with a small hack that
	  seems to work well.
	  - contrib/Makefile.in: take out > .depend, it shouldn't be there

2003-05-22 13:53  joshk

	* include/client.h, include/list.h, src/client.c, src/list.c,
	  src/s_debug.c:
	  - Fix casts. Negative memory = -bad-

	  Reviewed by:	db

2003-05-22 13:08  michael

	* contrib/m_whois.c, include/channel.h, include/client.h,
	  include/hash.h, include/resv.h, include/tools.h,
	  modules/m_connect.c, modules/m_who.c, modules/m_whois.c,
	  modules/core/m_sjoin.c, servlink/io.c, src/fileio.c, src/hash.c,
	  src/listener.c, src/match.c, src/s_bsd.c, src/s_bsd_kqueue.c,
	  src/s_serv.c, src/s_user.c, src/tools.c:
	  - reverted my slist changes to hash.c. hopefully I have a -good-
	    solution how to fix the redundant server entries soon.
	  - removed last ANONOPS remnants
	  - also check for pending server connections in ms_connect()
	  - various style corrections

2003-05-22 08:45  adx

	* modules/m_cryptlink.c, src/s_serv.c:
	  - added set_no_delay to serv_connect_callback and removed it from
	    m_cryptlink.c and server_estab()

2003-05-22 02:03  metalrock

	* src/s_user.c:
	   - Fixed another null reason in xline.
	   Reviewed by: joshk

2003-05-22 01:32  lusky

	* include/fileio.h, include/ircd.h, servlink/servlink.c,
	  src/fileio.c, src/ircd.c, src/rsa.c:
	  - fix problem in servlink with descriptors > 1023 via dup() hack
	    suggested by davidt
	  - reserve a low fd at startup because BIO_new_file() in openssl uses
	    fopen() and chokes on descriptors > 255 on Solaris

2003-05-22 01:17  lusky

	* modules/m_cryptlink.c, src/s_serv.c:
	  - fix problem with cryptlink choking when connecting to an older
	    server due to crypted data being in the same packet with the
	  CRYPTLINK AUTH
	  - add a couple of set_no_delay() calls to make cryptlink and ziplink
	    work.  These will probably come out after adx adds his missing
	    set_no_delay() call.

2003-05-22 01:01  metalrock

	* src/client.c:
	   - Fixed null reason in xlines

2003-05-22 00:47  metalrock

	* contrib/spy_trace_notice.c:
	   - Fixed compile warning, missing server->name

2003-05-22 00:41  metalrock

	* contrib/m_omotd.c:
	   - The last of the omotds.....

2003-05-22 00:39  metalrock

	* contrib/m_omotd.c:
	   - m_omotd, not mo_omotd (This should have been with the last
	   commit)

2003-05-22 00:37  metalrock

	* contrib/m_omotd.c:
	   - m_omotd, not mo_omotd

2003-05-22 00:28  metalrock

	* contrib/Makefile.in:
	   - Fixed missing \ in Makefile

2003-05-22 00:10  db

	* contrib/: Makefile.in, m_classlist.c, m_ctrace.c:
	  - forward ported m_classlist.c and m_ctrace.c updated Makefile.in to
	  match

2003-05-22 00:00  metalrock

	* contrib/: Makefile.in, m_omotd.c:
	   - Ported m_omotd from stable to current.

2003-05-21 23:58  lusky

	* src/: event.c, irc_res.c:
	  - log an error if the event table is full
	  - remove extra timeout_resolver eventAdd

2003-05-21 23:55  db

	* include/client.h, modules/m_xline.c, src/client.c:
	  - preliminary version of xline code with activate of xline
	    I'll clean this up with Bill and Lee later...

2003-05-21 23:24  michael

	* modules/m_connect.c:
	  - fixed some strange /connect weirdness

2003-05-21 22:34  joshk

	* Makefile.in, contrib/Makefile.in, src/Makefile.in,
	  modules/Makefile.in, servlink/Makefile.in:
	  - Make dependency system a little less hackish. No more
	  .depend-stamp.

2003-05-21 22:28  metalrock

	* src/: client.c, s_conf.c:
	   - Fixed null reason bug in kline, dline, glines.
	   Reviewed by: joshk

2003-05-21 07:08  metalrock

	* etc/: Makefile.in, convertconf-example.conf, example.conf,
	  example.conf.quick, example.efnet.conf, simple.conf:
	   - Fixed spelling errors and spacing in example confs

2003-05-21 06:36  metalrock

	* etc/: convertconf-example.conf, example.conf, example.efnet.conf:
	   - Fixed typo in comment. exiring = expiring.

2003-05-20 02:51  michael

	* contrib/m_jupe.c, contrib/m_operspy.c, contrib/m_whois.c,
	  contrib/spy_admin_notice.c, contrib/spy_info_notice.c,
	  contrib/spy_links_notice.c, contrib/spy_motd_notice.c,
	  contrib/spy_stats_notice.c, contrib/spy_stats_p_notice.c,
	  contrib/spy_trace_notice.c, include/client.h, include/s_gline.h,
	  include/scache.h, include/whowas.h, modules/m_cryptlink.c,
	  modules/m_gline.c, modules/m_join.c, modules/m_kline.c,
	  modules/m_stats.c, modules/m_who.c, modules/m_whois.c,
	  modules/core/m_kill.c, modules/core/m_message.c,
	  modules/core/m_nick.c, modules/core/m_server.c, src/Makefile.in,
	  src/ircd.c, src/ircdauth.c, src/parse.c, src/s_debug.c,
	  src/s_gline.c, src/s_misc.c, src/s_serv.c, src/s_user.c,
	  src/scache.c, src/send.c, src/whowas.c:
	  - removed SCACHE code. we just use a pointer to the User's
	    server(Client) struct
	  - reviewed by: db

	  - renamed initwhowas() to init_whowas()
	  - changed do_whois() to a void function
	  - various style corrections

2003-05-20 00:45  metalrock

	* include/irc_reslib.h:
	   - Fixed incorrect filename in header

2003-05-20 00:25  michael

	* include/irc_reslib.h, src/irc_reslib.c, src/parse.c,
	  src/s_user.c:
	  - irc_reslib.h: removed 'register' keyword
	  - irc_reslib.c: s/u_long/unsigned long/
	  - parse.c: removed unused 'char *end'

2003-05-19 23:03  joshk

	* contrib/Makefile.in:
	  - Delete .depend from contrib when making distclean.

2003-05-19 22:19  db

	* src/: client.c, irc_res.c, parse.c, s_auth.c:
	  - no. dns_query->ptr must be "fed" a struct AuthRequest * not a
	  client.
	  - hence, in exit_client, delete_resolver_queries must be passed
	    dns_query->ptr
	  - therefore, in case source_p->localClient->dns_query is NULL, this
	    must be tested.  localClient is not NULL since its passed the
	  MyConnect() test
	  - fixed an obvious typo in irc_res.c "side" not "de" (You aren't
	    french are you Stuart?)
	  - more descriptive name for struct Message * lookup.
	    "find_command()" rather than hash_parse()

2003-05-19 20:06  wiz

	* src/channel.c:
	  - We want to go into splitmode if *either* splitnum or splitusers
	    triggers it, but we don't want to come out of splitmode until both
	    are met, since servers are introduced immediately and users take a
	    while to sync up. I noticed that aloha was coming out of splitmode
	    way too early before I made this change.

	  MFC After: 1 week

2003-05-19 17:32  joshk

	* tools/Makefile.in:
	  - tools/Makefile.in: Fix a typo.

2003-05-19 15:39  stu

	* src/s_conf.c:
	  - improper sizeof argument used in conf_dns_callback

	  Reviewed by: db - and it took so long too!

2003-05-19 15:10  stu

	* include/inet_misc.h, include/irc_reslib.h, include/s_conf.h,
	  include/whowas.h, src/channel_mode.c, src/inet_misc.c,
	  src/irc_getnameinfo.c, src/irc_res.c, src/irc_reslib.c,
	  src/irc_string.c, src/match.c, src/s_bsd.c, src/s_conf.c,
	  src/s_debug.c, src/scache.c, src/whowas.c: Reviewed by: Michael
	  - ok so this is a bit of a biggie, blame sed -i.
	  - s/u_int/unsigned int/g
	  - s/u_char/unsigned char/g
	  - Basically getting rid of old BSD-style typedefs when there's no
	    need to use them.
	  - Requested by Michael

2003-05-19 12:19  db

	* src/: s_auth.c, s_conf.c:
	  - start_auth() should have been using ->ptr = client for the id,
	    then the delete_resolver_queries(source_p) in client.c will work
	    properly.

2003-05-19 11:14  adx

	* src/: packet.c, parse.c:
	  - extract_one_line should never return more than 510 bytes
	  - got rid of some old stuff in parse.c

2003-05-19 11:06  joshk

	* etc/example.conf.quick:
	  - Missed example.conf.quick

2003-05-19 11:05  joshk

	* doc/messages.txt, etc/example.conf, messages/Makefile.in,
	  messages/ayb.lang, messages/custom.lang:
	  - Remove custom.lang (lame)
	  - Take out all the stuff in ayb.lang that's from custom.lang
	  - Rectify doc/messages.txt to refer to
	  messages/ircd-standard.example.lang
	  - Change example message_locale to standard

2003-05-19 01:54  michael

	* include/modules.h, src/modules.c, src/s_serv.c:
	  - replaced a few strcpy()'s with strlcpy

2003-05-19 00:36  joshk

	* messages/: ircd-french.lang, ircd-standard.example.lang:
	  - ircd-french.lang: make many corrections and take out stuff i've
	  not translated yet
	  - ircd-standard-example.lang: take out all the SUPER mundane stuff
	  that no one on earth will translate

2003-05-19 00:08  joshk

	* messages/: README, ircd-french.lang, ircd-standard.example.lang:
	  - Update my french translation.
	  - Add an example file with *everything* from messages.tab in a .lang
	  format and note this in the README.

2003-05-18 23:48  bill

	* src/parse.c: Submitted by:	metalrock
	  - oops, numerics do not have an mptr.  this way is more efficient,
	  anyway

2003-05-18 23:24  metalrock

	* contrib/disable_identd.diff:
	   - Updated disable_identd.diff with current source.

2003-05-18 23:11  metalrock

	* src/s_user.c:
	   - Synchronized ircd error messages with "you need blah = yes;"
	   instead of the old flags.

2003-05-18 22:58  metalrock

	* contrib/: m_help.c, help/opers/dline, help/opers/kline:
	   - Now we can add comments to help files.
	   - Added Id tags.
	   - Took off the s in kline.conf, dline.conf.
	   Approved by: Michael

2003-05-18 22:09  metalrock

	* etc/Makefile.in, src/ircd.c:
	   - Its kline.conf, dline.conf, xline.conf, not with an s or the ircd
	   will complain!

2003-05-18 21:38  michael

	* src/s_user.c:
	  - H6 stores optional user-modes which are defined in the sixth
	    o-line field in 'aconf->hold', not H7

	    an operator can  get UMODE_NCHANGE on oper up without having
	    the correct oper privileges if oper_umodes includes 'nchange'

	    src/s_user.c:oper_up()

	    - MFC to stable

2003-05-18 20:41  michael

	* include/s_conf.h, src/irc_res.c, src/ircd.c, src/s_conf.c,
	  src/s_gline.c, src/s_user.c:
	  - removed a pointless memset() (irc_res.c)
	  - removed an unused prototype (s_conf.h)
	  - changed make_daemon() to a void function
	  - various cleanups

2003-05-18 19:29  michael

	* include/client.h, include/fdlist.h, include/irc_res.h,
	  include/res.h, include/s_auth.h, modules/m_dmem.c,
	  modules/m_kline.c, modules/m_rehash.c, src/irc_res.c, src/ircd.c,
	  src/list.c, src/motd.c, src/s_bsd.c, src/s_bsd_devpoll.c,
	  src/s_bsd_kqueue.c, src/s_bsd_poll.c, src/s_bsd_select.c,
	  src/s_bsd_sigio.c, src/s_conf.c, src/s_debug.c, src/s_misc.c,
	  src/s_serv.c:
	  - moved DNSQuery|DNSReply structs to irc_res.h - removed res.h
	  - fixed a compile warning (m_kline.c)

2003-05-18 16:20  michael

	* include/supported.h:
	  - fixed wrong CASEMAP definition (include/supported.h)

2003-05-18 15:26  joshk

	* Makefile.in, configure, configure.ac, contrib/.cvsignore,
	  contrib/Makefile.in, include/supported.h, modules/Makefile.in,
	  servlink/Makefile.in, src/Makefile.in: + include/supported.h:
	  remove an impossible #ifdef (variable doesn't exist) + the rest: add
	  contrib/ to make depend dirs, also fix the entire support for it
	  which was secretly broken by me a few days ago :)

2003-05-18 10:15  adx

	* include/numeric.h, messages/ircd-croatian.lang,
	  messages/ircd-danish.lang, messages/ircd-dutch.lang,
	  messages/ircd-german.lang, messages/ircd-norwegian.lang,
	  messages/ircd-polish.lang, messages/ircd-russian.lang,
	  messages/ircd-spanish.lang, messages/ircd-swedish.lang,
	  src/messages.tab, src/parse.c:
	  - removed some obsolete/unused numerics
	  - certain wrong entries in messages.tab could probably cause cores
	    when processing malicious .lang files
	  - allow ERR_UNKNOWNCOMMAND customization
	  - added polish translation

2003-05-18 07:45  adx

	* include/numeric.h, messages/ircd-russian.lang, src/messages.tab:
	  - removed RPL_YOURID which we don't use anyway

2003-05-18 05:37  adx

	* messages/: ircd-croatian.lang, ircd-danish.lang, ircd-dutch.lang,
	  ircd-german.lang, ircd-russian.lang, ircd-spanish.lang,
	  ircd-swedish.lang:
	  - updated RPL_ENDOFSTATS in message files to use %c instead of %s

2003-05-17 21:07  michael

	* modules/m_encap.c, modules/m_kline.c, tools/convertconf.c,
	  tools/convertilines.c, tools/convertklines.c, tools/mkpasswd.c,
	  tools/viconf.c:
	  - fixed several compile warnings

2003-05-17 17:57  joshk

	* configure, configure.ac, include/setup.h.in, src/Makefile.in: +
	  Don't look only in libdl, and then again don't even try if it's
	  natively available - use an AC_SEARCH_LIBS. We don't need HAVE_LIBDL
	  defined anywhere, either, so don't bother defining it! + Make 'make
	  depend' look a little nicer with makes that don't strip excess
	  whitespace.

2003-05-17 16:26  joshk

	* configure, configure.ac, messages/Makefile.in, messages/README,
	  messages/ircd-french.lang, servlink/Makefile.in, src/Makefile.in:
	  + configure, configure.ac, src/Makefile.in: We have no use for
	  $LEXLIB at all. Not at this point in time. We also don't need zlib
	  when linking ircd itself. Only servlink does! +
	  messages/Makefile.in, messages/README, messages/ircd-french.lang: My
	  first stab at a french translation. It's not awesome, but it works.

2003-05-17 14:59  joshk

	* configure, configure.ac, modules/Makefile.in, modules/m_xline.c,
	  src/ircd.c, src/s_serv.c, src/send.c: + m_xline.c, send.c: fix
	  build time warnings + ircd.c, s_serv.c: Cygwin now has a fully
	  functional fork() + modules/Makefile.in: make it obvious why we use
	  .depend.tmp, people might get confused otherwise + configure,
	  configure.ac: don't check for already checked headers twice

	  Approved by:	bill (m_xline and send)

2003-05-17 14:00  bill

	* include/ircd_defs.h, include/s_serv.h, include/send.h,
	  modules/Makefile.in, modules/m_encap.c, modules/m_kline.c,
	  modules/m_xline.c, src/s_serv.c, src/send.c:
	  - added m_encap.c and ENCAP command
	    (right now we only propogate it to compatible servers, i'm
	     waiting to implement it until we have something that uses it)
	  - added CAP_UNKLN, CAP_CLUSTER, CAP_ENCAP
	  - added sendto_match_servs() (from ratbox)
	  - no longer send all local opers a notice if a remote kline fails,
	    instead send it to the oper who tried to apply it
	  - reworked XLINE to use (+)ratbox format.  WARN|REJECT|SILENT types
	    are still supported, and numerical types are deprecated
	  - fixed typo in m_xline.c (mod_add_cmd in _modedeinit())
	  - fixed XLINE related notices to be consistent with
	  KLINE/DLINE/GLINE
	  - initial traces of cluster code can be found in this commit,
	    they are by no means close to started, much less finished

2003-05-17 13:17  joshk

	* .cvsignore, Hybrid-team, INSTALL, Makefile.in, TODO, configure,
	  configure.ac, doc/Makefile.in, etc/Makefile.in,
	  include/inet_misc.h, include/setup.h.in, include/stdinc.h,
	  modules/.cvsignore, modules/.depend, modules/Makefile.in,
	  servlink/.cvsignore, servlink/Makefile.in, src/.cvsignore,
	  src/.depend, src/Makefile.in, src/inet_misc.c, src/ircd_lexer.l,
	  src/s_gline.c, tools/Makefile.in: This colossal commit does the
	  following:

	  o Revamps dependency system to use the old style all around. Remove
	  .depend files, autogenerated only by the person committing stuff
	  that requires a make depend - probably ok but iffy for widespread
	  use. Since all the $CC we currently support are able to make dep
	  info (later we might look for 'mkdep' and fall back) just generate
	  it once per build until make distclean is called, using a
	  .depend-stamp file in the top.

	  o Fix SunOS make bustage.

	  o Fix makefile incompatibility with IRIX's make.

	  o Fix Cygwin.

	  o We also prefer BSD mkdep if it's available, since $CC might not be
	  able to use -MM if it's an unsupported compiler. BSD mkdep *rocks*.
	  Also make sure X11 makedepend exists before blindly using it on
	  HPUX.

	  o Split top Makefile.in subdir targets into INSTALL, BUILD, CLEAN,
	  DISTCLEAN targets so that unnecessary targets in files just to keep
	  make going can be removed.

	  o Update my TODO.

	  o Initial Tiny C Compiler support, but flex is having some issues
	  and tcc is somewhat anal. Shared modules don't work using it either.

	  o Reorganize the networking checks and lump them all together. Check
	  for inet_pton, ntop, and aton and use what we need in inet_misc.[ch]
	  to support everything we (presumably) need to build ircd-hybrid on
	  any nearly-POSIX platform.

	  o Merge all the compatibility stuff into inet_misc.h.

	  o Add configure checks for types that may not be there and RH6.1
	  glibc breakage.

	  o Remove non-existent VMS #include for ircd_parser_tab.h in the
	  lexer.

	  Reviewed by:	lusky Approved by:	lusky

	  12:31 <@Rodder> josh: fbsd3.5 ok, fbsd 5.0 ok, rh61 ok, rh71 ok, rh8
	  ok, solaris8 ok, cygwin 1.3.22 ok 12:32 <@Rodder> commit it!

2003-05-17 02:14  bill

	* src/parse.c, contrib/m_operspy.c:
	  - MFLG_HIDDEN commands now use the case intact syntax of the command
	    used to call the corresponding function
	  - updated m_operspy.c accordingly

2003-05-16 23:00  metalrock

	* src/client.c:
	   - Fix to stop the server from crashing on startup. Temporary fix
	   until the real bug can be found.

2003-05-16 20:52  michael

	* contrib/m_help.c, include/config.h, include/config.h.dist,
	  include/m_info.h:
	  - moved HPATH|UPATH defines to contrib/m_help.c
	  - replaced a sprintf() with snprintf()
	  - style corrections

2003-05-16 19:36  michael

	* src/: s_serv.c, s_user.c:
	  - removed unused variables in s_user.c
	  - replaced some strcpy()'s with strlcpy()
	  - changed return values of valid_hostname() to 0/1 instead
	    of NO/YES (visual consistency with other functions)
	  - fixed compile warning

2003-05-16 09:29  michael

	* modules/m_xline.c, src/csvlib.c, src/irc_res.c, src/rsa.c,
	  src/s_user.c:
	  - small logic corrections/optimizations in
	  s_user.c:register_remote_user
	  - fixed compile warnings

2003-05-16 02:17  db

	* include/res.h, modules/m_xline.c, src/client.c, src/irc_res.c,
	  src/s_auth.c, src/s_conf.c:
	  - This should fix the dns core
	  - some cleanups... prototypes were defined twice, once in irc_res.c
	    once in res.c. One of the two should go.

2003-05-16 01:07  lusky

	* RELNOTES: Forced commit to test cvsweb

2003-05-15 21:17  joshk

	* tools/: Makefile.in, mkpasswd.c: Fix make dependency errors, and
	  a warning in mkpasswd.c.

2003-05-15 18:16  joshk

	* doc/: modeg.txt, resv.txt, whats-new.txt, technical/send.txt:
	  dont -> don't, doesnt -> doesn't, arent -> aren't. sheesh.

2003-05-15 17:48  joshk

	* configure.ac, configure:
	  - Fix some quoting issues in configure.ac that caused test to
	  complain.

	  Reviewed by:	stu

2003-05-15 17:34  joshk

	* src/: descrip.mms, irc_getaddrinfo.c:
	  - irc_getaddrinfo.c: add some #ifdef IPV6 wrapping
	  - descrip.mms: update for new csvlib.c

	  Reviewed by:	stu (irc_getaddrinfo)

2003-05-15 12:14  joshk

	* src/Makefile.in, contrib/Makefile.in, Hybrid-team: Hybrid-team:
	  Added James. Someone insane enough to toil on a Cygwin port deserves
	  to be in this. :-) src/Makefile.in, contrib/Makefile.in: nitpick -
	  remove unused INSTALL_SUID variable, fix some capitalization, and
	  make symlinks for help files that are relative.

2003-05-15 11:48  joshk

	* modules/m_trace.c, etc/.cvsignore: missed etc/.cvsignore fixed
	  getnameinfo reference in m_trace.c

2003-05-15 09:06  michael

	* modules/m_join.c:
	  - removed an ANONOPS leftover

2003-05-15 06:14  metalrock

	* etc/: example.conf, example.conf.quick, example.efnet.conf:
	   - Added xline = yes; to the example configuration files so xlines
	   are usable by operators.

2003-05-15 03:17  joshk

	* Makefile.in, configure, configure.ac, doc/Makefile.in,
	  doc/README.cidr_bans, doc/convertconf-example.conf,
	  doc/dline.conf, doc/example.conf, doc/example.conf.quick,
	  doc/example.efnet.conf, doc/ircd.motd, doc/kline.conf,
	  doc/server-version-info, doc/simple.conf,
	  doc/technical/message-customisation.txt, etc/Makefile.in,
	  etc/convertconf-example.conf, etc/example.conf,
	  etc/example.conf.quick, etc/example.efnet.conf, etc/ircd.motd,
	  etc/simple.conf:
	  - Okay, here's the big one. Move all of the configuration stuff to
	    an 'etc' dir, newly created. This involves:
	    	+ configure{.ac}, Makefile.in: add etc target
	  	+ [all moved files]: move these to etc
	  - doc/Makefile.in: all we do is install the manpage. so let's do
	  *just* that. there's no need to expand unless we need it later (ie
	  more manpages)
	  - doc/server-version-info: fix a 2000 -> 2003 typo

	  REMOVED:
	  - doc/technical/message-customisation.txt: obsoleted by
	    messages/README and doc/messages.txt which are more current.
	  - doc/README.cidr_bans: backed-out feature with a botched
	  implementation; of no practical use
	  - doc/*line.conf: how silly including blank files in a distribution.
	  `touch' is a godsend.

	  ADDED:
	  - etc/Makefile.in: install all the configuration files. Yes,
	  supports CLOBBER!

2003-05-15 03:04  joshk

	* src/Makefile.in, tools/Makefile.in, modules/Makefile.in,
	  messages/Makefile.in:
	  - modules/Makefile.in: remove useless DOLLAR variable declaration
	  - the rest: fix all the CLOBBER support. it actually works as
	  expected now

2003-05-15 03:01  joshk

	* doc/index.txt, doc/messages.txt, doc/modes.txt,
	  doc/technical/README.openssl, messages/README:
	  - Correct some documentation (esp. some of which discussed gettext
	  style internationalization files.)

2003-05-15 00:38  joshk

	* tools/Makefile.in, modules/m_trace.c: + tools/Makefile.in: use
	  symlinks. hard links are blah.  + modules/m_trace.c: use
	  irc_getaddrinfo() not getaddrinfo() which is unavailable on a few
	  platforms

2003-05-15 00:18  db

	* tools/mkpasswd.c:
	  - improved mkpasswd.c submitted by Hwy

2003-05-14 23:50  db

	* modules/m_xline.c:
	  - so, now its trivial to add unxline. done.

2003-05-14 23:37  db

	* src/csvlib.c:
	  - deal with %d in csvlib.c temporarily to deal with the 99% of cases

2003-05-14 22:54  db

	* modules/m_kline.c, modules/m_xline.c, src/csvlib.c,
	  src/ircd_parser.y:
	  - Michaels fixes for new csv code

2003-05-14 19:17  joshk

	* include/config.h.dist: Sync config.h with config.h.dist

2003-05-14 18:56  stu

	* src/irc_res.c:
	  - Fill in the rest of the ip struct not just the ip..

2003-05-14 18:38  db

	* src/csvlib.c:
	  - Ok ok ok my meeting is at 7:30 I goofed. ;-)
	    port might be NULL so ... check for that too

2003-05-14 18:35  db

	* src/csvlib.c:
	  - atoi(port) for setting aconf->port

2003-05-14 18:29  db

	* include/client.h, include/config.h, include/s_conf.h,
	  modules/Makefile.in, modules/m_kline.c, modules/m_xline.c,
	  src/csvlib.c, src/hostmask.c, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_auth.c, src/s_conf.c:
	  - initial cleanup of Conf system
	  - added m_xline.c

2003-05-14 15:20  joshk

	* doc/ircd.8: Make ircd.8 a little more readable

2003-05-14 14:38  joshk

	* configure, configure.ac, include/Makefile.in, include/control.h,
	  include/io.h, include/servlink.h, servlink/.cvsignore,
	  servlink/Makefile.in, servlink/control.c, servlink/control.h,
	  servlink/io.c, servlink/io.h, servlink/servlink.c,
	  servlink/servlink.h, servlink/setup.h.in, src/csvlib.c,
	  src/s_conf.c, tools/viconf.c:
	  - Move servlink includes into include/
	  - Remove redundant setup.h.in for servlink/
	  - Fix a warning in s_conf.c that shouldn't be there anyway (it's
	  code that's supposedly NEVER reached)
	  - Updated other files affected by this change (configure.ac
	  servlink/Makefile.in)

2003-05-14 14:26  db

	* modules/m_unkline.c, src/csvlib.c:
	  - bytes was unitialised in csvlib.c
	  - fixed unused prototypes and variables in m_unkline()

2003-05-14 14:15  db

	* include/s_conf.h, modules/m_kline.c, modules/m_unkline.c,
	  src/Makefile.in, src/csvlib.c, src/kdparse.c, src/s_conf.c:
	  - This is a rework of the csv conf system code.
	    csvlib.c handles most of the work now generically.
	    There is now one config file reader in csvlib.c
	    one remove config line handler in csvlib.c
	    m_unkline.c etc. now uses the function in csvlib.c

	    Reviewed by cryogen (Stuart)

2003-05-13 23:52  db

	* src/irc_res.c:
	  - irc_res_mkquery() now only generates QUERY so removed option for
	    anything but also removed the uneeded parms only needed for IQUERY
	  etc.

2003-05-13 23:51  db

	* src/irc_reslib.c:
	  - removed IQUERY from irc_res_mkquery() this simplifies this
	    considerably also, irc_res_mkquery is only ever used to make a
	    QUERY, so this is all it does now.

2003-05-13 23:50  db

	* include/irc_reslib.h:
	  - removed command from irc_res_mkquery removed unneeded parms

2003-05-13 14:59  joshk

	* include/irc_res.h:
	  - The resolver's fixed. Bah!

2003-05-13 14:21  db

	* modules/m_who.c:
	  - The spaces were distracting in one line

2003-05-13 14:19  db

	* src/channel_mode.c:
	  - This fixes the core in m_who (and probably all the others) this
	    was introduced when halfops was removed

2003-05-13 13:46  joshk

	* configure, configure.ac, include/irc_res.h, src/irc_res.c,
	  src/irc_reslib.c:
	  - Fix IPv6 related warnings
	  - Remove iauth/ stuff from config.status Makefile generation
	  - NO_ERROR is taken by Cygwin too, so use NO_ERRORS *sigh*

2003-05-13 11:03  joshk

	* configure, configure.ac, include/inet_misc.h, include/irc_res.h,
	  include/irc_reslib.h, include/setup.h.in, include/stdinc.h,
	  src/Makefile.in, src/inet_misc.c, src/irc_res.c,
	  src/irc_reslib.c:
	  - new inet_misc.[ch] provides inet_pton, ntop, and aton for systems
	  without them
	  - fix some more namespace stuff
	  - fix a dn_comp -> irc_dn_comp in reslib
	  - nuke arpa/nameser.h for good (and the configure check too)

2003-05-13 10:27  db

	* src/irc_reslib.c:
	  - macros NS_NS_PUT?? already increment cp, unlike the put* functions
	    they replace this fixes the resolver. Moreover, irc_res.c never uses
	    anything but QUERY so remove the other cruft.

2003-05-13 01:16  joshk

	* configure, configure.ac, include/irc_res.h, include/irc_reslib.h,
	  include/setup.h.in, src/irc_res.c, src/irc_reslib.c:
	  - More fixing - NS_PUT -> IRC_NS_PUT usage, MAXCDNAME vs.
	  NS_MAXCDNAME, stuff noticeable for people with a broken nameser.h
	  - Remove defs from reslib.h and into irc_res.h
	  - Add some necessary tests to configure.

2003-05-13 01:13  db

	* src/channel.c:
	  - This fixes odd cores on join/names etc.

2003-05-13 01:10  metalrock

	* contrib/: m_help.c, m_killhost.c, m_operspy.c:
	   - BadPtr doesn't exist anymore, replaced it with EmptyString so
	   killhost will work.
	  - Fixed implicit declaration of ToLower in m_help.c.
	   - Fixed implicit declarations in m_operspy.c from missing include.
	   - Removed unused variable in m_operspy.c.

2003-05-13 00:48  metalrock

	* contrib/m_clearchan.c, contrib/m_flags.c, contrib/m_jupe.c,
	  contrib/m_killhost.c, modules/m_map.c, modules/m_tb.c,
	  contrib/m_whois.c:
	   - Fixed compile error in m_map from missing include.
	   - Fixed implicit declaration from missing #include sprintf_irc.h
	   - Casted time_t declarations in tburst so fbsd 5.0 won't whine
	   about it.

2003-05-13 00:21  joshk

	* src/: irc_res.c, irc_reslib.c:
	  - Sorry, missed out some irc_res fixes that should somewhat help the
	  Cygwin build. I'm about to reboot to Windows to investigate this
	  personally.

2003-05-13 00:18  joshk

	* src/: fdlist.c, irc_reslib.c:
	  - Fix some build errors. I need to set stuff in stone before I go
	  gallivanting about trying to get rid of nameser.h

2003-05-12 23:06  joshk

	* include/irc_reslib.h, modules/m_whois.c, src/irc_res.c,
	  src/irc_reslib.c:
	  - m_whois.c: missed a #include "sprintf_irc.h"
	  - all the res stuff: fix NS_{GET,PUT}* bustage. we compile!

2003-05-12 22:36  db

	* include/irc_reslib.h, src/irc_res.c, src/irc_reslib.c:
	  - Ok, this adds irc_res_mkquery() so we don't touch any system bind
	  libs at all now

2003-05-12 22:32  joshk

	* configure, configure.ac, make.com, include/irc_res.h,
	  include/irc_reslib.h, include/stdinc.h, modules/descrip.mms,
	  modules/m_accept.c, modules/m_admin.c, modules/m_gline.c,
	  modules/m_ison.c, modules/m_kline.c, modules/m_knock.c,
	  modules/m_names.c, modules/m_restart.c, modules/m_resv.c,
	  modules/m_topic.c, modules/m_unkline.c, modules/m_userhost.c,
	  modules/m_who.c, modules/core/descrip.mms, modules/core/m_kill.c,
	  modules/core/m_sjoin.c, src/channel.c, src/channel_mode.c,
	  src/client.c, src/descrip.mms, src/irc_res.c, src/irc_reslib.c,
	  src/irc_string.c, src/ircd.c, src/listener.c, src/motd.c,
	  src/parse.c, src/s_auth.c, src/s_bsd.c, src/s_conf.c,
	  src/s_log.c, src/s_misc.c, src/s_serv.c, src/s_user.c:
	  - Fix IPv6 test
	  - Fix a whole heckuva lot of implicit declarations by using -Wall
	  across the board (usually fixed by #include "sprintf_irc.h")
	  - Added protos to irc_reslib.h and added new irc_res.h with said
	  prototypes
	  - (supposedly) Fix descrip.mms stuff to not use adns anymore. Needs
	  testing.
	  - Define some nameser.h mumbo-jumbo that some systems don't have.
	  - Remove dupe inclusion of stdio.h in stdinc.h, move inclusion of
	  sys/types.h higher, move the Cygwin typedef for in_port_t higher
	  - Cleaned up #includes in some files to use stdinc.h

2003-05-12 21:53  db

	* include/res.h, modules/m_stats.c, src/irc_res.c:
	  - replace report_adns_servers() with report_dns_servers()
	    added report_dns_servers() to irc_res.c
	    changed m_stats.c to call new report_dns_servers() added prototype
	    to res.h

2003-05-12 19:43  joshk

	* configure, configure.ac, contrib/Makefile.in, include/res.h,
	  modules/.depend, modules/Makefile.in, modules/m_accept.c,
	  src/.depend, src/Makefile.in, src/irc_res.c, src/s_auth.c,
	  src/s_conf.c:
	  - Fix some mini-bustage in irc_res.c
	  - Fix configure{.ac} to not write adns/Makefile (nonexistent)
	  - Fix INCLUDES to not include -I../adns
	  - Fix m_accept.c by include irc_string.h
	  - Fix make depend in src/Makefile.in to make deps for all files
	  (altho this really should not be in the repo, should be
	  autogenerated)

2003-05-12 19:12  db

	* src/irc_res.c:
	  - updated license and credits. There is no Darren Reed code left.

2003-05-12 19:01  stu

	* src/irc_res.c: -Added some ifdefs for ipv6 stuff

2003-05-12 17:56  stu

	* Makefile.in, include/irc_reslib.h, include/ircd_defs.h,
	  include/res.h, include/s_auth.h, modules/.depend, src/.depend,
	  src/Makefile.in, src/adns.c, src/client.c, src/irc_res.c,
	  src/irc_reslib.c, src/resv.c, src/s_auth.c, src/s_bsd.c,
	  src/s_conf.c:
	  - Here it is.. Good bye and good riddance to adns.
	  - Replaced it with a heavily modified res.c
	  - It's simple, look up a PTR, find a AAAA/A to match it
	  - Supports querying ipv6 nameservers amongst other things

	  Reviewed by: db, adx, micheal

2003-05-12 05:22  wiz

	* modules/m_info.c:
	  - Updated client_exit description from 'Client exit' to 'Quit' in
	  /info
	  - Added true_no_oper_flood setting to /info output

2003-05-12 04:34  michael

	* include/channel.h, src/channel.c:
	  - removed pointless 'int locusers' from channel struct.

2003-05-12 04:09  michael

	* TODO, contrib/m_clearchan.c, contrib/m_force.c,
	  contrib/m_ojoin.c, contrib/m_operspy.c, contrib/m_opme.c,
	  doc/convertconf-example.conf, doc/example.conf,
	  doc/example.conf.quick, doc/example.efnet.conf, doc/modes.txt,
	  doc/whats-new.txt, doc/technical/cryptlink.txt,
	  include/channel.h, include/channel_mode.h, include/config.h,
	  include/config.h.dist, include/s_conf.h, include/s_serv.h,
	  include/send.h, include/supported.h, modules/m_info.c,
	  modules/m_invite.c, modules/m_join.c, modules/m_knock.c,
	  modules/m_lljoin.c, modules/m_topic.c, modules/m_who.c,
	  modules/core/m_kick.c, modules/core/m_message.c,
	  modules/core/m_part.c, modules/core/m_sjoin.c, src/channel.c,
	  src/channel_mode.c, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c, src/s_debug.c, src/s_serv.c,
	  src/send.c:
	  - removed halfops
	  - updated documents

2003-05-12 01:33  joshk

	* configure, include/s_serv.h, include/setup.h.in: configure,
	  setup.h.in: sorry, didn't auto{conf,header} last time.
	  include/s_serv.h: fix a warning that happens with --enable-warnings

2003-05-12 00:09  michael

	* contrib/m_operspy.c, contrib/m_whois.c,
	  doc/convertconf-example.conf, doc/example.conf,
	  doc/example.conf.quick, doc/example.efnet.conf, doc/modes.txt,
	  include/channel_mode.h, include/config.h, include/config.h.dist,
	  include/s_conf.h, include/supported.h, modules/m_info.c,
	  modules/m_join.c, modules/m_names.c, modules/m_topic.c,
	  modules/m_who.c, modules/m_whois.c, modules/core/m_kick.c,
	  modules/core/m_sjoin.c, src/channel.c, src/channel_mode.c,
	  src/ircd.c, src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c:
	  - ripped out ANONOPS. halfops are to come
	  - style corrections

2003-05-11 22:22  joshk

	* include/stdinc.h: This snippet alongwith IPv6 patches from
	  http://win6.jp/Cygwin/ allows us to build on Cygwin. Yay!

	  Too bad adns is still screwing us, though.

2003-05-11 21:08  joshk

	* README.FIRST, contrib/example_module.c, contrib/m_jupe.c: Repair
	  some dont and cant that are probably going to be seen by a lot of
	  other people. (The rest are in the main source comments and don't
	  matter)

2003-05-11 20:40  michael

	* contrib/m_killhost.c:
	  - fixed m_killhost.c

2003-05-11 20:25  db

	* contrib/m_killhost.c:
	  - This failed to make it in before due to a missing Id grrrr our
	    scripts are too anal.
	    Anyway, this module simply adds /quote killhost {pattern} where
	    pattern is a hostmask. i.e. its a killmask thing. Its in contrib.
	    so it does not matter.

2003-05-11 19:47  joshk

	* TODO, configure, configure.ac, modules/Makefile.in: Fix the
	  SEDOBJ stuff for modules. But dependencies are still broken
	  fundamentally.

2003-05-11 18:27  joshk

	* configure, configure.ac, contrib/Makefile.in, doc/Makefile.in,
	  include/Makefile.in, include/channel.h, include/setup.h.in,
	  messages/Makefile.in, modules/Makefile.in, servlink/Makefile.in,
	  src/Makefile.in, src/adns.c, src/balloc.c, src/channel_mode.c,
	  src/class.c, src/client.c, src/dynlink.c, src/event.c,
	  src/fdlist.c, src/fileio.c, src/irc_getaddrinfo.c,
	  src/irc_getnameinfo.c, src/irc_string.c, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/ircdauth.c,
	  src/listener.c, src/match.c, src/md5.c, src/numeric.c,
	  src/s_auth.c, src/s_bsd.c, src/s_bsd_devpoll.c,
	  src/s_bsd_kqueue.c, src/s_bsd_poll.c, src/s_bsd_select.c,
	  src/s_bsd_sigio.c, src/s_gline.c, tools/Makefile.in,
	  tools/convertconf.c, tools/encspeed.c: Too many things to note,
	  	but in general: o Define IRCD_PREFIX in config.h instead of on the
	  	commandline.  o Rename many 'ac_cv' variables to be without the
	  	needless 'ac_cv.'
	  	o Many makefiles use rm, mv, etc. when the explicit RM and MV
	  	variables set by configure are defined. Use those instead.
	  	o install-mkdirs targets are now mostly obsolete (except in
	  	modules where we do some special stuff. Just use mkdir -p
	  	o Enable CLOBBER handling for other dirs.
	  	o Some useless definitions of variables are removed (Makefile.in)
	  	o Revamp tools/Makefile.in, it really does some unnecessary stuff.
	  	o If you include stdinc.h, don't bother including setup.h or
	  	config.h!!
	  	o SEDOBJ is no longer used, don't do anything with it, so take
	  	it out.

	  Reviewed by:	stu, michael, db

2003-05-11 18:04  michael

	* contrib/m_ltrace.c, doc/server-version-info, include/channel.h,
	  include/config.h, include/config.h.dist, include/defaults.h,
	  include/ircd.h, include/m_info.h, include/s_debug.h,
	  messages/ircd-danish.lang, messages/ircd-german.lang,
	  messages/ircd-spanish.lang, modules/m_pong.c, modules/m_trace.c,
	  modules/m_version.c, src/channel_mode.c, src/class.c,
	  src/client.c, src/ircd.c, src/messages.tab, src/parse.c,
	  src/s_conf.c, src/s_debug.c, src/s_serv.c:
	  - removed everything related to DEBUGMODE. #discussed on irc

2003-05-11 17:23  metalrock

	* contrib/m_whois.c:
	   - Updated the whois module in contrib with the one in stock with
	   style cleanups.  Reviewed by: Michael

2003-05-11 17:20  db

	* contrib/Makefile.in:
	  - Forgot to add change to Makefile to add m_killhost.c

2003-05-11 12:05  michael

	* include/client.h, include/s_debug.h, include/s_serv.h,
	  include/s_user.h, modules/m_ison.c, modules/m_knock.c,
	  modules/m_list.c, modules/m_nburst.c, modules/m_pong.c,
	  modules/m_trace.c, modules/m_whois.c, modules/m_whowas.c,
	  modules/core/m_part.c, modules/core/m_server.c, src/channel.c,
	  src/client.c, src/packet.c, src/s_conf.c, src/s_debug.c,
	  src/s_gline.c, src/s_serv.c, src/s_user.c:
	  - slight changes to my_name_for_link(), the first `name'
	    argument was just unnecessary
	  - fixed compiletime warnings with DEBUGMODE enabled
	  - changed user_mode(), whowas_do() and do_ison() to void functions
	  - misc. style corrections

2003-05-11 05:25  adx

	* messages/: ayb.lang, custom.lang, ircd-dutch.lang,
	  ircd-spanish.lang:
	  - removed RPL_WHOISADMIN from message files

2003-05-10 23:11  jmallett

	* doc/example.efnet.conf: As much as I'd love to discourage people
	  from running something based off this verbatim...  Fix a syntax
	  error (missing semicolon) not present in example.conf :/

	  MFC After:	24 hours

2003-05-10 22:55  jmallett

	* README.PLATFORMS: Fix a s/o/O/ introduced in last commit due to
	  Home/End not working right in vi on NetBSD/sgimips.  While here,
	  cleanup whitespace due to pathological need.

2003-05-10 22:44  jmallett

	* README.PLATFORMS: Take responsibility for more platforms now that
	  my network is getting a bit beefier, and so on.  Whee.

2003-05-10 21:10  joshk

	* HOWTO-CVS, Makefile.in, configure, configure.ac: HOWTO-CVS:
	  Correct a minor typo.

	  Makefile.in: We use a shell conditional to check whether
	  include/setup.h is available, and run configure if it isn't - better
	  to take advantage of make. build: now depends on include/setup.h,
	  which in turn calls configure.

	  configure.ac, configure: don't use -lresolv and -lnsl if function is
	  natively available.

2003-05-10 16:42  michael

	* modules/descrip.mms:
	  - fixed OpenVMS makefile

2003-05-10 15:57  joshk

	* configure, configure.ac: Look for Solaris linkage stuff in -lnsl
	  and -lresolv.

2003-05-10 04:57  joshk

	* configure, configure.ac, include/setup.h.in: Solaris doesn't even
	  have a u_int32_t, so let's define it to 'unsigned int' if we don't
	  find it.

2003-05-10 01:56  metalrock

	* src/packet.c:
	  - Removed unnecessary assert.

2003-05-10 00:04  michael

	* include/ircd.h, include/modules.h, include/motd.h,
	  modules/m_challenge.c, modules/m_join.c, modules/m_kline.c,
	  modules/m_links.c, modules/m_motd.c, modules/m_oper.c,
	  modules/m_rehash.c, src/channel_mode.c, src/irc_getnameinfo.c,
	  src/ircd.c, src/ircdauth.c, src/modules.c, src/motd.c,
	  src/packet.c, src/s_user.c:
	  - fixed compile warnings
	  - removed unused variables
	  - various style corrections
	  - renamed:
	             InitMessageFile -> init_message_file
	             SendMessageFile -> send_message_file
	             ReadMessageFile -> read_message_file

2003-05-09 22:20  joshk

	* README.FIRST, configure, configure.ac, install-sh,
	  include/irc_getaddrinfo.h, include/irc_getnameinfo.h,
	  include/s_conf.h, include/setup.h.in, include/stdinc.h,
	  src/Makefile.in, src/irc_getaddrinfo.c, src/irc_getnameinfo.c,
	  src/s_conf.c, tools/rsa_respond/Makefile,
	  tools/rsa_respond/respond.c: This patch does a number of rather
	  major things, mostly related to Cygwin porting:

	  configure.ac:
	          o Fix a little typo. doesnt -> doesn't
	          o Enable CYGWIN handling for uname -s check, preliminary.
	          Shared modules will be DISABLED when building on Cygwin.
	          Some other hacks are included to get it to nearly build. A
	          lot of the additional work that had to be done was because of stu's
	          IPv6 changes, support of which is not complete in Cygwin yet and
	          requires a multitude of unofficial patches to even nearly
	          compile.  o Also link against Cygwin libraries for Cygwin.
	  (touches: configure, setup.h.in)

	  adns/internal.h: Winsock2 headers typedef byte, so make sure we
	  don't do it again if we're using those headers.

	  include/stdinc.h: Include some Cygwin headers and not others if
	  we're using Cygwin.

	  src/irc_get{name,addr}info.c: Condense the large include list with
	  #include "stdinc.h".

	  include/irc_getnameinfo.h, src/irc_getnameinfo.c: Move all of those
	  #undefs and #defines to where they belong: the header file.

	  src/s_conf.c, include/s_conf.h: SOCKET_ERROR stomps on Windows's RPC
	  namespace (or vice versa) which is included for us to build with
	  Winsock2.  Sadly, they're not the same values, so we should change
	  the name, to IRCD_SOCKET_ERROR (debatable.)

	  tools/rsa_respond/Makefile: Add *.exe to the clean list.

	  tools/rsa_respond/respond.c: #include <string.h> to silence $CC
	  about implicit declaration of strlen and memcpy.

	  README.FIRST: Cygwin has been broken for a while.

	  install-sh: patched install-sh to fix licensing issues as discussed
	  within Debian

	  Approved by:	stu

2003-05-09 18:19  michael

	* modules/core/m_mode.c:
	  - removed a vchannel leftover

2003-05-09 17:38  bill

	* Makefile.in, contrib/README, contrib/m_clearchan.c,
	  contrib/m_ojoin.c, contrib/m_opme.c, contrib/m_whois.c,
	  doc/convertconf-example.conf, doc/example.conf,
	  doc/example.conf.quick, doc/example.efnet.conf, doc/index.txt,
	  doc/modes.txt, doc/whats-new.txt,
	  doc/technical/Persistent_Clients.txt, include/channel.h,
	  include/client.h, include/config.h, include/config.h.dist,
	  include/numeric.h, include/s_conf.h, include/supported.h,
	  include/vchannel.h, messages/ayb.lang,
	  messages/ircd-croatian.lang, messages/ircd-danish.lang,
	  messages/ircd-dutch.lang, messages/ircd-german.lang,
	  messages/ircd-norwegian.lang, messages/ircd-russian.lang,
	  messages/ircd-spanish.lang, messages/ircd-swedish.lang,
	  modules/.depend, modules/Makefile.in, modules/m_cjoin.c,
	  modules/m_info.c, modules/m_invite.c, modules/m_join.c,
	  modules/m_knock.c, modules/m_list.c, modules/m_lljoin.c,
	  modules/m_names.c, modules/m_topic.c, modules/m_who.c,
	  modules/m_whois.c, modules/core/m_kick.c,
	  modules/core/m_message.c, modules/core/m_mode.c,
	  modules/core/m_part.c, modules/core/m_sjoin.c, src/.depend,
	  src/Makefile.in, src/channel.c, src/channel_mode.c,
	  src/descrip.mms, src/hash.c, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/messages.tab, src/modules.c, src/parse.c,
	  src/s_conf.c, src/s_serv.c, src/send.c, src/vchannel.c:
	  - removed vchans
	    they will remain in a patch (though not necessarily distributed in
	    contrib/) until they are more accepted, and better designed
	  - updated depend files
	  - updated docs
	  - updated makefiles (including descrip.mms)

2003-05-09 17:06  metalrock

	* src/s_conf.c, include/s_conf.h:
	   - The last cvs commit didn't commit the correct files, this is the
	   correct revert.

2003-05-09 16:54  metalrock

	* src/s_conf.c, include/s_conf.h:
	   - Backed out exiting the banned user with the reason from previous
	   commit because we are adding x-lines to verify_access() and the ban
	   client code needs to be rewritten so the user is exited from
	   verify_access if ConfigFileEntry.kline_with_reason is defined and
	   exited elsewhere if ConfigFileEntry.kline_with_reason is not
	   defined.

2003-05-09 15:39  metalrock

	* include/s_conf.h, src/messages.tab, src/s_conf.c:
	   - Changed the kline, gline quit message from *** Banned to the
	   actual reason specified.
	  - Added a BANNED_EXITED case that results in incrementing the server
	   stats but does not exit the client after it has already been exited
	   with the ban reason. (Prevents double exit).
	  - Added a space after the You are banned from this server in
	   ERR_YOUREBANNEDCREEP so the reason shows up properly.  Reviewed by:
	   cryogen Approved by: db, Michael

2003-05-09 01:58  joshk

	* .cvsignore, Makefile.in: Re-add rsa_respond top level Makefile
	  target, and rsa_respond.tar.gz to .cvsignore.

2003-05-08 19:32  metalrock

	* modules/core/m_kick.c:
	  - Cleaned up style in m_kick.c

2003-05-08 19:05  metalrock

	* src/s_serv.c:
	   - Fixed ip leaking when HIDE_SERVER_IPS is defined.
	   - Lets see if my commit log will work this time.

2003-05-08 17:42  joshk

	* configure, configure.ac:
	  - Fix for bustage from before. Not putting --disable-ipv6 back in
	  until we finish arguing about it.

2003-05-08 17:36  metalrock

	* doc/technical/cryptlink.txt, src/s_conf.c: -IRCnet uses
	  unauthorized connection so I guess we will too.  -Testing to see if
	  my commit message goes all over the place.

2003-05-08 16:42  metalrock

	* configure, configure.ac: -Reverted that last configure commit
	  because it broke configure -Removed --disable-ipv6

2003-05-08 16:20  joshk

	* Hybrid-team, Makefile.in, TODO, configure, configure.ac:
	  - Update TODO. sigio = fixed
	  - Typo in configure.ac kind of broke --with-zlib-path.
	  - Condense a case into a single if statement.
	  - Fix the helpstring for openssl.
	  - Add --disable-ipv6 (which really still doesn't work, yet.)
	  - Check for sockaddr_storage in the IPv6 check, this should make
	  sense in the future.

2003-05-08 06:54  michael

	* src/client.c:
	  - replaced a pointless ircsprintf() with strcpy()

2003-05-08 05:39  michael

	* include/s_conf.h, modules/m_accept.c, modules/m_admin.c,
	  modules/m_capab.c, modules/m_locops.c, modules/m_pass.c,
	  modules/m_restart.c, modules/m_stats.c, modules/m_version.c,
	  modules/m_wallops.c, modules/m_whowas.c, modules/core/m_die.c,
	  src/class.c, src/client.c, src/s_conf.c, src/s_user.c:
	  - style corrections

2003-05-08 03:07  michael

	* modules/core/m_kill.c:
	  - fixed serverhiding leak in m_kill.c / style corrections

2003-05-07 23:42  michael

	* include/s_gline.h, modules/m_gline.c, modules/m_kline.c,
	  src/client.c, src/modules.c, src/s_gline.c:
	  - various cleanups

2003-05-07 23:36  metalrock

	* modules/m_cryptlink.c:
	  - Added a check for invalid HOSTLEN hosts in bogus_host() check.

2003-05-07 23:03  lusky

	* RELNOTES:
	  - forced commit to test makesnapshot change

2003-05-07 21:49  metalrock

	* src/channel_mode.c, modules/core/m_sjoin.c: Woops, forgot to
	  accomodate for the hide_servers case in serverhiding

2003-05-07 21:36  joshk

	* configure, configure.ac, contrib/README:
	  - Quick fix for Michael's ./config.status bustage.
	  - 7.0-CURRENT is a misnomer, use 7-CURRENT (7.0 is stable)
	  - Rectify contrib/README to reflect the new location of help.

2003-05-07 21:17  metalrock

	* doc/serverhide.txt, modules/core/m_sjoin.c, src/channel_mode.c,
	  src/client.c: Submitted by: Reviewed by:Diane Approved by:
	  Obtained from: Fixed serverhide so that servers with serverhide
	  enabled will be truly hidden and servers not in serverhide will not
	  be in serverhide mode.

	  Changed serverhide netsplit quit message from me.name *.split to
	  *.net *.split to be consistent with other ircds with serverhiding.

2003-05-07 21:12  joshk

	* .cvsignore, Makefile.in, configure, configure.ac,
	  include/setup.h.in, src/Makefile.in:
	  - configure.ac:
	  	o fix rtsigio by reintroducing USE_SIGIO
	  	o fix make depend: KDEP->MKDEP
	  	o add --enable-clobber; purges *.old in bindir after make
	  	install (affects setup.h.in, configure)

	  - src/Makefile.in: use ${MV} instead of mv for consistency

	  - .cvsignore: being anal. Especially now that configure.ac is in
	  root

	  Reviewed by:	db

2003-05-07 20:55  michael

	* help/: .cvsignore, Makefile.in:
	  - forgot to remove some leftovers

2003-05-07 20:44  michael

	* help/: opers/accept, opers/admin, opers/away, opers/capab,
	  opers/cburst, opers/challenge, opers/cjoin, opers/client,
	  opers/close, opers/cmode, opers/connect, opers/credits,
	  opers/cryptlink, opers/die, opers/dline, opers/dmem, opers/drop,
	  opers/eob, opers/error, opers/gline, opers/help, opers/index,
	  opers/info, opers/invite, opers/ison, opers/join, opers/kick,
	  opers/kill, opers/kline, opers/knock, opers/knockll, opers/links,
	  opers/list, opers/lljoin, opers/llnick, opers/locops,
	  opers/lusers, opers/modlist, opers/modload, opers/modrestart,
	  opers/modunload, opers/motd, opers/names, opers/nburst,
	  opers/nick, opers/notice, opers/oper, opers/operwall, opers/part,
	  opers/pass, opers/ping, opers/pong, opers/post, opers/privmsg,
	  opers/quit, opers/rehash, opers/restart, opers/resv,
	  opers/server, opers/set, opers/sjoin, opers/squit, opers/stats,
	  opers/svinfo, opers/testline, opers/time, opers/topic,
	  opers/trace, opers/uhelp, opers/umode, opers/undline,
	  opers/ungline, opers/unkline, opers/unresv, opers/user,
	  opers/userhost, opers/users, opers/version, opers/wallops,
	  opers/who, opers/whois, opers/whowas, users/index, users/info,
	  users/notice, users/privmsg, users/stats, users/umode:
	  - removed old helpfiles

2003-05-07 19:19  joshk

	* configure, configure.ac, include/setup.h.in:
	  - fix --enable-small-net bustage
	  - stop defining HAVE_* that we don't use
	  - condense a set of two similar conditionals into one
	  - remove double sets of braces around IPv6 test program
	  - remove question marks on the summary output and remove the old
	  "Server is configured with" line and put it in the same format as
	  the rest of the summary

	  Reviewed by: stu

2003-05-07 16:40  stu

	* configure, configure.ac:
	  - fixed configure test for ipv6 that got broke in the last cleanup

2003-05-07 16:19  stu

	* include/s_bsd.h, src/irc_getaddrinfo.c, src/s_auth.c,
	  src/s_bsd.c:
	  - Fixed broken ident lookups.
	  - Moved ipv6 mapping removal stuff to ipv6_remove_mapping()

2003-05-07 15:44  adx

	* TODO:
	  - updated TODO

2003-05-07 14:45  adx

	* src/s_serv.c:
	  - fixed a bug that broke servlink support. The recvq didn't get
	    cleared after injecting.
	  - made start_io calculate how many bytes are really required before
	    allocating the slinkq. This improves the efficiency and optimizes
	    memory usage.

2003-05-07 12:19  michael

	* include/tools.h, src/tools.c:
	  - please no function calls inside dlinkFindDelete()

2003-05-07 04:55  adx

	* src/parse.c:
	  - always mark end of parameters with NULL, not only if there are
	    actually any parameters

2003-05-07 03:34  metalrock

	* Hybrid-team, TODO: Updated my email address and TODO

2003-05-07 03:24  metalrock

	* src/messages.tab: Removed obselete RPL_WHOISADMIN

2003-05-07 03:04  metalrock

	* contrib/disable_identd.diff: Updated disable_identd.diff to work
	  with current source.

2003-05-07 02:22  joshk

	* Hybrid-team, TODO: + Hybrid-team: add me. Thanks Jon and Diane! +
	  TODO: my todo, coordinate fixage of sigio with androsyn as it's
	  currently broken on many machines that fulfill the apparent
	  requirements..

2003-05-06 22:46  michael

	* Makefile.in, contrib/Makefile.in, contrib/m_help.c,
	  doc/example.conf, doc/example.conf.quick, doc/example.efnet.conf,
	  include/s_conf.h, modules/Makefile.in, modules/m_help.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c:
	  - ripped out m_help.c and moved it to contrib/

2003-05-06 20:37  michael

	* src/descrip.mms:
	  - fixed makefile for OpenVMS

2003-05-06 19:02  michael

	* Makefile.in, TODO, configure, configure.ac, install-sh,
	  doc/Makefile.in, help/Makefile.in, include/Makefile.in,
	  include/config.h, include/config.h.dist, messages/Makefile.in,
	  modules/Makefile.in, modules/m_info.c, servlink/Makefile.in,
	  src/Makefile.in, tools/Makefile.in:
	  - renamed configure.in to configure.ac
	  - moved install-sh/configure.ac to base directory
	  - fixed a small typo in configure/configure.ac, reported by
	  MeTaLRoCk
	  - updated TODO
	  - removed an unused define in config.h, and updated config.h.dist
	  - various Makefile cleanups
	  - fixed a compile warning (m_info.c)

2003-05-06 04:51  michael

	* configure, src/Makefile.in:
	  - fix to previous commit
	  - removed autoconf/acconfig.h

2003-05-06 03:26  michael

	* configure:
	  - commited a few corrections to configure/configure.in

	    Submitted by: Joshua Kwan

2003-05-06 01:40  db

	* Makefile.in, configure, include/s_bsd.h, include/setup.h.in,
	  modules/m_info.c, src/Makefile.in, src/irc_getnameinfo.c,
	  src/s_bsd_devpoll.c, src/s_bsd_kqueue.c, src/s_bsd_poll.c,
	  src/s_bsd_select.c, src/s_bsd_sigio.c, tools/Makefile.in:
	  - Completely revamped configure.in - it's a lot smarter now, LOTS of
	  changes, noteably:
	  	o Detection for each of the IO loops and have a default
	  	preference, but easily allow an override by configure switch. Fix
	  	the misleading wording, too!
	  	o Stuff like AC_TRY* has been replaced with modern counterparts
	  	o Some nested library checks have been replaced by a single
	  	AC_SEARCH_LIBS
	  	o Configure output summary at the end
	  	o OS Detection stuff has been condensed (it _should_ work just
	  	as well now..! But I'm not able to test those.)
	  	o [ --disable-blah       ssdfsd ] replaced by
	  	AC_HELP_STRING([--disable-blah], [ssdfsd])
	  	o Rearrange it more sensibly (ie there was a func check in the
	  	middle of *NOWHERE*..) in order of base function checking, debug
	  	options, special server tweaks, and specialized functions/libs.
	  	o Obsoleted acconfig.h by adding templates to each of the
	  	AC_DEFINEs. This may be removed. However, build manager should
	  	run autoheader2.50 on autoconf/configure.in before release.
	  	o Rework the zlib check and make it obvious that it's enabled by
	  	default.
	  	o And SO much more. BTW, the file should be renamed to configure.ac
	  	soon, if autoconf 2.5 is the version of choice. configure.in is
	  	deprecated by that version.

	  - iauth/source/Makefile.in: It compiles now (unused @INCDEP@ broke
	  Makefile), but do we really have use for it?

	  - src/irc_getnameinfo.c, include/s_bsd.h: We correctly define our
	  backup socklen_t in configure, so we don't need to do it here.

	  - modules/m_info.c: Fix a build time warning with a small cast.

	  - src/s_bsd_*.c: Because we intelligently decide which s_bsd_ file
	  to build (see below), and not all of them, don't wrap each file with
	  #ifdef USE_WHATEVER.

	  - src/Makefile.in:
	  	o Intelligently decide which s_bsd file to build based on the
	  	output from configure, don't build them *all*.
	  	o Fix make -j2 by making lex.yy.c depend on y.tab.c (if not
	  	y.tab.h will not be available when lex.yy.c is compiled.)

	  - tools/Makefile.in:
	  	o Don't link unnecessary libs into programs. As a result, define
	  	CRYPT_LIB from configure and IRCD_LIBS declaration is not
	  	necessary.  o Don't build encspeed if OpenSSL is unavailable.

	    -- Joshua Kwan <joshk@triplehelix.org>  Mon, 05 May 2003 17:04:38
	    -0700

	  Reviewed and committed by me (db)

2003-05-04 22:01  michael

	* include/ircd.h, src/version.c.SH:
	  - fixed a few compile warnings.

	    Submitted by: metalrock

2003-05-04 21:52  michael

	* src/version.c.SH:
	  - cvs test

2003-05-04 16:43  db

	* modules/m_stats.c, src/messages.tab:
	  - fixed overflow in stats (spotted by metalrock/jack)

2003-05-04 13:10  adx

	* include/defaults.h:
	  - updated CLIENT_FLOOD_MAX and CLIENT_FLOOD_MIN

2003-05-04 12:59  adx

	* INSTALL, doc/technical/index.txt, doc/technical/linebuf.txt,
	  doc/technical/whats-new-code.txt, messages/README,
	  modules/.depend:
	  - modules -> make depend
	  - removed linebuf and gettext leftovers
	    doc/messages.txt and doc/technical/message-customisation.txt
	    are still out of date..

2003-05-04 12:37  adx

	* include/defaults.h, src/.depend:
	  - make depend
	  - change CLIENT_FLOOD_DEFAULT to 2560

2003-05-04 12:26  adx

	* doc/convertconf-example.conf, doc/example.conf,
	  doc/example.conf.quick, doc/example.efnet.conf, include/client.h,
	  include/config.h, include/dbuf.h, include/linebuf.h,
	  src/Makefile.in, src/client.c, src/dbuf.c, src/ircd.c,
	  src/ircd_parser.y, src/linebuf.c, src/packet.c, src/s_bsd.c,
	  src/s_debug.c, src/s_serv.c:
	  - finally got rid of linebufs
	  - client_flood is now the number of bytes NOT lines we receive
	    from a client before disconnecting. Therefore
	    *** You MUST modify your conf appropriately or your users will
	        keep getting disconnected due to "Excess Flood"
	  - the code needs to be tested a lot, especially with zipped/crypted
	  links

2003-05-04 11:43  michael

	* include/s_conf.h, src/irc_string.c, src/s_conf.c:
	  - fixed a few compile warnings

2003-05-04 09:44  michael

	* contrib/m_force.c:
	  - fixed typo in contrib/m_force.c, reported by Arnvid Karstad
	  <arnvid@karstad.org>

	    NOTE: This should be MFC'd

2003-05-04 08:14  michael

	* src/ircd_parser.y:
	  - small corrections to ircd_parser.y

2003-05-03 11:41  michael

	* modules/core/m_server.c:
	  - style corrections to m_server.c

2003-05-03 09:57  michael

	* include/: channel.h, resv.h:
	  - oops, these things are no longer used.

2003-05-03 09:38  adx

	* modules/: m_help.c, m_knock.c, m_topic.c, core/m_kill.c,
	  core/m_mode.c:
	  - do not send incomplete numerics (like "401  :No such
	  nick/channel")
	  - slight style corrections

2003-05-03 08:14  michael

	* include/channel.h, include/client.h, include/hash.h,
	  include/resv.h, src/hash.c, src/ircd.c, src/resv.c,
	  src/s_debug.c:
	  - slight changes to hash.c to use our new slists
	  - added some RESV statistics to count_memory()

2003-05-03 07:09  michael

	* contrib/README, contrib/m_force.c, contrib/m_jupe.c,
	  contrib/m_ojoin.c, contrib/m_opme.c, modules/m_tb.c,
	  include/modules.h, src/class.c, src/hook.c, src/resv.c,
	  src/s_log.c, src/s_stats.c, src/s_user.c:
	  - various cleanups

2003-05-03 04:33  adx

	* src/s_conf.c:
	  - patch for find_or_add_ip & remove_one_ip. This should solve
	    problems when more clients than it is defined in class{} block can
	    connect to the server.

2003-05-02 16:17  bill

	* contrib/m_whois.c, src/messages.tab:
	  - per Lee's suggestion (and a good one, imo), changed
	    RPL_WHOISACTUALLY to be more parser friendly (user@host and the ip
	  were all in the last parameter)
	  - removed redundant display of user@host from RPL_WHOISACTUALLY

2003-05-02 15:56  bill

	* src/hostmask.c:
	  - ported -stable rehash core fix to -head
	  - fixed memory leak in clear_out_address_conf()

2003-05-02 13:20  michael

	* include/resv.h, modules/m_resv.c, src/resv.c:
	  - redid resv.c to use dlink_list's

2003-05-02 11:44  adx

	* src/s_conf.c:
	  - minor changes to user auth notices

2003-05-02 05:43  adx

	* modules/m_set.c:
	  - fixed compiler error

2003-05-02 05:27  michael

	* contrib/m_clearchan.c, include/client.h, src/s_serv.c:
	  - removed useless FLAGS_CBURST
	  - small cleanup to m_clearchan.c

2003-05-02 04:11  michael

	* src/rsa.c:
	  - rsa.c:generate_challenge - changed `unsigned long ret' to a
	    standard integer type. (ret = RSA_public_encrypt())
	    RSA_public_encrypt returns -1 on error.

2003-05-01 19:28  michael

	* include/s_serv.h, modules/m_set.c, src/s_serv.c:
	  - slight changes to set_autoconn()

2003-05-01 15:42  michael

	* include/s_conf.h, src/s_conf.c, src/s_debug.c:
	  - style corrections in s_conf.c
	  - added two missed parameters to sendto_one(). s_debug.c:send_usage
	  (openvms)
	  - few changes to use more dlink_list_length()'s in count_memory()

2003-05-01 11:53  michael

	* include/channel.h, include/dbuf.h, include/ircd_getopt.h,
	  include/s_conf.h, modules/m_kline.c, modules/m_list.c,
	  modules/m_locops.c, modules/m_operwall.c, modules/m_stats.c,
	  modules/m_wallops.c, servlink/io.c, servlink/io.h, src/channel.c,
	  src/class.c, src/dbuf.c, src/rsa.c, src/s_conf.c,
	  tools/convertilines.c:
	  - more fixes related to -Wwrite-strings

2003-05-01 10:31  michael

	* modules/m_version.c:
	  - fixed a wrong #include in m_version.c

2003-05-01 09:58  michael

	* contrib/m_operspy.c, src/parse.c:
	  - replaced a few strcasecmp()'s with irccmp()'s

2003-05-01 08:21  michael

	* include/channel.h, include/s_conf.h, src/channel_mode.c:
	  - now using the result of
	    dlink_list_length(banlist+exceptlist+invexlist), and compare it
	  against ConfigChannel.max_bans.

2003-04-30 03:20  michael

	* Makefile.in, include/dbuf.h, include/handlers.h, include/parse.h,
	  include/resv.h, include/s_debug.h, src/listener.c:
	  - various cleanups

2003-04-30 00:55  michael

	* configure, include/setup.h.in, include/stdinc.h,
	  modules/m_oper.c, src/s_serv.c:
	  - added configure check for crypt.h

2003-04-29 23:59  michael

	* doc/example.conf, doc/example.conf.quick, doc/example.efnet.conf,
	  include/config.h, include/config.h.dist, include/m_info.h,
	  include/s_conf.h, modules/m_info.c, modules/m_oper.c,
	  modules/m_version.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_conf.c:
	  - removed CRYPT_OPER_PASSWORD from config.h/config.h.dist
	    it's now configurable via ircd.conf

2003-04-27 08:55  adx

	* src/send.c:
	  - this should fix the cores reported by MeTaLRoCk

2003-04-27 08:10  adx

	* src/send.c:
	  - pass bufsize-1 to vsnprintf(), not bufsize-2 (otherwise we'd allow
	    only 509 data bytes + CRLF)

2003-04-27 07:58  adx

	* src/send.c:
	  - backed out last send.c fixes - vsnprintf() already controls line
	    length (send_format has the bufsize parameter which is never greater
	    than IRCD_BUFSIZE and is passed (minus 2 bytes for CR-LF pair) to
	    vsnprintf) The bug is elsewhere (ircd still cores)..

2003-04-26 17:37  db

	* src/send.c:
	  - strictly speaking we should not need this buffer nul terminated,
	    but just in case...

2003-04-26 17:35  db

	* src/send.c:
	  - As pointed out by Jack (metalrock) we need an extra set of \r\n if
	    len is not > 510, since the linebuf code used to pre-add these for
	    us.

2003-04-26 15:20  db

	* src/send.c:
	  - Must always always ensure output send buffer is no larger than 512
	    bytes or it is guaranteed to core something!

2003-04-24 08:54  adx

	* src/send.c:
	  - fixed IO hook code

2003-04-23 15:07  bill

	* src/hostmask.c:
	  - removed username != NULL assert(), apparantely this is supposed to
	  happen

2003-04-23 14:36  adx

	* src/send.c:
	  - fixed bug in send_queued_all

2003-04-23 14:17  adx

	* src/send.c:
	  - reverted to original sendq flushing parameters (4K for servers, 1K
	  for users), my last change was a mistake

2003-04-23 13:40  adx

	* include/s_bsd.h, src/dbuf.c, src/s_auth.c, src/s_bsd.c,
	  src/s_serv.c, src/send.c:
	  - fixed bug in dbuf_put
	  - enabled TCP_NODELAY for all connections
	    (we can control packet sending ourselves)
	  - flush sendq if its >= DBUF_BLOCK_SIZE, not 4096
	    (the former is our MTU)

2003-04-23 11:13  adx

	* src/: s_serv.c, send.c:
	  - fixed possible compiler warnings

2003-04-23 11:10  adx

	* src/s_serv.c:
	  - flush server sendq before switching to encrypted/compressed mode

2003-04-23 11:04  adx

	* include/send.h, src/ircd.c, src/send.c:
	  - keep all outgoing data in sendq and empty it from the main I/O
	    loop, thereby reducing the number of send() calls and removing
	    unnecessary delays in the middle of a multi-line reply. We don't
	    allow sendq to grow too large, though (1K for servers, 4K for
	    others). This is similar to hybrid-6 behaviour when SENDQ_ALWAYS is
	  defined.

2003-04-23 10:25  adx

	* src/send.c:
	  - db's patch for sendto_realops_flags

2003-04-23 10:21  stu

	* configure: Submitted by: Joshua Kwan <joshk@triplehelix.org>

	  - Fix slight error in previous commit s/>/-gt/

2003-04-22 20:22  bill

	* src/hostmask.c:
	  - backed out previous hostmask.c fixes, the problem is elsewhere
	  - added sanity checking to add_conf_by_address(), I suspect we are
	    trying to add an empty aconf

2003-04-22 20:12  stu

	* configure: Submitted by: Joshua Kwan <joshk@triplehelix.org>
	  Reviewed by: me

	  - a bunch of cleanups to the autoconf stuff and a freshly generated
	    configure script to boot

2003-04-22 09:52  stu

	* Hybrid-team, src/listener.c, src/s_bsd.c:
	  - fixes dline/kline non functioning bug on systems that use ipv6
	    mapped ipv4 addresses.  Spotted by Jack.
	  - Moved myself to core in Hybrid-team at the request of db

	  Reviewed by: db

2003-04-22 04:05  adx

	* src/send.c:
	  - fixed core reported by MeTaLRoCk

2003-04-21 18:12  adx

	* include/linebuf.h, src/linebuf.c:
	  - removed unused linebuf functions

2003-04-21 17:11  adx

	* src/send.c:
	  - do not use linebufs in send.c

2003-04-21 09:32  michael

	* src/s_debug.c:
	  - simplified count_memory() a bit

2003-04-21 09:10  michael

	* src/s_debug.c:
	  - fixed broken channelexceptions statistics for 'STATS z'

2003-04-20 18:05  michael

	* src/client.c:
	  - slight changes to check_unknowns_list().

2003-04-20 12:45  adx

	* src/: s_serv.c, send.c:
	  - made ircd use linebufs for recvqs, dbufs for sendqs
	    (started yet in my previous commit)
	    The code isn't perfect and there is still much to do..

2003-04-20 11:14  adx

	* include/client.h, modules/m_stats.c, src/client.c, src/dbuf.c,
	  src/hash.c, src/packet.c, src/s_bsd.c:
	  - oops I put a wrong copyright comment in
	    Spotted by: Michael

2003-04-19 19:43  michael

	* contrib/: m_flags.c, m_whois.c:
	  - fixed a few compile warnings
	    Submitted by: metalrock

2003-04-19 18:18  db

	* src/s_user.c:
	  - No, opers should not be kline exempt automatically. Thats an admin
	    decision not a coder decision.

	    submitted by Jack (metalrock)

2003-04-19 17:33  adx

	* include/dbuf.h:
	  - fixed header file

2003-04-19 13:51  adx

	* Hybrid-team:
	  - moved myself to the core team

2003-04-19 13:45  adx

	* include/dbuf.h, src/Makefile.in, src/dbuf.c, src/ircd.c: Added
	  new dbuf code, rewritten from scratch. This is intended to be used
	  for sending data. Unlike linebuf, this allows sending all queued
	  data in one bunch, thus reducing the number of send() calls (which
	  introduce delays in the middle of an ircd reply etc..) and is also
	  much simplier.

2003-04-19 12:39  michael

	* modules/m_oper.c:
	  - ops, forgot to remove the ms_oper prototype.

2003-04-19 12:28  michael

	* modules/m_oper.c:
	  - removed ms_oper(). OPER should never come from a server or remote

2003-04-19 12:00  michael

	* include/ircd.h, src/channel.c, src/hash.c, src/s_user.c:
	  - also use dlink_list_length for RPL_LUSERCHANNELS

2003-04-19 11:34  michael

	* include/ircd.h, src/s_user.c:
	  - that should fix the unknown connection counter

2003-04-19 08:03  adx

	* include/client.h, include/send.h, src/s_bsd.c, src/s_serv.c,
	  src/send.c:
	  - make ircd try to flush send queue only when a socket is not
	    blocked (otherwise we wait for COMM_SELECT_WRITE before doing
	    anything) Reviewed by:  Michael

2003-04-19 06:47  adx

	* src/client.c:
	  - ok, that should make it work in all cases

2003-04-19 06:44  michael

	* include/s_serv.h, modules/core/m_server.c, src/ircd.c,
	  src/s_serv.c:
	  - removed add_server_to_list(), it was only a dlinkAdd call

2003-04-19 06:21  michael

	* contrib/m_jupe.c, src/s_auth.c, src/s_user.c, src/send.c:
	  - slight changes to use dlinkFindDelete in some places
	  - various style corrections

2003-04-18 19:50  adx

	* src/client.c:
	  - use dlinkAddTail instead of dlinkAdd in dead_link_on_write
	    that should allow exit_aborted_clients deal with a new aborted
	    client yet in the same pass (in most cases..)

2003-04-18 17:48  adx

	* modules/m_list.c, src/class.c, src/event.c, src/hook.c,
	  src/s_auth.c:
	  - removed unnecessary memset()'s
	  - made /stats E look nicer

2003-04-18 17:26  michael

	* src/ircd_parser.y:
	  - removed a redundant 'if(ypass==2)'

2003-04-18 17:03  michael

	* src/ircd_parser.y:
	  - committed cryogen's REHASH fix.

2003-04-18 15:28  michael

	* include/hash.h, include/s_user.h, src/hash.c, src/listener.c,
	  src/s_user.c:
	  - changed show_lusers(), oper_up(), add_to_id_hash_table() to void
	  functions
	  - various style corrections

2003-04-18 08:16  michael

	* modules/m_cryptlink.c:
	  - slight fixes to -Wwrite-strings

2003-04-17 22:13  db

	* contrib/m_clearchan.c, contrib/m_flags.c, contrib/m_force.c,
	  contrib/m_jupe.c, contrib/m_ltrace.c, contrib/m_mkpasswd.c,
	  contrib/m_ojoin.c, contrib/m_operspy.c, contrib/m_opme.c,
	  modules/m_map.c, contrib/m_whois.c, modules/m_tb.c,
	  include/ircd_handler.h, modules/m_accept.c, modules/m_admin.c,
	  modules/m_away.c, modules/m_capab.c, modules/m_cburst.c,
	  modules/m_challenge.c, modules/m_cjoin.c, modules/m_close.c,
	  modules/m_connect.c, modules/m_cryptlink.c, modules/m_dmem.c,
	  modules/m_drop.c, modules/m_eob.c, modules/m_gline.c,
	  modules/m_help.c, modules/m_info.c, modules/m_invite.c,
	  modules/m_ison.c, modules/m_join.c, modules/m_kline.c,
	  modules/m_knock.c, modules/m_links.c, modules/m_list.c,
	  modules/m_lljoin.c, modules/m_llnick.c, modules/m_locops.c,
	  modules/m_lusers.c, modules/m_motd.c, modules/m_nburst.c,
	  modules/m_oper.c, modules/m_operwall.c, modules/m_pass.c,
	  modules/m_ping.c, modules/m_pong.c, modules/m_post.c,
	  modules/m_rehash.c, modules/m_restart.c, modules/m_set.c,
	  modules/m_stats.c, modules/m_svinfo.c, modules/m_testline.c,
	  modules/m_time.c, modules/m_topic.c, modules/m_trace.c,
	  modules/m_unkline.c, modules/m_user.c, modules/m_userhost.c,
	  modules/m_users.c, modules/m_version.c, modules/m_wallops.c,
	  modules/m_who.c, modules/m_whois.c, modules/m_whowas.c,
	  modules/core/m_die.c, modules/core/m_kick.c,
	  modules/core/m_kill.c, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/core/m_nick.c,
	  modules/core/m_part.c, modules/core/m_quit.c,
	  modules/core/m_server.c, modules/core/m_sjoin.c,
	  modules/core/m_squit.c:
	  - Massive commit to add a "DUMMY HANDLER"

2003-04-17 20:01  michael

	* src/send.c:
	  - slight cleanups to send.c
	  - changed _send_linebuf() to a void function

2003-04-17 17:45  db

	* src/s_conf.c:
	  - oops. this one was already fixed in HEAD in client.h
	    backing out this change.

2003-04-17 17:08  db

	* src/s_conf.c:
	  - Fix remote core reported on hybrid list by Unavowed

2003-04-17 07:25  michael

	* src/ircd_parser.y:
	  - fixed style in ircd_parser.y

2003-04-16 21:08  db

	* src/s_user.c:
	  - Ok, I saw a && instead of a || oops

2003-04-16 20:32  db

	* src/s_user.c:
	  -  fix for allowing people exempt from user limits connect to the
	     server.  buglet found by Jack (metalrock) reviewed by me.

2003-04-16 18:37  michael

	* modules/m_restart.c:
	  - checking for MyClient/IsOper in mo_restart should be unecessary

2003-04-16 16:54  michael

	* src/client.c:
	  - style cleanups in client.c

2003-04-16 16:16  michael

	* modules/m_map.c:
	  - '=' not '+='.. spotted by cryogen.

2003-04-16 15:56  michael

	* contrib/m_jupe.c, modules/m_map.c, include/client.h,
	  modules/core/m_server.c, src/client.c, src/ircdauth.c,
	  src/s_serv.c, src/s_user.c:
	  - removed add_client_to_llist(), del_client_from_llist(). reworked
	  to use dlinks

2003-04-16 09:29  michael

	* src/: client.c, s_serv.c, vchannel.c:
	  - cleaned up style in client.c, s_serv.c and vchannel.c

2003-04-16 06:38  michael

	* include/motd.h, include/restart.h, include/s_conf.h,
	  include/vchannel.h, modules/m_admin.c, modules/m_cburst.c,
	  modules/m_gline.c, modules/m_whois.c, src/m_error.c,
	  src/memory.c, src/motd.c, src/restart.c, src/s_conf.c,
	  src/vchannel.c:
	  - more fixes to -Wwrite-strings

2003-04-16 05:46  michael

	* include/list.h, include/tools.h, src/hash.c:
	  - fixed a few compile warnings.

2003-04-16 05:01  michael

	* src/: ircd.c, list.c, parse.c, s_user.c, whowas.c:
	  - cleaned up style in ircd.c, list.c, parse.c and whowas.c

2003-04-15 11:13  michael

	* src/: class.c, dynlink.c, modules.c:
	  - fixed style in class.c, dynlink.c and modules.c

2003-04-15 10:05  adx

	* src/client.c:
	  - restored "*** You have been D-lined" notice removed in my last
	    commit (can't use ERROR message like in listener.c, it is already
	    sent by exit_client)

2003-04-15 09:46  adx

	* src/: client.c, s_conf.c:
	  - miscellaneous cleanups

2003-04-15 09:25  adx

	* modules/m_user.c:
	  - removed unused definition

2003-04-15 06:26  stu

	* src/s_bsd.c:
	  - Fixed a bug whereby ipv4 clients on oses with v6-mapped adresses
	    got the wrong socklen and failed to have a hostname or sockname

	  Reviewed by: db

2003-04-15 05:10  michael

	* src/s_user.c:
	  - cleaned up style in s_user.c

2003-04-14 10:57  db

	* src/channel_mode.c:
	  - Stop ',' character from appearing in a channel key.

	    This one should be MFC'd

2003-04-14 04:41  michael

	* contrib/m_jupe.c, modules/m_accept.c, modules/m_gline.c,
	  modules/core/m_server.c, modules/core/m_sjoin.c, src/channel.c,
	  src/channel_mode.c, src/client.c, src/hook.c, src/ircd.c,
	  src/ircd_parser.y, src/linebuf.c, src/modules.c, src/s_auth.c,
	  src/s_conf.c, src/s_gline.c, src/s_serv.c, src/s_user.c,
	  src/vchannel.c:
	  - inserted the most make_dlink_node()'s directly into
	    dlinkAdd(), just to save some lines of code
	  - fixes to not free/allocate AdminInfo.name in both parsing passes
	  - style corrections

2003-04-14 02:42  michael

	* include/hook.h, modules/m_info.c:
	  - fixed two compile warnings. spotted by MeTaLRoCk.

2003-04-13 18:29  db

	* src/: irc_getnameinfo.c, listener.c, s_conf.c, s_serv.c,
	  s_user.c:
	  - OSX fixes. basically just making sure stuarts new irc_* files are
	    after s_bsd.h so SOCKLEN_T gets defined properly.

2003-04-13 17:34  stu

	* include/irc_getaddrinfo.h, src/irc_getaddrinfo.c,
	  src/ircd_parser.y, src/listener.c, src/match.c, src/s_bsd.c,
	  src/s_conf.c:
	  - freeaddrinfo -> irc_freeaddrinfo - oops. (although in future why
	    not look at the problem and not just disable it eh?)

2003-04-13 13:47  db

	* src/hostmask.c:
	  - I knew something didn't look quite right. Anyway.
	    reviewed by adx, cryogen

	    This should be MFC'd

2003-04-13 09:48  adx

	* contrib/help/opers/join, help/opers/join,
	  contrib/help/opers/list, contrib/help/opers/privmsg,
	  help/opers/list, help/opers/privmsg:
	  - updated help files

2003-04-13 09:06  adx

	* src/class.c:
	  - fixed compile warning

2003-04-13 09:02  adx

	* include/client.h, include/hash.h, include/numeric.h,
	  include/supported.h, modules/m_list.c, src/client.c, src/hash.c,
	  src/messages.tab:
	  - improved LIST command (added various options)
	  - now you can use LIST second time to stop listing
	  - SAFELIST isn't shown in RPL_ISUPPORT for LazyLinks
	  - fixed ERR_WRONGPONG (':' was missing at the beginning)

2003-04-13 06:36  stu

	* configure, include/config.h, include/config.h.dist,
	  include/stdinc.h, include/tools.h, src/ircd.c, src/list.c,
	  src/tools.c:
	  - Fixed configure to work without setup.h
	  - Added SLISTs - These should be used everywhere we have a linked
	    list that isnt a dlink (inside hash tables for example)

	  Reviewed by: db

2003-04-13 05:46  michael

	* include/class.h, include/modules.h, include/s_log.h,
	  include/s_serv.h, include/send.h, modules/m_challenge.c,
	  modules/m_info.c, modules/m_links.c, modules/m_oper.c,
	  modules/m_set.c, modules/core/m_message.c, src/class.c,
	  src/client.c, src/modules.c, src/s_log.c, src/s_misc.c,
	  src/s_serv.c, src/s_user.c, src/send.c:
	  - more fixes to -Wwrite-strings
	  - more style corrections

2003-04-13 01:55  michael

	* configure, include/handlers.h, include/hook.h, include/ircd.h,
	  include/m_info.h, include/modules.h, include/motd.h,
	  include/msg.h, src/event.c, src/hook.c, src/irc_getaddrinfo.c,
	  src/parse.c:
	  - removed unused things
	  - a few fixes to -Wwrite-strings
	  - style corrections

2003-04-12 05:01  michael

	* configure, include/irc_getaddrinfo.h, src/irc_getaddrinfo.c,
	  src/irc_getnameinfo.c, src/ircd_parser.y, src/listener.c,
	  src/match.c, src/s_bsd.c, src/s_conf.c, src/s_serv.c,
	  src/s_user.c:
	  - added irc_getaddrinfo.h header file
	  - updated configure (autoconf 2.57)
	  - fixed the last compile warnings. bleh

2003-04-12 04:12  michael

	* include/irc_getnameinfo.h:
	  - added irc_getnameinfo.h header file

2003-04-12 02:59  michael

	* contrib/m_ltrace.c, contrib/m_ojoin.c, include/s_bsd.h,
	  modules/core/m_nick.c, modules/core/m_sjoin.c,
	  src/irc_getnameinfo.c, src/irc_string.c, src/ircd_parser.y,
	  src/s_bsd.c, src/s_conf.c, src/s_serv.c:
	  - fixed a bunch of compile warnings
	  - style cleanups Submitted by: MeTaLRoCk Reviewed by: me

2003-04-11 16:41  db

	* src/hostmask.c:
	  - This should fix the core in hostmask.c on /rehash
	    The basic problem was, for one, there was no code to ever deal
	    with the first element being removed. (i.e. atable[i])

2003-04-10 10:23  stu

	* modules/: m_kline.c, m_unkline.c:
	  - Added a couple of #ifdef IPV6 checks on ipv6 stuff that were
	    removed.  Spotted by Michael

2003-04-10 05:04  michael

	* configure:
	  - updated configure with autoconf 2.57

2003-04-09 07:19  stu

	* configure, include/client.h, include/fdlist.h,
	  include/hostmask.h, include/ircd_defs.h, include/listener.h,
	  include/m_info.h, include/res.h, include/s_auth.h,
	  include/s_bsd.h, include/s_conf.h, modules/m_kline.c,
	  modules/m_testline.c, modules/m_trace.c, modules/m_unkline.c,
	  modules/m_version.c, src/Makefile.in, src/adns.c, src/hostmask.c,
	  src/irc_getaddrinfo.c, src/irc_getnameinfo.c, src/irc_string.c,
	  src/ircd.c, src/ircd_parser.y, src/listener.c, src/match.c,
	  src/s_auth.c, src/s_bsd.c, src/s_conf.c, src/s_serv.c,
	  src/s_user.c:
	  - removed (enable|disable)-ipv6 configure options.
	  - Added configure test for ipv6 capability.
	  - Replaced all socket code with protocol independant code that will
	    work whether or not the OS has ipv6 support in the kernel.
	  - If IPv6 is added to the kernel shomehow(modprobe ipv6) rehashing
	    ircd will give it v6 support

2003-04-08 05:39  adx

	* include/tools.h:
	  - oops, I forgot to update tools.h as well

2003-04-08 05:30  adx

	* doc/whats-new.txt:
	  - added SAFELIST to RPL_ISUPPORT description

2003-04-08 05:15  adx

	* doc/convertconf-example.conf, doc/example.conf,
	  doc/example.efnet.conf, contrib/help/opers/set, help/opers/set:
	  - gettext cleanup

2003-04-07 10:12  adx

	* include/supported.h:
	  - added SAFELIST to RPL_ISUPPORT

2003-04-07 08:20  adx

	* src/hash.c:
	  - moved sendq_exceeding() test to its correct place

2003-04-06 23:19  db

	* include/hash.h, include/msg.h, modules/m_pong.c, src/hash.c,
	  src/parse.c:
	  - revert the "stop safe /list" on any command. (by popular demand,
	    hey, I'm easy, not cheap)
	    code simple good

2003-04-06 19:37  db

	* modules/m_list.c:
	  - header in comment claimed it was for links not list

2003-04-06 19:27  db

	* src/client.c:
	  - safe_list_all_channels() already prototyped in hash.h (urgh)

2003-04-06 14:24  db

	* include/client.h, include/hash.h, include/msg.h,
	  modules/m_list.c, modules/m_pong.c, src/client.c, src/hash.c,
	  src/parse.c:
	  - First cut at safe /list code
	    Walk the hash tables, suspend /list as needed to reduce sendq to
	    client Stop /list if any command other than PONG is seen from
	  client.

2003-04-06 13:51  adx

	* src/tools.c:
	  - added some asserts to catch invalid dlinkDelete() calls

2003-04-06 04:38  michael

	* include/channel.h, include/s_serv.h, src/s_serv.c:
	  - removed some unused vars/defines

2003-04-05 23:18  db

	* src/sprintf_irc.c:
	  - Fixed yet another stupid typo in comment, again and easy MFC

2003-04-05 23:18  db

	* src/s_bsd_kqueue.c:
	  - Fixed stupid typo in comment

	    This one is an easy MFC

2003-04-05 20:57  db

	* Hybrid-team:
	  - Riedel has new email address

2003-04-05 20:09  db

	* src/s_serv.c:
	  - One lonely missed BadPtr -> EmptyString conversion

2003-04-05 19:37  michael

	* modules/core/m_nick.c, src/send.c:
	  - slight  changes to use  DLINK_FOREACH in  mr_nick() and
	    DLINK_FOREACH_SAVE in send.c:kill_client_ll_serv_butone

2003-04-05 19:07  michael

	* contrib/m_whois.c, include/irc_string.h, modules/m_admin.c,
	  modules/m_list.c, modules/m_names.c, modules/m_pass.c,
	  modules/m_resv.c, modules/m_user.c, modules/m_whois.c,
	  modules/core/m_kick.c, modules/core/m_kill.c,
	  modules/core/m_nick.c, src/channel.c, src/hash.c, src/motd.c,
	  src/parse.c, src/s_conf.c:
	  - replaced all BadPtr()'s with EmptyString()'s and removed
	    the BadPtr macro. unecessary to have two macros with the
	    same function.
	  - few style corrections

2003-04-05 03:45  adx

	* include/client.h:
	  - oops.. IsOperAdmin() and others were testing
	    localClient->oper_flags, which is totally *WRONG* for remote
	  clients.

2003-04-05 00:45  michael

	* contrib/m_jupe.c, contrib/m_whois.c, modules/m_pong.c,
	  modules/m_whois.c, modules/core/m_message.c,
	  modules/core/m_nick.c, src/client.c, src/s_serv.c:
	  - removed a bunch of redundant header includes

2003-04-04 22:32  michael

	* doc/modes.txt:
	  - updated umodes.txt

2003-04-04 21:06  db

	* src/s_auth.c:
	  - stave off a potential double free of reply. Note that this fix
	    relies on MyFree() not trying to free a NULL. *hack*

2003-04-04 20:53  db

	* src/s_auth.c:
	  - Found another untested adns function call.

2003-04-04 20:08  michael

	* include/client.h, include/fdlist.h, include/s_conf.h,
	  modules/m_accept.c, modules/m_kline.c, modules/m_pong.c,
	  modules/m_unkline.c, modules/core/m_kick.c,
	  modules/core/m_message.c, modules/core/m_part.c, src/fileio.c,
	  src/ircd.c, src/list.c, src/listener.c, src/s_auth.c,
	  src/s_conf.c, src/s_gline.c, src/s_serv.c:
	  - removed unused/obsolete code
	  - some style corrections
	  - fix to remove defunct clients from a channel which has been KICK'd

2003-04-04 19:16  db

	* src/adns.c:
	  - its not a void, its an int

2003-04-04 18:22  stu

	* src/s_auth.c:
	  - adns returns > 0 on error, 0 on success or non fatal error.  This
	  fixes cores caused by the previous commit.

2003-04-04 16:03  db

	* include/res.h, src/adns.c, src/s_auth.c:
	  - This fixes a nasty core that can happen when a server is being
	    DoS'ed Basically the return value from adns was never checked.
	    Hence, if we timed it out, the values in the auth struct were NULL.
	  *boom*

	    This must be MFC'ed to STABLE as well.

2003-04-03 18:48  michael

	* contrib/m_clearchan.c, contrib/m_force.c, contrib/m_ojoin.c,
	  contrib/m_operspy.c, contrib/m_opme.c, modules/m_tb.c,
	  include/irc_string.h, src/irc_string.c, src/motd.c:
	  - fixed compile warnings
	  - style corrections
	  - changed a if/else logic in SendMessageFile()

2003-04-03 10:14  adx

	* contrib/m_operspy.c:
	  - fixed compile warning

2003-04-02 09:29  adx

	* include/ircd.h, src/channel.c, src/client.c, src/ircd.c:
	  - making a dlink_list initialized is better than zeroing it at
	  runtime
	  - moved lazylink_channels from client.c to channel.c

2003-04-02 06:44  michael

	* contrib/m_operspy.c, include/channel.h, include/ircd.h,
	  modules/m_list.c, modules/m_names.c, src/channel.c, src/hash.c,
	  src/ircd.c, src/s_debug.c, src/s_serv.c:
	  - we forgot to zeroing the abort and dead dlink list's. fixed.
	  - renamed the GlobalChannelList to global_channel_list

2003-04-02 06:19  michael

	* contrib/m_jupe.c, contrib/m_ltrace.c, contrib/m_operspy.c,
	  contrib/m_whois.c, include/client.h, include/ircd.h,
	  modules/m_names.c, modules/m_restart.c, modules/m_stats.c,
	  modules/m_trace.c, modules/m_who.c, modules/m_whois.c,
	  modules/core/m_die.c, modules/core/m_message.c,
	  modules/core/m_nick.c, modules/core/m_server.c,
	  src/channel_mode.c, src/client.c, src/ircd.c, src/ircdauth.c,
	  src/s_auth.c, src/s_debug.c, src/s_serv.c, src/s_stats.c,
	  src/s_user.c, src/send.c:
	  - renamed GlobalClientList dlink list to global_client_list
	  - renamed lclient_list dlink list to local_client_list

2003-04-02 05:40  michael

	* src/parse.c:
	  - removed an unecessary `return' in cancel_clients()
	  - a few style corrections in parse.c

2003-04-02 00:10  michael

	* src/parse.c:
	  - committed diane's parse.c cleanup

2003-04-02 00:03  michael

	* src/s_serv.c:
	  - fixed another possible 99% cpu problem.
	    pointed out by TimeMr14C

2003-04-01 21:36  michael

	* include/s_user.h, modules/m_challenge.c, modules/m_oper.c:
	  - forgot to remove the redundant oper_up() prototype from
	  m_oper.c/m_challenge.c

2003-04-01 21:12  michael

	* include/s_conf.h, include/s_user.h, src/class.c, src/dynlink.c,
	  src/fdlist.c, src/hash.c, src/ircd.c, src/modules.c,
	  src/s_gline.c, src/s_serv.c, src/s_user.c:
	  - replaced a few strncpy's with strlcpy
	  - added some asserts to hash.c
	  - style cleanups

2003-04-01 12:04  adx

	* src/client.c:
	  - hopefully fixed that nasty "Server doesn't exist" bug
	    (we were removing a client from GlobalClientList even if it wasn't
	    actually there, which corrupted GlobalClientList.tail)

2003-03-31 13:17  michael

	* modules/core/m_squit.c:
	  - oops, why was this here? hopefully the last squit fix

2003-03-31 12:55  michael

	* modules/core/m_squit.c:
	  - so here we go with the new SQUIT module. would
	    be nice if someone could review this.

	    done by: metalrock and me

2003-03-31 11:38  adx

	* doc/simple.conf, src/s_conf.c:
	  - resv{}/quarantine{} uses nick=, not name=
	  - corrected yyerror() so that the same errors are not reported twice

2003-03-31 10:49  adx

	* contrib/m_jupe.c, modules/m_cryptlink.c, modules/m_kline.c,
	  modules/m_pass.c, modules/m_pong.c, modules/m_unkline.c,
	  modules/core/m_part.c, modules/core/m_server.c, src/ircdauth.c,
	  src/numeric.c, src/s_conf.c:
	  - fixed buggy strlcpy()'s (bad size parameters)
	  - make ircd use sizeof with strlcpy() whenever it's possible

2003-03-31 05:33  michael

	* include/client.h:
	  - so here is my `flags' change... added 'operflags' to the LocalUser
	    structure and modified all operflags related macros to use this.

	    modified all 'flags2' related macros to use the 'flags int' and
	    removed 'flags2' from the Client structure.

2003-03-30 23:30  michael

	* contrib/m_clearchan.c, modules/m_links.c, modules/m_list.c,
	  modules/core/m_kick.c:
	  - slight changes to use more of our DLINK_* macros
	  - removed an unused char in m_kick.c

2003-03-30 22:34  michael

	* contrib/m_jupe.c:
	  - oops, broke m_jupe.

2003-03-30 22:26  michael

	* contrib/m_jupe.c:
	  - <MeTaLRoCk> when u jupe a server with a very long reason,
	                the reason overflows the buffer sent to the client
	    -> fixed.

	  - m_jupe.c style corrections.

2003-03-30 20:25  db

	* src/s_bsd.c:
	  - Simplify adx's patch a little more. There is no need to
	    make_client() until after the getpeername() suceeds.

2003-03-30 19:29  michael

	* src/channel_mode.c:
	  - fixed the SM_ERR_RPL_B define I have broken. ARG...

2003-03-30 19:21  michael

	* include/client.h, src/channel_mode.c:
	  - <MeTaLRoCk> if u set a reallly large limit in hyb6
	    <MeTaLRoCk> hyb7 wont take it
	    <MeTaLRoCk> so you have a limit set on a hyb6 server
	    <MeTaLRoCk> and no limit on the hyb7 server

	    Submitted by:	MeTaLRoCk Reviewed by: Dianora, Michael

	  - removed unused last_detach_time from `struct User'

2003-03-30 11:27  adx

	* src/s_bsd.c:
	  - fixed my last commit

2003-03-30 11:16  adx

	* src/s_bsd.c:
	  - a quick patch that should solve the problem with ircd core
	    reported by Dennis Vink (riedel@chaotic.nl)

2003-03-30 09:03  adx

	* src/hostmask.c:
	  - bug in hash_ipv4() was breaking CIDR support with masks <8

2003-03-30 00:59  lusky

	* RELNOTES:
	  - YAYACF

2003-03-30 00:58  lusky

	* RELNOTES:
	  - YAFC

2003-03-30 00:46  lusky

	* RELNOTES:
	  - forced commit to test non-ChangeLog

2003-03-30 00:30  michael

	* contrib/m_whois.c:
	  - fixed a compiletime warning.
	      Submitted by: MeTaLRoCk
	      Reviewed by: me

2003-03-29 23:16  michael

	* include/s_conf.h, src/s_conf.c, src/s_stats.c:
	  - fixed several function parameter/prototypes
	  - removed unused prototypes

2003-03-29 21:34  michael

	* contrib/m_flags.c, contrib/m_operspy.c, include/s_user.h,
	  include/send.h, modules/core/m_nick.c, src/s_user.c, src/send.c:
	  - changed some inttypes. not a good idea to initialise an int with
	  an unsigned int.

	    int setflags = p->umodes(u_int), could be a problem if
	    we reach the maximum of an int with more usermodes.

	  - removed unused time_t LastUsedWallops from send.h
	  - fixed a m_operspy.c compiletime warning.

2003-03-29 15:18  michael

	* Hybrid-team:
	  - moved myself from contributors to the core team. thank you diane.

2003-03-29 14:59  michael

	* modules/m_away.c:
	  - split m_away() into m_away, mo_away and ms_away, also cleaned up
	  some code.

	  Reviewed by:	diane

2003-03-29 12:26  michael

	* README.FIRST, include/config.h, include/config.h.dist,
	  src/ircd.c, src/s_conf.c: removed the last gettext leftovers.

2003-03-29 11:03  michael

	* include/whowas.h, src/whowas.c:
	  - changed the size of name in the Whowas struct to NICKLEN instead
	    of NICKLEN+1, it's not necessary since NICKLEN is already defined
	  with +1.
	  - changed the size arg for that strlcpy in add_history() to use the
	    size of the destination buffer and not the size of the source
	  buffer.
	  - some style corrections in whowas.c

2003-03-29 10:41  adx

	* BUGS: test commit, removed gettext-related entries from BUGS

2003-03-29 10:30  db

	* contrib/m_opme.c:
	  - adx fix to m_opme.c we need to check both the opped list and the
	    voiced_opped list.

2003-03-29 09:25  michael

	* include/s_conf.h, include/s_user.h, modules/m_gline.c,
	  modules/m_kline.c, modules/m_who.c, modules/m_whois.c,
	  modules/core/m_nick.c, src/channel.c, src/s_conf.c, src/s_serv.c,
	  src/s_user.c:
	  - fixed several compiletime warnings
	  - removed unused parameter from do_remote_user(), and apply_tkline()

2003-03-28 23:41  db

	* modules/m_ison.c:
	  - style fixes only.

2003-03-28 21:45  michael

	* src/irc_string.c:
	  - brought strlcat() into sync with the latest official FreeBSD fix.

	    from the FreeBSD changelog:
	    ----
	      Reverse the order of two loop invariant to ensure strlcat() does
	      not attempt to read memory when siz is 0
	    ----

	    PR: 24278 http://www.freebsd.org/cgi/query-pr.cgi?pr=24278

2003-03-28 19:23  michael

	* include/client.h, modules/m_cryptlink.c, modules/core/m_server.c,
	  src/s_serv.c, src/s_user.c, src/scache.c:
	  - removed int hidden_server from struct Client and made
	    serverhidding use flags2.
	  - removed typedef for SCACHE.

2003-03-28 14:18  db

	* modules/m_join.c: fixed two bugs as reported by adx
	  - <adx> whats actually wrong with removing a defunct client which
	    *IS* on a channel from that channel ?
	  - 2nd bug : when you do /join #a,#b,#c,...,0 and there are
	   'too many channels open' ircd doesnt process a join 0 request

	  fixed by adx patch

2003-03-28 06:14  michael

	* src/s_user.c:
	  - fixed possible memory leak in do_local_user()

2003-03-28 03:22  michael

	* messages/ircd-german.lang:
	  - various german language file corrections

2003-03-28 02:10  michael

	* doc/simple.conf: test commit

2003-03-25 19:58  db

	* messages/: Makefile.in, ircd-german.lang:
	  - fixes to messages/Makefile.in to add the russian.lang
	  - fixes to translation for ircd-german.lang

	    Submitted by Michael

2003-03-25 19:24  db

	* messages/ircd-russian.lang:
	  - russian language translation, translated into new .lang format
	    by Michael

	  # ircd-hybrid-7 custom message file for russian use # Ilya Shtift
	  <ishtift@tagil.svrw.ru>, 2003.  # #, fuzzy msgid   "" msgstr  ""
	          "Project-Id-Version: ircd-hybrid-7\n"
	          "POT-Creation-Date: 2003-02-11 00:12+0500\n"
	          "PO-Revision-Date: 2003-02-22 15:03+0500\n"
	          "Last-Translator: Ilya Shtift <ishtift@tagil.svrw.ru>\n"
	          "Language-Team: Russian (Gate@Irc.DalNet.ru)
	          <ishtift@tagil.svrw.ru>\n" "MIME-Version: 1.0\n"
	          "Content-Type: text/plain; charset=koi8-r\n"
	          "Content-Transfer-Encoding: text-plain\n"

2003-03-25 09:38  db

	* Makefile.in, src/ircd_lexer.l, src/numeric.c:
	  - <adx> includes src/numeric.c patch and smaller fixes
	  - <adx> (quarantine{} is in doc/simple.conf instead of a resv{}
	  block)

2003-03-24 20:46  db

	* src/channel_mode.c:
	  - when a user removes a key with a mode after the k, like -kb, then
	   the second parameter will become -b * like if it were removing a
	   key As spotted by Jack, patch by Jack.

2003-03-24 20:17  db

	* Makefile.in, configure, include/config.h, include/config.h.dist,
	  include/defaults.h, include/m_info.h, include/setup.h.in,
	  include/setup.h_vms, include/stdinc.h, messages/Makefile.in,
	  messages/ayb.lang, messages/ayb.po, messages/build_one,
	  messages/create_po, messages/custom.lang, messages/custom.po,
	  messages/ircd-croatian.lang, messages/ircd-danish.lang,
	  messages/ircd-dutch.lang, messages/ircd-german.lang,
	  messages/ircd-norwegian.lang, messages/ircd-spanish.lang,
	  messages/ircd-swedish.lang:
	  - this removes the last gettext leftovers, adds the converted
	    language files(done by adx, last formating type changes by Michael),
	    the configure{.in} update, removal of the oldlanguage stuff and
	    Makefile change to install the *.lang files right now

2003-03-21 15:27  db

	* Makefile.in:
	  - removed messages build, since msgfmt is going away RSN

2003-03-21 13:54  db

	* include/s_gline.h, modules/m_gline.c:
	  - gline cleanups by adx. make sure we don't buffer overflow!

2003-03-21 13:51  db

	* modules/core/m_nick.c:
	  - core/m_nick.c:361: warning: passing arg 5 of
	    check_clean_nick' discards qualifiers from pointer target type
	    Quick fix for now, spotted by both MetalRock and adx

2003-03-21 12:52  db

	* contrib/m_ltrace.c, contrib/m_whois.c, include/client.h,
	  modules/m_oper.c, modules/m_trace.c, modules/m_whois.c,
	  modules/core/m_nick.c, modules/core/m_squit.c, src/client.c,
	  src/s_serv.c: Michaels cleanup for removing next_client
	  next_client_ptr() cruft

2003-03-16 22:14  db

	* src/send.c, include/send.h:
	  - Add a few casts to get rid of some compile warnings.
	    comm_setselect() wants a (PF *) type in fourth argument.
	  - Remove void * as input type to send_queued* its a struct Client *
	    in all cases, so don't lie to me mona.

2003-03-16 21:30  db

	* src/channel_mode.c:
	  - Oops this should have gone with previous patch. The IsMyClient()
	    test needs to go from the invex add_id as well

2003-03-16 21:20  db

	* src/channel_mode.c:
	  - As pointed out by Jack, we didn't restrict the test for duplicated
	    ban/exemption to local clients only in hybrid-6. With the addition
	    of IsMyClient() the ircd will end up repeatedly re-adding
	    bans/exemptions that are already present when net rejoins take
	    place. This is not a good use of bandwidth.

	    Reviewed by me.

2003-03-15 23:42  db

	* src/packet.c:
	  - linebuf_donebuf is already done, thats why the client is marked
	    IsDefunct() leave it #if 0 in for documentation.
	    spotted by adx

2003-03-15 23:38  db

	* src/list.c:
	  - BlockHeapCreate never returns NULL, thats handled internally to
	    this function, so its pointless to also check in list.c
	    Pointed out by adx.

2003-03-15 23:07  db

	* src/messages.tab:
	  - Three args in a fountain err no 3 args for 4 %s is not right.
	    One too many %s in messages for stats o now that one arg is no
	    longer being printed.

	    Spotted by Jack. (Metalrock)

2003-03-11 23:46  db

	* include/listener.h, src/listener.c, src/s_bsd_poll.c:
	  - committed michaels listener changes. Use dlinks instead of the
	    link list built into the listener struct.

2003-03-09 22:12  db

	* modules/m_gline.c:
	  - bad diane. forgot to double check the compile.
	    fixed typo.

2003-03-09 18:15  db

	* include/balloc.h, src/balloc.c, src/channel.c, src/client.c,
	  src/linebuf.c:
	  - adx's block heap garbage collector

2003-03-09 18:09  db

	* modules/m_gline.c:
	  - removed unused parameters passed to invalid_gline()

2003-03-09 18:06  db

	* src/s_user.c:
	  - requested change by Gozem, coded by Jack (metalrock)
	    reviewed by me.

2003-03-06 13:09  db

	* modules/core/m_nick.c: calling check_clean_nick() with last
	  parameter possibly NULL will core server. This can happen when a
	  nickname change is being parsed.  Spotted by adx, based on a posting
	  by Michal Bulik

	  Patch by adx: Reviewed by me:

	  This one should be MFC!

2003-03-05 11:42  db

	* src/s_auth.c:
	  - removed unused message from headermessages
	  - fixed style, function names should begin at leftmost column

2003-03-04 12:09  db

	* src/ircd_parser.y:
	  - As noted by adx himself, ircd_parser.y had the old code for
	    setting locale()

2003-03-02 23:10  db

	* src/s_user.c:
	  - Make the ircd actually use the max_clients entry from ircd.conf
	    instead of max_clients in ircd.conf having no effect whatsoever.

	    submitted by Jack (Metalrock) , reviewed by me

2003-03-02 23:05  db

	* src/ircd_parser.y:
	  - Missing prototype for set_profile() found in missing include
	  numeric.h

2003-03-02 17:33  db

	* include/numeric.h:
	  - Added prototypes for get_locale() and set_locale()

2003-03-02 04:00  bill

	* modules/m_kline.c, src/messages.tab:
	  - removed un-needed failure notices in remote klines
	  - re-worked valid_user_host() and valid_wild_card() to return 1 for
	    valid, 0 for invalid, rather than vice-versa
	  - typo in comment for ERR_CHANOPEN, pointed out by metalrock

2003-03-02 03:06  lusky

	* include/patchlevel.h:
	  - change patchlevel to hybrid-7-CURRENT

2003-03-02 01:46  db

	* include/numeric.h, modules/m_set.c, modules/core/m_message.c,
	  src/ircd.c, src/ircd_parser.y, src/messages.tab, src/numeric.c,
	  src/s_bsd_select.c:
	  - These are adx's locale changes, this gets rid of gettext once and
	    for all.
	  - included were a few numeric changes that have been languishing for
	  months

2003-03-02 00:34  db

	* src/send.c:
	  - Ok, this typo crept in somehow during the revert to rc4 exit code
	    oops. between version 7.223 and 7.224. Ended up in trying to
	    reschedule I/O on the wrong fd, i.e. on the control fd. oops.
	  -  This is not a clean compile due to a prototype, Not sure why
	     we've declared this to take a void * when clearly it should be a
	  struct Client *

	     This one should definitely be MFC to STABLE

2003-03-01 01:25  db

	* src/: fdlist.c, fileio.c:
	  - some style fixes.

2003-03-01 00:07  db

	* include/s_conf.h, src/ircd_parser.y, src/s_conf.c,
	  src/vchannel.c:
	  - cleanups by Michael. "pass" in parser was shadowing variables.
	    bad bad bad Diane. I had forgotten.

	    diff reviewed by me.

2003-03-01 00:01  db

	* Hybrid-team:
	  - added Michael Wobst  to contributers

2003-02-28 20:15  db

	* configure, include/class.h, include/client.h, include/fileio.h,
	  include/hostmask.h, include/irc_string.h, include/list.h,
	  include/resv.h, include/s_conf.h, include/s_gline.h,
	  include/send.h, modules/m_gline.c, modules/m_join.c,
	  modules/m_list.c, modules/m_restart.c, modules/core/m_die.c,
	  modules/core/m_nick.c, modules/core/m_part.c,
	  modules/core/m_quit.c, modules/core/m_sjoin.c, src/channel.c,
	  src/channel_mode.c, src/client.c, src/fileio.c, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/list.c, src/modules.c,
	  src/s_auth.c, src/s_conf.c, src/s_debug.c, src/s_gline.c,
	  src/s_serv.c, src/s_user.c, src/send.c:
	  - Bunch of cleanups submitted by Michael, reviewed by me.

2003-02-26 17:58  bill

	* src/channel_mode.c:
	  - swapped params for ERR_USERNOTINCHANNEL to conform to RFC, pointed
	  out by Lee

2003-02-26 17:40  bill

	* modules/m_gline.c, modules/m_stats.c, src/event.c, src/s_debug.c,
	  src/s_stats.c:
	  - all stats replies using RPL_STATSDEBUG are now prefixed with their
	  stats char
	  - made gline 'is requesting' notice always come before 'has
	  triggered' notice
	  - made show_events() use RPL_STATSDEBUG, rather than NOTICE

2003-02-26 00:32  db

	* include/s_conf.h:
	  - typo spotted by Michael |= not | ... oops

2003-02-25 18:46  bill

	* contrib/m_operspy.c:
	  - added % char to each hidden channel with operspy whois
	  - use user->channel.head for who_global()

2003-02-24 17:50  db

	* contrib/m_jupe.c:
	  - fixed a typo

2003-02-23 23:36  db

	* contrib/m_jupe.c:
	  - forgot to remove the obsolete call

2003-02-23 14:10  db

	* src/ircd_parser.y:
	  - fixed memory leak

2003-02-22 23:16  db

	* contrib/m_jupe.c, contrib/m_ltrace.c, contrib/m_operspy.c,
	  contrib/m_whois.c, include/channel.h, include/channel_mode.h,
	  include/client.h, include/ircd.h, include/s_conf.h,
	  include/s_serv.h, modules/m_list.c, modules/m_names.c,
	  modules/m_oper.c, modules/m_pong.c, modules/m_trace.c,
	  modules/m_who.c, modules/m_whois.c, modules/core/m_message.c,
	  modules/core/m_nick.c, modules/core/m_server.c,
	  modules/core/m_sjoin.c, modules/core/m_squit.c, src/channel.c,
	  src/channel_mode.c, src/class.c, src/client.c, src/hash.c,
	  src/hostmask.c, src/ircd.c, src/ircd_parser.y, src/kdparse.c,
	  src/messages.tab, src/rsa.c, src/s_auth.c, src/s_conf.c,
	  src/s_debug.c, src/s_serv.c, src/s_user.c:
	  - various cleanups including removal of direct use of FLAGS2 and
	  FLAGS
	  - rework to use dlinks more in code

2003-02-21 16:15  wiz

	* modules/core/m_message.c:
	  - Some dumb clients notice themself before sending JOIN commands to
	    the server, and excess flood off. Added an exempt to ending the
	    flood gracemode to m_message if source_p == target_p.

2003-02-20 18:55  bill

	* src/client.c: Reviewed by:db
	  - get_client_name() would only return client->name for remote
	  clients.  fixed.

2003-02-19 08:22  db

	* src/s_conf.c:
	  - Michaels patch for s_conf.c oops

2003-02-19 05:36  a1kmm

	* src/s_serv.c: Branch: HEAD

	  - Fixed the autoconnect logic not to core, removing a
	    lot of historical junk that doesn't fit with the
	    current structures and event model.

2003-02-19 04:51  a1kmm

	* src/s_conf.c, include/class.h: Branch: HEAD

	  - Fixed a missing include in include/class.h
	  - Fixed a bug that caused a core when there were gecos blocks.

2003-02-19 01:14  lusky

	* HOWTO-CVS:
	  - forced commit to test that serno.h still works on HEAD

2003-02-18 17:26  db

	* include/class.h, include/s_conf.h, modules/m_gline.c,
	  modules/m_kline.c, modules/m_stats.c, modules/m_trace.c,
	  modules/core/m_server.c, src/class.c, src/client.c, src/fileio.c,
	  src/ircd_parser.y, src/kdparse.c, src/s_conf.c, src/s_debug.c,
	  src/s_serv.c, src/s_user.c:
	  - This is the config file tidy ups/class.c tidyups

2003-02-18 00:45  jmallett

	* HOWTO-CVS: Forced commit.

2003-02-17 21:11  lusky

	* Hybrid-team: Another test to head

2003-02-17 21:08  lusky

	* Hybrid-team: Test commit

2003-02-17 17:15  db

	* include/client.h:
	  - bug pointed out by Michael, fixed in CURRENT

2003-02-17 11:09  db

	* contrib/m_clearchan.c, contrib/m_flags.c, contrib/m_jupe.c,
	  contrib/m_opme.c, contrib/spy_admin_notice.c,
	  contrib/spy_info_notice.c, contrib/spy_links_notice.c,
	  contrib/spy_motd_notice.c, contrib/spy_stats_notice.c,
	  contrib/spy_stats_p_notice.c, contrib/spy_trace_notice.c,
	  contrib/spy_whois_notice.c, include/client.h, include/s_conf.h,
	  modules/m_cburst.c, modules/m_challenge.c, modules/m_connect.c,
	  modules/m_cryptlink.c, modules/m_drop.c, modules/m_eob.c,
	  modules/m_gline.c, modules/m_join.c, modules/m_kline.c,
	  modules/m_lljoin.c, modules/m_llnick.c, modules/m_locops.c,
	  modules/m_nburst.c, modules/m_oper.c, modules/m_operwall.c,
	  modules/m_pong.c, modules/m_post.c, modules/m_rehash.c,
	  modules/m_resv.c, modules/m_set.c, modules/m_svinfo.c,
	  modules/m_unkline.c, modules/m_user.c, modules/m_wallops.c,
	  modules/core/m_kill.c, modules/core/m_message.c,
	  modules/core/m_nick.c, modules/core/m_server.c,
	  modules/core/m_sjoin.c, modules/core/m_squit.c, src/channel.c,
	  src/channel_mode.c, src/client.c, src/dynlink.c, src/hash.c,
	  src/ircd.c, src/ircd_parser.y, src/ircdauth.c, src/list.c,
	  src/listener.c, src/m_error.c, src/modules.c, src/parse.c,
	  src/restart.c, src/s_auth.c, src/s_bsd.c, src/s_conf.c,
	  src/s_serv.c, src/s_user.c, src/send.c:
	  - umode changes should be using UMODE_ not FLAGS_

2003-02-16 23:48  jmallett

	* HOWTO-CVS: Forced commit to HOWTO-CVS to make sure CVSROOT has
	  recovered from the naughty commit messages to fake modules earlier.

2003-02-16 23:21  jmallett

	* HOWTO-CVS: Add a document describing how to work with the CVS
	  branches.

2003-02-16 17:54  db

	* include/client.h, src/client.c, src/packet.c, src/s_user.c,
	  src/send.c:
	  - linebuf_donebuf() should be called for every local client.
	  - tidied up other code.

2003-02-16 17:06  bill

	* contrib/m_whois.c, src/s_conf.c:
	  - ERR_NOSUCHNICK and RPL_ENDOFWHOIS were reversed in
	  contrib/m_whois.c
	  - fixed slight logic error in remove_one_ip()

2003-02-16 16:22  lusky

	* src/ircd.c:
	  - call close_all_connections() before init_netio() otherwise we
	    break kqueue

2003-02-15 19:40  db

	* RELNOTES:
	  - just noted iphash changes

2003-02-15 19:22  db

	* include/s_conf.h, src/ircd.c, src/s_conf.c:
	  - init_ip_hash_table() was a better name than clear_ip_hash_table()
	  - removed typedef for IPHASH (obsfuscation)
	  - redid memory allocation to use block heap
	  - changed > to >= for comparision to throttle time, it was possible
	    for a compare to fail and leave 0 count ip_entry(s) in the hash.
	  - N.B. subtle bug fixed by this commit.. When the ip hash table was
	    purely used to count number of clients on an IP, there could never
	    be more than MAXCONNECTIONS ip_entry(s), Once ip throttling was
	    added, it is possible to have ip_entry(s) in use that have 0 clients
	    on them, i.e. they are "remembering" an ip was recently used. This
	    means it was possible (though unlikely) for all ip_entry(s) to be
	    used thus panic'ing the server.  This could affect a smaller server
	  more easily.

	  Reviewed by lusky, juli

2003-02-15 11:32  lusky

	* RELNOTES, configure, include/ircd_defs.h, include/setup.h.in,
	  include/setup.h_vms, src/client.c, src/s_bsd.c, src/s_log.c,
	  src/s_serv.c:
	  - fixed handling of file descriptors 0 through 3
	  - remove unused var in client.c
	  - updated RELNOTES

	  Reviewed by:	db

2003-02-14 18:01  db

	* include/client.h, include/send.h, modules/m_capab.c,
	  modules/m_cryptlink.c, modules/m_motd.c, modules/m_post.c,
	  modules/m_svinfo.c, modules/core/m_kill.c, modules/core/m_nick.c,
	  modules/core/m_quit.c, modules/core/m_server.c,
	  modules/core/m_squit.c, src/client.c, src/ircd.c, src/m_error.c,
	  src/packet.c, src/parse.c, src/s_bsd.c, src/s_conf.c,
	  src/s_serv.c, src/s_user.c, src/send.c:
	  - massive revert to rc4 exit_client code. This has been tested
	    extensively.

2003-02-11 21:09  db

	* src/: s_serv.c, send.c:
	  - style fix in s_serv.c
	  - fix potential linebuf leak in send.c

2003-02-10 19:15  db

	* contrib/m_whois.c:
	  - Missing not found numeric fixed

2003-02-08 19:02  bill

	* modules/m_whois.c:
	  - send RPL_ENDOFWHOIS numeric even if we send ERR_NOSUCHNICK
	    reported by BlackJac

2003-02-08 17:50  db

	* src/client.c:
	  - found by scuzzy and cryogen. A client already exiting shouldn't be
	    killed by kline.

2003-02-07 02:17  a1kmm

	* tools/encspeed.c:
	  - Remove a warning caused by a missing const, needed by newer
	  OpenSSL versions.

2003-02-07 02:09  a1kmm

	* src/client.c, src/send.c, modules/core/m_nick.c, include/send.h:
	  - Don't send QUIT back to a user on exit.
	  - Changed a IsClosing to IsDead so users so ERROR :Closing Link:
	    when they are exited.

2003-02-06 05:53  a1kmm

	* modules/m_capab.c:
	  - *nitpick* fix a comment on m_capab.c that says it is m_away.c
	    (Reported by MetalRock).

2003-02-06 05:12  a1kmm

	* src/channel_mode.c:
	  - Fixed a desync bug with chm_key when removing keys, thanks to
	    MetalRock for reporting this bug.

2003-02-06 04:57  a1kmm

	* src/client.c: <TimeMr14C> Andrew: in the new exit_client
	  close_connection is called twice.  Fixed.

2003-02-06 03:45  a1kmm

	* src/s_user.c, src/send.c, src/tools.c, src/s_bsd.c, src/s_conf.c,
	  src/s_serv.c, src/client.c, src/m_error.c, src/packet.c,
	  src/parse.c, src/channel.c, src/channel_mode.c,
	  modules/core/m_quit.c, modules/core/m_server.c,
	  modules/core/m_squit.c, modules/core/m_kill.c,
	  modules/core/m_nick.c, modules/core/m_part.c, modules/m_capab.c,
	  modules/m_close.c, modules/m_cryptlink.c, modules/m_motd.c,
	  modules/m_post.c, modules/m_svinfo.c, include/ircd.h,
	  include/send.h, include/client.h, include/config.h:
	  - Changed the dead list into a closing list. exit_client is never
	    called from during the parse loop, but it is deferred until after
	  that.
	  - A minor optimisation in dlinkAdd that was bothering me.

2003-02-04 00:30  db

	* include/client.h, src/client.c, src/ircd.c, src/ircdauth.c,
	  src/s_serv.c, src/s_user.c:
	  - make lclient_node part of localClient part. This is a simple
	    optimisation. I also cleaned up style
	  - Removed a trivial function that is faster to do with
	    dlinkFindDelete() it was originally kept there to be able to match
	    up with obsolete hybrid-6 code, its long outlived its usefulness for
	  that. (remove_server_from_list)

2003-02-03 23:24  db

	* modules/core/m_part.c:
	  - take user off channel before sending channel PART message, else
	    user see's PART message twice.

2003-02-03 00:25  bill

	* modules/core/m_message.c, src/client.c, src/s_user.c, src/send.c:
	  Submitted by: Reviewed by: Approved by: Obtained from:
	  - reverted get_client_name() format to %s[%s@%s]
	  - changed possible flooder notices to use get_client_name()

	     note: the only notice left with the %s [%s@%s] format is the nick
	           change notice, which should also eventually be changed to use
	  get_client_name()

2003-02-03 00:08  db

	* src/: client.c, send.c:
	  - oops. the move of the SetDead() in client.c exit_client()
	    was the real culprit of the double send of ERROR followed by the
	    QUIT old code (from hybrid-6 as well btw) set client dead before
	    sending message to channel about QUIT, hence client never saw the
	  double message.

2003-02-02 23:33  db

	* include/tools.h, src/tools.c:
	  - fix dlinkFindDelete() for now
	    easier to do it this way, then look at the code. code re-use!

2003-02-02 15:47  db

	* src/: channel.c, client.c:
	  - dlinkFindDelete() has been in tools.c a long time, I've just
	    hesitated to change working code. Oh well. It is faster.

2003-02-02 15:45  db

	* src/send.c:
	  - sending a linebuf to a client thats dead or closing is not a good
	    idea at least, if its not an error message or "you are dead"

2003-02-01 15:12  db

	* modules/core/m_kick.c:
	  - same as m_join.c its bad practice to remove a client quitting

2003-02-01 15:11  db

	* modules/m_join.c:
	  - Even with an abort list, its still bad practice to try and remove
	    a client thats quitting !

2003-02-01 14:13  db

	* src/send.c:
	  - don't send to defunct clients in a list

2003-01-31 22:55  db

	* src/: client.c, send.c:
	  - this simply removes some redundant code from send.c

2003-01-31 18:00  db

	* include/channel.h, include/client.h, modules/m_join.c,
	  modules/core/m_kick.c, modules/core/m_part.c, src/channel.c,
	  src/client.c:
	  - While I agree with andrews ideas and he did a good job of finding
	    this one, the fix to m_kick.c was a little extreme. I think this
	    should take care of it.
	    I've added a temporary IsExited() flag. We really don't need it
	    but for debugging it could be handy.

2003-01-31 08:17  a1kmm

	* src/channel.c, modules/core/m_kick.c, modules/core/m_part.c,
	  include/channel.h:
	  - Move part_one_client to channel.c
	  - Convert kicks of yourself to parts. This is the simplest way to
	    stop big problems if a user kicks themselves and then exits during
	    the kick.  Users should be using PART anyway to leave the channel,
	    so this has a nice side-effect of sending the right message. If it
	    is discovered that this is breaking clients it may need to be
	  redesigned.

2003-01-31 07:53  a1kmm

	* src/channel.c, modules/core/m_part.c, include/channel.h:
	  - Kludge around the fact that a channel can be destroyed after
	    remove_user_from_channel is called, by incrementing users
	    artificially, and calling sub1_from_channel manually later.
	    - This would be less of a kludge if we rename users to
	      refcount or something(TODO).
	  - In order not to break vchans, I had to set the vchan ID when the
	    users count is 2 or less, instead of the normal 1. This is an awful
	    kludge, and we need a better way to do it.

2003-01-31 07:15  a1kmm

	* src/s_bsd.c, src/send.c, src/channel.c, src/client.c,
	  modules/core/m_part.c:
	  - Fixed another exit_client() type bug:
	    - A client is closing after exit_client() has started.
	    - A client is dead only after exit_client() has completed.
	    - Before changing any lists, you must check if a client is dead.
	    - Only exit_client() should ever SetDead() or SetClosing().

2003-01-30 05:28  a1kmm

	* src/.depend, src/fileio.c, src/listener.c, modules/.depend:
	  - Fixed a harmless uninitialised memory bug, to stop "false" alarm
	    in valgrind.
	  - Fixed a fd_close() that should have been a close() when the system
	    runs out of fds(reported by Metalrock).

2003-01-30 02:28  lusky

	* include/client.h:
	  - fix missing \ on line 501 so it'll compile

2003-01-28 16:04  db

	* include/client.h, src/list.c, src/parse.c:
	  - cleanup to style in list.c
	  - make sure a client marked as Killed is not parsed

2003-01-28 00:28  db

	* src/send.c:
	  - don't send to a dead client.

2003-01-27 16:01  lusky

	* Hybrid-team:
	  - fixed cryogen's entry in Hybrid-team

2003-01-26 23:42  lusky

	* include/patchlevel.h:
	  - rev patchlevel to -7rc8

2003-01-26 16:12  lusky

	* contrib/m_whois.c, modules/m_whois.c:
	  - whois idle display logic fix from lee

2003-01-25 18:43  lusky

	* RELNOTES, src/s_serv.c:
	  - set TCPNODELAY before sending SERVER during handshake to make sure
	    zipped data doesn't get slammed into the same packet

2003-01-25 17:42  lusky

	* tools/rsa_respond/: Makefile, respond.c:
	  - check for getpass() failure so it doesn't core when called
	    incorrectly from old ircII
	  - add INCLUDES and LDFLAGS to Makefile to make it simpler to build
	    for those of us without system-installed OpenSSL

2003-01-25 00:00  lusky

	* src/restart.c:
	  - unused var in restart

2003-01-24 22:59  lusky

	* RELNOTES:
	  - Updated RELNOTES for rc8

2003-01-24 22:41  lusky

	* contrib/README, contrib/m_whois.c, modules/m_whois.c:
	  - fix for contrib/m_whois core
	  - fix for modules/m_whois bogusly showing idle time for non-local
	  clients
	  - reiterate in contrib/README that contrib modules may crash

	  Submitted by:	db Reviewed by:	jrl

2003-01-24 20:52  lusky

	* BUGS, src/packet.c:
	  - mention gettext not working on Solaris 8
	  - removed null byte check which was choking on zipped links

2003-01-24 02:01  lusky

	* include/ircd.h, modules/core/m_die.c, src/ircd.c, src/restart.c:
	  - fixed a race condition with /restart and check_pidfile.  We now
	    unlink the pidfile on /die and /restart, and don't complain if the
	    file doesn't exist when starting.

	  Submitted by:	lusky

2003-01-22 23:24  db

	* modules/m_invite.c:
	  - bah. This is tricky to get right. but you cannot "broadcast" an
	    invite to hybrid-6 (presumbably csircd etc.) servers without them
	    getting upset about ghosted nick. oops. We reviewed and reviewed and
	    tested... but anyway. So, use CAP_PARA to not send the broadcast to
	    non CAP_PARA servers.  Note, the only easy clean way of not ending
	    up with a double invite notice to a target, is to paramertise the
	    INVITE notice. INVITE notice now has four parameters if its just a
	    notice of an invite. The normal three parameters is used in all
	    other cases. So, in cases of -p, only the three parameter version is
	  used.

2003-01-21 22:29  bill

	* modules/m_invite.c:
	  - invites from a local user to a local user were propogated, fixed.

2003-01-21 10:42  lusky

	* include/patchlevel.h:
	  - revved patchlevel to 7rc7

2003-01-21 09:26  db

	* src/modules.c:
	  - fixed leak found by Michael

2003-01-21 01:13  db

	* modules/m_post.c:
	  - put/get was missing in the init code, so put/get would never
	  trigger exit

2003-01-20 07:44  db

	* include/client.h:
	  - fix prototype, no code change.

2003-01-19 18:38  db

	* BUGS:
	  - solaris is broken for more than 256 fds when using cryptlinks

2003-01-19 14:02  db

	* src/client.c:
	  - if client is exiting don't do anything in dead_link_on_read() its
	    already dying/dead

2003-01-19 08:25  db

	* src/s_serv.c:
	  - called dead_link_on_write() with only one parameter.

2003-01-19 08:19  db

	* include/client.h, include/s_bsd.h, src/client.c, src/packet.c,
	  src/s_bsd.c, src/s_conf.c, src/s_serv.c, src/send.c:
	  - renamed dead_link() to dead_link_on_write()
	    renamed error_exit_client() to dead_link_on_read()
	  - added errno to dead_link_on_write() not used yet

	    These two functions should be rationalised a bit more still...
	  - fixed some style

	    The notable bug here was.. when a client is exited via read, it has
	  to be marked Dead as we did in dead_link(). Otherwise we can try to
	  send to it. It really didn't cause major problems but it was
	  potentially one.

2003-01-17 20:02  db

	* contrib/m_whois.c:
	  - updated contrib m_whois.c from jack.. with style corrections

2003-01-17 08:06  db

	* RELNOTES:
	  - RELNOTES comment about +pi channels was slightly wrong

2003-01-17 08:00  db

	* modules/m_stats.c, modules/m_whois.c, modules/m_whowas.c,
	  src/balloc.c, src/channel.c, src/client.c, src/packet.c,
	  src/s_stats.c, src/vchannel.c:
	  - committed cleanups from michael

2003-01-17 02:55  db

	* src/client.c:
	  - please for not be fd using instead of IsDead

2003-01-17 00:21  db

	* include/: config.h, config.h.dist:
	  - updated config.h/config.h.dist as per jack

2003-01-17 00:11  db

	* modules/m_list.c:
	  - ick, I should compile with -Wall more often. Getting lazy
	    with Rodder normally running them. Missing return value in an int
	    returning function.

2003-01-16 23:19  db

	* RELNOTES:
	  - whoops forgot to update RELNOTES

2003-01-16 23:18  db

	* include/channel.h, src/channel.c, src/ircd.c:
	  - vchans fix contributed by michael

2003-01-16 22:57  db

	* RELNOTES, modules/m_help.c:
	  - fixed fd leak in m_help.c this has been here for a while...

2003-01-16 22:15  db

	* RELNOTES, src/s_conf.c:
	  - fixed bogus logging

2003-01-16 21:58  db

	* RELNOTES, doc/example.conf.quick, modules/core/m_message.c:
	  - oopsies. old traditional behaviour was to allow non-opers to
	    send userhost@server privmsgs. dalnet used nick... probably
	    should add an ifdef if we want to change it

2003-01-16 20:09  db

	* modules/m_lljoin.c:
	  - removed double include of hash.h

2003-01-16 19:01  db

	* RELNOTES:
	  - updated RELNOTES

2003-01-16 18:54  db

	* modules/m_who.c:
	  - removed silly #ifdef. this meant serverhiding would only work on
	    who if ANONOPS was defined. why? spotted by Michael

2003-01-16 18:13  db

	* src/client.c:
	  - another bug fix from Michael missing return(0); instead of return;
	    in exit_client()

2003-01-16 18:10  db

	* RELNOTES, src/messages.tab, src/s_conf.c: Two quick bug fixes
	  passed on by michael <michael@phat-net.de>

	  - fakename in aconf could leak, fixed.
	  - missing : in messages.tab numeric 513 ERR_WRONGPONG

2003-01-16 13:56  db

	* RELNOTES, modules/core/m_message.c:
	  - allow non opers to message nick@server, "opers" is reserved for
	    opers only I thought bill did this already, but my email is =still=
	  out. sorry.

2003-01-16 07:25  db

	* Hybrid-team, RELNOTES:
	  - added cryogen (Stuart Walsh) to contributors list. He has helped
	    considerably with testing.
	  - added note about fix to broken ip limiting to RELNOTES

2003-01-15 23:08  db

	* src/: ircd.c, ircd_signal.c:
	  - zombies should be caught with a SIGCHLD handler.

2003-01-15 22:28  db

	* include/s_conf.h, src/ircd.c, src/s_conf.c:
	  - remove the expiration code. Having this destroys the code checking
	    for too many clients on one IP.

2003-01-13 11:35  db

	* Hybrid-team, src/client.c:
	  - added Yusuf Iskenderaglu to contributors

2003-01-10 22:52  db

	* include/client.h, src/channel_mode.c, src/client.c, src/packet.c,
	  src/parse.c, src/s_bsd.c, src/s_serv.c, src/s_user.c, src/send.c:
	  - Even more cleanups of the exit code, but this gets rid of the
	    abort_list.

2003-01-10 15:22  db

	* modules/m_invite.c:
	  - correct my tired code, after some code review work .

2003-01-10 11:00  db

	* modules/m_invite.c:
	  - be consistent!

2003-01-10 00:11  db

	* RELNOTES, modules/m_invite.c, src/send.c:
	  - m_invite failed to send an invite if the channel was +p to
	    all servers that needed the invite, hence invites were blocked
	    in some cases. Always send an invite, send a NOTICE to channel
	    about the invite to servers that do NO support CAP_PARA
	    It can be finessed later. I'm tired.

2003-01-09 22:47  db

	* RELNOTES, modules/core/m_server.c:
	  - squit the uplink as hybrid-6 does, not the source if
	    a server introduces a leaf or wrong masked server. This seriously
	    breaks things!

2003-01-09 03:04  db

	* src/client.c:
	  - d'uh return 0; from a void function. fixed

2003-01-09 02:48  db

	* RELNOTES, src/s_conf.c:
	  - fixed broken throttling code. There was a decrement that should
	    not have been there. all fixed. tested.

2003-01-09 01:20  db

	* modules/m_wallops.c:
	  - trivial change to remove a duplicate #include "client.h"

2003-01-09 01:15  db

	* RELNOTES, include/client.h, src/channel.c, src/channel_mode.c,
	  src/client.c, src/ircdauth.c, src/packet.c, src/parse.c,
	  src/s_bsd.c, src/s_serv.c, src/s_user.c, src/send.c:
	  - rationalised the exit_client code.
	    IsClosing() is used to keep clients from being added to the
	    abort_list twice IsDead() is now used to keep clients from being
	    added to the dead_list twice IsDefunct() is used to check whether a
	    client is dying ie.  IsClosing() || IsDead()
	    exit_client() is no longer called in some cases if a client/server
	    is already IsDefunct().
	    This removes the possibility of a double free of a client and
	    removes the possibility of accessing memory after it has been
	  freed.
	  - Also removed a "bare" access to FLAGS_IPHASH

2002-12-29 16:42  gregp

	* contrib/challenge.irc:
	  - ahem, actually add challenge.irc

2002-12-29 16:42  gregp

	* tools/rsa_respond/respond.c:
	  - added challenge.irc to contrib/, compliments of BlackJac@EFNet
	    script for EPIC (and apparently BitchX too) to support opering via
	    /challenge
	  - cosmetic change in respond.c, don't append a \n to stuff we puts()

2002-12-28 02:02  bill

	* modules/m_gline.c:
	  - removed duplicated DupString() call, pointed out by Michael W.

2002-12-20 23:40  lusky

	* include/patchlevel.h: revved patchlevel to rc6

2002-12-19 00:58  db

	* Hybrid-team:
	  - Jack Low. so there.

2002-12-18 22:51  db

	* Hybrid-team, RELNOTES, src/channel_mode.c:
	  - fixed a very nasty buffer overflow in ban handling.
	    ban strings cannot be longer than MODEBUFLEN (200 chars)
	    this fix to channel_mode.c ensures this happens.
	  - updated RELNOTES to note this change
	  - added MetalRock to the team listing, he's done more than a lot of
	    folk at helping us find bugs.

2002-12-18 12:03  bill

	* RELNOTES:
	  - finished updating RELNOTES in preparation for rc6

2002-12-18 00:33  db

	* modules/m_tb.c:
	  - committed metalrocks change

2002-12-17 23:44  db

	* src/client.c:
	  - removed a redundant free_client(), this was placed just before
	    exit_one_client() which caused localClient part to go to NULL.
	    This confused MyConnect() etc. so clients were not being removed
	    from channel lists properly. The free_client() call is being
	    called after exit_client() anyway.
	  - tidied up a bit the formatting in one place...

2002-12-16 17:43  db

	* src/packet.c:
	  - I have a sneaking suspicion the file descriptor is still on the
	    poll/select etc. list... this should be dug into further.. In any
	    case its better to be a bit defensive about poking at a client
	  anyway.

2002-12-16 15:53  db

	* src/packet.c:
	  - localClient can go NULL after a parse here as well.

2002-12-16 02:18  db

	* RELNOTES, src/kdparse.c:
	  - cleaned up getfield() field code. I obviously did it in a hurry
	    last time.  this fixes bug with , in a reason field.
	  - updated RELNOTES again

2002-12-16 01:44  db

	* RELNOTES:
	  - started updating RELNOTES in preparation for one more rc

2002-12-16 01:30  db

	* src/channel.c:
	  - add some sanity tests to not try to use who->user if user is NULL

2002-12-16 00:00  db

	* src/channel.c:
	  - Don't decrement the joined count unless actually succeeded in
	    removing a channel join!

2002-12-15 18:50  db

	* doc/technical/send.txt, modules/m_invite.c, src/packet.c:
	  - updated the send docs. a couple of functions disapeared to be
	    replaced with one function in its place. oops.
	  - a client can have a localClient part of NULL when we go try to
	    read from it oops. We can't do that. Notably this happened when a
	    server was unauthed, coring the server.
	  - m_invite was not sending invites properly when +p was on. I admit
	    this code could be finessed, but I wanted to get it working first.

2002-12-14 02:37  db

	* src/send.c:
	  - be careful with IsCapable() when the state of localClient is not
	    known if its NULL, it will panic the server.

2002-12-13 23:08  db

	* src/channel_mode.c:
	  - allow "op cookies" *ugh*
	    mode * +o-b nick cookie will now work. its an exception for this
	    case only. ugh ugh ugh ugh ugh
	  - cleaned up some of the table code. Mode table of 512 is a tad
	    large but will fix later...

2002-12-13 00:38  bill

	* src/: client.c, s_user.c, send.c: Submitted by: Reviewed by:
	  Approved by: Obtained from:
	  - changed all instances of nick[user@host] to nick [user@host] ..
	  this fixes a nasty bug that can be described by this:

	     wheres[the[nick@start.com]

2002-12-12 22:21  db

	* src/packet.c:
	  - *sigh* a client can be set dead (IsDead()) in a number of places
	    while parsing. In all cases, if exit_client() is called,
	    and the client is local (which it is here) then localClient goes
	    *poof* and its set dead. You can't read data from something that
	    aint there scotty! SHE'S GONNA BLOW CAPTAIN!

2002-12-12 15:16  bill

	* Hybrid-team: Submitted by:	vx0
	  - updated vx0's email address, per his request

2002-12-12 01:33  db

	* src/: client.c, packet.c:
	  - client can be SetDead() after parsing a message, if this happens
	    don't try to parse any outstanding buffers for it!

2002-12-10 16:29  bill

	* src/client.c:
	  - fixed missing )

2002-12-09 22:10  androsyn

	* src/client.c: This is the correct fix for the linebuf leak.
	  Basically close_connection() wasn't setting MyConnect() == FALSE as
	  doing so would have caused a core dump further down.  More the
	  close_connection() call towards the end of the function where
	  localClient is no longer needed.  Add a free_local_client() function
	  that actually does the free and sets localClient = NULL

2002-12-03 21:42  jmallett

	* configure, include/setup.h.in, src/dynlink.c: Use dlfunc(3) if we
	  have it, fake it otherwise, at least abstracting out the hideousness
	  of data pointer integral casts.

2002-11-30 08:39  androsyn

	* src/client.c:
	    Fixed the leaking linebuf issue.  Basically what would happen is
	    that upon exit_one_client() we never called linebuf_donebuf for
	    the clients sendq and recvq..oops.

2002-11-28 12:36  db

	* src/channel.c:
	  - revert to 7.342 for now, until have time to figure out the "all
	    members in channel names have @" bug.

2002-11-27 21:18  db

	* src/balloc.c:
	  - I was in a hurry to get groceries before ok? :-)

2002-11-27 17:54  db

	* src/balloc.c:
	  - As pointed out by TimeMr14C...

2002-11-27 10:46  db

	* include/numeric.h:
	  - grrrr KNOCKDISABLED needs to use 715 (thank you Michael)

2002-11-26 22:56  jmallett

	* src/Makefile.in: Take the easy way out for non-GNU compilers, and
	  make people make sure tools.c always compiles with whatever changes
	  they're making - roll-back revision 7.113's unexplained delta here,
	  and compile it always.  If we really do care enough to rip it out of
	  the build where it isn't needed, there are other ways to do that,
	  like we do for @SPRINTF@.

2002-11-26 22:46  jmallett

	* src/: s_bsd_devpoll.c, s_bsd_kqueue.c, s_bsd_poll.c,
	  s_bsd_select.c, s_bsd_sigio.c: Fix compilation (mostly) with
	  TenDRA 4.1.2 on FreeBSD 5.0-CURRENT, by not letting unused s_bsd_*.c
	  become empty compilation units.

2002-11-26 15:34  db

	* src/channel.c:
	  - reverse chanops+voice clients with peons in names listing

2002-11-24 03:27  jmallett

	* servlink/servlink.h, src/md5.c: Repeat after me "char isn't
	  signed"...  "on reasonable UNIX systems".  Checking for
	  "<derived-char> > -1" is broken, when you mean "<derived-char> !=
	  (char) -1" [~0, 0xff on most machines].

	  That table is all-but begging to be int8_t or similar.

	  Also, match the constness returned by the _cfp functions, since
	  discarding it is evil, and we don't seem to need to.

2002-11-23 12:12  db

	* include/defaults.h:
	  - should be #error not error as pointed out by michael@phat-net.de

2002-11-20 22:35  bill

	* modules/m_connect.c:
	  - fixed typo that caused leaking of hidden server IPs

2002-11-20 13:00  bill

	* contrib/m_operspy.c:
	  - duplicate previous fix in m_operspy() .. just in case.

2002-11-20 00:55  bill

	* contrib/m_operspy.c:
	  - fix a potential core. this does create a detection vulnerability,
	  but being stable is more important

2002-11-19 19:18  db

	* src/channel_mode.c:
	  - fixes buffer overflow with +a -a channel mode

	  found and patch submitted by Jack L. xxjack12xx@doramail.com

2002-11-18 14:54  db

	* modules/m_unkline.c:
	  - oops. forgot some continues'

2002-11-13 08:15  db

	* modules/m_unkline.c:
	  - These variables now not needed. (error_on_write)

2002-11-13 08:12  db

	* modules/m_kline.c:
	  - I stared at this until my eyeballs nearly fell out. Anyway, fixed
	    typo spotted by michael@phat-net.de

2002-11-13 00:30  db

	* modules/m_unkline.c: As the result of a nasty core on hemmet I
	  re-examined this code.  I'd truly like to know what kind of drugs I
	  was on when I first did this. really. Anyway, this makes more sense
	  to me.

2002-11-12 23:33  jmallett

	* README.PLATFORMS: Well, I can't look after some platforms I used
	  to be able to since I moved to Kansas, but I can look after
	  OpenBSD/macppc now!  Hopefully more to come, but not just yet :/

	  (I'm back!)

2002-11-12 20:58  wiz

	* contrib/help/opers/rehash, help/opers/rehash:
	  - Removed CHANNELS from the rehash help

2002-11-12 08:45  db

	* include/modules.h, src/ircd.c, src/ircd_parser.y, src/modules.c:
	  - UMODE_ALL -> FLAGS_ALL (motd rehash patch)

	  It seems to be that there exist a problem with the dynamic core
	  modules, afaik it  should be  impossible to unload a  core  module,
	  that is true..... MODUNLOAD can't  unload a core module at all, BUT
	  if you MODRELOAD'ing a core module first, you're able to MODUNLOAD a
	  core module afterwards.

	  michael@phat-net.de

2002-11-12 08:12  db

	* modules/core/m_part.c: Just a small bug I came across by chance,
	  if you haven't got it already :-)

	  In modules/core/m_part.c (line 178) there is an extra space in the
	  format string "%s PART %s  :%s".  This was using hybrid 7-rc4.

	  submitted by tfarrell@frogbert.queens.unimelb.edu.au

2002-11-12 08:09  db

	* src/s_user.c: %S -> %s as noted by Michael <michael@phat-net.de>

2002-11-11 18:25  db

	* include/ircd.h, src/ircd.c, src/ircd_signal.c: patch contributed
	  by wcampbel@botbay.net

2002-11-11 15:43  bill

	* modules/: m_motd.c, m_stats.c: Submitted by:	Lee H
	  - reverted previous fix.  treating remote requests the same as local
	    oper requests is in fact correct, at the msgtab level.  each mo_()
	    function triggered by server will have to do a sanity check looking
	    for IsOper() before giving out any sensitive data.

2002-11-10 14:53  bill

	* contrib/m_operspy.c: Submitted by:	metalrock
	  - fixed core in m_operspy.c caused by doing a WHOIS on a linked
	  server

2002-11-06 16:17  wiz

	* modules/: m_challenge.c, m_oper.c:
	  - Cleaned up failed oper/challenge notices, clarified
	    error messages... yes I am bored, greg.

	  Reviewed by:	xyst, billy-jon

2002-11-05 09:49  bill

	* contrib/m_operspy.c:
	  - replaced 'unique case' detection fix with a slightly more robust
	  one

2002-11-02 12:09  wiz

	* modules/m_challenge.c:
	  - Changed misleading failed oper notice from /challenge
	    This error is not always caused by host mismatch.

2002-11-01 09:38  bill

	* modules/: m_motd.c, m_oper.c, m_stats.c, m_whowas.c:
	  - remote STATS and MOTD requests always treated the source as an
	  oper, fixed.
	  - whowas now gives correct reply when 'null nick' is provided
	  - fixed trivial bug that would skew oper count

2002-11-01 08:24  db

	* contrib/: m_force.c, m_operspy.c:
	  - fixes by adx

2002-10-31 00:31  lusky

	* include/patchlevel.h:
	  - revved patchlevel to 7rc5

2002-10-31 00:30  db

	* RELNOTES:
	  - updated RELNOTES

2002-10-30 22:12  wiz

	* include/hook.h, src/hook.c:
	  - Fixed compile time errors from missing ) and missing proto
	    in hook.c/hook.h (hi bill!)

2002-10-30 16:53  androsyn

	* src/s_user.c: Second half of the USER/PING cookie fix

2002-10-30 16:44  androsyn

	* src/s_user.c: Fix the USER/PING cookie bug properly..

2002-10-30 16:31  db

	* configure:
	  - apparently, the -ggdb option blows up gcc 3.0 or something
	    so its not specific to just OSX
	    Pointed out by Alex Strange (I can't find his email atm)

2002-10-30 16:23  androsyn

	* src/s_user.c: Fix dumb bug that caused the USER response to be
	  taken instead of the identd response..

2002-10-30 15:24  bill

	* src/hook.c: Submitted by:	AndroSyn
	  - this one should be DLINK_FOREACH_SAFE

2002-10-30 14:59  bill

	* src/hook.c:
	  - style cleanups
	  - implemented DLINK_FOREACH wherever possible

2002-10-30 12:44  wiz

	* doc/example.conf, doc/example.efnet.conf, include/client.h,
	  include/s_conf.h, modules/core/m_message.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/packet.c, src/s_conf.c, src/s_user.c:
	  - Added can_flood option in auth {} blocks
	  - Added true_oper_no_flood in general {} block

	  Reviewed by: xyst Approved by: Diane

2002-10-29 22:33  bill

	* contrib/m_operspy.c, contrib/m_whois.c, include/numeric.h,
	  modules/m_whois.c, src/messages.tab:
	  - removed RPL_WHOISADMIN, as it is un-needed, and wreaks of vanity.
	    stats p still distinguishes admins, but maybe it shouldn't .. ?

2002-10-29 21:56  androsyn

	* src/: adns.c, s_auth.c, s_bsd.c: Fix the NULL ipv6 hostname bug..

2002-10-29 17:53  wiz

	* Hybrid-team: Hi everybody, I'm wiz.

2002-10-29 15:14  db

	* doc/challenge.txt:
	  - updated challenge.txt, this never got updated properly

2002-10-29 14:38  bill

	* src/channel.c:
	  - oops, completed removal of persistent channels

2002-10-28 16:09  bill

	* doc/convertconf-example.conf, doc/example.conf,
	  doc/example.efnet.conf, doc/whats-new.txt, include/channel.h,
	  include/channel_mode.h, include/s_conf.h, modules/m_info.c,
	  modules/m_join.c, src/channel.c, src/hash.c, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c:
	  - ripped persistent channels.  this should be re-thoughtout and
	  re-implemented from scratch at a later date.

2002-10-27 20:08  gregp

	* modules/m_challenge.c:
	  - fixing m_challenge.so braindeath, reported by wiz
	    - we were trying to log source_p->challenge stuffs directly after
	      we'd freed it a few lines above (oops)
	    - prehaps we should announce it to locops sometimes too!

	  Reveiwed by:     my pet donkey, wiz Submitted by:    wiz, various
	  bovines

2002-10-24 16:54  bill

	* src/channel.c:
	  - better commented expire_channels() (sheesh, these things are more
	  trouble than they're worth)
	  - added some continue statements, make things a bit more robust

2002-10-24 14:16  bill

	* modules/core/m_message.c, src/channel.c, src/parse.c:
	  - opers can no longer over-ride umode +g
	  - made expire_channels() use DLINK_FOREACH_SAFE
	  - made HELP use MFLG_HIDDEN when listing commands

2002-10-23 23:35  bill

	* contrib/m_operspy.c, include/msg.h, src/parse.c:
	  - added MFLG_HIDDEN, to hide commands from stats m
	  - updated m_operspy.c to use MFLG_HIDDEN

2002-10-23 21:16  bill

	* src/m_error.c:
	  - no longer show all opers every time a user issues the ERROR
	  command.  too much potential for abuse, especially since the ip is
	  not shown, and it can be done pre-registration.

2002-10-23 18:12  bill

	* src/: channel.c, list.c:
	  - added additional sanity checking in expire_channels(), which fixes
	  a core
	  - removed extra ; in make_dlink_node()

2002-10-22 14:47  androsyn

	* src/ircd_parser.y: Wrap the fallback stuff in #ifdef IPV6

2002-10-19 18:36  androsyn

	* src/adns.c: Make char *domain IPV6 only

2002-10-19 18:35  androsyn

	* src/s_conf.c: Make fallback to ip6.int support the default

2002-10-19 18:32  androsyn

	* include/res.h, include/s_auth.h, include/s_conf.h, src/adns.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_auth.c, src/s_conf.c:
	  Added support for ip6.arpa and fallback support for ip6.int.  Also
	  fixed a buglet where the server would spit out a failed host lookup
	  message twice when compiled for IPv6.

2002-10-17 13:06  bill

	* contrib/m_jupe.c:
	  - cosmetic fix.  if we're not a hub, tell user why we fail

2002-10-16 23:20  bill

	* contrib/m_operspy.c:
	  - kludged small bug that allowed detection of m_operspy.c module

2002-10-16 22:28  bill

	* modules/m_rehash.c:
	  - updated rehash usage notice

2002-10-16 16:52  bill

	* modules/m_who.c, modules/core/m_message.c, src/channel.c:
	  - reverted un-needed previous m_who.c commit
	  - notices to user@server were being changed to PRIVMSG.  fixed.
	  - reset idle times following a succesful msg to user@server
	  - redid initilization of expiring_channels to be consistent with
	    lazylinks_channels
	  - redid expire_channels() to walk the linked list forwards, and
	    have channels be added to the list with dlinkAddTail() rather
	    than dlinkAdd().  functionality should be the same, this is
	    just cleaner.

2002-10-16 00:18  db

	* modules/m_who.c:
	  - with --enable-efnet ptr was undefined in m_who.c

2002-10-15 22:23  db

	* src/ircd_parser.y: Modifications as suggested by Michael
	  <michael@phat-net.de>

2002-10-13 21:26  bill

	* src/channel.c:
	  - typo in expire_channels() comment, pointed out by metalrock

2002-10-12 06:39  db

	* modules/m_cryptlink.c, src/s_conf.c:
	  - "Unauthorised" vs. "Unauthorized" ircnet spells it the second way,
	    so guess hybrid will too.

2002-10-12 00:33  db

	* src/channel_mode.c:
	  - fixed another bug. When more than four modes happened locally in a
	    mode change the code was not placing a new + or - on the next line
	    so ended up with "bare" modes with no + or - in front. fixed.

2002-10-11 23:38  db

	* modules/m_ping.c, src/channel_mode.c:
	  - I hate server hostmasking. I really hate it.
	    In any case, the match() in m_ping.c should have been an irccmp()
	    ping is looking for an exact match on "me.name" not a wild card
	    match.

2002-10-11 21:32  db

	* modules/m_rehash.c:
	  - I won't ask why rehash CHANNELS was there

2002-10-11 15:57  db

	* contrib/m_force.c, src/channel.c, src/ircd.c, src/s_auth.c:
	  - fixed bogus expiry code
	  - fixed typo in s_auth.c

2002-10-10 18:17  bill

	* include/channel.h, include/channel_mode.h, include/tools.h,
	  src/channel.c, src/ircd.c:
	  - redid persistent channels

2002-10-10 14:49  androsyn

	* src/: channel_mode.c, client.c, hash.c, motd.c, resv.c, s_auth.c,
	  s_conf.c, s_serv.c, scache.c, whowas.c: More strlcpy() cleanups.
	  Also fixed a buffer overflow.

2002-10-10 14:30  androsyn

	* src/s_user.c: Clean up a number of strlcpy()'s that have magic
	  numbers stuck in them

2002-10-10 11:44  db

	* src/s_user.c: REALLEN + 1 as spotted by adx

2002-10-09 12:59  androsyn

	* modules/core/m_server.c: Move this allocation down a bit.

2002-10-09 11:08  db

	* contrib/m_force.c, modules/core/m_server.c, src/channel.c,
	  src/client.c, src/linebuf.c:
	  - as noted by adx. There were a few unnecessary checks for NULL
	    pointer as we already have called outofmemory(), its pointless.
	    adx also spotted an unfreed server struct.

2002-10-08 17:06  db

	* src/channel.c:
	  - an oopsies here. if we have a zero persist time, then the channel
	    disapears immediately if no one is left in it.

2002-10-07 20:23  db

	* modules/m_motd.c:
	      With hide_servers=yes and disable_remote=no, the servername is
	      removed from the 312 numeric when you /whois nick, but you can
	  just do /motd nick and see the server they are on. This patch fixes
	  that vulnerability...  ...  wiz -- Jason Dambrosio       | Software
	  Engineer     |    "It's a good thing." ITS Solutions, Inc.   |
	  808.372.6823          |         -- Martha Stewart

2002-10-07 13:03  bill

	* modules/m_ping.c:
	  - repeat of previous fix

2002-10-06 11:02  bill

	* modules/m_ping.c:
	  - fixed logic error in ms_ping()

2002-10-05 20:14  androsyn

	* modules/m_who.c: Fix a bug in WHO that would leak a channel the
	  user was in regardless of +s/+p or +i modes.

2002-10-04 00:18  db

	* src/hash.c:
	  - fixed comment in header. No coding change

2002-10-03 11:33  bill

	* doc/convertconf-example.conf, doc/example.conf,
	  doc/example.efnet.conf, include/s_conf.h, modules/m_info.c,
	  modules/m_join.c, modules/core/m_nick.c, src/channel.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c:
	  - added channel {} config entry 'oper_pass_resv', allows opers to
	  pass RESVs.  suggested by DrmWEaver

2002-10-02 19:09  bill

	* contrib/m_operspy.c, src/s_conf.c:
	  - redid operspy who to emmulate actual who
	  - added operspy topic
	  - fixed small oversight in oper_privs_as_string with nick_changes =
	  no;

2002-10-01 22:13  bill

	* contrib/m_jupe.c:
	  - WALLOPS warning broadcast to remove servers used oper as source,
	  changed to server

2002-09-24 12:33  bill

	* contrib/README:
	  - added m_operspy.c to contrib/ notes

2002-09-20 01:31  db

	* include/event.h, src/event.c:
	  - major major bug here. There is the potential of overflowing
	    the event_table[]. Range checking was not being done. <g>

2002-09-19 12:14  bill

	* INSTALL, contrib/m_opme.c, modules/m_connect.c:
	  - added fbsd note to ipv6 install notes
	  - made OPME send LOCOPS rather than WALLOPS for &channels
	  - fixed potential leak of hub IP

2002-09-19 00:22  bill

	* modules/: m_unkline.c, core/m_message.c:
	  - another speed enhancement noted by lee
	  - change ungline notice to be consistent with undline and unkline

2002-09-18 23:11  bill

	* include/send.h, modules/m_who.c, modules/core/m_message.c,
	  src/send.c:
	  - fixed compiletime error when ANONOPS was disabled
	  - fixed @# notices to not echo back to sender
	  - removed redundant if()s in sendto_list_local() and
	  sendto_list_local_butone() (thanks to ratbox for this one)

2002-09-17 23:23  lusky

	* include/patchlevel.h:
	  - rev patchlevel to 7rc4

2002-09-16 22:13  db

	* tools/rsa_respond/: README, respond.c: applied Wendys patch to
	  rsa_respond to allow epic to work properly

2002-09-11 18:01  db

	* modules/: m_kline.c, m_testline.c:
	  - ok I goofed and forgot about these modules

2002-09-11 11:27  db

	* RELNOTES, include/hostmask.h, src/client.c, src/hostmask.c,
	  src/s_bsd.c, src/s_conf.c:
	  - tiny fix to speed up kline processing slightly. Instead of
	    checking for I lines as well as klines from find_kill(), only check
	    for klines. This adds find_kline_conf() to hostmask.c, I also
	    changed find_dline() to find_dline_conf() for consistency.  Noted by
	  Lee Hardy (The goat man)

2002-09-10 22:24  db

	* src/channel.c:
	  - fix bug +I+ introduced in invites. I hate !ptr logic.

2002-09-10 15:58  db

	* modules/: m_oper.c, core/m_nick.c:
	  - This is the better fix for the ~ nick bug. Look at
	    clean_nick_name() in hybrid-6 this fix duplicates the behaviour of
	  hybrid-6 clean_nick_name better.

2002-09-10 14:50  androsyn

	* modules/core/m_nick.c: Fix another NULL nick bug that Lee found

2002-09-09 22:25  db

	* src/hostmask.c:
	  - conf->status not conf->flags for CONF_ILLEGAL

2002-09-09 09:43  db

	* src/: ircd_parser.y, s_conf.c, s_log.c:
	  - having ircd_parser.y put a string into ->host, then having s_conf
	    immediately moving it from host to name,just seemed too silly for
	    me. (conf_add_x_conf) Also cleaned up some style.

2002-09-09 09:32  db

	* modules/m_oper.c:
	  - fixed typo umodes not umode

2002-09-08 23:05  db

	* modules/m_oper.c:
	  - source_p->umode not source_p->flags, not that it seems to matter.
	    tbh, I don't think ms_oper() is ever ever called.

2002-09-08 17:09  bill

	* contrib/m_operspy.c:
	  - fixed non-oper-issued to properly respond with Unknown command
	    side note: there should be a way for a msgtab-triggered function
	    to access the command that triggered it

2002-09-07 02:34  androsyn

	* src/channel.c: This needs to be TOPICLEN+1, otherwise we'll chop
	  the last byte off.  We already allocate TOPICLEN+1 so..

2002-09-06 22:18  db

	* RELNOTES:
	  - updated release notes with bugs fixed since last release

2002-09-06 15:37  db

	* include/s_log.h, modules/m_challenge.c, modules/m_oper.c,
	  src/s_log.c, src/send.c:
	  - fixed bug with operlog and foperlog handling. The ConfigFile
	    entries were being treated as char filename pointers, instead of
	    strings.  There was missing log_failed_oper() code.
	    log_oper() code was not being called when it should have been.

2002-09-05 11:07  db

	* modules/m_whois.c:
	  - fixed /whois * bug. minor bug, but technically wrong. when doing a
	    /whois * it missed the fact it was successful, and promptly whinged
	    about there being no user *.

2002-09-05 10:06  db

	* src/: Makefile.in, channel.c, class.c, client.c, s_conf.c,
	  send.c:
	  - convert these to use DLINK_FOREACH DLINK_FOREACH_SAFE

2002-09-05 02:05  db

	* modules/: m_accept.c, m_close.c, m_knock.c, m_who.c, m_whois.c:
	  - converted a pile of for() to DLINK_NEXT
	  - cleaned up m_who (idea from Androsyn)

2002-09-04 22:48  db

	* modules/m_gline.c, src/s_gline.c:
	  - If a local oper votes twice on a gline, don't
	    do the send-realops, don't send it off of the server, just notice
	    the oper and continue.

2002-09-04 21:30  db

	* include/s_stats.h, src/s_stats.c:
	  - removed another never used statistic. It wasn't used in hybrid-6
	  either <g>

2002-09-04 21:10  db

	* include/s_stats.h, modules/m_stats.c, modules/m_trace.c,
	  src/s_gline.c, src/s_stats.c:
	  - removed statistics variables never ever used (udp and local
	    client) Early versions of hybrid (based on irc2.8) had udp ping port
	    which was removed.  This is obviously no longer needed.
	  - re-worked m_stats to separate stats g from stats G, pending glines
	    vs. placed glines also reworked the style. Its a PITA fixing the
	  style, but ever so much easier for editing...
	  - cleaned up style in m_trace.c also started introducing
	    DLINK_FOREACH. It does not change the code at all, its just a macro.
	  No point doing it all at once.

2002-09-03 17:30  db

	* contrib/m_whois.c:
	  - As pointed out by Lee, fix server hide

2002-09-03 13:15  db

	* src/channel_mode.c:
	  - allow more than four "simple modes" i.e. +isntp but allow only
	    one per. i.e. only one +i is allowed, only one -p etc. this
	    matches behaviour of hybrid-6

2002-09-03 10:44  bill

	* contrib/m_operspy.c:
	  - final cleanups
	  - added warning for use
	  - changed copyright to primarily me, so that no one else gets blamed
	  for this thing =)

2002-09-03 10:27  bill

	* contrib/m_operspy.c:
	  - fixed compiletime warnings

2002-09-03 07:24  db

	* src/messages.tab:
	  - missing ':' (I thought I fixed this already...)

2002-09-03 01:43  bill

	* contrib/: Makefile.in, m_operspy.c:
	  - added a neat little toy that I made tonight.  extreme caution
	    should be exercised when using this module.
	  - modified Makefile to compile operspy automatically

2002-09-02 02:34  db

	* src/s_conf.c:
	  - ircnet spells it "unauthorized" so I guess we should too.

2002-09-02 02:06  db

	* contrib/m_whois.c:
	  - fixed stupid bug in contrib m_whois.c
	    check entire if() for MyConnect() first, this means the glob flag
	    is useless. cleaned up.

2002-09-02 01:34  db

	* contrib/README, modules/m_gline.c, modules/m_join.c,
	  src/channel_mode.c, src/s_auth.c:
	  - strengthened warning in README in contrib
	  - cleaned up logic in m_join.c to be somewhat saner
	  - burst proper channel modes in m_join for persistent channels
	  - removed superflous MODE when the SJOIN can do it anyway
	  - chm_simple() was missing mode_limit check, thus allowing clients
	    to core the server with a pile of +nt-nt+nt etc.
	  - commented s_auth.c madness better
	  - corrected style in s_auth.c

2002-08-28 14:13  db

	* src/channel_mode.c:
	  - committed fix as spotted by lee hardy, I also commented a function
	    to make it clear

2002-08-28 13:00  androsyn

	* contrib/README.cidr_bans, contrib/cidr_bans.diff,
	  doc/README.cidr_bans, include/irc_string.h, src/channel.c,
	  src/match.c: Add CIDR bans.  This does both ipv4 and ipv6 cidr
	  bans

2002-08-26 19:27  androsyn

	* contrib/: README.LMH, lmh.diff: Remove Lee's patch at his
	  request.

2002-08-25 00:30  lusky

	* doc/example.efnet.conf:
	  - corrected disclaimer in example.efnet.com to per Disciple's rant

2002-08-25 00:19  lusky

	* src/client.c:
	  - client IPs on exits were always masked (fl)

2002-08-22 23:30  db

	* modules/m_whois.c:
	  - m_whois was also wrong.
	    same reasons as m_nick.

2002-08-22 22:26  db

	* modules/core/m_nick.c, src/parse.c:
	  - the parse fix is incorrect. really that entire parser needs to be
	    torn apart and re-thought/re-written. *sigh* the protocol
	    apparently =relies= upon empty parv[1] in some cases! we cannot
	    simply blast it away as the original fix did. m_nick now checks
	    using BadPtr that parv[1] is not NULL or parv[1][0] != '\0' .
	    I bet there are other functions that should do the same thing.
	    *ugh*

2002-08-22 19:08  db

	* src/tools.c:
	  - I typoed it here too

2002-08-22 19:06  db

	* include/tools.h: typoed -> as _

2002-08-22 17:33  db

	* include/tools.h, src/tools.c: make tools.h match tools.c and
	  correct a bug in dlinkmove

2002-08-22 12:08  db

	* src/s_user.c:
	  - fixed typo which had 'S' (capital S) instead of lowercase 's'
	    reported by Justin Hammond

2002-08-21 22:01  lusky

	* src/parse.c:
	  - check for null arg after :

2002-08-21 01:58  lusky

	* TODO:
	  - Test commit for new cvsweb

2002-08-20 22:01  lusky

	* RELNOTES:
	  - Updated RELNOTES for rc3

2002-08-20 15:25  db

	* src/channel_mode.c:
	  - more cleanups

2002-08-20 14:03  androsyn

	* src/hostmask.c: Set the default ipv6 bitmask to 128

2002-08-20 12:41  db

	* include/channel.h, include/patchlevel.h, include/s_conf.h,
	  include/tools.h, src/channel.c, src/channel_mode.c, src/client.c,
	  src/s_conf.c, src/tools.c:
	  - fixed ipv6 hash klines
	  - cleaned up for() loops with macro

2002-08-20 01:49  db

	* include/s_conf.h, src/client.c, src/s_conf.c:
	  - ip_hash() has to know whether its IPV4 or IPV6 form of ip
	    so this has to be passed all the way down.

2002-08-19 21:32  db

	* contrib/m_whois.c, include/numeric.h:
	  - included RPL_WHOISACTUALLY in numeric.h
	  - modified contrib version of m_whois.c to use RPL_WHOISACTUALLY

2002-08-19 21:02  db

	* include/patchlevel.h, src/channel_mode.c, src/messages.tab:
	  - added 338 to messages.tab
	  - add some buffer overflow checks to channel_mode.c

2002-08-19 02:42  androsyn

	* src/s_conf.c: A slightly less retarded version of hash_ip()

2002-08-19 02:06  db

	* src/hostmask.c:
	  - cosmetic cleanup. wrapped declarations make my skin itch.

2002-08-19 01:24  androsyn

	* contrib/cidr_bans.diff: Fix a NULL ptr bug in cidr bans

2002-08-19 01:23  db

	* contrib/: Makefile.in, README, m_whois.c: Added Gozems m_whois.c
	  to contrib. It looks better than ours, but we have to wait until
	  more testing is done before making it the official m_whois, so it
	  will have to wait until 7.1

2002-08-17 03:16  a1kmm

	* modules/m_oper.c:
	  - Re-add the code to look for oper confs by IP as opposed to by
	  host.

2002-08-17 01:04  lusky

	* TODO: Test commit, new repo should be working now.

2002-08-17 00:16  lusky

	* TODO: final test, i hope

2002-08-16 23:48  lusky

	* TODO: please work!

2002-08-16 23:35  lusky

	* TODO: test

2002-08-16 23:27  lusky

	* TODO: test

2002-08-16 23:25  lusky

	* TODO: another test

2002-08-16 23:15  lusky

	* TODO: another test

2002-08-16 23:10  lusky

	* TODO: test commit

2002-08-16 22:01  lusky

	* TODO: another test commit

2002-08-16 21:41  lusky

	* TODO: test commit to hybrid7 tree

2002-08-16 07:07  db

	* modules/m_oper.c:
	  - thats a major stupid. spotted by wiz/stu

2002-08-15 23:16  lusky

	* include/patchlevel.h:
	  - revved patchlevel to 7rc2

2002-08-15 15:49  db

	* include/numeric.h:
	  - last minute update. add some documentation for numerics
	    from other networks. courtesy Kev and numeric.h from ircu.

2002-08-15 14:44  db

	* RELNOTES:
	  - updated release notes. There are a few other changes we made but
	    cannot remember them.

2002-08-15 11:00  adx

	* modules/: m_cjoin.c, m_list.c, m_names.c, m_whois.c, m_whowas.c,
	  core/m_kick.c: Patch against messages like 401  :No such
	  nick/channel (without nickname specified)

2002-08-15 10:15  db

	* modules/m_cryptlink.c, modules/m_gline.c, modules/m_kline.c,
	  modules/m_pong.c, src/client.c, src/hash.c, src/ircdauth.c,
	  src/s_conf.c, src/s_serv.c, src/s_user.c, src/scache.c:
	  - pile of corrections to strlcpy() use. the size includes the null
	    byte.  This was caught by bill. I have done a quicky one pass review
	    while applying the patch. need another review.

2002-08-15 09:32  db

	* src/ircd_parser.y:
	  - patch submitted by adx to get rid of some compile warnings

2002-08-15 03:32  db

	* src/s_serv.c: Came across some code that has hard coded timeouts
	  instead of the CONNECTTIMEOUT, so I thought I'd let you know and
	  include a .diff for your convenience :)

	  ...

	  Stuart Walsh - stu@ipng.org.uk IPng UK      - info@ipng.org.uk -
	  http://ipng.org.uk

2002-08-13 15:35  db

	* modules/m_oper.c:
	  - clean up formatting, compress an if

2002-08-12 22:23  db

	* doc/example.efnet.conf:
	  - bunch of fallacies in this document corrected.

	    NUMBER one, a reconnect time of five minutes on efnet WILL cause
	    nick collides.
	    NUMBER two, a longer ping time is not a help for a client or
	    server as it means more possibility for ghosting etc.
	    NUMBER three, a vchan cannot possibly cause any problem at all on
	    efnet except look "weird" to the rest of the network.

2002-08-12 15:06  db

	* modules/m_info.c:
	  - remote info is sent for a reason.
	    remote admins need to see whats on another server. Perhaps this
	    should be limited to an IsAdmin()

2002-08-12 12:09  androsyn

	* src/channel_mode.c: The send_oplist prototype was wrapped in the
	  wrong ifdef

2002-08-11 11:13  androsyn

	* src/send.c: Undo that last commit..

2002-08-11 10:46  androsyn

	* src/send.c: Fixed a off by one error in send_trim().  If you are
	  using indexes remember you start counting at 0 NOT 1

2002-08-10 22:29  db

	* doc/example.efnet.conf:
	  - disable persistent channels in the efnet conf example
	    due to some slight synchronisation problems.
	  - reworded slightly "knock" wording.
	  - fixed wide line

2002-08-09 11:56  bill

	* src/s_user.c: Submitted by:	Lee H
	  - erm yeah, spoof spoofed users, not everyone.

2002-08-08 19:58  wcampbel

	* src/channel_mode.c: Missed a change from before

2002-08-08 19:52  wcampbel

	* src/channel_mode.c: Fix for bans, spotted by users on irc6.qeast
	  and irc.ipv6.homelien.  This would cause the ban to have to be
	  issued twice in order for the ban to take effect.  Unbans were fine.

	  Submitted by:	Lee

2002-08-08 13:45  bill

	* src/: client.c, s_user.c:
	  - with HIDE_SPOOF_IPS on, mask the ip in the client
	  connect/disconnect notice

2002-08-08 11:43  bill

	* modules/m_join.c, src/s_conf.c, src/s_user.c: Submitted by:	Lee H
	  <lee@leeh.co.uk> Reviewed by:	me Approved by:	Lee H <lee@leeh.co.uk>
	  - fixed inverted IsMember()
	  - added lee's gline exemption patch.  this should fix it.

2002-08-07 19:27  androsyn

	* TODO: test commit

2002-08-07 17:12  androsyn

	* TODO: test commit..ignore

2002-08-07 13:59  androsyn

	* modules/m_join.c: Patch from adx, basically don't send any
	  message about a user being in too many channels if they attempt to
	  rejoin one they are already on.

2002-08-07 12:53  bill

	* modules/m_kline.c:
	  - cosmetic fix to temporary kline notice

2002-08-06 20:52  androsyn

	* contrib/cidr_bans.diff: Fix a buglet..

2002-08-06 20:48  androsyn

	* contrib/: README.cidr_bans, cidr_bans.diff: Adds support for cidr
	  style ban, exception and invex lists.

2002-08-06 20:26  androsyn

	* src/linebuf.c: I thought it was broken because of my stupidity..

2002-08-06 20:24  androsyn

	* src/linebuf.c: Back out my last linebuf patch..

2002-08-05 12:30  androsyn

	* src/linebuf.c: This *should* fix linebuf_copy_raw() to work
	  correctly.  Lets hope those old issues with ziplinks don't show up
	  again.

2002-08-03 18:42  androsyn

	* src/balloc.c: Make BlockHeapAlloc() call outofmemory() instead of
	  returning NULL..we really want to die if we have a failure here like
	  we do with MyMalloc()

2002-08-03 18:33  androsyn

	* src/client.c: Added a defensive NULL ptr check

2002-08-03 17:45  androsyn

	* src/linebuf.c: Add a NULL pointer check to linebuf_allocate

2002-08-02 17:58  leeh

	* modules/m_knock.c:
	  - moved knock-disable to +p, +s doesnt make sense.

2002-08-01 09:55  leeh

	* RELNOTES, modules/m_kline.c:
	  - updated relnotes
	  - adxs fix for klines such as @foo and foo@

2002-08-01 09:22  leeh

	* src/channel_mode.c:
	  - allow +/-b desync modes that originate on remote servers to help
	    stop problems with desyncs.

2002-07-31 18:52  leeh

	* contrib/m_ltrace.c:
	  - fixed ltrace wrt HIDE_SPOOF_IPS

2002-07-31 18:52  db

	* src/parse.c:
	  - I will double review this when I get back from concert :-)
	  - Anyway, this should stop dumping over the end of an input buffer
	    I'll test later...
	  - Also even if we don't log local clients, we should log remote IMO

2002-07-31 14:17  leeh

	* modules/m_gline.c:
	  - trigger glines using the original reason.

2002-07-31 13:35  leeh

	* modules/m_gline.c:
	  - if a user requests a gline for "@host", use "*@host"

2002-07-31 13:30  leeh

	* src/hostmask.c:
	  - dont show kline exempt status to remote opers.
	  - show spoofed I:, just put the u@h as user@255.255.255.255

2002-07-31 12:24  leeh

	* modules/: m_admin.c, m_away.c, m_invite.c, m_join.c, m_links.c,
	  m_lusers.c, m_motd.c, m_names.c, m_stats.c, m_whois.c:
	  - allow opers to join channels on split to be consistent with hyb6
	  (ugh)
	  - audited the ms_*() functions for stuff coming from hacked servers
	    that should never happen.

2002-07-30 07:12  leeh

	* src/parse.c:
	  - return -1 on error from client, -2 on error from server so we dont
	    log everytime a client sends a command with invalid parms.

2002-07-29 21:43  db

	* src/: packet.c, parse.c:
	  - cleaned up style in packet.c
	  - cleaned up style in parse.c
	  - added logging of complete input buffer if insufficient parms
	    received.  We might have a bogus \0 or something, we need to see
	  what we have.

2002-07-29 20:47  androsyn

	* src/channel_mode.c: The declaration on dir probably shouldn't be
	  wrapped in #ifdef HALFOPS

2002-07-29 20:31  greg

	* src/client.c: gcc -I../include -I../adns   -I/usr/local/include
	  -O2 -g -ggdb -DNDEBUG -DIRCD_PREFIX=\"/usr/local/ircd\" -c client.c
	  client.c: In function `dead_link': client.c:1170: `to' undeclared
	  (first use in this function) client.c:1170: (Each undeclared
	  identifier is reported only once client.c:1170: for each function it
	  appears in.) *** Error code 1

	  Replaced to with client_p.

	  Submitted by:	Random EFNet (l)user Reviewed by:	make all Approved
	  by:	goats

2002-07-28 21:08  androsyn

	* src/channel_mode.c: Fill in the UID in the mode_changes array..

2002-07-28 20:27  androsyn

	* src/channel_mode.c: Allow for -o+o nick nick as well as -h+h and
	  -v+v

2002-07-28 19:43  leeh

	* src/: channel_mode.c, client.c:
	  - replaced find_client() calls with find_chasing()

2002-07-28 17:37  leeh

	* src/channel_mode.c:
	  - removed some unused vars.

2002-07-28 15:19  leeh

	* include/channel_mode.h, src/channel_mode.c:
	  - commited the first half of the desync fixes.  this will allow
	    users to set +b-b on channels.

2002-07-27 15:51  androsyn

	* src/s_bsd.c: Don't kick out the errno, just the result of the
	  strerror()

2002-07-27 09:27  leeh

	* modules/core/m_kill.c:
	  - we were testing IsOperGlobalKill instead of IsOperK in m_kill.c
	    which prevented "Ko" opers being able to kill local users.  reported
	    by kenny <kenny@psdnetworks.co.uk>

2002-07-26 12:37  leeh

	* RELNOTES, modules/core/m_nick.c, src/parse.c:
	  - updated RELNOTES
	  - added an ilog() when we drop a server for invalid params
	  - extended the 'protection' to ms_nick(), which has varying degrees
	    of parameters (3 for nickchange, 9 for introduction)

2002-07-26 10:03  leeh

	* src/channel_mode.c:
	  - commited by +eI anti-desync fixes.

2002-07-22 21:00  db

	* src/channel_mode.c:
	  - correct bug where users were able to apply such lovely bans as
	    !@ yes, thats right you saw it here first. bans and exceptions and
	    invexex you too can get one too by ordering a channel_mode.c from
	    K-TEL ONLY the best!

2002-07-22 18:23  leeh

	* contrib/help/opers/kline, help/opers/kline:
	  - documented oper reason.

2002-07-22 17:37  leeh

	* contrib/lmh.diff:
	  - made my patch work.

2002-07-22 01:08  db

	* src/: ircd_lexer.l, s_conf.c:
	  - This fixes the \" case in QSTRING. (an admin wanted this one)
	    This allows you to set email as "db@db.net" for example.

2002-07-21 20:40  leeh

	* modules/m_info.c:
	  - wrapped the "Compiled on" info in #ifndef EFNET

2002-07-21 17:06  leeh

	* src/packet.c:
	  - parse the data first then check for excess flood, else the whole
	    grace period becomes useless.

2002-07-21 15:22  leeh

	* contrib/lmh.diff:
	  - fixed my diff with the latest commits

2002-07-21 13:53  leeh

	* src/packet.c:
	  - the second half of my flood fixes that splits parsing into three
	    loops instead of two.

2002-07-21 13:15  db

	* src/: ircd_lexer.l, s_conf.c: 2002-07-21 17:43:31+0200, gozem ->
	  > Included is two patches which makes tracking errors in your
	  ircd.conf a bit > easier. First one adds a print of which .include
	  we are in and formats the > error in yyerror() a little better.
	  Second gives you a warning when using > #include instead of .include
	  so don't have to stratch your head wondering > why your file is
	  ignored.  > > Output for the first patch is now: > -server-
	  "opers.conf", line 185: parse error:  admin_is_a_monkey = yes; > >
	  And output from second patch: > -server- "file.conf", line 87: You
	  probably meant '.include', skipping: #inclu de "links.conf" > >
	  There is a drawback on the first patch. Since we only know the full
	  path to > the first file 'ircd.conf' the full patch will be
	  displayed in the error.  > > > One more error/miss to report but not
	  fixed. ircd_lexer.l ircd_parser.y > s_conf.c randomly uses ilog()
	  and/or sendto_realops_flags() to report > errors. This means some
	  errors get visable in ircd.log and some gets visable > for the opers
	  online. Sometimes both. A wrapper funtion is needed that > always
	  sends to both.

2002-07-21 13:11  db

	* src/s_conf.c:
	  - pure and simple style fixes

2002-07-21 12:17  leeh

	* modules/core/m_mode.c:
	  - should be checking parv[n-1][1] is \0, not [0]

2002-07-21 00:55  a1kmm

	* src/: linebuf.c, packet.c:
	  - Kill unknowns/servers that send NULL in packets, and notify
	    clients that they are.

2002-07-20 22:59  a1kmm

	* src/s_serv.c:
	  - Fixed a core with servers dying while they are being established.

2002-07-20 11:51  leeh

	* include/packet.h, modules/m_invite.c, modules/m_oper.c,
	  modules/m_time.c, modules/core/m_kick.c, modules/core/m_mode.c,
	  src/packet.c:
	  - commited the first half of the floodcode fixes.
	    - end the grace period in a few more places
	    - raise the rate at which we parse commands above the level of
	      flooding to 2 per second
	    - raise the burst level slightly

2002-07-20 11:47  leeh

	* src/s_user.c:
	  - fixed a missing (
	  - you cant just detach an oper conf if you dont put anything back in
	    its place else youre leaving a user with no class whatsoever, so
	    just dont detach the conf at all, as my patch does.

2002-07-20 09:07  db

	* src/s_user.c:
	  - This fixes the deop of oper causing an oper to be tossed off the
	    server if they don't have a matching auth{} for their deopered
	    client.  Note that we have attached a new conf to the client
	    already, so this has to be removed in case they re-oper, else we
	    could end up with a link list of new confs. (unlikely an oper would
	  be rude but still)

	  - cleaned up some style() return should always have a ()
	    function names should start at the left most char

2002-07-20 06:07  leeh

	* modules/m_gline.c:
	  - fix to show oper or server already voted after the gline request.

2002-07-19 11:51  androsyn

	* src/s_auth.c: Some extra paranoia in the auth_dns_callback code.

2002-07-19 09:22  ejb

	* src/hostmask.c:
	  - commited gozem's patch to hostmask.c that should fix the
	    ipv6 iline bug.

	  Submitted by:	Gozem <gozem@linux.nu> Reviewed by:	ejb db Approved
	  by:	db

2002-07-19 08:31  leeh

	* src/ircd.c:
	  - helps if I set split_users to the users splitcount and servers to
	    the servers splitcount, not the other way round..

2002-07-19 06:56  leeh

	* modules/core/m_kill.c:
	  - bitchx determines foreign/local operkill based on the amount of
	    !'s in a path, so for remote kills send server!host!user!nick as
	  path.

2002-07-19 06:11  leeh

	* modules/core/m_kick.c:
	  - adxs fix to allow halfops to kick other halfops on -p channels, to
	    sync things up with +/-h.

2002-07-19 00:34  ejb

	* src/parse.c:
	  - reworded invalid arguments message.

2002-07-18 12:24  ejb

	* modules/core/m_server.c, src/parse.c:
	  - print more verbose notice for servers which send less arguments
	    to a command than is required.
	  - drop local servers which do this.
	  - make m_server require 4 arguments, not 3.

2002-07-18 11:43  db

	* src/parse.c:
	  - fixed typo

2002-07-18 11:28  db

	* tools/convertconf.c:
	  - converted Q line was incorrectly using name= instead of nick= for
	    nick jupes. Added code to convert channel jupes into channel=

2002-07-18 05:49  leeh

	* tools/convertconf.c:
	  - missing a break; that broke things

2002-07-18 03:12  db

	* src/: messages.tab, modules.c:
	  - This adds (core) to any module listed that is a core module

2002-07-17 19:31  leeh

	* doc/challenge.txt:
	  - hwys updated challenge.txt

2002-07-17 19:09  leeh

	* modules/m_version.c:
	  - wrapped 'T' in #ifdef IGNORE_BOGUS_TS

2002-07-17 18:02  db

	* modules/m_help.c:
	  - fixed formatting
	  - use fbgets and friends not gets, we have them for a reason
	  - log path names of failures. having to use gdb to find a bogus path
	    is silly.

2002-07-17 12:34  leeh

	* contrib/lmh.diff:
	  - helps if I run diff with -N.

2002-07-17 12:29  leeh

	* contrib/lmh.diff:
	  - fixed my patch to work with current tree

2002-07-17 09:58  leeh

	* src/s_conf.c:
	  - dont allow local admins to see ips in stats c if HIDE_SERVERS_IPS
	    is defined, only local admins would have been given the ip, noone
	  else.

2002-07-17 09:50  leeh

	* src/s_conf.c:
	  - I missed stats c when I did HIDE_SERVERS_IPS

2002-07-16 18:30  db

	* tools/convertilines.c:
	  - end of an auth{} block should have a trailing ';'
	    uncovered in the rc1

2002-07-16 16:26  leeh

	* include/supported.h:
	  - fixed RPL_ISUPPORT to accurately report the status of halfops, +eI
	    and anonops

2002-07-16 11:36  lusky

	* RELNOTES, include/patchlevel.h:
	  - revved patchlevel to rc1

2002-07-16 06:35  leeh

	* INSTALL:
	  - added an efnut warning to INSTALL and noted the fact convertconf
	    wont touch I:, you need convertilines for it.

2002-07-15 04:14  db

	* src/linebuf.c:
	  - one more time. somehow the wrong code got committed.

2002-07-15 03:26  androsyn

	* modules/m_cryptlink.c: Fixed a bug where we would attempt to pass
	  a NULL rsa key to RSA_size.

2002-07-14 20:49  db

	* src/linebuf.c:
	  - This does things right, but has an icky goto...

2002-07-14 19:41  db

	* src/linebuf.c:
	  - somehow some pre-increments got turned into post-increments
	  - size of a \r\n buffer is 2. (apparently)

2002-07-14 18:11  leeh

	* contrib/m_opme.c:
	  - revert the accidental commit of m_opme done earlier..

2002-07-14 18:00  db

	* src/linebuf.c:
	  - Don't try to work with a -1 index!

2002-07-14 16:19  androsyn

	* src/: linebuf.c, send.c: Okay..lets try that again.  Changes for
	  the goofy issue with va_list on Linux/Alpha and put a test inside
	  #ifndef NDEBUG

2002-07-14 00:10  androsyn

	* configure: Remove -W flags from the build for upcoming release

2002-07-13 21:30  androsyn

	* Hybrid-team: Add scuzzy to Hybrid-team, he has helped us out with
	  a lot of testing and debugging.

2002-07-13 20:12  androsyn

	* configure: Try that one more time

2002-07-13 18:58  androsyn

	* contrib/m_opme.c: Thats -DNDEBUG not -NDEBUG

2002-07-13 18:54  androsyn

	* configure, include/memory.h: Disable asserts by default and fix a
	  #endif in memory.h.  This should be it before -rc1

2002-07-13 07:42  leeh

	* modules/core/m_server.c:
	  - squitting leaves when a non-hub introduces one is bad.

2002-07-13 02:56  androsyn

	* modules/core/m_message.c, src/send.c: Make PRIVMSG and NOTICE
	  send UIDs for prefixes, when possible

2002-07-12 20:48  androsyn

	* src/client.c: Make dead_link exit message consistant

2002-07-12 15:42  androsyn

	* contrib/lmh.diff: Updated lmh.diff to apply cleanly

2002-07-12 12:33  androsyn

	* include/tools.h: Forgot some more inlines

2002-07-12 12:14  androsyn

	* include/balloc.h: Removed redudant #ifdefs

2002-07-12 12:02  androsyn

	* include/tools.h: GCC called, it wanted its inline's back

2002-07-11 23:29  joant

	* configure, include/tools.h, modules/m_kline.c,
	  modules/core/m_server.c, servlink/servlink.c, src/channel_mode.c,
	  src/motd.c, src/s_serv.c, tools/encspeed.c:
	  - Code cleanup thanks to Forte C v7 warnings.
	  - Order of CFLAGS changed in configure to fix Forte problem.

2002-07-11 21:24  joant

	* src/channel.c: casting pointer arithmetic, better living through
	  pointers

2002-07-11 21:01  androsyn

	* modules/core/m_quit.c: Instead of saying Client Exit: say Quit:,
	  to be a little more consistant with other networks

2002-07-11 20:55  androsyn

	* src/send.c: Reorder some code so it will get inlined.

2002-07-11 20:51  androsyn

	* include/s_conf.h, src/ircd.c, src/listener.c, src/s_conf.c:
	  Remove the #ifdef for PACE_CONNECT, we define it unconditionally
	  anyways so...

2002-07-11 20:43  androsyn

	* configure, include/balloc.h, include/client.h,
	  include/ircd_defs.h, include/list.h, include/memory.h,
	  include/setup.h.in, src/balloc.c, src/client.c, src/list.c,
	  src/memory.c: Rip out the very, very ugly memdebug code..

2002-07-11 19:42  androsyn

	* modules/m_accept.c: Missing semicolon

2002-07-11 19:40  leeh

	* RELNOTES, doc/example.conf, doc/example.efnet.conf,
	  include/parse.h, include/s_conf.h, modules/m_help.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/parse.c, src/s_conf.c,
	  tools/Makefile.in, tools/convertconf.c:
	  - updated RELNOTES with whatever it is ive done
	  - added ConfigFileEntry.use_help
	  - ripped remnants of fixklines from tools/Makefile.in
	  - some convertconf cleanups

2002-07-11 19:32  androsyn

	* configure: Fixed formatting for ./configure --help

2002-07-11 11:27  leeh

	* modules/core/m_nick.c:
	  - allow unregistered connections to change the case of their
	  nickname

2002-07-11 11:01  leeh

	* configure:
	  - Joans configure fixes for forte

2002-07-11 09:26  leeh

	* doc/example.conf, include/memory.h, include/tools.h:
	  - wrap the inlines in #ifdef __GNUC__, this should fix forte.

2002-07-11 07:04  leeh

	* src/client.c:
	  - fixed an error with a Debug(), found by sofit <sofit@mail.bg>

2002-07-11 05:23  androsyn

	* include/rsa.h: Add a newline to the end of rsa.h

2002-07-11 05:17  androsyn

	* include/memory.h: Remove the inlines from memory.h that were
	  giving forte c problems..

2002-07-10 22:29  lusky

	* INSTALL, RELNOTES:
	  - fixing hybrid@ subscription instructions

2002-07-10 06:34  leeh

	* configure, doc/example.efnet.conf:
	  - but my autoconf changes back :P
	  - fixed typo

2002-07-10 04:35  androsyn

	* RELNOTES: Start updating RELNOTES for what *should* be -rc1

2002-07-10 04:31  androsyn

	* include/ircd_defs.h: Update comments to note that TOPICLEN isn't
	  set here anymore..

2002-07-10 03:06  androsyn

	* configure, include/ircd_defs.h, include/setup.h.in: Make TOPICLEN
	  configurable via autoconf

2002-07-10 02:48  androsyn

	* configure, include/setup.h.in: Changes to configure for Forte C
	  stuff also added a missing entry in acconfig.h for EFNET

2002-07-09 20:05  leeh

	* configure, doc/Makefile.in, doc/example.conf,
	  doc/example.efnet.conf, include/client.h, include/config.h:
	  - added a default efnet config submitted by Disciple.
	  - updated various places to reflect this
	  - added back #define TS5_ONLY

2002-07-09 16:49  leeh

	* src/hostmask.c:
	  - dont show spoofed auth {} during HIDE_SPOOF_IPS

2002-07-08 08:23  leeh

	* Hybrid-team, contrib/README:
	  - updated my nick and the README to include andros patch.

2002-07-07 20:10  androsyn

	* contrib/: README.disable_identd, disable_identd.diff: Patch to
	  disable identd requests

2002-07-07 06:30  leeh

	* contrib/m_jupe.c:
	  - make_client() adds the new client to unknown_list, so we must
	    search and remove it

2002-07-07 01:45  db

	* contrib/m_ltrace.c, modules/m_trace.c:
	  - m_ltrace.c was missing the previously global next_client_double()
	    I've simply cut and pasted that code. That should shut up that
	    error.
	  - m_trace.c I simply tidied up the prototype, no need to split it
	  into two lines.

2002-07-06 18:25  lusky

	* include/patchlevel.h:
	  - revved patchlevel to beta18

2002-07-06 18:20  leeh

	* modules/m_tb.c:
	  - bug in tburst, found by MoeBass

2002-07-06 16:14  leeh

	* BUGS, RELNOTES, contrib/lmh.diff, modules/m_kline.c:
	  - updated RELNOTES and BUGS
	  - fixed a truth val in m_kline.c
	  - updated my patch wrt the m_kline.c updates

2002-07-06 12:58  db

	* modules/m_kline.c, src/hostmask.c, src/kdparse.c:
	  - This fixes non-redundant dlines for IPV4 at least. The IPV6 dline
	    code is still incomplete. I also fixed a number of style problems.

2002-07-06 10:03  leeh

	* src/vchannel.c:
	  - we dont put ;'s on the end of if()s ;p

2002-07-06 07:15  leeh

	* BUGS:
	  - updated BUGS with the multiple dline bug.

2002-07-06 07:05  leeh

	* modules/m_ping.c:
	  - fixed ping for LL

2002-07-04 19:21  leeh

	* contrib/m_jupe.c:
	  - unused var.

2002-07-04 12:07  db

	* contrib/m_jupe.c:
	  - there is no way we are going to find a client struct we just
	    created on the unknowns list!

2002-07-04 12:07  androsyn

	* modules/core/m_sjoin.c: The second half of that goofy spaces in
	  SJOIN bug..

2002-07-04 09:32  androsyn

	* contrib/m_jupe.c: If the length of a servername goes over
	  hostlen, it surely is bogus.

2002-07-04 09:13  androsyn

	* contrib/m_jupe.c: This seems to fix the jupe issue..

2002-07-03 11:03  leeh

	* modules/m_who.c:
	  - fixed an issue with invisible users being shown in a /who output.
	    this whole code needs a rewrite, but.

2002-07-03 08:31  leeh

	* configure:
	  - retard proofing, it seems the concept of actually specifying a
	    param in --with-maxclients is beyond some people.

2002-07-02 19:58  db

	* modules/core/m_message.c:
	  - fixed off by one error in too many recipients code in m_message.c

2002-07-02 19:24  db

	* modules/core/m_message.c:
	  - fixed stupid bug I introduced with @# oops

2002-07-02 18:25  db

	* modules/core/m_message.c:
	  - fix redundant nick/message handling. duplicate nicks/messages
	    should simply be ignored. i.e. /msg #channel,#channel hi
	    results in "hi" to #channel
	  - fix so it properly reports too many targets.

2002-07-02 06:35  leeh

	* contrib/lmh.diff:
	  - use CASEMAP instead of CHARSET

2002-07-02 06:22  leeh

	* contrib/: README.LMH, lmh.diff:
	  - updated lmh.diff with andros USE_ASCII_CASEMAP

2002-06-29 00:34  db

	* include/client.h, modules/m_trace.c, modules/core/m_message.c,
	  src/client.c:
	  - in fixing m_privmsg.c I noticed a function it used was only used
	    by m_privmsg.c moved it from client.c into m_privmsg.c (I bad, I
	    couldn't help it) I also noticed a function used in m_trace.c only
	    used in m_trace.c, so moved that as well.

2002-06-28 14:48  db

	* modules/core/m_message.c:
	  - fixed other style problems, removed unnecessary casts

2002-06-28 14:18  db

	* modules/core/m_message.c, src/client.c, src/messages.tab:
	  - ERR_TOOMANYRECIPIENTS 407 reply was bogus we no longer give
	    actual number of recipients actually processed.
	  - Fixed a few style problems, and removed unnecessary casts

2002-06-27 11:16  leeh

	* include/config.h, src/client.c:
	  - well fix the QS stuff in 7.1 (agreed with andro)

2002-06-26 22:14  androsyn

	* src/client.c: Got the logic on that assert() backwards..how
	  embarrassing

2002-06-26 20:01  androsyn

	* src/client.c: Those should be source_p not client_p

2002-06-26 19:38  leeh

	* modules/: m_kline.c, m_unkline.c:
	  - synced these up to show the same

2002-06-26 18:01  androsyn

	* include/config.h, src/client.c: Minor little changes regarding
	  the value that we should use for pending remote exits

2002-06-26 17:35  leeh

	* src/client.c:
	  - exit 15000 clients at once if compiled for efnut.

2002-06-26 17:16  androsyn

	* src/client.c: Fixed the issue with quit storms making the server
	  completely unresponsive.  Basically what we do now is, add the
	  clients that need exited to a linked list then have an event that
	  will exit them 1500 at a time, rather than trying to exit say, 50000
	  clients at once.

2002-06-26 10:20  androsyn

	* src/client.c: Add some assert()'s to exit_client() and changed
	  the error message for abort_list clients from "Dead link" to "Write
	  error: connection closed"

2002-06-26 08:16  leeh

	* modules/m_unkline.c:
	  - consistency with hyb6 and /kline, only use sptr->name in the
	    notice, not n!u@h{o}

2002-06-25 23:05  androsyn

	* include/ircd.h, include/s_log.h, src/ircd.c, src/ircd_signal.c,
	  src/s_conf.c, src/s_log.c: Make ircd.log close and open itself on
	  rehash or SIGHUP.  Also clean up some formatting

2002-06-25 19:06  leeh

	* doc/: example.conf, example.conf.efnet, index.txt:
	  - doc updates

2002-06-24 18:06  leeh

	* modules/m_join.c:
	  - the juped channel notices wandered off.

2002-06-24 14:12  leeh

	* modules/core/m_server.c:
	  - exit the server that introduced the existing server to us always.

2002-06-24 00:28  db

	* src/s_serv.c:
	  - pure consistency in naming. use local_server_p to keep it obvious.

2002-06-23 19:02  leeh

	* src/send.c:
	  - removed a spurious IsClosing() that broke sending error messages
	    et al to the client.

2002-06-23 05:22  leeh

	* contrib/help/opers/rehash, help/opers/rehash:
	  - there is no rehash help (Hwy)

2002-06-22 18:39  db

	* src/s_serv.c:
	  - same bug was in add_lazylinkchannel() grrr

2002-06-22 17:23  db

	* src/s_serv.c:
	  - duh. make the comments agree with the arguments to the function.

2002-06-22 16:27  db

	* src/s_serv.c:
	  - add_lazylinkclient had the wrong assert. Its not a client in the
	    first arg, it should always be a locally connected leaf server.
	    Changed comments and parm names to make this clear, changed bogus
	    assert.

2002-06-20 22:33  lusky

	* include/patchlevel.h:
	  - revved patchlevel to beta17

2002-06-20 17:39  leeh

	* contrib/: README.LMH, lmh.diff:
	  - added true no oper flood to my diff.

2002-06-20 14:00  leeh

	* include/config.h, src/s_conf.c:
	  - dont allow spoof notices if HIDE_SPOOF_IPS.

2002-06-19 16:49  leeh

	* modules/m_trace.c:
	  - audited the IP stuff in relation to spoofing and /trace

2002-06-19 16:39  leeh

	* RELNOTES, modules/m_trace.c, src/parse.c:
	  - updated RELNOTES
	  - dont show an IP in /trace if HIDE_SPOOF_IPS.

2002-06-19 16:26  leeh

	* src/client.c:
	  - I think ive got this right, hide the IP for servers always if
	    defined hide it for spoofs only if SHOW_IP (HIDE_IP would give the
	  spoofed host)

2002-06-19 16:17  leeh

	* include/config.h, include/config.h.dist, src/client.c:
	  - I think I was on craq when I did the HIDE_SERVERS_IPS define.
	  fixed it.
	  - added HIDE_SPOOF_IPS, for efnut.
	  - fixed the dead link/sendq notice for servers

2002-06-18 15:15  leeh

	* README.PLATFORMS:
	  - update julifuq's contact info.

2002-06-18 13:34  androsyn

	* src/: channel.c, channel_mode.c: Fixed that stupid space showing
	  up in SJOINS

2002-06-18 13:25  androsyn

	* src/channel.c: Document the goofy mysterious SJOIN space

2002-06-18 09:54  leeh

	* contrib/lmh.diff:
	  - updated my diff to keep the ip hash table always, for pace
	  connect.

2002-06-17 08:32  leeh

	* src/tools.c:
	  - aaaaaand in tools.c

2002-06-16 22:57  db

	* src/s_bsd_devpoll.c: -missing include (reported by Wendy)

2002-06-16 22:54  db

	* include/tools.h: in tools.h we had: m->next = NULL; m->next =
	  list->head;

	  That was daft. (spotted by Lee, but we forgot to fix earlier)
	  removing the redundant assign might speed things up slightly.

2002-06-16 13:23  db

	* src/balloc.c:
	  - fixed a number of style problems. We want function names to begin
	    at first char.
	    we want to be consistent with if (foo) { oneline; } etc.
	    and we want to be consistent with return needing () or not.
	  - fixed bug with elemsize causing odd address SIGBUS failures esp.
	  on solaris.

2002-06-16 12:31  leeh

	* modules/.cvsignore, modules/.depend, modules/Makefile.in,
	  src/.depend, src/Makefile.in:
	  - patch via hwy:
	    Id is not needed in .depends, when you lose the dependency files
	    (from that .cvsignore) you'll have problems recreating them.

2002-06-16 10:55  leeh

	* configure:
	  - from hwy:
	    The enclosed patch fixes the detection of nanosleep(), when it's
	    non-existant, it'll actually enable select for the delay loop.

2002-06-15 19:07  leeh

	* include/config.h:
	  - define HIDE_SERVERS_IPS by default for efnut.

2002-06-15 09:09  leeh

	* modules/m_stats.c:
	  - hwys fix to correctly show oper/admin status on stats p.

2002-06-15 08:54  leeh

	* contrib/lmh.diff:
	  - patching in .orig files is bad
	  - added a kludge to install xline.conf, as diff doesnt want to add a
	    0 byte file.

2002-06-15 08:33  leeh

	* contrib/: README, README.LMH, lmh.diff, remote-unkline.diff,
	  temp-dline.diff:
	  - nuked my old patches, added my shiny new one along with a readme.

2002-06-15 03:35  androsyn

	* include/memory.h: Oops..I'll get this right :)

2002-06-15 03:30  androsyn

	* include/memory.h, src/memory.c: Added inline versions MyMalloc
	  and friends

2002-06-15 03:24  androsyn

	* src/memory.c: Silly kids, realloc returns a void * not a char *.

2002-06-15 03:19  androsyn

	* src/: fdlist.c, hook.c, hostmask.c, list.c, listener.c,
	  s_bsd_kqueue.c, s_conf.c: Remove a few unneeded memset()'s as
	  MyMalloc does this for us already.  Also cleaned up a few ugly
	  looking things.

2002-06-14 15:38  leeh

	* include/client.h:
	  - unused variable, splat.

2002-06-14 15:18  leeh

	* doc/: convertconf-example.conf, example.conf:
	  - doc updates, anonops isnt broken

2002-06-14 13:19  leeh

	* include/channel_mode.h, src/channel_mode.c:
	  - adxs patch to fix +a and numerous channel_mode.c bugs

	    as far as im aware, this fixes all of the problems with +a, but we
	    need more testing.

2002-06-12 15:29  db

	* src/: ircd_parser.y, s_conf.c:
	  - moved yy_aconf back into ircd-parser.y, its not needed in s_conf.c
	  at all

2002-06-12 14:57  androsyn

	* src/sprintf_irc.c: Make %lu spit out a 0 for 0 instead of
	  000000000

2002-06-11 21:40  androsyn

	* src/s_user.c: Revert that last change..i'm not thinking :P

2002-06-11 20:53  androsyn

	* src/s_user.c: Make that not so ugly

2002-06-11 17:37  leeh

	* src/s_user.c:
	  - aaaaand to unidented clients too.  this is slightly unoptimal,
	  but.

2002-06-11 16:29  leeh

	* src/s_auth.c:
	  - auth tweaks.  strip *all* ['s
	    strip ~ and ^ from the beginning of the ident

2002-06-10 21:49  androsyn

	* contrib/m_clearchan.c, contrib/m_force.c, contrib/m_ojoin.c,
	  modules/m_tb.c, include/channel.h, src/channel.c: Fix contrib
	  related topic things

2002-06-10 21:42  androsyn

	* src/channel.c: Don't bother to free the topic if its not set

2002-06-10 21:41  androsyn

	* src/channel.c: Free the topic if we are destroying the channel

2002-06-10 21:39  androsyn

	* modules/m_tb.c, include/channel.h, modules/m_topic.c,
	  src/channel.c: More of the topic changes

2002-06-10 21:02  androsyn

	* include/channel.h, include/config.h, modules/m_join.c,
	  modules/m_list.c, modules/m_topic.c, src/channel.c, src/s_serv.c:
	  Allocate topics from the block heap instead of being part of struct
	  Channel

2002-06-10 20:55  androsyn

	* src/s_user.c: Missed a random_ping

2002-06-10 20:00  androsyn

	* include/client.h, modules/m_pong.c, src/s_user.c: Move
	  random_ping into struct LocalUser where it belongs

2002-06-10 19:56  androsyn

	* include/balloc.h, src/balloc.c: Remove an unnecessary member of
	  struct MemBlock

2002-06-09 08:03  leeh

	* contrib/: README, temp-dline.diff:
	  - updates to my temp-dline patch, itll now split tdlines/tklines
	    into four lists, those to check every minute, hour, day, week -
	    which should make them more efficient and help to cope with the
	    demand for longer tklines.

2002-06-08 20:22  androsyn

	* src/client.c: We shouldn't call  remove_dependents if
	  source_p->serv == NULL, why source_p->serv == NULL i'm not sure

2002-06-07 19:38  leeh

	* src/s_serv.c:
	  - move the sendto_realops_flags() down till after the server is made
	    so the IO doesnt trigger an exit for a server that doesnt have a
	    cptr->serv yet.

2002-06-07 19:37  androsyn

	* src/client.c: We could potentially add a client twice to the
	  abort_list

2002-06-07 19:13  leeh

	* contrib/m_force.c:
	  - err, forcejoin fixes.. cant remember what tho.

2002-06-07 17:59  androsyn

	* src/hash.c: Remove a very hideous ugly stupid hack

2002-06-07 10:22  leeh

	* contrib/m_force.c:
	  - diff by adx for forcepart param thingy

2002-06-06 15:28  leeh

	* include/whowas.h:
	  - removed a duplicated id for scuzzy.

2002-06-05 09:49  leeh

	* doc/: example.conf, example.conf.efnet:
	  - doc update, compressed is disabled by default.

2002-06-04 01:30  androsyn

	* src/: ircd.c, modules.c: Set a default path for modules.  Also do
	  not allow the user to specify a particular pathname of a module to
	  load.  They should only be allowed to load modules in the search
	  path.  Also reject things with ".." in them.

2002-06-04 00:33  androsyn

	* include/hostmask.h: Add a newline to the end of the file to make
	  recent versions of gcc shut up.

2002-06-03 15:24  androsyn

	* src/adns.c: Minor adns fixes.

2002-06-03 14:54  androsyn

	* src/adns.c: Doh..left the TCP resolver turned on.

2002-06-03 12:04  leeh

	* contrib/: m_force.c, temp-dline.diff:
	  - more contrib updates.

2002-06-03 11:42  leeh

	* contrib/: m_force.c, m_ojoin.c:
	  - updates.

2002-06-03 08:15  leeh

	* modules/Makefile.in, servlink/Makefile.in, src/Makefile.in,
	  tools/Makefile.in:
	  - hwys lint fixes

2002-06-02 19:23  lusky

	* include/patchlevel.h: revved patchlevel to b16

2002-06-02 15:38  leeh

	* doc/technical/ts5.txt:
	  - added ts5 doc, typed in a very very scary looking log prompt..

2002-06-02 10:08  leeh

	* contrib/m_force.c:
	  - hunt_server returns an int (!= HUNTED_ISME)

2002-06-01 17:58  androsyn

	* RELNOTES: Updated RELNOTES again

2002-06-01 17:56  androsyn

	* BUGS: Remove the TCP resolver bug from the list as I fixed it
	  last night

2002-06-01 17:49  androsyn

	* include/tools.h, src/tools.c: Inline versions of the dlink
	  functions

2002-06-01 14:47  db

	* contrib/m_ojoin.c:
	  - fixed minor bug in m_ojoin.c
	    patch by adx

2002-06-01 01:28  androsyn

	* src/adns.c: Fixed the adns tcp resolver.

2002-05-31 22:32  androsyn

	* contrib/m_force.c: Scuzzy's modifications to allow the forcing of
	  a user into a new channel.  Also adds support for remote forcing.

2002-05-31 00:49  androsyn

	* src/s_serv.c: Doh..another one..

2002-05-31 00:44  androsyn

	* src/s_user.c: Fixed some inverted if() statements

2002-05-31 00:16  androsyn

	* contrib/m_ojoin.c: Fix from scuzzy to make ojoin send the topic
	  to the joining user.

2002-05-30 22:59  androsyn

	* modules/core/m_nick.c: Add a non-assert failure check

2002-05-30 22:21  androsyn

	* src/: client.c, hash.c, irc_string.c, linebuf.c, listener.c,
	  match.c, packet.c, parse.c, s_auth.c, s_bsd.c, s_conf.c,
	  s_gline.c, s_log.c, s_serv.c, s_user.c, vchannel.c, whowas.c: The
	  rest of the non-assert failure checks..

2002-05-30 21:35  androsyn

	* src/fileio.c: More non assert failure cleanups..

2002-05-30 21:29  androsyn

	* src/fdlist.c: Remove a pointless assert()

2002-05-30 20:36  androsyn

	* src/client.c: Same story as before..add non-assert failure
	  checks..

2002-05-30 20:32  androsyn

	* src/channel.c: Add non-assert failure code..

2002-05-30 20:29  androsyn

	* src/balloc.c: Added some non-assert failure code

2002-05-30 20:25  androsyn

	* src/adns.c: Added some failure code in the case of non debug
	  compiles

2002-05-30 20:22  androsyn

	* src/s_serv.c: If a you are trying to register a server and its
	  not on the unknown list something very bad has happened.  assert()
	  if debugging..exit the client otherwise

2002-05-30 20:12  androsyn

	* src/s_serv.c: Changed "Lost C-Line" to "Lost connect{} block" as
	  we don't have C lines anymore...

2002-05-30 20:08  androsyn

	* src/packet.c: Macros is your friend

2002-05-30 19:55  androsyn

	* src/client.c: Don't send QUIT to remote servers for unregistered
	  clients

2002-05-30 16:13  leeh

	* src/client.c:
	  - fix for the idle client bug found by scuzzy <scuzzy@aniverse.net>

	    I *think* this is the right fix, but my server decided the idlelimit
	    wasnt worth bothering with anymore anyway.

2002-05-29 12:13  db

	* src/balloc.c:
	  - fixed goof spotted by Jusuf

2002-05-27 18:48  leeh

	* contrib/: vms_lex_yy.c, vms_y_tab.c, vms_y_tab.h:
	  - removed for larne

2002-05-27 08:14  leeh

	* doc/example.conf.efnet, src/ircd_parser.y:
	  - removed the havent_read_conf from efnets example config, we know
	    theyre not gunna read the conf anyway and thisll just make it worse
	  - dont enable compressed links by default, only when someone sets
	    compressed=yes;

2002-05-26 18:49  leeh

	* contrib/remote-unkline.diff:
	  - working remote unkline patch

2002-05-26 03:11  androsyn

	* src/send.c: That was an ugly bit of code..

2002-05-26 02:17  androsyn

	* RELNOTES: Yet another test commit

2002-05-26 02:15  androsyn

	* RELNOTES: Test commit..

2002-05-25 05:05  androsyn

	* src/s_bsd_sigio.c: Added a missing mask_our_signal()

2002-05-25 05:00  androsyn

	* src/: ircd_signal.c, s_bsd_sigio.c: Minor cleanups to RT Sigio

2002-05-24 23:06  androsyn

	* src/: linebuf.c, send.c, packet.c: Change a few write() and
	  read() calls to send() and recv()

2002-05-24 21:55  androsyn

	* src/ircd_lexer.l: Replace index() with strchr()

2002-05-24 21:42  androsyn

	* src/s_bsd_select.c: bcopy() people still use bcopy()?!?  Replaced
	  those with memcpy()

2002-05-24 21:38  androsyn

	* include/modules.h: Added missing prototypes..

2002-05-24 21:35  androsyn

	* src/md5.c: Seed with something a bit more useful than pids

2002-05-24 21:24  androsyn

	* src/balloc.c: Fix the non mmap() case of the block allocator

2002-05-24 21:22  androsyn

	* src/: event.c, ircd.c, s_user.c: Change srandom/random to
	  srand/rand which is a little more common

2002-05-24 19:48  androsyn

	* contrib/Makefile.in, contrib/example_module.c,
	  contrib/m_clearchan.c, contrib/m_flags.c, contrib/m_force.c,
	  contrib/m_jupe.c, contrib/m_ltrace.c, contrib/m_mkpasswd.c,
	  contrib/m_ojoin.c, contrib/m_opme.c, contrib/spy_admin_notice.c,
	  contrib/spy_info_notice.c, contrib/spy_links_notice.c,
	  contrib/spy_motd_notice.c, contrib/spy_stats_notice.c,
	  contrib/spy_stats_p_notice.c, contrib/spy_trace_notice.c,
	  contrib/spy_whois_notice.c, modules/m_map.c, modules/m_tb.c:
	  Update contrib for the header changes and update .depend as well

2002-05-24 19:40  androsyn

	* modules/.depend, src/.depend: Update .depend

2002-05-24 19:39  androsyn

	* include/stdinc.h: Add stdinc.h

2002-05-24 19:34  androsyn

	* include/balloc.h, include/channel.h, include/channel_mode.h,
	  include/client.h, include/event.h, include/fdlist.h,
	  include/fileio.h, include/hash.h, include/hostmask.h,
	  include/irc_string.h, include/ircd.h, include/ircd_defs.h,
	  include/ircd_getopt.h, include/linebuf.h, include/listener.h,
	  include/m_info.h, include/memory.h, include/modules.h,
	  include/motd.h, include/msg.h, include/numeric.h,
	  include/packet.h, include/res.h, include/resv.h, include/rsa.h,
	  include/s_auth.h, include/s_bsd.h, include/s_conf.h,
	  include/s_debug.h, include/s_gline.h, include/s_misc.h,
	  include/s_serv.h, include/s_stats.h, include/s_user.h,
	  include/s_zip.h, include/send.h, include/sprintf_irc.h,
	  include/vchannel.h, include/whowas.h, modules/Makefile.in,
	  modules/m_accept.c, modules/m_admin.c, modules/m_away.c,
	  modules/m_capab.c, modules/m_cburst.c, modules/m_challenge.c,
	  modules/m_cjoin.c, modules/m_close.c, modules/m_connect.c,
	  modules/m_cryptlink.c, modules/m_dmem.c, modules/m_drop.c,
	  modules/m_eob.c, modules/m_gline.c, modules/m_help.c,
	  modules/m_info.c, modules/m_invite.c, modules/m_ison.c,
	  modules/m_join.c, modules/m_kline.c, modules/m_knock.c,
	  modules/m_links.c, modules/m_list.c, modules/m_lljoin.c,
	  modules/m_llnick.c, modules/m_locops.c, modules/m_lusers.c,
	  modules/m_motd.c, modules/m_names.c, modules/m_nburst.c,
	  modules/m_oper.c, modules/m_operwall.c, modules/m_pass.c,
	  modules/m_ping.c, modules/m_pong.c, modules/m_post.c,
	  modules/m_rehash.c, modules/m_restart.c, modules/m_resv.c,
	  modules/m_set.c, modules/m_stats.c, modules/m_svinfo.c,
	  modules/m_testline.c, modules/m_time.c, modules/m_topic.c,
	  modules/m_trace.c, modules/m_unkline.c, modules/m_user.c,
	  modules/m_userhost.c, modules/m_users.c, modules/m_version.c,
	  modules/m_wallops.c, modules/m_who.c, modules/m_whois.c,
	  modules/m_whowas.c, modules/core/m_die.c, modules/core/m_kick.c,
	  modules/core/m_kill.c, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/core/m_nick.c,
	  modules/core/m_part.c, modules/core/m_quit.c,
	  modules/core/m_server.c, modules/core/m_sjoin.c,
	  modules/core/m_squit.c, src/Makefile.in, src/adns.c,
	  src/balloc.c, src/channel.c, src/channel_mode.c, src/class.c,
	  src/client.c, src/crypt.c, src/dynlink.c, src/event.c,
	  src/fdlist.c, src/fileio.c, src/getopt.c, src/hash.c, src/hook.c,
	  src/hostmask.c, src/irc_string.c, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/ircd_signal.c, src/ircdauth.c,
	  src/kdparse.c, src/linebuf.c, src/list.c, src/listener.c,
	  src/m_error.c, src/match.c, src/md5.c, src/memory.c,
	  src/modules.c, src/motd.c, src/numeric.c, src/packet.c,
	  src/parse.c, src/restart.c, src/resv.c, src/rsa.c, src/s_auth.c,
	  src/s_bsd.c, src/s_bsd_devpoll.c, src/s_bsd_kqueue.c,
	  src/s_bsd_poll.c, src/s_bsd_select.c, src/s_bsd_sigio.c,
	  src/s_conf.c, src/s_debug.c, src/s_gline.c, src/s_log.c,
	  src/s_misc.c, src/s_serv.c, src/s_stats.c, src/s_user.c,
	  src/scache.c, src/send.c, src/snprintf.c, src/sprintf_irc.c,
	  src/tools.c, src/vchannel.c, src/whowas.c: Cleaned up the
	  includes a *lot*.  System level includes are(mostly) going in
	  include/stdinc.h

2002-05-24 07:23  db

	* src/: client.c, s_bsd.c: <adx> first, we don't need to send
	  queued data at the beginning of +exit_client, because it's going to
	  be sent in close_connection..  <adx> second, setting a client as
	  dead before calling close_connection is not +a good idea <adx>
	  because then he/she won't receive a Closing Link message <adx>
	  client is set as dead in exit_one_client anyway..  <adx> there is
	  also sth in s_bsd.c, we're setting client as dead but it is +done by
	  exit_client too

	  - approved db

2002-05-23 22:39  androsyn

	* modules/m_post.c, src/modules.c: Add PUT and GET to m_post

2002-05-23 20:31  leeh

	* modules/m_cjoin.c:
	  - better fix

2002-05-23 20:28  androsyn

	* modules/m_cjoin.c: /me beats lee over the head with a #endif

2002-05-23 18:20  leeh

	* Hybrid-team, include/packet.h, modules/descrip.mms,
	  modules/m_cjoin.c, modules/m_kline.c, src/descrip.mms,
	  src/modules.c:
	  - larnes vms fixes
	  - made flood prot a little less anal

2002-05-23 12:52  leeh

	* include/setup.h_vms, src/s_debug.c:
	  - fixes for memory count
	  - vms fixes for larne

2002-05-22 09:52  leeh

	* RELNOTES, src/client.c, src/messages.tab:
	  - relnotes updates
	  - misplaced : in messages.tab
	  - an extern shouldnt really be static.. should it?

2002-05-20 19:07  androsyn

	* include/client.h, include/ircd.h, include/send.h, src/client.c,
	  src/packet.c, src/send.c: Okay..the abort_list is back.  Someday
	  we will fix this properly *sigh*

2002-05-20 13:53  androsyn

	* include/channel.h, src/channel.c, src/send.c: Don't attempt to
	  send to channels you just freed..dumbass

2002-05-20 13:28  androsyn

	* src/send.c: Another sanity check

2002-05-20 13:11  androsyn

	* src/send.c: Add another NULL dlink head check

2002-05-20 12:41  androsyn

	* include/client.h, include/ircd.h, include/send.h, src/client.c,
	  src/packet.c, src/send.c: Remove the abort_list, it was the wrong
	  fix.  Basically what we do now is, remove the user from the channel
	  *before* we send the QUIT message to it.  This new function is
	  called sendto_remove_channels_local().  This function does this,
	  also it checks to make sure that while doing the for() loop,
	  list->head doesn't end up NULL.

2002-05-19 20:26  androsyn

	* src/client.c: Add a sanity check.

2002-05-19 20:22  androsyn

	* src/client.c: Don't add clients with IsClosing set to the
	  abort_list

2002-05-18 23:42  androsyn

	* src/: client.c, ircd.c: Put the stupid dead_list back..damnit

2002-05-18 19:38  androsyn

	* RELNOTES: Updated RELNOTES

2002-05-18 19:36  androsyn

	* RELNOTES: Updated RELNOTES for the upcoming beta16

2002-05-18 17:50  androsyn

	* src/s_auth.c: Make unlink_auth_request use dlinkFind()

2002-05-18 16:58  androsyn

	* src/client.c: Remove a stray prototype

2002-05-18 16:53  androsyn

	* include/client.h, src/client.c, src/ircd.c: Remove the dead_list

2002-05-18 03:12  androsyn

	* include/client.h, include/ircd.h, src/client.c, src/ircd.c,
	  src/packet.c, src/send.c: This *really* fixes the problem of
	  clients getting freed more than once.

2002-05-18 01:42  androsyn

	* src/listener.c: Removed bogus warning..

2002-05-17 14:58  db

	* src/send.c: ptr->next should be ptr_next one never knows when a
	  client will go dead underneath us in a send

2002-05-17 14:09  db

	* src/send.c:
	  - Don't trust a pointer that can change underneath us

2002-05-17 12:08  androsyn

	* src/client.c: Removed a few of now redudant mem_frob()'s

2002-05-17 12:07  androsyn

	* include/tools.h, src/balloc.c: Adds a mem_frob() into
	  BlockHeapFree()

2002-05-16 15:38  leeh

	* contrib/m_opme.c:
	  - *cough*cough* that was a locptr, in my head..

2002-05-16 15:14  leeh

	* contrib/m_clearchan.c, contrib/m_force.c, contrib/m_ojoin.c,
	  contrib/m_opme.c, modules/core/m_kick.c, src/channel_mode.c:
	  - fixed a bug in channel_mode.c where to_list instead of loc_to_list
	    was being checked.
	  - contrib module fixes for #ifdef HALFOPS/VCHANS
	  - unused variable in m_kick.c with #undef VCHANS

2002-05-16 10:45  androsyn

	* src/balloc.c: Minor changes to the block heap.

2002-05-16 09:57  androsyn

	* src/balloc.c: This should make the failure case of
	  BlockHeapAlloc() a bit more robust.  If we end up with an out of
	  memory condition, we attempt to garbage collect the heap and see if
	  that frees anything.

2002-05-16 06:18  androsyn

	* src/client.c: Oops..had the logic backwards...

2002-05-16 06:15  androsyn

	* src/channel.c: Go awayy stupid #endif

2002-05-16 02:17  androsyn

	* src/client.c: Don't do send_queued_write() if the connection is
	  dead.

2002-05-16 01:53  androsyn

	* src/channel.c: Fixed a bug where we would not fully take care of
	  removing a user from a channel.  Also added an assert if the
	  usercount in a channel goes below 0 in sub1_from_channel

2002-05-14 07:41  leeh

	* include/channel.h, include/vchannel.h, modules/m_cjoin.c,
	  modules/m_invite.c, modules/m_join.c, modules/m_knock.c,
	  modules/m_list.c, modules/m_lljoin.c, modules/m_names.c,
	  modules/m_topic.c, modules/m_who.c, modules/m_whois.c,
	  modules/core/m_kick.c, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/core/m_part.c,
	  modules/core/m_sjoin.c, src/channel.c, src/ircd_parser.y,
	  src/s_serv.c, src/vchannel.c:
	  - put vchans under #ifdef VCHANS

2002-05-13 19:34  leeh

	* src/channel_mode.c:
	  - splitting if()'s up is BAD.

	    hotfuq as punishment..?

2002-05-13 00:21  androsyn

	* src/client.c: Some more cleanups...

2002-05-13 00:04  androsyn

	* src/client.c: Added SetDead() to exit_one_client() maybe this
	  will fix this goofy thing

2002-05-12 17:37  leeh

	* doc/example.conf.efnet, modules/core/m_sjoin.c:
	  - yes! align bits of code where I cant see them!
	  - removed the crap from efnets example config that they wont use

2002-05-12 12:43  leeh

	* src/channel.c:
	  - better channel_member_names for #undef ANONOPS

2002-05-12 10:50  leeh

	* include/channel.h, include/channel_mode.h, modules/m_who.c,
	  modules/core/m_kick.c, modules/core/m_sjoin.c, src/channel.c,
	  src/channel_mode.c, src/ircd_parser.y, src/s_serv.c,
	  src/vchannel.c:
	  - adxs fix for an inverted if() in ircd_parser.y
	  - bigger and badder HALFOPS and ANONOPS fixes, run children, run for
	    your lives*!&(!

2002-05-12 08:28  leeh

	* include/channel.h:
	  - and ve call zis, an invisdible function.

2002-05-12 08:15  leeh

	* README.PLATFORMS, include/channel_mode.h, include/config.h,
	  include/config.h.dist, src/channel_mode.c, src/ircd_parser.y,
	  src/s_conf.c, src/s_debug.c, src/send.c:
	  - updated README.PLATFORMS for NEXTSTEP
	  - added defines for ANONOPS and HALFOPS which will comment out most
	    of the actual code.  #ifdef EFNET will #undef these

	    ill do vchans later.

2002-05-11 17:53  leeh

	* configure:
	  - rebuilt configure, cheers hwy

2002-05-11 17:07  leeh

	* include/setup.h.in:
	  - fixes.  can somebody please rebuild configure with autoconf2.1x?

2002-05-11 13:23  lusky

	* include/patchlevel.h:
	  - rev patchlevel to beta15

2002-05-10 15:24  leeh

	* modules/core/m_server.c:
	  - commented out the remote squitting of the newly introduced server,
	    this wont work at all on large networks without causing havoc.

	  Approved by:	db

2002-05-09 07:06  leeh

	* contrib/temp-dline.diff:
	  - max tdlines at 7days, same as hyb6 patch

2002-05-09 06:06  leeh

	* contrib/m_opme.c:
	  - reusing ptrs is bad.  silly fl_

2002-05-08 10:40  leeh

	* contrib/m_opme.c:
	  - missing +ov stuff, missing local list stuff

2002-05-08 08:19  leeh

	* contrib/: README, temp-dline.diff:
	  - added my temp dline patch to contrib/

2002-05-07 22:54  androsyn

	* src/: getopt.c, ircd.c: Remove some remains of DEBUGMODE

2002-05-07 08:50  leeh

	* modules/m_challenge.c:
	  - move the IsOper check up, and make it send omotd

2002-05-07 08:26  db

	* modules/m_challenge.c: Hi,

	      The attached diff fixes a bug in the challenge command that will let
	  you oper more than once using PK authentication: submitted by "wiz",
	  Jason Dambrosio

	  approved db

2002-05-06 01:48  androsyn

	* src/s_bsd_sigio.c: Add some logging about RT signal queue
	  overflows.  It might be useful for this to get noticed by the admin.

2002-05-02 12:58  leeh

	* doc/: example.conf, example.conf.efnet, kline.txt, whats-new.txt:
	  - misc documentation fixes and updates

2002-05-01 13:23  leeh

	* doc/example.conf, doc/example.conf.efnet, src/channel_mode.c,
	  src/s_conf.c:
	  - added back code that makes restricted do something
	  - fixed errors in the config (hi larne!)

2002-05-01 12:36  leeh

	* doc/convertconf-example.conf, doc/example.conf,
	  doc/example.conf.efnet, tools/convertconf.c:
	  - rewrote nearly all of the config.  ugh.  its still horribly
	    horribly long tho.. altho I shaved about 200 lines off.
	  - added a '-b' (basic) option to convertconf that wont pull in the
	    other blocks.
	  - DAMNATION TO THE BRITISH.

2002-04-30 13:43  leeh

	* src/channel_mode.c:
	  - when +eI are disabled, send RPL_ENDOF(EXCEPT|INVITE)LIST so a
	    client doesnt stall.

2002-04-30 13:21  leeh

	* doc/convertconf-example.conf, doc/example.conf,
	  doc/example.conf.efnet, src/packet.c:
	  - fixed a > that shouldve been >=
	  - added back flood control for opers.  will allow a burst of 16
	    lines, then 2 per second afterward.

2002-04-30 11:17  leeh

	* modules/core/m_sjoin.c:
	  - removed the nick chase crap from sjoin
	  - better fake direction tracking

2002-04-30 10:29  leeh

	* src/ircd_parser.y:
	  - added code for silly people who dont know that cryptlinks need rsa
	    keys, and normal confs need passwords :P

2002-04-30 08:45  leeh

	* tools/: README, convertilines.c:
	  - added a license and updated readme

2002-04-30 07:35  leeh

	* src/ircd_parser.y:
	  - missing "r"

2002-04-30 06:46  leeh

	* src/ircd_parser.y:
	  - dont allow vhost="" in the connect {}; not when it sets aftype.
	  - when we handle RSA stuff in oper {};, do it in yy_achead, then
	    copy it to the other confs for multi user="".

2002-04-29 19:57  leeh

	* doc/: example.conf, example.conf.efnet:
	  - we dont negotiate ciphers anymore.

2002-04-29 19:05  leeh

	* doc/: example.conf, example.conf.efnet:
	  - added a warning that example.conf is not for efnet.
	  - added a warning that example.conf.efnet is not for people other
	    than efnet.
	  - removed efnet references in example.conf

2002-04-29 18:30  leeh

	* include/Makefile.in:
	  - larnes makefile fix.

2002-04-29 18:12  androsyn

	* configure, include/setup.h.in: Rebuilt configure with autoconf
	  2.13

2002-04-29 15:59  leeh

	* include/hostmask.h:
	  - a 25 line single space indented struct with no linebreaks doesnt
	    follow the normal coding style of ircd-hybrid.

2002-04-29 12:58  leeh

	* modules/: m_operwall.c, m_wallops.c, core/m_message.c:
	  - notice opers@server returned to hyb6 methods
	  - prefix both a wallops/operwall done by an oper with "OPERWALL -",
	    differentiating is pointless.

2002-04-28 12:47  leeh

	* src/messages.tab:
	  - shifted a %d so its a parameter

2002-04-28 12:38  leeh

	* include/supported.h:
	  - CASEMAPPING or CHARSET?  who cares, send both.

2002-04-28 09:03  leeh

	* configure:
	  - set nicklen to (n+1) so nicklen*2 works.
	    reported by adx

2002-04-28 04:14  androsyn

	* src/s_conf.c: Fixed a potential NULL dereference in the DNS
	  handling code...

2002-04-27 21:29  leeh

	* src/resv.c:
	  - removed an unneeded +len in MyMalloc()

2002-04-27 20:50  androsyn

	* configure: Fix the nanosleep check..

2002-04-27 20:26  leeh

	* README.FIRST, README.PLATFORMS, RELNOTES, modules/m_stats.c,
	  src/s_serv.c: Fix for GCC on SPARC compiling in 32-bit mode.  The
	  solution is to not let GCC move things from the structure pointers
	  in to a register, it apparently is too broken to figure out how to
	  do this properly.  Instead, memcpy the structure to a local one on
	  the stack, and use it.

	  The GCC people were given a bug report on this and did nothing.
	  Considering the popularity of the SPARC platform, some shame should
	  go around that a lowly IRCD coder had to spend some months trying to
	  work around this, and that despite a bug report, the GCC people
	  did/said nothing.

	  Anyway, this now makes ircd-hybrid-7 work on SPARC systems with GCC.
	  Great!

	  Submitted by:	virtual jmallett vDD (with superhotfuq support)
	  Reviewed by:	db/leeh

2002-04-27 19:55  leeh

	* RELNOTES:
	  - we now have flood control

2002-04-27 16:36  db

	* src/: client.c, packet.c:
	  - ripped out #if 0 code. it looks horrible, and we have copies in
	  cvs repo anyway.

2002-04-27 16:34  leeh

	* src/channel_mode.c:
	  - dont allow users to set unlimited +/-h modes.  if they want to set
	    them, they can abide MAXMODEPARAMS and the flood protection.

	  Approved by:	virtual dianora v2.1

2002-04-27 13:59  leeh

	* include/packet.h, modules/m_away.c, modules/m_topic.c,
	  modules/core/m_message.c, modules/core/m_mode.c,
	  modules/core/m_nick.c, modules/core/m_part.c, src/packet.c,
	  src/s_auth.c, src/s_user.c:
	  - flood code.

2002-04-27 08:20  leeh

	* doc/vchans.txt:
	  - brought the vchan doc up to date with how they currently work.

2002-04-27 05:30  leeh

	* contrib/m_jupe.c, doc/whats-new.txt, include/supported.h:
	  - added the 'CALLERID' token to 005, for +g, as agreed with austhex
	    developers
	  - idiot proofing, dont allow people to jupe their own server.

2002-04-26 11:27  leeh

	* modules/core/m_nick.c, src/parse.c:
	  - added an ID collision check, which nukes both clients.
	  - ignore ERR_UNKNOWNNICK directed at us from servers.  until we can
	    guarantee both servers will do the "right thing" on a nick
	    collision, we have to kill both clients, ours and theirs.
	    unfortunately if BOTH servers do this, we get ERR_UNKNOWNNICK.

	    ugh.

2002-04-26 09:26  leeh

	* contrib/: README, remote-unkline.diff:
	  - added a patch to give support for remote-unklines.  too late to go
	    in src/, so here it is.

2002-04-26 08:30  leeh

	* src/m_error.c:
	  - only call exit_client() if MyClient(), else you have the situation
	    where if you get a command from a remote server we dont know, we
	    exit the client, the other server doesnt, and you get a desync.

2002-04-26 07:51  leeh

	* modules/m_kline.c:
	  - remote servers cant set klines, we need to be checking
	    !MyClient(), not IsServer().

2002-04-26 06:52  leeh

	* modules/core/m_sjoin.c:
	  - added back the notices for TS change in SJOIN that ran away from
	  home.

2002-04-25 20:47  leeh

	* RELNOTES:
	  - brought relnotes upto date

2002-04-25 15:37  leeh

	* modules/core/m_sjoin.c:
	  - only allow +a in sjoin if enabled.

2002-04-25 13:57  leeh

	* modules/m_info.c:
	  - and /info..

2002-04-25 13:55  leeh

	* doc/convertconf-example.conf:
	  - add it to the example conf convertconf uses too

2002-04-25 13:53  leeh

	* doc/example.conf, doc/example.conf.efnet, include/s_conf.h,
	  src/channel_mode.c, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c:
	  - changed the sendto_realops_flags() when +h has changed status to
	    an ilog(), we dont want this *every* time we unkline something, ugh.
	  - added use_anonops, disabled by default with comments reflecting
	    theyre slightly broken.
	  - made the use_invex/halfops/anonops/except actually ignore the
	    modes from local users if theyre unset (duh!)

2002-04-25 12:25  leeh

	* contrib/m_clearchan.c:
	  - incrementing sptr->user->joined then calling add_user_to_channel
	    which also increments it isnt exactly a good idea

2002-04-25 05:38  leeh

	* src/client.c:
	  - ints need a return number..

2002-04-25 04:54  leeh

	* src/client.c:
	  - a1kmms fix for the core

2002-04-23 10:26  leeh

	* include/defaults.h, include/ircd.h, modules/m_set.c, src/ircd.c,
	  src/s_auth.c:
	  - commited my/joans ident stuff

	  Approved by:	diane

2002-04-23 10:25  leeh

	* contrib/: README, spy_admin_notice.c, spy_info_notice.c,
	  spy_links_notice.c, spy_motd_notice.c:
	  - updated README wrt ltrace
	  - removed some bogus MyConnect(source_p)

2002-04-23 06:34  leeh

	* contrib/: Makefile.in, m_ltrace.c, spy_trace_notice.c:
	  - added a very cutdown version of ltrace, modded spy_trace_notice to
	    watch for ltrace too.

2002-04-22 18:16  leeh

	* src/s_conf.c:
	  - english spellings vs american spellings.. made them all the same

2002-04-22 16:50  leeh

	* src/: channel.c, channel_mode.c:
	  - fixed two bugs reported by ShadowDog <esast@shadow.no>
	    - an +ov user being sent +nick on a +a channel
	    - server 'resynced' an opped users +v mode on +a channel, they can
	      already see it as theyre opped.

2002-04-22 13:26  leeh

	* src/channel_mode.c:
	  - re-enabled mode counting for +v
	  - moved the post increments to pre increments, to bring the limit
	    back down to MAXMODEPARAMS
	  - took a couple of magic numbers out back and shot them.

2002-04-21 13:18  androsyn

	* RELNOTES: Test

2002-04-21 08:59  leeh

	* contrib/help/opers/knock, help/opers/knock:
	  - s/+s/+p for when you cant knock

2002-04-20 13:47  leeh

	* include/channel.h:
	  - redefine REQUIRE_OANDV

2002-04-20 13:47  leeh

	* src/channel.c:
	  - add @+users to chptr->chanops when #ifndef REQUIRE_OANDV

2002-04-20 13:33  leeh

	* include/channel.h, modules/m_who.c, modules/core/m_sjoin.c:
	  - wrapped some +ov stuff in #ifdef's.
	  - removed chptr->ts_winner

2002-04-19 12:21  leeh

	* include/channel.h, modules/core/m_nick.c:
	  - wrapped chanops_voiced list in an #ifdef
	  - mark grace period complete on nickchange

2002-04-18 15:11  leeh

	* modules/m_who.c:
	  - dont allow people to use /who <server> when serverhide is enabled.

2002-04-18 12:12  db

	* contrib/m_clearchan.c, src/channel.c: Two patches sent in by adx
	  - clear +ov members in channel.c
	  - use block heap free in m_clearchan.c

	  approved db

2002-04-18 09:15  leeh

	* modules/core/m_mode.c:
	  - only call SetFloodDone() when a client sets a mode in a channel,
	    not when they set a usermode/query a channels mode

2002-04-16 22:25  leeh

	* modules/m_tb.c, doc/modes.txt, include/channel_mode.h,
	  modules/m_invite.c:
	  - documented in modes.txt that +p also restricts halfops +/-h'ing
	  - I commited some debugging stuff to m_tburst.c, removed
	  - added macro ParanoidChannel, checks +pi, not just +p
	  - made invite use above macro.
	  - biscuits.

2002-04-16 21:02  leeh

	* modules/m_tb.c, include/channel.h, include/ircd_defs.h,
	  src/channel_mode.c:
	  - added a strcmp() to tburst, to take account of deltas
	  - bumped KEYLEN to 24 (23+1), resolving the problem with the
	    strlcpy() only copying 22 chars
	  - send chptr->mode.key out (the truncated key) instead of key
	    (what was sent in the mode)

2002-04-16 20:05  leeh

	* include/irc_string.h, src/ircd_parser.y, src/match.c,
	  src/s_conf.c:
	  - duplicated match() into match_esc() and collapse() into
	  collapse_esc()
	  - removed escaping from match() and collapse()
	  - run collapse_esc() before we add a gecos {};
	  - make gecos {}; use match_esc()

2002-04-15 18:51  leeh

	* RELNOTES:
	  - updated RELNOTES

2002-04-15 12:31  leeh

	* src/client.c:
	  - mistook an ifdef for an ifndef

2002-04-15 10:16  db

	* doc/serverhide.txt:
	  - updated serverhide.txt as amended by Wendy approved db

2002-04-15 02:13  db

	* modules/m_tb.c: speeeeeeeeeelllllliiiinnnnnggggggggg

2002-04-14 21:14  leeh

	* src/: client.c, s_bsd.c:
	  - my attempt at the ctrlfd core fix

2002-04-14 20:05  leeh

	* modules/m_post.c, modules/m_resv.c, src/event.c, src/hook.c,
	  src/linebuf.c, src/resv.c, src/s_bsd_devpoll.c,
	  src/s_bsd_kqueue.c, src/s_bsd_poll.c, src/s_bsd_select.c,
	  src/s_bsd_sigio.c:
	  - added more credits back

	  Approved by: diane

2002-04-14 19:46  leeh

	* src/crypt.c:
	  - changing the licenses other people put coder under is a Bad Thing
	  (tm)

2002-04-14 18:13  androsyn

	* src/balloc.c: Fixed the credit lines on this.  Joan originally
	  wrote and she should get credit for it.

2002-04-14 18:10  androsyn

	* src/adns.c: Put back my original copyright line....

2002-04-14 17:50  leeh

	* src/numeric.c:
	  - hwys fix for the gettext/message locale stuff

2002-04-14 15:42  leeh

	* contrib/m_force.c, modules/m_tb.c:
	  - added a license

2002-04-14 10:56  leeh

	* contrib/m_clearchan.c, contrib/m_force.c, contrib/m_ojoin.c,
	  contrib/m_opme.c, src/client.c:
	  - fixed some headers and copyrights.

2002-04-14 07:06  leeh

	* modules/core/m_kill.c:
	  - fixed a bug with only sending :nick KILL instead of
	    :nick!user@host KILL to target, reported by jv.

2002-04-14 05:50  leeh

	* contrib/: m_clearchan.c, m_force.c:
	  - adx's patches to fix clearchan/force.

2002-04-14 05:39  leeh

	* src/channel_mode.c:
	  - commited a1kmms fix for mode changes:

	    Looking at that code it seems that nc and mc are mixed up in
	    some places. nc should be the number of modes, mc should be
	    the number of parameters, so should only get incremented
	    when there is an argument to the mode.

2002-04-13 23:28  lusky

	* include/patchlevel.h:
	  - revved patchlevel to 7beta14

2002-04-13 20:11  leeh

	* RELNOTES:
	  - brought RELNOTES into sync, cleared b13 notes.

2002-04-13 17:12  leeh

	* include/patchlevel.h:
	  - nuked release names, playtimes over :(

2002-04-13 11:37  androsyn

	* modules/m_tb.c: Make things a little more consistant.

2002-04-13 11:30  leeh

	* contrib/: Makefile.in, README:
	  - updated README/Makefile for the modules thatve been repo moved.

2002-04-13 10:58  leeh

	* contrib/Makefile.in:
	  - updated the Makefile to include m_tburst.c, which has been repo
	  moved

2002-04-13 10:46  leeh

	* src/ircd.c:
	  - initialise default_server_capabs to CAP_MASK when we declare it..
	    this allows tburst to work.

2002-04-13 09:55  leeh

	* modules/m_tb.c:
	  - also allow tburst if theres no topic (duh)

2002-04-13 09:26  leeh

	* modules/m_tb.c:
	  - added m_tburst.c here for now
	    requires a change in src/ircd.c:443 to work, change = to |=

2002-04-13 09:18  leeh

	* src/fileio.c, include/fileio.h:
	  - made file_open and file_close extern, theyre needed by other
	  things

2002-04-13 07:46  leeh

	* modules/m_topic.c:
	  - if a *server* is setting a topic, dont try to send a n!u@h
	  - why is this code even here?  old tburst code?

2002-04-13 04:36  db

	* Hybrid-team, src/channel_mode.c:
	  - <adx> +ov users are not shown on /names reply after joining a
	    channel <adx> if the channel is +a

	  - also added adx to list of contributors

	  approved by db

2002-04-12 17:44  db

	* src/channel_mode.c:
	  - Corrected one off error in mode handling code, found by adx

	  approved -db

2002-04-11 21:05  androsyn

	* doc/Makefile.in, doc/convertconf-example.conf,
	  tools/convertconf.c: Lee's convertconf patch

2002-04-11 01:33  db

	* include/patchlevel.h:
	  - more sensible patchlevel.

2002-04-10 20:07  db

	* modules/m_cburst.c, src/channel.c, tools/convertconf.c:
	  - patches by Lee hardy to fix channel persist
	  - and to fix convertconf

	  Approved db

2002-04-10 16:17  androsyn

	* tools/.cvsignore: Added convertinlines to cvsignore at Hwy's
	  request.

2002-04-10 08:33  db

	* modules/core/m_sjoin.c:
	  - Committed bug fix sent in by user

	  WarKnite found out it was caused in
	   <WarKnite> m_sjoin.c:813 &chptr->peons should be &chptr->locpeons

	  Bug found by WarKnite and Stacy. Fix found by WarKnite Stacy Schane
	  stacyschane@cox.net WarKnite warknite@swbell.net

2002-04-09 23:01  androsyn

	* src/parse.c: Fixes bug reported by adx in do_numeric().  This was
	  a bit of old code that didn't get changed with changes in the
	  parser.

2002-04-09 15:52  androsyn

	* configure: Fix misleading output regarding NICKLEN.

2002-04-08 22:42  db

	* src/motd.c: Fix suggested by Wendy
	  - move test for file existence of ircd.motd, so we zero out the motd
	    if its not there.

2002-04-08 20:04  db

	* RELNOTES, doc/whats-new.txt, include/channel.h,
	  include/supported.h, modules/m_join.c, modules/core/m_kick.c,
	  modules/core/m_part.c, src/channel.c, src/client.c: Sent in by
	  Lee Approved by db

	  The patch does the following:
	  - fixes persistent channels to actually persist, we fixed them too
	  far and broke them
	  - removes the perm crap from persistent channels.  we should always
	  persist, no matter whether a user parts, quits or falls down a
	  rabbit hole into wonderland
	  - adds ircd-hybrid-7b14 stuff to RELNOTES
	  - adds docs about the $$ and $# stuff to whats-new, as well as
	  updates
	  - adds the CHARSET=rfc1459 to 005

	  Theres still issues with persistent channels, but im too tired atm
	  to do anything.  Basically - the event system/cleanup_channels()
	  doesnt cope with the fact a channel should persist for at least
	  persist_time.  It uses the TS of the channel - so if a user parts a
	  1 year old channel, itll persist.  If the cleanup_channels() event
	  is called 10s later, itll be destroyed in that event - we need to
	  add a chptr->ts_persist to mark when we started persisting, and use
	  that instead of TS in cleanup_channels().

2002-04-08 00:13  androsyn

	* src/fdlist.c: Fix a potential buffer overflow if some wacky
	  person set nicklen > 128

2002-04-06 13:09  leeh

	* tools/: Makefile.in, convertconf.c, convertilines.c, ircd.conf,
	  ircd.conf.new:
	  - removed ircd.conf/ircd.conf.new, old convertconf remnants
	  - added a proper I: -> auth {}; converter, which groups I: together
	    based on classes/spoofs/passwords/flags
	  - stripped I: parsing from convertconf, added a notice to people to
	    use convertilines

2002-04-06 12:31  db

	* INSTALL:
	    Modified files:
	      Hyb7                 INSTALL.sgml
	    Log:
	    Updated SGML source of INSTALL with Andro's changes

2002-04-06 10:37  db

	* Hybrid-team:
	  - Cleaned up just a bit too much. re-added jv

2002-04-06 09:54  db

	* Hybrid-team:
	  - corrected bills email
	    removed and moved older contributors as appropriate.
	    Jon, perhaps you can double check.

2002-04-06 00:36  db

	* Hybrid-team:
	  - Changed Juli's entry

2002-04-06 00:04  androsyn

	* include/channel.h, modules/core/m_mode.c, modules/core/m_sjoin.c,
	  src/channel.c, src/channel_mode.c: Lee's patch..here is the
	  description he gave:

	  The following patch adds back support for bouncing modes from
	  clients we deop on an SJOIN.

	  Basically - when we bounce a clients status (either halfop or
	  chanop) we add a user to a chptr->deopped LL.  Whenever we receive a
	  mode, we search this list for the client, ignoring it if theyre
	  found.

	  Whenever we change a clients membership on a channel (from anything,
	  to anything), we scan the deopped list, removing them if theyre
	  there.

2002-04-05 11:08  db

	* src/client.c:
	  - we were removing client from history too late. This meant that a
	    nick chase kill could cause a double exit of a client. oops.
	    thanks to adx for spotting this one.

2002-04-05 07:24  leeh

	* contrib/m_force.c:
	  - added IsMember checks, and fixed a duplicate JOIN being sent to
	  target

2002-04-04 14:29  db

	* src/channel.c: Pointed out by Lee. Two backward tests meant we
	  never expired persistent channels nor dropped them. oops.

2002-04-04 08:24  androsyn

	* BUGS, INSTALL, src/s_bsd_select.c: Updated INSTALL to reflect the
	  nicklen, maxclients changes.  BUGS to reflect that IAuthd is broken
	  beyond repair, in case somebody comes asking.  s_bsd_select.c to
	  force an #error if HARD_FDLIMIT_ > FD_SETSIZE.

2002-04-03 11:10  androsyn

	* configure: Fixed minor issue with configure and nicklen

2002-04-03 08:10  androsyn

	* configure, include/config.h, include/ircd_defs.h,
	  include/setup.h.in: Added --with-nicklen=X and
	  --with-maxclients=X to configure

2002-04-03 07:21  androsyn

	* INSTALL: Documented the --enable-small-net stuff.

2002-04-03 00:35  lusky

	* include/patchlevel.h:
	  - revved patchlevel to beta13

2002-04-02 23:02  androsyn

	* README.small_nets, RELNOTES, configure, include/config.h,
	  include/setup.h.in, src/channel.c, src/client.c, src/linebuf.c,
	  src/list.c: Added configure --enable-small-net and removed
	  README.small_nets.

2002-04-02 11:48  androsyn

	* RELNOTES: Updated RELNOTES for the beta13

2002-03-31 23:52  db

	* include/patchlevel.h: enough goofing around children.  Ok folks.
	  this is the penultimate one before the rc's

2002-03-30 12:04  db

	* configure, include/modules.h, include/setup.h.in: configure
	  problems patched by juli pointed out by jusuf to do with sharable
	  modules

2002-03-25 12:01  androsyn

	* src/ircd_parser.y: Add a bunch of missing semicolons that was
	  causing newer versions of bison to cry.

2002-03-25 10:57  androsyn

	* modules/m_knock.c: Committed Lee's knock patch

2002-03-18 15:06  androsyn

	* src/balloc.c: Add an assert() for double frees.  This doesn't
	  really help situations where the whole heap has been corrupted.
	  Perhaps I should add something silly like a magic number to identify
	  blocks or something?

2002-03-17 13:10  db

	* src/ircd_signal.c: jv and I FINALLY figured out why detaching
	  from a running ircd on FreeBSD will crash.  Ignoring the SIGTRAP
	  seems to work.  Everyone please try it on whatever platforms you
	  have and make sure that it doesn't have some negative side effects.

	  - approved db

2002-03-14 12:44  db

	* src/parse.c: To Lee. Write on the blackboard 100 times please "A
	  string is not an integer." Thank you.

2002-03-14 09:23  db

	* src/parse.c: -approved by db

	  At 10:32 14/03/2002, Lee H wrote: This patch will block remote
	  servers from sending our clients numeric 501
	  (ERR_UMODEUNKNOWNFLAG), this causes us a problem in hyb7 with
	  csircd, which rejects the +a and sends an error back everytime
	  someone opers whos an admin.

2002-03-13 08:53  db

	* modules/core/m_server.c, src/ircd_parser.y, src/s_serv.c: Fix by
	  Lee, approved by db

	  - drop servers that have/introduce servers with invalid servername
	  length
	  - don't set a servername > HOSTLEN

2002-03-12 23:21  androsyn

	* src/send.c: Wohali's patch for that double free bug.  She's
	  certainly got more patience than I do :P

2002-03-12 23:16  androsyn

	* modules/core/m_server.c: Add a warning when a server is
	  introduced with a hostname greater than HOSTLEN

2002-03-12 22:28  androsyn

	* include/s_serv.h: Remove TBURST from the mask as we don't
	  technically support it yet.

2002-03-10 20:51  androsyn

	* src/ircd.c: Make sure irc_sleep returns something useful when
	  using select()

2002-03-10 20:46  androsyn

	* src/ircd.c: Fix compile error with select for delay.

2002-03-09 19:08  androsyn

	* src/s_conf.c: Removed a dead variable..

2002-03-09 19:03  androsyn

	* include/packet.h, src/client.c, src/packet.c, src/s_serv.c: Made
	  client_dopacket() local, removed two dead functions from packet.c,
	  fixed a compile warning in s_serv.c

2002-03-09 18:54  androsyn

	* include/client.h, src/client.c: Made a couple more functions
	  local.

2002-03-09 18:41  androsyn

	* include/patchlevel.h: Once again we change this.

2002-03-09 18:40  androsyn

	* include/patchlevel.h: Changed the relname a bit :P

2002-03-09 18:37  androsyn

	* src/: getopt.c, ircd.c: Removed a few stray references to debug.h

2002-03-09 18:14  androsyn

	* include/s_serv.h, src/s_serv.c: Okay..so I was a little
	  aggressive with that last one.

2002-03-09 18:01  androsyn

	* include/s_serv.h, src/s_serv.c: Changed a few more functions from
	  globals to static

2002-03-09 16:59  androsyn

	* src/send.c: Remove debug.h from send.c

2002-03-09 16:57  androsyn

	* include/debug.h, src/.depend, src/Makefile.in, src/debug.c,
	  src/m_error.c, src/send.c: Removed debug.c completely.  It was
	  only being used three times so, we just replace it with ilog()

2002-03-09 16:48  androsyn

	* include/class.h, include/hash.h, include/ircd.h,
	  include/linebuf.h, include/listener.h, include/md5.h,
	  include/s_auth.h, include/s_conf.h, include/s_log.h,
	  include/scache.h, src/class.c, src/client.c, src/hash.c,
	  src/ircd.c, src/linebuf.c, src/listener.c, src/md5.c,
	  src/s_auth.c, src/s_conf.c, src/s_log.c, src/scache.c,
	  src/sprintf_irc.c: Clean up a lot of dead code.  Also made a
	  number of functions that were declared global as locals, as they
	  were only used within their own object file.

2002-03-09 15:57  androsyn

	* src/channel_mode.c: Make ModeTable static as it is only used in
	  channel_mode.c

2002-03-09 12:03  androsyn

	* include/fileio.h, src/fileio.c: file_open / file_close can be
	  static now, as they only get called in fileio.c

2002-03-08 19:03  leeh

	* contrib/m_force.c:
	  - added the forcejoin/forcepart module ive been using to develop irc
	  bncs

2002-03-08 18:36  leeh

	* contrib/m_ojoin.c:
	  - fixed ojoin, we have sendto_server() now

2002-03-07 09:04  db

	* INSTALL:
	  - Corrected email address

2002-03-07 08:44  db

	* INSTALL:
	  - Updated INSTALL file as updated by Hwy

2002-03-07 01:21  db

	* contrib/example_module.c, contrib/m_flags.c, contrib/m_jupe.c,
	  contrib/m_mkpasswd.c, contrib/spy_admin_notice.c,
	  contrib/spy_info_notice.c, contrib/spy_links_notice.c,
	  contrib/spy_motd_notice.c, contrib/spy_stats_notice.c,
	  contrib/spy_stats_p_notice.c, contrib/spy_trace_notice.c,
	  contrib/spy_whois_notice.c, modules/m_map.c, include/send.h,
	  modules/m_accept.c, modules/m_admin.c, modules/m_away.c,
	  modules/m_capab.c, modules/m_cburst.c, modules/m_challenge.c,
	  modules/m_cjoin.c, modules/m_close.c, modules/m_connect.c,
	  modules/m_cryptlink.c, modules/m_dmem.c, modules/m_drop.c,
	  modules/m_eob.c, modules/m_gline.c, modules/m_help.c,
	  modules/m_info.c, modules/m_invite.c, modules/m_ison.c,
	  modules/m_join.c, modules/m_kline.c, modules/m_knock.c,
	  modules/m_links.c, modules/m_list.c, modules/m_lljoin.c,
	  modules/m_llnick.c, modules/m_locops.c, modules/m_lusers.c,
	  modules/m_motd.c, modules/m_names.c, modules/m_nburst.c,
	  modules/m_oper.c, modules/m_operwall.c, modules/m_pass.c,
	  modules/m_ping.c, modules/m_pong.c, modules/m_post.c,
	  modules/m_rehash.c, modules/m_restart.c, modules/m_resv.c,
	  modules/m_set.c, modules/m_stats.c, modules/m_svinfo.c,
	  modules/m_testline.c, modules/m_time.c, modules/m_topic.c,
	  modules/m_trace.c, modules/m_unkline.c, modules/m_user.c,
	  modules/m_userhost.c, modules/m_users.c, modules/m_version.c,
	  modules/m_wallops.c, modules/m_who.c, modules/m_whois.c,
	  modules/m_whowas.c, modules/core/m_die.c, modules/core/m_kick.c,
	  modules/core/m_kill.c, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/core/m_nick.c,
	  modules/core/m_part.c, modules/core/m_quit.c,
	  modules/core/m_server.c, modules/core/m_sjoin.c,
	  modules/core/m_squit.c, src/send.c: Integrate a chunk of patches
	  to make things using "" strings 'const char *'.  This is basically a
	  no-op change, covering '_version' as used in modules, and
	  furthermore, the last two format strings in include/send.h and
	  src/send.c.

	  Reviewed by:    db, joant Approved by:    db Submitted by:	jmallett

2002-03-06 23:22  androsyn

	* configure: RT Sigio isn't really experimental anymore it seems to
	  have proven itself pretty stable these days.

2002-03-05 23:41  lusky

	* RELNOTES, include/patchlevel.h:
	  - revved patchlevel to 7beta12
	  - rearranged release notes

2002-03-04 17:45  androsyn

	* src/send.c: Fixed the stupid bug in sendto_list_remote that cause
	  us to send certain messages back to the sender.

2002-03-04 16:29  leeh

	* modules/core/m_sjoin.c, src/channel.c:
	  - patch by adx <nizynski@optimus.waw.pl> to correctly add a +ov user
	    to &chptr->chanops_voiced
	  - make sure for +ov users we send +v as well as +o.. this is icky
	    though, as we have to recheck MAXMODEPARAMS..

2002-03-01 19:23  enygma

	* src/modules.c: A cosmetic problem regarding load_core_modules
	  solved

2002-03-01 19:14  leeh

	* TODO, contrib/m_jupe.c:
	  - strncpy_irc -> strlcpy

2002-03-01 15:22  androsyn

	* src/: adns.c, channel.c, client.c, ircd.c, ircd_parser.y,
	  s_auth.c, s_log.c: Changed a bunch of eventAdd()'s to
	  eventAddIsh().  I think it is a bad idea to have 15 events all
	  coming up at the same time.  This will stagger the events a bit.

2002-03-01 11:03  jmallett

	* README.FIRST, RELNOTES: Combine the notices for people who don't
	  read documentation.  In reality, if someone can't be bothered
	  reading documentation, should we really document this _twice_ on
	  their account?  Sooth, if they aren't reading README.FIRST, I don't
	  think they'll read RELNOTES.  The former has a name that yells out
	  to be read, the latter is just something people with good sense will
	  read.

	  In short, I've combined the notices into README.FIRST, using the
	  (IMO) much nicer formatting from RELNOTES.

2002-03-01 09:55  androsyn

	* configure, include/setup.h.in: Here are some better autoconf
	  checks for nanosleep()

2002-03-01 09:30  androsyn

	* configure, include/setup.h.in, src/ircd.c: Add a check for
	  nanosleep(). If nanosleep() isn't found we fall back to using
	  select() for the delay.  The main reason for this is the fact that
	  usleep() tends to be implemented via SIGALRM.

2002-03-01 03:52  jmallett

	* README.PLATFORMS: Add notation for broken platforms, and mark
	  GCC/SPARC ones as broken, until I see otherwise.

2002-03-01 03:40  jmallett

	* README.FIRST: Back out my previous change.  Further [read:
	  Proper] testing for the bug here shows it does in fact exist.
	  Apologies for the misinformation.  The test case was not as simple
	  as I remembered it to be.

2002-03-01 02:41  jmallett

	* README.FIRST: NetBSD's compiler team doesn't suck;  Their version
	  of egcs doesn't break on SPARC, unlike newer GCC on OpenBSD and
	  Solaris.

2002-03-01 02:09  jmallett

	* src/s_auth.c: Oops, bad juli!

	  Committing for standards reasons after being up for far too long is
	  a bad idea.  Inserting inappropriate casts is worse.

	  Change some idiocy I did involving use of size_t instead of
	  socklen_t.

	  And as an aside, I mixed up my ranting about signed vs. unsigned in
	  my last commit.

2002-02-28 14:36  ejb

	* include/patchlevel.h:
	  - added release names!

2002-02-28 11:14  wcampbel

	* README.PLATFORMS, contrib/help/users/notice,
	  contrib/help/users/privmsg, help/users/notice,
	  help/users/privmsg: Cleaned up some formatting in
	  README.PLATFORMS Non-opers cannot use username%hostname@server, so
	    don't include it in the help files

2002-02-28 11:12  leeh

	* INSTALL, RELNOTES, doc/example.conf, doc/example.conf.efnet,
	  src/ircd_parser.y:
	  - added a b12 specific section in RELNOTES, noting the recent config
	    change I did, also moved the convertklines stuff into there.

	    we should probably mention that RELNOTES now contains this when we
	    release b12, and people should update it when they change
	    something that people upgrading to the next beta need to know, such
	    as config file option changes, kline format changes etc
	  - updated the confs to reflect whois_wait -> pace_wait_simple
	  - modified the ilog() for havent_read_conf=yes; slightly.

2002-02-28 10:54  androsyn

	* src/client.c: localClient must have fd set to -1 upon creation
	  otherwise it will have all sorts of weird problems.

2002-02-28 09:12  androsyn

	* modules/: m_cjoin.c, m_kline.c: Removed a few strncpy()'s for
	  strlcpy()

2002-02-28 09:03  androsyn

	* src/: s_auth.c, s_user.c: Fixed bug with unknown in username and
	  cleaned up some string abuses that were still around from
	  strncpy_irc()

2002-02-28 06:46  leeh

	* include/s_conf.h, modules/m_help.c, modules/m_info.c,
	  modules/m_whois.c, modules/m_whowas.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c:
	  - renamed whois_wait to pace_wait_simple, and made it applicable to
	  /help

2002-02-27 22:02  jmallett

	* src/: dynlink.c, s_auth.c, s_bsd.c: Bring back my uintptr_t casts
	  to the code which converts dlsym(3)'s return value to something we
	  can make into a function pointer within the bounds of the C
	  standard.  This is a hack as such, but it is far more "correct" than
	  trying to convert two pointers to eachother, one being a data
	  pointer (void*) and one being a function pointer.  Document this as
	  such, as it is important to compilers like TenDRA, and also mention
	  that I _do_ have something which is correct, but that for POLA sake,
	  and since this will work pretty much everywhere, I am choosing not
	  to put it in at this time.

	  Also, convert casts of socklen_t pointers from 'int*' to
	  'socklen_t*'.  Originally these were 'unsigned int*', which is
	  correct on BSDish systems, but may not be if for some reason
	  socklen_t is signed (it isn't with BSD networking), and really
	  'size_t foo; use(&foo)' doesn't need to be 'use((socklen_t *)&foo)',
	  but it doesn't hurt anyway.  If this is causing problems on some
	  system, if it does not have socklen_t, we should make socklen_t a
	  signed integer on that system using our typedef'd version, as it is
	  infinitely more common for these parameters to be 'socklen_t*' which
	  is not the same as 'int*'.

	  The current source tree will now build happily on TenDRA systems
	  again.

2002-02-27 21:13  jmallett

	* RELNOTES: Add a list of things which have changed since the last
	  beta and which need testing to the Release Notes, as suggested by
	  Wohali.

	  Reviewed by:	wcampbell, on IRC

2002-02-27 14:41  androsyn

	* src/s_auth.c: Fixed stuff with usernames getting set to unknown.

2002-02-27 12:51  enygma

	* README.PLATFORMS, configure, include/modules.h,
	  include/setup.h.in, modules/.depend, modules/Makefile.in,
	  modules/m_info.c, modules/m_oper.c, modules/core/m_server.c,
	  src/Makefile.in, src/dynlink.c, src/modules-dld.c, src/modules.c,
	  src/parse.c, src/s_auth.c, src/s_bsd.c, src/s_serv.c, src/send.c:
	  I have modified configure.in to detect shl_load and HP-UX Systems.
	  Then I modified modules.c and seperated some functions into
	  dynlink.c Rework has been done on some files, where declaration
	  inconsistencies existed. Like static int and then only int for the
	  same functions.  I believe the HP-UX porting is now completed.

2002-02-27 12:28  androsyn

	* src/balloc.c: Correct an inversion of the last #define I
	  committed.

2002-02-27 12:20  androsyn

	* src/balloc.c: I hate hpux..did I ever tell you this?

2002-02-26 11:44  wcampbel

	* doc/example.conf: Doc corrections to example.conf: Make the
	  encrypted = yes; and cryptlink = yes; distinction clearer Document
	  the stripping of [ ] from serverinfo fields in LINKS

2002-02-25 18:05  wcampbel

	* contrib/: m_flags.c, m_mkpasswd.c: I gave NO ONE permission to
	  put m_flags.c and m_mkpasswd.c under the GPL.

2002-02-25 17:52  leeh

	* src/packet.c:
	  - cleaned up some k+r and single space indenting

2002-02-25 16:01  leeh

	* include/resv.h, src/resv.c:
	  - made resv use strlcpy()
	  - bumped RESVNICKLEN to NICKLEN*2

2002-02-25 15:22  leeh

	* modules/core/m_nick.c:
	  - nick[NICKLEN + 2] -> nick[NICKLEN]

2002-02-25 14:56  leeh

	* tools/convertklines.c:
	  - made convertklines use the new conf format
	  - cleanups, added support for oper reasons

2002-02-25 14:12  androsyn

	* src/channel_mode.c: More stupidity related to people using
	  NICKLEN and abusing strings...

2002-02-25 14:09  androsyn

	* src/resv.c: Minor cleanup related to NICKLEN changes...

2002-02-25 12:40  androsyn

	* src/whowas.c: Forgot a NICKLEN+1

2002-02-25 12:39  androsyn

	* include/client.h, include/irc_string.h, include/ircd_defs.h,
	  include/supported.h, modules/m_cryptlink.c, modules/m_gline.c,
	  modules/m_kline.c, modules/m_pass.c, modules/m_stats.c,
	  modules/m_topic.c, modules/m_unkline.c, modules/core/m_nick.c,
	  modules/core/m_part.c, modules/core/m_server.c,
	  modules/core/m_sjoin.c, src/channel_mode.c, src/client.c,
	  src/fileio.c, src/hash.c, src/irc_string.c, src/ircd_parser.y,
	  src/ircdauth.c, src/list.c, src/motd.c, src/s_conf.c,
	  src/s_serv.c, src/s_user.c, src/scache.c, src/whowas.c: Replace
	  strncpy_irc() with strlcpy().  Change NICKLEN == 10, 9 + 1 for the
	  NUL character.  I'm not sure if HOSTLEN and friends will need to be
	  mangled as well, but we can explore that later.

2002-02-24 15:32  lusky

	* include/config.h, include/config.h.dist, include/patchlevel.h,
	  src/s_log.c:
	  - revved patchlevel to -7b11
	  - fixed compile warning for SYSLOG_USERS
	  - cleanup to config.h
	  - sync config.h.dist to config.h

2002-02-24 12:37  leeh

	* src/client.c:
	  - also walk the unknowns list for dlines on check_klines()
	    (bug reported by Paul Miseiko <teardrop@teardrop.ca>)

2002-02-24 12:23  db

	* src/: s_user.c, send.c:
	  - Don't bother giving exit_client the socket name in dead_link
	    it does not understand the %s convention dead_link() does and just
	    prints a '%s' instead. thats dumb.
	  - We had one place where we printed "Ghost" instead of "Ghosted
	    client" like everywhere else. fixed.

2002-02-23 23:45  wcampbel

	* doc/operguide.txt: Updates to the Oper Guide:

	  Spelling and Grammar (Hwy) ChanFix information (qurve) Hybrid 6
	  information (Hwy)

2002-02-23 23:44  a1kmm

	* src/client.c:
	  - Added a #if 0 around the expensive asserts for now. Perhaps we
	    want a better define system later.

2002-02-23 16:20  leeh

	* src/class.c:
	  - apparently you cant do that, oh well

2002-02-23 12:54  leeh

	* src/class.c:
	  - cleanups to get_client_ping

2002-02-23 12:32  androsyn

	* src/s_user.c: Fix ping cookies..

2002-02-23 10:30  leeh

	* include/config.h, include/config.h.dist, src/client.c:
	  - added a kludged #define to hide server ips from everyone including
	    admins, I dont like this, but *shrug*

2002-02-23 07:58  leeh

	* src/client.c:
	  - only check/set IsClosing/IsDead for local connections..

2002-02-23 06:23  leeh

	* src/client.c:
	  - we only set IsDead for local clients
	  - the ->localClient->listener is already in the MyConnect() below? -
	    you cant try to access it if its not a local client..

2002-02-23 00:29  a1kmm

	* src/: client.c, s_auth.c, s_user.c:
	  - Fixed the bug where we were leaving clients on the auth list until
	    after we parsed any commands waiting on their buffer(which meant
	    that if they got exited then, they would try to be removed from the
	    list they were already being removed from). I cannot get ircd to
	    core using any connection flooding or cloning test now.
	  - Left in my asserts() I wrote about a week ago. These are more
	    extensive and expensive than Androsyn's asserts, and we definitely
	    want them out before we release.

2002-02-22 10:24  androsyn

	* src/s_serv.c: It seems cygwin really does need that damned
	  vfork()

2002-02-21 08:47  androsyn

	* modules/m_svinfo.c: Remove a call to time() and replace it with
	  set_time()

2002-02-20 21:47  wcampbel

	* doc/operguide.txt: Update to Riedel's operguide.txt

	  Submitted by:	Riedel

2002-02-19 13:28  androsyn

	* src/client.c: Add an assert() that should catch if a client is on
	  the lclient list when we try to free it...

2002-02-19 10:22  androsyn

	* src/packet.c: Move an assert up a little bit..

2002-02-18 17:07  wcampbel

	* doc/whats-new.txt: Documented CAP_PARA...

2002-02-17 21:32  jmallett

	* src/client.c: Fix the bug reported by me and Wendy where we try
	  to access the localClient structure which may be NULL, outside of a
	  check for MyConnect.  This fixes the NULL dereference by putting it
	  inside the if(MyConnect()).

2002-02-17 20:30  jmallett

	* src/modules.c: Finally get around to testing src/modules.c on my
	  old OSX box again.  Fixed a typo I managed to dissipate pretty well
	  in the code of the word 'Modules'.

2002-02-17 04:07  a1kmm

	* src/: s_serv.c, s_user.c:
	  - If you are removing a client from one list and putting them on to
	    another, after you have called send*, you have to check that the
	    client is not dead.  I have done this for register_local_user and
	    server_estab, but there may be other places where we move from one
	    list to another. I would appreciate it if someone can check this to
	    make sure it is okay to just return where I do etc... and that I
	  don't check too early for IsDead()

2002-02-17 03:34  a1kmm

	* src/: client.c, send.c:
	  - Do not call exit_client() again if a send error occurs while
	    sending the queues for exit_client()

2002-02-17 03:02  a1kmm

	* src/: client.c, s_bsd.c:
	  - Don't clean up the listener until the get to free_client. This
	    fixes the coredump in user_welcome() when the user has exited.

2002-02-17 02:29  db

	* src/listener.c:
	  - mostly cosmetic. prototypes should be on separate lines,
	  - make formatting consistent with hybrid 'standard'

2002-02-17 00:39  androsyn

	* include/client.h, modules/m_trace.c, src/client.c, src/hash.c,
	  src/ircd.c, src/packet.c, src/parse.c, src/s_auth.c, src/s_bsd.c,
	  src/s_conf.c, src/s_serv.c, src/send.c: Okay..I know this is a
	  big ass commit, but it was driving me nuts.  I don't care if this
	  delays an rc another week or two but its the right thing to do.
	  Basically move client_p->fd into client_p->localClient->fd.  If you
	  don't like it, tough.

2002-02-16 23:58  androsyn

	* src/send.c: Put the SetDead() back in there..

2002-02-16 23:54  a1kmm

	* src/send.c:
	  - On second thoughts, don't close the fd if it is already -1.

2002-02-16 23:52  a1kmm

	* src/send.c:
	  - Close the fd in dead_link() so we don't get into an infinite loop
	    by trying to send from exit_client().

2002-02-16 23:38  androsyn

	* src/s_serv.c: Fixed a minor compile warning with an #ifdef

2002-02-16 23:30  jmallett

	* configure: Fix the way configure determines the kind of dl*(3)
	  [or lack thereof] to use so that it will work hopefully on the
	  widest variety of systems.

2002-02-16 23:19  jmallett

	* src/modules.c: Include dlfcn.h if we have -ldl or dlopen(3),
	  sorry A1kmm!

2002-02-16 23:04  jmallett

	* src/modules.c: Superfluous checks before including dlfcn.h

2002-02-16 22:56  jmallett

	* src/modules.c: Move our preprocessor definition for the dl*(3)
	  shims for dyld systems to the appropriate location.

2002-02-16 22:11  androsyn

	* src/: s_serv.c, send.c: Remove some extra SetDead() calls.  We
	  are going straight into exit_client() anyways.

2002-02-16 21:55  androsyn

	* src/s_serv.c: Fix cygwin from spewing all over the console..

2002-02-16 21:48  androsyn

	* include/client.h, src/client.c, src/packet.c, src/send.c: Fixed
	  the double exit_client() stuff I think...

2002-02-16 20:27  androsyn

	* src/s_bsd.c: Fixed a tyop

2002-02-16 19:54  db

	* src/client.c:
	  - We have a macro that does what the old code did, so lets use it.
	  - cosmetic change only

2002-02-16 19:46  androsyn

	* src/s_bsd.c: close_connection() needs to know about and close all
	  servlink related connections including the ctrl connections and any
	  of the pipes.

2002-02-14 02:06  a1kmm

	* modules/m_who.c:
	  - Removed a spurious NUMLISTS define. Although I still wonder why we
	    didn't stick to MAX_SUBLISTS.

2002-02-14 00:50  a1kmm

	* src/: .depend, client.c, s_serv.c, send.c:
	  - A patch by mrtime14c to fix double frees, with some cleanups by
	    Dianora and a minor fix by me.

2002-02-13 13:41  jmallett

	* include/channel.h, modules/m_who.c, src/channel.c,
	  src/channel_mode.c: Centralize the preprocessor definition that
	  controls how many lists are needed depending on OANDV, and make use
	  of it correctly.

2002-02-13 13:39  jmallett

	* README.FIRST: Add a big screaming note about the need to make
	  clean or make distclean when upgrading.  This probably won't really
	  apply after a release, but still.

2002-02-13 13:16  androsyn

	* modules/m_who.c, src/channel.c, src/channel_mode.c: Fixes the
	  mode bugs we were talking about..  Submitted by: svatopluk@gmx.de

2002-02-12 09:27  jmallett

	* src/modules.c: If we want to use 0-6, then modulo by 7, not by 6.

2002-02-12 09:13  jmallett

	* src/modules.c: Be sure to return NULL from dlerror() if we have
	  no error to speak of.

2002-02-12 09:06  jmallett

	* src/modules.c: Log when a symbol is defined more than once.
	  Clarify when our first dlopen() is done.  Misc. cleanup of my dl*(3)
	  stuff.

2002-02-12 08:48  jmallett

	* README.FIRST: Add a note about the version of the OSX DevTools
	  required to build ircd-hybrid with shared module support properly.

2002-02-12 08:45  jmallett

	* configure, include/setup.h.in, src/modules.c: I finally sat down
	  and wrote working dl*(3) shims for dyld systems that do not have
	  their own. Based on the NSModule(3) manpage, and various header
	  files.

	  Works on OSX 10.0.4 with December 2001 Development Tools.

2002-02-11 18:06  jmallett

	* README.FIRST: Correct a note about byacc so that people don't
	  feel hopeless when they find out their byacc is dying.

	  Submitted by:	Samuel in Spain (He emailed me about this being
	  unclear)

2002-02-10 18:47  db

	* modules/m_who.c:
	  - cleaner patch for 'who 0'

2002-02-10 16:24  db

	* modules/m_who.c:
	  - Stop a /who 0 coring
	    it would not core on fbsd because of libc, but does on solaris.

2002-02-10 12:26  androsyn

	* src/ircd.c: Forgot to remove a debugging fprintf().

2002-02-10 03:49  androsyn

	* src/ircd.c: Tweaks for the delay on the ioloop.

2002-02-09 22:35  wcampbel

	* include/m_info.h, include/motd.h, include/s_conf.h,
	  modules/m_rehash.c, src/ircd.c, src/motd.c: Removed the remnants
	  of the old help system.
	  (U)HELP_MOTD enums, ConfigFileEntry.(u)helpfile elements, and calls
	  to (Init|Read)MessageFile() on the help directories.

	  Approved by:	Diane

2002-02-09 03:55  a1kmm

	* src/hook.c:
	  - Fixed a reference to memory shortly after it has been freed.

2002-02-08 01:04  jmallett

	* configure: Check for Apple's GCC, rework PICFLAGS a little.

2002-02-07 23:55  lusky

	* include/patchlevel.h, src/adns.c:
	  - removed unusued dns_cancel_all function
	  - revved patchlevel to 7b10

2002-02-07 22:26  jmallett

	* src/channel.c: Bring can_send into the logic that a server can
	  send to a channel, because we allow servers to m_message() with a
	  NOTICE, but the NOTICE always fails because of course they aren't on
	  that channel. This doesn't affect PRIVMSG as that is stopped in
	  m_privmsg().

	  Explained hastently to: Dianora

2002-02-06 10:02  leeh

	* include/s_serv.h, modules/m_invite.c, src/adns.c, src/s_serv.c:
	  - cleaned up K&R/single space indenting in adns.c
	  - added CAP_PARA
	  - if channel is +p, broadcast invite to CAP_PARA servers

2002-02-05 22:37  ejb

	* clean.com:
	  - Added clean.com .. this is a hack and will go away as soon as i
	    have a working top-level descrip.mms for VMS.

2002-02-05 16:45  ejb

	* README.FIRST, README.PLATFORMS:
	  - Added VMS to list of supported platforms.

2002-02-05 16:38  jmallett

	* configure: Teach configure to determine whether $CC is SVR4
	  Source Generation System compliant, so we can use a shared
	  interface, such as is done for PICFLAGS here. Since I had to add
	  checks for Sun WorkShop anyway, I removed the SunOS checks... They
	  didn't really make sense anyway in my opinion. I ran this by a few
	  people (both the patches and the idea), and it looked sane to them.

	  Right now we recognize the following SGS-ish compilers:
	  	o) MIPSpro
	  	o) Sun WorkShop
	  	o) TenDRA

2002-02-05 16:33  ejb

	* README.VMS, include/config.h, tools/descrip.mms:
	  - a few more VMS changes:
	     use logical names, not hardcoded paths;
	     fixed tools to compile mkpasswd properly;
	     use IRCD$CONFDIR:RESOLV.CONF, not []RESOLV.CONF;
	     brought README.VMS up to date.

2002-02-05 15:16  leeh

	* modules/m_invite.c:
	  - disable invite propagation

2002-02-05 09:37  jmallett

	* configure: Add support for MIPSpro based on what the SGI ABI
	  compiler manpage dictates, though MIPSpro will probably play nice
	  with a different set of options... This needs tested, but I can't
	  test it, so I'm going to commit it as it doesn't break anything that
	  wouldn't already be broken, and hope someone can test it.

2002-02-05 06:42  leeh

	* src/ircd_parser.y:
	  - dont allow spaces in network name (breaks 005)

2002-02-04 23:04  wcampbel

	* INSTALL, README.FIRST: Update to INSTALL, reference convertklines
	  Cygwin IS currently supported, in a limited way.

2002-02-04 21:40  jmallett

	* tools/viconf.c: Fix typo, viconf.c["Cant'", "Can't"]

2002-02-04 21:20  ejb

	* Hybrid-team: changed my nick & email in Hybrid-team

2002-02-04 16:07  ejb

	* include/res.h, modules/descrip.mms, modules/core/descrip.mms,
	  src/descrip.mms, src/modules.c:
	  - fixed VMS compile; we generate [.modules]core.olb from
	    [.modules.core]*.c, and link against [.src]ircd.exe along
	    with modules.olb.  NOT tested for runtime yet, also still need
	    to fix config.h paths (so binaries can be distributed).

2002-02-04 14:14  androsyn

	* src/adns.c: The bugfix that went in -6. Well here it is for -7.

2002-02-04 11:56  leeh

	* Hybrid-team, modules/.depend:
	  - added jmallet^3 to hybteam

2002-02-04 11:31  jmallett

	* README.PLATFORMS: Correct my name, s/Joseph/J./

2002-02-04 10:22  jmallett

	* configure: Regenerate configure with autoconf 2.13

2002-02-04 07:51  androsyn

	* src/listener.c: Check errno, before we whine to the oper about
	  being able to accept the connection or not.

2002-02-04 02:03  androsyn

	* src/s_bsd_sigio.c: This should keep us from calling fcntl() on
	  every read or write.

2002-02-04 01:11  androsyn

	* src/s_bsd_sigio.c: Back out the changes Andrew made that tried to
	  call the handler in comm_setselect() as these are not needed now.

2002-02-04 01:07  androsyn

	* src/: s_bsd_sigio.c, s_serv.c: Minor bugfixes with fcntl()

2002-02-04 00:17  androsyn

	* src/: channel.c, client.c, linebuf.c: Some tweaks to the default
	  block heap sizes.. The should reduce initial memory consumption by a
	  bit.

2002-02-03 23:52  androsyn

	* modules/m_rehash.c: Ponder..who took out cleanup_channels() from
	  rehash channels anyways..

2002-02-03 23:29  androsyn

	* configure, include/setup.h.in, src/listener.c, src/s_auth.c,
	  src/s_bsd.c, src/s_serv.c: Fix the RT Sigio code on linux once
	  and for all.  Somebody other than me should test this and give me
	  some feedback.

2002-02-03 13:58  androsyn

	* modules/: m_kline.c, m_trace.c: A few changes that will keep code
	  from directly calling time() by itself.  It now calls set_time(),
	  updating SystemTime(and CurrentTime), and uses CurrentTime directly.

2002-02-02 11:01  leeh

	* help/Makefile.in:
	  - dont build index files by default, we can keep them updated and in
	  cvs

2002-02-02 10:56  leeh

	* configure:
	  - patch to fix HAVE_SNPRINTF HAVE_VSNPRINTF via Giorgos Keramidas
	    <keramida@freebsd.org>

2002-02-02 10:34  leeh

	* include/supported.h, src/s_user.c:
	  - 005 was exceeding MAPARAMS, so added a second 005 set, which
	    includes the missing NETWORK=%s

2002-02-02 10:25  leeh

	* src/parse.c:
	  - if we were exceeding the param count, we werent stripping off the
	    : (like we do if we dont exceed it), so we were ending up with ::::
	  across servers

2002-02-01 11:48  wcampbel

	* README.FIRST: Document the requirement that /etc/ services,
	  protocols, and resolv.conf must be readable by the ircd user in
	  order for the server to start.

2002-01-31 23:13  wcampbel

	* doc/challenge.txt: Updated the challenge/response document from
	  the SGML source.

2002-01-30 09:59  leeh

	* include/channel.h, modules/m_set.c, src/client.c:
	  - commited patch to fix check_splitmode() wrt events from
	    Giorgos Keramidas <keramida@ceid.upatras.gr>

2002-01-30 01:48  androsyn

	* src/ircd.c: Keep people from starting ircd as root.

2002-01-28 15:58  leeh

	* contrib/example_module.c, contrib/m_flags.c, contrib/m_jupe.c,
	  contrib/m_mkpasswd.c, modules/m_map.c:
	  - commited hwys patch for contrib/

2002-01-27 14:05  leeh

	* modules/Makefile.in:
	  - commited hwys fix for the makefile

2002-01-26 15:16  db

	* src/channel.c: Don't use strlen() when sprintf() already returns
	  it

2002-01-23 13:14  leeh

	* src/s_user.c:
	  - fixed the invisible stuff reported by andro..

2002-01-23 12:59  leeh

	* src/s_serv.c:
	  - added an !IsRegistered check to hunt_server, else we would forward
	    trace requests to a client that had sent NICK but not USER

2002-01-22 12:21  davidt

	* include/client.h, src/client.c:
	  - Add client_p->free_file and client_p->free_line.
	    When exit_client() is called, it records the line/file it was
	    called from in the client struct, and if the client has already
	    been added to the dead_list, it will fail an assert leaving
	    free_[file|line] to be examined.
	  - This should be backed out before releasing, all changes are
	    wrapped in #ifdef DUPFREEDEBUG

2002-01-22 01:11  androsyn

	* src/s_user.c: Fixed the ping cookie bug..now we need to fix the
	  negative user count crap..

2002-01-21 22:02  androsyn

	* src/client.c: An assert that should catch this double free bug.
	  Basically we check to make sure the client isn't already on the dead
	  list.

2002-01-20 01:26  jmallett

	* include/memory.h: Add support for pulling in inttypes on VMS for
	  uintptr_t.  Obtained partially from:	ejb

2002-01-16 17:21  leeh

	* modules/m_invite.c:
	  - check_channel_name returns an int, not null..

2002-01-16 11:02  jmallett

	* include/: hook.h, memory.h: Move my uintptr_t checks to memory.h,
	  since it works with pointers and belongs there moreso than hook.h
	  and now we can build on OpenBSD!

2002-01-16 10:47  jmallett

	* configure, include/hook.h, include/setup.h.in: If we have
	  <inttypes.h> include it for use of uintptr_t. If we don't, we check
	  to see if we have uintptr_t normally. If we do not, define it as an
	  unsigned long, as that should work on most/all platforms.

2002-01-14 15:17  leeh

	* src/s_user.c:
	  - we needed a send_umode() for local clients..

2002-01-13 19:56  androsyn

	* src/balloc.c: I will compile before I commit.  I will compile
	  before I commit.

2002-01-13 19:01  leeh

	* contrib/: m_clearchan.c, m_ojoin.c, m_opme.c:
	  - updated to revision stuff

2002-01-13 18:49  leeh

	* src/s_user.c:
	  - removing it is better than a debug #if 0

2002-01-13 18:47  leeh

	* src/s_user.c:
	  - fixed the double mode crap

2002-01-13 18:33  androsyn

	* src/balloc.c: Add a check for mmap() failure.

2002-01-13 18:22  leeh

	* src/s_user.c:
	  - fixed a stupid: wed mixed FLAGS_INVISIBLE into both sptr->umodes
	    and sptr->flags, so a user being invisible, was never told it unless
	    they forced the mode themselves ;)

2002-01-13 13:54  wcampbel

	* BUGS, TODO, contrib/README, contrib/build_one, doc/index.txt,
	  doc/whats-new.txt, tools/README: Doc updates Removed build_one,
	  I'm sick of larne's whining

2002-01-13 13:31  wcampbel

	* Makefile.in, RELNOTES, doc/ircd.8: Reference beta10 rather than
	  beta8

2002-01-13 11:22  db

	* src/channel.c: Smokey the coder says, only you can stop cute
	  wrong code! <   if (who) --- >   if (who != NULL)

2002-01-13 10:02  jmallett

	* modules/core/m_message.c: Move fl_'s check for a server sending a
	  PRIVMSG into m_privmsg, and just return there, instead of going into
	  m_message and _then_ checking for PRIVMSG or NOTICE.

2002-01-13 09:58  jmallett

	* modules/core/m_message.c: As we now check much earlier on to see
	  if a server is trying to PRIVMSG, take out the !IsPerson conditional
	  here, so a server can indeed NOTICE a channel, in the case of, for
	  example, saying someone cannot be opped at this time as the server
	  is in split more (or things like channel flooding even!)

2002-01-13 02:19  jmallett

	* src/hostmask.c: Fixing some comments, since they'll get fixed
	  eventually anyway:
	  - "an possible" -> "a possible"

2002-01-13 02:11  jmallett

	* contrib/spy_whois_notice.c: Make spy_whois_notice.c's _version
	  use #Revision#

2002-01-13 02:02  jmallett

	* include/s_bsd.h: Update comments about READBUF_SIZE

2002-01-12 19:41  androsyn

	* src/adns.c: Fixed yet another wacky and weird /rehash dns bug..

2002-01-12 18:06  a1kmm

	* src/channel.c:
	  - chanops != chanops_voiced

2002-01-12 15:08  leeh

	* modules/core/m_message.c:
	  - servers shouldnt send privmsgs.. we have to allow notices for
	    stuff like remote klines etc, but there should be no reason for a
	  privmsg at all

2002-01-12 13:45  jmallett

	* configure: Portability fixing
	  - if the autoconf check for working '-g' failed, don't shove '-g'
	    down the IRC_CFLAGS of an unknown compiler, if it does work, add it
	    by default.  Checks for specific compilers ala TenDRA should be done
	    if it is known to produce bad code :)

2002-01-12 13:38  jmallett

	* configure, include/setup.h.in, src/hook.c, src/ircd.c,
	  src/modules.c: Add still more fixups for using TenDRA out of the
	  box with Hybrid7.

	  - configure magic to stop autoconf from slamming '-g' into CFLAGS
	    just because it doesn't explicitly break compiling NULL files
	    Thanks to: Andrew Clausen for helping me think around this
	  - configure magic to make autoconf pick up the right types and
	    includes on the host system, since autoconf uses CPPFLAGS to
	    check for includes and types, and TenDRA does standards checking
	    even when acting as a plain preprocessor, or whatever autoconf
	    is making it do
	  - configure magic to check for <sys/resource.h>, use accordingly.
	  - we can't _really_ convert directly between data type pointers to
	    function pointers, so convert to a faceless intermediary type
	    first, namely uintptr_t (as defined by ISO -- should always
	  exist?).

2002-01-10 23:00  wcampbel

	* doc/example.conf: Corrected some of the items that Lee recently
	  changed in the parser.  It's still not properly done...this whole
	  doc MUST be rewritten soon.

2002-01-10 16:54  jmallett

	* Hybrid-team: Sort in nick alphabetical order, as advertised.

2002-01-10 16:36  jmallett

	* configure: Add proper TenDRA support to our configure script. Not
	  only can we detect if someone is trying to use TenDRA, we can also
	  set up the necessary string of IRC_CFLAGS to work on most platforms,
	  and we can produce shared modules!

2002-01-10 15:45  jmallett

	* src/ircdauth.c: Second round of my commits to change zero and
	  pointer comparing in assertions.  This time do ones in the form of
	  'assert(ptr [!=]= 0)', reverse of last sweep.

2002-01-10 15:30  jmallett

	* src/s_bsd.c: Turn off disable_sock_options if we have IPV6 set
	  up. The real solution is to do "proper" things for IPV6 here but
	  using IPPROTO_IPV6 just makes protocol unavailable messages instead.
	  So Here it is disabled, a temporary and seemingly satisfactory fix.

2002-01-10 10:59  jmallett

	* configure, src/Makefile.in, src/snprintf.c: Conditionalise
	  src/snprintf.c on whether or not we actually need it using
	  configure! This also means we don't need to produce a bogus
	  non-empty translation unit for strict compilers like TenDRA, Forte,
	  and aCC.

2002-01-10 09:05  androsyn

	* README.PLATFORMS: I suppose I'll claim Linux on x86 and sparc

2002-01-09 21:17  wcampbel

	* README.PLATFORMS: I guess I'll take the punish^H^H^H^H^Hleasure
	  of handling Cygwin issues :)

2002-01-09 19:51  jmallett

	* README.PLATFORMS: Reformat the table to have space for 'Mac OS X'
	  in the OS area. Also I'll support both Darwin and Mac OS X users.
	  The two are orthogonal sometimes.

2002-01-09 19:31  joant

	* README.PLATFORMS: ircd-hybrid-7/README.PLATFORMS

2002-01-09 19:15  jmallett

	* README.FIRST, README.PLATFORMS: Since supporting Hybrid on every
	  platform someone would run it on is important, add a document
	  including people who want to take responsibility for, as well as who
	  to yell at when things blow up. Add myself appropriately as the
	  NetBSD and OpenBSD on SPARC with GCC person, as well as Darwin on
	  PPC with Apple's version of gcc, and TenDRA on FreeBSD/x86.  The BSD
	  on SPARC stuff doesn't currently work because of GCC, but I'll still
	  take responsibility and try to help people with Hybrid on that pair
	  of platforms.

2002-01-09 18:58  jmallett

	* README.FIRST: Add notes about Darwin and Mac OS X and GCC on
	  SPARC and UltraSPARC that I've run into in my portability checks.

2002-01-09 14:38  jmallett

	* tools/mkpasswd.c: Extraneous extern optind. We don't use optind
	  anywhere right now, so we don't need its definition.

2002-01-09 12:38  jmallett

	* src/: client.c, s_bsd.c, s_gline.c, s_serv.c, s_user.c, whowas.c:
	  Clean up a number of uses of "assert(0 != pointer)" and "assert(0 ==
	  pointer)" and use NULL instead, since that will always do the right
	  thing.

2002-01-09 12:30  db

	* src/match.c:
	  - 0 != ptr is just _WRONG_

2002-01-09 12:17  leeh

	* doc/example.conf.efnet:
	  - missed pace_wait from here..

2002-01-09 12:16  leeh

	* doc/example.conf, include/s_conf.h, include/supported.h,
	  modules/m_info.c, src/channel_mode.c, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c, src/s_serv.c:
	  - updated /info to cover everything in ircd.conf at current
	  - renamed the following variables for consistency:
	    maxbans -> max_bans
	    allow_hidden -> disable_hidden
	    split_server/user_count -> default_split_server/user_count
	  - added pace_wait to example.conf

2002-01-09 12:09  db

	* modules/m_gline.c, src/match.c:
	  - style cleanups, also removed dead code marked as such

2002-01-09 11:19  leeh

	* include/hostmask.h, modules/m_stats.c, src/hostmask.c:
	  - made stats k/K use find_conf_by_address instead of
	    find_address_conf saves us looping twice, once for an auth, once for
	  a kline..
	  - hence removed the extra parm to report_Klines

2002-01-09 07:27  jmallett

	* src/memory.c: Oops, meant to do cvs ci src/memory.c and did cvs
	  ci -m src/memory.c

	  Anyway, correct usage of mem_frob (instead of memfrob()) and put it
	  inside #ifndef NDEBUG.

2002-01-09 07:20  jmallett

	* src/: client.c, memory.c: src/memory.c

2002-01-08 19:53  jmallett

	* modules/m_gline.c: Document GLine interfaces somewhat slightly,
	  including inputs and what we're doing with so many inputs!

2002-01-08 11:23  jmallett

	* src/client.c: Add an assertion to make sure the head of the list
	  of channels a user being exited is in is really NULL. This is
	  manifesting itself in strange ways later on and we need to head it
	  off here.

2002-01-07 15:32  jmallett

	* configure: Fix OS/compiler logic in configure to be slightly more
	  generic than checking for using gcc in the SunOS case, in case we
	  decide to include support for generic portable compilers like TenDRA
	  or OpenWatcom or such, and they have different options for PIC code.

2002-01-07 12:48  jmallett

	* configure: Bring in my slightly redone PIC checks. Fixes GCC on
	  SunOS problems with the previous version of my changes here. Also
	  include some notes about what is being done for PIC checks.

2002-01-07 01:26  db

	* contrib/help/opers/index, help/opers/index,
	  contrib/help/users/index, help/users/index:
	  - reverted accidental commits

2002-01-07 01:12  joant

	* contrib/help/opers/index, help/opers/index,
	  contrib/help/users/index, help/users/index, src/s_bsd.c,
	  src/snprintf.c, tools/convertconf.c, tools/convertklines.c:
	  Portability fixes for vendor compilers

2002-01-07 00:50  db

	* configure, modules/m_invite.c:
	  - folded in jmallets changes for OSX loadable modules

2002-01-06 16:09  leeh

	* modules/core/m_kill.c:
	  - added oper accountability back to kills via quits
	  - fixes for -6, which takes the nick of the killer from the front of
	    the path - so set path = source_p->name when bogus..
	  - cleanups

2002-01-06 13:16  leeh

	* doc/example.conf:
	  - slight doc updte.

2002-01-06 13:12  leeh

	* contrib/help/opers/set, help/opers/set, include/ircd.h,
	  modules/m_set.c, src/channel.c, src/client.c, src/ircd.c:
	  - fixed up splitmode

2002-01-06 01:26  a1kmm

	* modules/m_gline.c: Cast localtime argument to (const time_t*)
	  first, apparently fixes some compile warnings on OpenBSD/sparc/gcc.
	  Submitted by: flata(Joseph Mallett).

2002-01-05 23:46  a1kmm

	* modules/m_invite.c:
	  - Don't send invite back to the source even if they are the target
	    of the invite.

2002-01-05 04:14  a1kmm

	* LICENSE, contrib/m_flags.c, contrib/m_jupe.c,
	  contrib/m_mkpasswd.c, contrib/spy_admin_notice.c,
	  contrib/spy_info_notice.c, contrib/spy_links_notice.c,
	  contrib/spy_motd_notice.c, contrib/spy_stats_notice.c,
	  contrib/spy_stats_p_notice.c, contrib/spy_trace_notice.c,
	  contrib/spy_whois_notice.c, modules/m_map.c, include/balloc.h,
	  include/channel.h, include/channel_mode.h, include/class.h,
	  include/client.h, include/common.h, include/config.h,
	  include/config.h.dist, include/debug.h, include/defaults.h,
	  include/event.h, include/fdlist.h, include/fileio.h,
	  include/handlers.h, include/hash.h, include/hook.h,
	  include/hostmask.h, include/irc_string.h, include/ircd.h,
	  include/ircd_defs.h, include/ircd_getopt.h,
	  include/ircd_handler.h, include/ircd_signal.h,
	  include/ircdauth.h, include/linebuf.h, include/list.h,
	  include/listener.h, include/m_info.h, include/m_kline.h,
	  include/md5.h, include/memory.h, include/modules.h,
	  include/motd.h, include/msg.h, include/numeric.h,
	  include/packet.h, include/parse.h, include/patchlevel.h,
	  include/res.h, include/restart.h, include/resv.h, include/rsa.h,
	  include/s_auth.h, include/s_bsd.h, include/s_conf.h,
	  include/s_debug.h, include/s_gline.h, include/s_log.h,
	  include/s_misc.h, include/s_serv.h, include/s_stats.h,
	  include/s_user.h, include/s_zip.h, include/scache.h,
	  include/send.h, include/setup.h.in, include/setup.h_vms,
	  include/sprintf_irc.h, include/supported.h, include/tools.h,
	  include/vchannel.h, include/whowas.h, modules/m_accept.c,
	  modules/m_admin.c, modules/m_away.c, modules/m_capab.c,
	  modules/m_cburst.c, modules/m_challenge.c, modules/m_cjoin.c,
	  modules/m_close.c, modules/m_connect.c, modules/m_cryptlink.c,
	  modules/m_dmem.c, modules/m_drop.c, modules/m_eob.c,
	  modules/m_gline.c, modules/m_help.c, modules/m_info.c,
	  modules/m_invite.c, modules/m_ison.c, modules/m_join.c,
	  modules/m_kline.c, modules/m_knock.c, modules/m_links.c,
	  modules/m_list.c, modules/m_lljoin.c, modules/m_llnick.c,
	  modules/m_locops.c, modules/m_lusers.c, modules/m_motd.c,
	  modules/m_names.c, modules/m_nburst.c, modules/m_oper.c,
	  modules/m_operwall.c, modules/m_pass.c, modules/m_ping.c,
	  modules/m_pong.c, modules/m_post.c, modules/m_rehash.c,
	  modules/m_restart.c, modules/m_resv.c, modules/m_set.c,
	  modules/m_stats.c, modules/m_svinfo.c, modules/m_testline.c,
	  modules/m_time.c, modules/m_topic.c, modules/m_trace.c,
	  modules/m_unkline.c, modules/m_user.c, modules/m_userhost.c,
	  modules/m_users.c, modules/m_version.c, modules/m_wallops.c,
	  modules/m_who.c, modules/m_whois.c, modules/m_whowas.c,
	  modules/core/m_die.c, modules/core/m_kick.c,
	  modules/core/m_kill.c, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/core/m_nick.c,
	  modules/core/m_part.c, modules/core/m_quit.c,
	  modules/core/m_server.c, modules/core/m_sjoin.c,
	  modules/core/m_squit.c, src/adns.c, src/balloc.c, src/channel.c,
	  src/channel_mode.c, src/class.c, src/client.c, src/crypt.c,
	  src/debug.c, src/event.c, src/fdlist.c, src/fileio.c,
	  src/getopt.c, src/hash.c, src/hook.c, src/hostmask.c,
	  src/irc_string.c, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/ircdauth.c, src/kdparse.c, src/linebuf.c,
	  src/list.c, src/listener.c, src/m_error.c, src/md5.c,
	  src/memory.c, src/modules-dld.c, src/modules.c, src/motd.c,
	  src/numeric.c, src/packet.c, src/parse.c, src/restart.c,
	  src/resv.c, src/rsa.c, src/s_auth.c, src/s_bsd.c,
	  src/s_bsd_devpoll.c, src/s_bsd_kqueue.c, src/s_bsd_poll.c,
	  src/s_bsd_select.c, src/s_bsd_sigio.c, src/s_conf.c,
	  src/s_debug.c, src/s_gline.c, src/s_log.c, src/s_misc.c,
	  src/s_serv.c, src/s_stats.c, src/s_user.c, src/scache.c,
	  src/send.c, src/snprintf.c, src/sprintf_irc.c, src/tools.c,
	  src/vchannel.c, src/whowas.c:
	  - Put the ircd under GPLv2, as allowed under GPLv1.
	  - Added a consistant header to all ircd files as suggested under the
	    GPL version 2 license. This will ensure that we as coders are
	    protected against inclusion of our code into commercial projects,
	    and more importantly, liability for anything that might go wrong.
	  Approved-By: Diane

2002-01-05 00:27  db

	* src/md5.c:
	  - alarm() is deprecated, use setitimer
	  - timer is not needed anyway, since NO one in their right minds
	    would run an efnet server on an NFS mount
	  - this code sucketh majorly and will be dealt with, but I couldn't
	    take the alarm anymore

2002-01-04 21:15  db

	* servlink/servlink.h, src/channel.c:
	  - Two tiny portability changes suggested by Joseph Mallett
	    missing void * in channel.c check_splitmode()
	    moved order of externs in serverlink.h

2002-01-04 10:01  leeh

	* modules/Makefile.in, src/modules-dld.c, src/modules.c:
	  - made m_message.c a core module

2002-01-04 07:10  leeh

	* src/modules.c:
	  - there was an #ifdef STATIC_MODULES at the top :)

2002-01-04 00:33  db

	* src/: ircd.c, modules.c:
	  - Don't try to load core modules if doing a static link

2002-01-03 18:46  leeh

	* src/channel.c:
	  - dont allow users to send to resv'd channels

2002-01-03 07:11  leeh

	* modules/Makefile.in, src/modules-dld.c, src/modules.c:
	  - made quit a core module

2002-01-02 17:19  leeh

	* src/modules-dld.c:
	  - ported to modules-dld

2002-01-02 17:08  leeh

	* include/modules.h, src/modules.c:
	  - finished protected modules (raaaah!)

2002-01-02 16:43  leeh

	* include/modules.h, src/modules.c:
	  - added headers to most of the modules functions

2002-01-02 12:45  leeh

	* include/modules.h, modules/Makefile.in, src/ircd.c,
	  src/modules-dld.c, src/modules.c:
	  - install core modules into ircd/modules
	  - on startup walk a table of core modules, loading each as we go
	    if any fail, exit(0);
	  - no protection from modunload as of yet..

2002-01-02 11:43  leeh

	* include/config.h, include/config.h.dist, src/modules-dld.c,
	  src/modules.c:
	  - renamed MODPATH to AUTOMODPATH
	  - added MODPATH

2002-01-02 10:38  leeh

	* modules/core/m_kill.c:
	  - dont give out remote servernames of kills when we have shide on

2002-01-02 10:31  wcampbel

	* doc/serverhide.txt: Updated SHIDE documentation

2002-01-02 10:25  leeh

	* modules/m_users.c, src/s_user.c:
	  - fixes for local client stuff wrt shide

2002-01-01 17:27  leeh

	* modules/core/m_kill.c:
	  - tell users when they get killed

2002-01-01 17:12  leeh

	* modules/: Makefile.in, core/Makefile.in:
	  - beginning of the core module stuff

2002-01-01 13:50  db

	* modules/core/m_mode.c:
	  - cosmetic cleanup of m_mode.c

2002-01-01 11:27  leeh

	* modules/Makefile.in, modules/core/Makefile.in,
	  src/channel_mode.c:
	  - allow halfops to set all simple modes except MODE_PRIVATE
	  - that extra -c in Makefile.in was causing:
	    [2002/1/1 16.22] Error loading module m_whowas.so:
	    /home/leeh/ircd-7/modules/autoload//m_whowas.so: unsupported file
	    type

	    reverted.

2002-01-01 10:58  leeh

	* doc/: example.conf, example.conf.efnet:
	  - documented vhost=""

2002-01-01 10:53  leeh

	* src/: ircd_lexer.l, ircd_parser.y:
	  - renamed bind_address to vhost for consistency with serverinfo {};

2002-01-01 01:56  a1kmm

	* include/channel.h:
	  - Turned off intensive debug. Hopefully all the channel bugs have
	  gone.

2002-01-01 00:08  a1kmm

	* modules/m_capab.c:
	  - Handle CAPAB x y z the same as CAPAB :x y z

2001-12-31 10:22  db

	* modules/: Makefile.in, core/Makefile.in:
	  - missing -c

2001-12-31 09:06  db

	* src/channel_mode.c:
	  - fixed obvious typo. this resolves assert failure

2001-12-31 07:54  db

	* src/s_serv.c:
	  - trivial cosmetic change. dumb spacing

2001-12-31 06:13  a1kmm

	* src/channel_mode.c:
	  - Changed cl => ch. It is 1/1/2002 0:13 NZDT so I am allowed to make
	    a few typos.

2001-12-31 06:04  a1kmm

	* include/channel.h, src/channel_mode.c, src/ircd_parser.y,
	  src/parse.c:
	  - Commited some integrity checks for the channels. These are very
	    CPU intensive, and they are checked for every command, but I left
	    them on for now so we can catch anything wrong with the channel code
	    for the soonest possible release time.

2001-12-30 17:11  db

	* include/config.h, include/config.h.dist, modules/core/m_sjoin.c:
	  - "up" ported IGNORE_BOGUS_TS define from 6. This is a module, so
	    easy to re-enable later.

2001-12-30 04:11  a1kmm

	* modules/m_who.c, modules/core/m_sjoin.c, src/s_debug.c,
	  src/s_serv.c, src/vchannel.c:
	  - Fixed a few missing references to chanops_voiced. This time I
	    found where they should be with grep, so I hopefully did not miss
	  any again.

2001-12-30 02:49  a1kmm

	* include/channel.h, modules/.depend, modules/core/m_sjoin.c,
	  src/channel.c, src/channel_mode.c, src/send.c:
	  - Finished implementing +vo. It is turned on by the define
	  REQUIRE_OANDV
	  - Fixed a minor bug in chm_voice which could cause desyncs.
	  - Fixed halfop privilege checks for simple modes and +-h.

2001-12-30 02:45  db

	* doc/LazyLinks.as.implemented.txt, include/s_conf.h,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_bsd.c, src/s_conf.c,
	  src/s_serv.c:
	  - added the ability to specify a specific IP to bind to for outgoing
	    connects. in connect block
	  - removed really really bad doc. If this is still needed, I have a
	    local copy.

2001-12-30 01:32  db

	* include/s_conf.h, src/s_conf.c:
	  - removed another uneeded four bytes from struct ConfItem

2001-12-30 00:55  db

	* include/s_conf.h:
	  - removed two struct elements no longer used in struct ConfItem

2001-12-29 23:19  db

	* src/: client.c, irc_string.c, ircd.c, ircdauth.c, listener.c,
	  m_error.c, match.c, parse.c, s_bsd_kqueue.c, s_bsd_sigio.c,
	  s_conf.c, s_debug.c, s_serv.c, s_user.c, snprintf.c:
	  - removed some #if 0's .. Some of these are ok for commenting code
	    so left those, but most was old and dead code.

2001-12-29 18:29  db

	* include/channel.h, src/channel_mode.c:
	  - start in at the +vo crapola

2001-12-29 17:52  wcampbel

	* doc/: example.conf, example.conf.efnet: Document ping_cookie in
	  both example.conf's

2001-12-29 13:40  davidt

	* modules/m_help.c:
	  - Avoid trying to lowercase a string constant.

2001-12-29 12:24  davidt

	* src/ircd.c:
	  - Produce srandom seed slightly differently
	    (XOR tv_sec with tv_usec and pid)

2001-12-29 03:23  androsyn

	* modules/m_pong.c: Fixed header order..

2001-12-29 03:07  androsyn

	* include/client.h, include/numeric.h, include/s_conf.h,
	  src/ircd.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/messages.tab, src/s_user.c, modules/m_pong.c: Changes to
	  support PING cookies.

2001-12-28 12:08  davidt

	* help/Makefile.in, contrib/help/opers/index, help/opers/index,
	  contrib/help/users/index, help/users/index:
	  - Expand tabs in index, to prevent it being mutilated when
	  displayed.

2001-12-28 12:00  davidt

	* help/Makefile.in, contrib/help/users/index, help/users/index,
	  contrib/help/opers/index, help/opers/index:
	  - Convert index to uppercase, and columnise.

2001-12-28 11:41  davidt

	* help/Makefile.in, contrib/help/opers/index, help/opers/index,
	  contrib/help/users/index, help/users/index, modules/m_help.c:
	  - De-K&Rify m_help.c
	  - Make /HELP and /UHELP case-insensitive
	  - Make /UHELP with no args do /UHELP index (like /HELP)
	  - Add 'make index' target in help/
	  - Add indexes.
	    Currently these are in CVS, and auto-generated.  Perhaps they
	    shouldn't be.

2001-12-27 20:21  a1kmm

	* modules/m_llnick.c:
	  - Also don't allow llnick on a non-local nick.

2001-12-27 20:10  a1kmm

	* modules/m_llnick.c:
	  - Don't allow a ll client server to change a nick on the ll hub.

2001-12-27 16:02  leeh

	* modules/m_stats.c:
	  - missed a hook_add_event

2001-12-27 06:39  leeh

	* modules/m_stats.c:
	  - commiting in contrib/ only doesnt work, oops ;p

2001-12-27 06:38  leeh

	* contrib/Makefile.in, contrib/README, contrib/example_module.c,
	  contrib/m_flags.c, contrib/m_jupe.c, contrib/m_mkpasswd.c,
	  contrib/spy_admin_notice.c, contrib/spy_info_notice.c,
	  contrib/spy_links_notice.c, contrib/spy_motd_notice.c,
	  contrib/spy_stats_notice.c, contrib/spy_stats_p_notice.c,
	  contrib/spy_trace_notice.c, modules/m_map.c:
	  - added the Revision stuff to the _version strings in contrib/
	  - inverted an if() to make it cleaner
	  - added stats_p_notice spying..

2001-12-26 21:36  db

	* src/ircd_parser.y:
	  - If there is no crypt, don't look for crypt variables..

2001-12-25 01:51  androsyn

	* src/: s_stats.c, scache.c: Fixed more bogus $Id: fullhist.php,v 1.1 2005/11/03 18:52:18 adx Exp $ tags..

2001-12-25 01:48  db

	* src/whowas.c:
	  - bogus $Id

2001-12-24 11:15  androsyn

	* modules/: m_accept.c, m_admin.c, m_away.c, m_capab.c, m_cburst.c,
	  m_challenge.c, m_cjoin.c, m_close.c, m_connect.c, m_cryptlink.c,
	  m_dmem.c, m_drop.c, m_eob.c, m_gline.c, m_help.c, m_info.c,
	  m_invite.c, m_ison.c, m_join.c, core/m_die.c, m_kline.c,
	  m_knock.c, m_links.c, m_list.c, m_lljoin.c, m_llnick.c,
	  m_locops.c, m_lusers.c, core/m_kick.c, core/m_kill.c,
	  core/m_message.c, m_motd.c, m_names.c, m_nburst.c, m_oper.c,
	  m_operwall.c, m_pass.c, m_ping.c, m_pong.c, m_post.c,
	  core/m_mode.c, core/m_nick.c, core/m_part.c, core/m_quit.c,
	  m_rehash.c, m_restart.c, m_resv.c, m_set.c, m_stats.c,
	  m_svinfo.c, m_time.c, m_topic.c, core/m_server.c, core/m_sjoin.c,
	  core/m_squit.c, m_trace.c, m_unkline.c, m_user.c, m_userhost.c,
	  m_users.c, m_version.c, m_wallops.c, m_who.c, m_whois.c,
	  m_whowas.c: Change the _version stuff to use the Revision tag..

2001-12-24 11:12  androsyn

	* modules/m_testline.c: Test commit..

2001-12-23 16:11  davidt

	* src/s_serv.c:
	  - Fix possible division by zero.

2001-12-22 00:31  wcampbel

	* modules/m_close.c: Fix for: *** CLOSE Not enough parameters

2001-12-21 22:09  wcampbel

	* doc/ircd.8: Update to the manpage, HTML version available:
	  http://kabel.pp.ru/sgml/ircd.8.html

2001-12-20 23:57  wcampbel

	* doc/challenge.txt: Update to the CHALLENGE/Response Docs

	  Approved by:	me.

2001-12-20 23:11  db

	* modules/m_oper.c:
	  - An oper using RSA challenge, does not have a normal password.
	    If they are perverse enough to try to oper using a password, don't
	    let them core the server.

2001-12-20 15:32  leeh

	* src/send.c:
	  - dont check to->from->from!

2001-12-20 15:23  leeh

	* doc/example.conf, doc/example.conf.efnet, src/ircd_parser.y:
	  - ripped host=""; from shared {}; and made it use user="user@host";
	    like the rest of the config does..
	  - this MAY cause issues with older confs

2001-12-20 14:31  androsyn

	* src/ircd_parser.y: Fixed oper {} so that a block with a key set
	  and no password is counted as valid.

2001-12-20 13:38  leeh

	* modules/core/m_quit.c:
	  - m_quit() can never be called by a server or a foreign client

2001-12-20 13:34  leeh

	* modules/m_restart.c:
	  - SHOW_IP -> HIDE_IP
	  - removed a pointless ilog(), we have two others anyway.

2001-12-20 13:22  leeh

	* modules/m_info.c:
	  - removed a pointless IsOper()

2001-12-20 05:05  leeh

	* modules/m_stats.c:
	  - we used client_p in half, source_p in half, changed to source_p
	  - dont pace remote clients
	  - cleanups

2001-12-19 12:45  leeh

	* include/client.h, modules/m_knock.c, modules/m_stats.c,
	  modules/m_trace.c, src/s_conf.c, src/s_user.c:
	  - major cleanups on trace
	  - ripped IsIPHidden - its depreciated, we have IsIPSpoof

2001-12-19 11:02  leeh

	* modules/m_trace.c:
	  - dont show spoofed ips to remote opers

2001-12-19 04:59  a1kmm

	* modules/.depend, src/.depend, src/client.c, src/list.c,
	  src/memory.c, src/s_auth.c, src/s_bsd_sigio.c:
	  - Fixed an uninitialised memory reference into localClient that was
	    coring m_challenge.
	  - s_bsd_sigio now updates the time :)
	  - changed the order of some things to cope with the immediate
	    callback from comm_setselect.
	  - Re-added an O_NONBLOCK previously taken out - it caused the adns
	    socket to end up blocking, which is a bad thing.
	  - Moved the #ifdef USE_SIGIO back down - it break make depend where
	  it was.
	  - Remade depend with the right headers.
	  - Added a memfrob in the debugging code to catch uninitialised
	  memory.

2001-12-18 22:09  androsyn

	* src/: channel.c, client.c: Change the default allocations for
	  various block heaps...Probably ought to move these into config.h or
	  something..

2001-12-18 17:35  leeh

	* contrib/m_jupe.c:
	  - changed a couple of %s!%s@%s -> get_oper_name()

2001-12-18 10:38  wcampbel

	* contrib/m_jupe.c: Repo moved the backup from developers into here
	  and applied Lee's fix.  Repo moves are better as they do not lose
	  history.

2001-12-18 10:36  androsyn

	* src/s_bsd_sigio.c: Move the #ifdef for USE_SIGIO a bit further up
	  in the code..

2001-12-18 10:33  androsyn

	* src/s_bsd_sigio.c: Minor cleanups...

2001-12-18 03:42  a1kmm

	* src/: s_auth.c, s_bsd.c:
	  - Made s_auth reschedule if no data is read on the first pass. This
	    is needed for sigio to work properly as we need to try reading at
	    once to tell the kernel to send the signal next time. Note that if
	    any auth data is received, it still must all be received in the same
	    packet. This should be a non-risky commit.
	  - Changed an assert() to an if () return; This was needed because
	    with SIGIO a call to comm_setselect from a handler that was not
	    called by comm_setselect can result in a call to the handler, which
	    caused re-entrancy problems with the assert. As the assert() should
	    never happen, this should not affect the rest of the ircd.
	    Additionally, it is a better action in the case it does happen if
	    NDEBUG is defined, as that would otherwise result in the ircd
	  coring(probably).

2001-12-18 02:20  a1kmm

	* src/s_bsd_sigio.c:
	  - Fixed sigio; we now try to read/write immediately when a handler
	    is set but wasn't before on comm_setselect()

2001-12-17 12:06  leeh

	* src/ircd.c:
	  - commited hwys patch for cygwin

2001-12-16 18:04  db

	* include/channel_mode.h:
	  - removed unused macro
	    I bet there are still a ton of these left ;-(

2001-12-16 17:25  db

	* include/channel.h:
	  - typedef aBan no longer used. GOOD! DIE DIE DIE!

2001-12-16 17:22  leeh

	* include/channel_mode.h, src/channel_mode.c:
	  - removed MODE_KEY and MODE_LIMIT (ahahahha!)

2001-12-16 13:09  leeh

	* modules/core/m_message.c:
	  - PRIVMSG -> "%s", command

2001-12-16 08:05  leeh

	* modules/m_version.c:
	  - 005 gets mapped to 105, duh. :)

2001-12-16 07:03  leeh

	* include/s_gline.h, modules/m_gline.c, modules/m_stats.c,
	  src/s_gline.c:
	  - if something is glined, cleanup_glines() will now remove it from
	    the pending list
	  - call cleanup_glines() after we add a gline
	  - check find_is_glined() earlier in majority_gline - why check for
	    duplicate votes when its not going to matter anyway? :)

2001-12-16 06:36  leeh

	* include/hostmask.h, modules/m_stats.c, src/hostmask.c:
	  - report_Ilines -> report_auth
	  - moved the masked stats I code into m_stats.c

2001-12-16 06:04  leeh

	* modules/: m_info.c, m_motd.c, m_version.c:
	  - removed a bogus MyClient in m_motd()
	  - allow remote versions, depending on serverhide
	  - ratelimit /version
	  - dont send 005 remotely - could cause client confusion?

2001-12-16 05:15  androsyn

	* src/irc_string.c: Yet another stupid commit...

2001-12-16 05:13  a1kmm

	* src/irc_string.c:
	  - INT16SZ = 2, not sizeof(unsigned int)

2001-12-16 05:11  androsyn

	* src/irc_string.c: Fix another #ifdef

2001-12-16 05:08  androsyn

	* src/irc_string.c: forgot the #ifdef IPV6

2001-12-16 05:07  androsyn

	* src/irc_string.c: Fixed an ipv6 compile error..

2001-12-16 04:58  androsyn

	* src/s_bsd_sigio.c: Yet another fix..

2001-12-16 04:57  androsyn

	* src/s_bsd_sigio.c: Additional fixes for sigio..this should
	  resolve the need to goto poll() all the time..

2001-12-16 02:55  androsyn

	* src/send.c: Removed dead code that was #if 0'd out..

2001-12-16 02:53  androsyn

	* src/irc_string.c: Removed a stupid check for INADDRSZ

2001-12-16 02:50  androsyn

	* src/irc_string.c: Ripped out some old code..

2001-12-16 02:48  androsyn

	* src/restart.c: I will compile before I commit

2001-12-16 02:43  androsyn

	* src/restart.c: Fixed misleading message on server restart

2001-12-16 00:10  wcampbel

	* doc/example.conf: Document Jeremy's issue with mismatched
	  forward/reverse in connect {}'s host entry.

2001-12-15 23:53  wcampbel

	* INSTALL, doc/serverhide.txt: Doc updates

2001-12-15 17:39  leeh

	* contrib/Makefile.in, src/s_conf.c:
	  - added jupe back, its not dangerous
	  - missing %s

2001-12-15 17:20  leeh

	* modules/.depend, src/.depend, src/client.c:
	  - you cant compile an id string, commented it out in .depend
	  - check for splitmode everytime a client/server leaves (ugh)

2001-12-15 15:35  leeh

	* messages/ayb.po, messages/custom.po, modules/m_knock.c,
	  src/messages.tab:
	  - updates to knock numerics

2001-12-15 11:32  wcampbel

	* contrib/help/opers/knockll, help/opers/knockll: This command was
	  added recently, adding a generic help file for it.

2001-12-15 00:34  a1kmm

	* modules/.depend, modules/Makefile.in, modules/core/Makefile.in,
	  src/.depend, src/Makefile.in:
	  - Fixed .depend system to work properly with CVS, so we don't always
	    end up committing .depend. .depend changes should now be rare.
	    Please do not commit after make depend from a non-gcc box unless
	    you are sure that your compiler is not including system headers.
	    Other than that .depend should be universal so we shouldn't
	  experience any problems.

2001-12-15 00:21  wcampbel

	* INSTALL: Lee edited the INSTALL file without editing the SGML
	  source, merged back his changes.

2001-12-15 00:10  wcampbel

	* Hybrid-team, INSTALL, doc/challenge.txt, doc/index.txt,
	  doc/messages.txt, doc/server-version-info, doc/serverhide.txt:
	  Documentation updates

2001-12-14 23:25  androsyn

	* configure: Fixed the check for sigio...

2001-12-14 23:24  db

	* modules/m_trace.c:
	  - fixed m_trace bug for unopered clients, we didn't check that
	    parv[1] was valid before blindly using it.

2001-12-14 23:04  a1kmm

	* src/hostmask.c:
	  - stats K & stats Irequested by users is now much more efficiently
	    handled, and it actually works.

2001-12-14 21:31  db

	* modules/m_unkline.c:
	  - cleanups of extraneous spaces

2001-12-14 21:24  db

	* include/s_conf.h, modules/m_kline.c, src/s_conf.c:
	  - No reason at all to waste space in the ConfItem

2001-12-14 21:07  db

	* include/s_conf.h, modules/m_kline.c, src/s_conf.c:
	  - Cleaned up oper_reason code. Only the admins need to see the oper
	    reason.  So only write the oper reason to the kline/dline conf file.
	    Never need to read it back in.

2001-12-14 11:47  androsyn

	* configure, include/setup.h.in: Last of the sigio changes..

2001-12-14 10:48  androsyn

	* src/: Makefile.in, s_bsd_sigio.c, s_serv.c: Last of the changes
	  for SIGIO i think...

2001-12-14 10:46  leeh

	* INSTALL, doc/example.conf, doc/example.conf.efnet, src/s_conf.c:
	  - added example.conf.efnet, which allows us to make exmaple.conf
	    more userfriendly with features..

2001-12-14 10:36  leeh

	* doc/example.conf:
	  - added the split options to example.conf

2001-12-14 10:26  leeh

	* modules/m_gline.c:
	  - dont compare glines against klines

2001-12-14 10:16  leeh

	* src/client.c:
	  - fixed the kline_with_connection_closed/kline_with_reason stuff

2001-12-14 09:31  leeh

	* modules/: m_oper.c, core/m_message.c:
	  - ban our opers doing $irc.server
	  - initialise oconf to NULL

2001-12-14 03:49  a1kmm

	* .cvsignore, modules/.cvsignore, modules/m_oper.c:
	  - Fixed a core in m_oper() when you deoper and then reoper.

2001-12-14 02:47  a1kmm

	* src/channel_mode.c:
	  - Don't add ' ' to channel parambuffers unless we just added a
	    parameter mode.

2001-12-13 23:20  bill

	* src/s_conf.c:
	  - added | support into klines

2001-12-13 20:30  leeh

	* src/send.c:
	  - removed a dodgy deprintf..

2001-12-13 15:09  leeh

	* include/channel.h, modules/core/m_die.c, modules/m_restart.c,
	  modules/m_set.c, src/channel.c, src/ircd.c:
	  - added a restart notice for servers/users
	  - fixed a dupe die notice
	  - when we're in splitmode, add an event for check_splitmode() every
	    60s to pull us out of it, delete this when its deactivated

2001-12-13 14:27  leeh

	* include/ircd.h, modules/m_join.c, modules/m_set.c, src/channel.c,
	  src/ircd.c, src/s_conf.c:
	  - more splitcode stuff, added it all to /set and made no_*_on_split
	  work
	  - needto add user/server tracking later..

2001-12-13 13:31  davidt

	* doc/technical/cryptlink.txt:
	  - Updated cryptlinks specification as discussed with vulture and
	    einride.  Note that this new protocol has not yet been implemented.

2001-12-13 12:57  leeh

	* configure:
	  - updated from configure.in or something

2001-12-13 05:29  leeh

	* include/s_conf.h, src/ircd_lexer.l, src/ircd_parser.y:
	  - added split_user_count and split_server_count (number) to channel
	  {};
	  - added no_create_on_split and no_join_on_split (yes/no) to channel
	  {};

2001-12-13 05:07  leeh

	* include/dline_conf.h, src/dline_conf.c:
	  - removed the old dline-conf stuff

2001-12-12 13:23  db

	* src/ircd.c:
	  - make buff 32 bytes long in both write_pidfile and check_pidfile.
	    purely cosmetic. Just for consistency.

2001-12-12 02:41  db

	* modules/core/m_server.c:
	  - changed "no H-line" to "no matching hub_mask"
	  - changed comments to match docs host_mask->hub_mask
	  - made an if clearer and a tad more efficient

2001-12-11 23:58  db

	* src/s_conf.c:
	  - "forward" ported hwy101's tkline expire notify from 6 to 7

2001-12-11 18:09  leeh

	* configure:
	  - $GCC -> $CC, creating 2.5gig files with make depend isnt fun.

2001-12-11 09:44  leeh

	* include/supported.h:
	  - if &channels are disabled, dont send it in 005

2001-12-10 23:32  androsyn

	* configure, contrib/Makefile.in, modules/Makefile.in,
	  modules/core/Makefile.in, servlink/Makefile.in, src/Makefile.in,
	  tools/Makefile.in: Fixed make depend weirdness. Use cc -xM if on
	  solaris and not using gcc

2001-12-10 23:09  androsyn

	* src/ircd.c: Fixed our trojan-enz boner of the year bug...
	  Anybody caught doing something like char buff[sizeof(unsigned
	  int)+1] will be beaten with extreme prejudice.

2001-12-10 22:42  a1kmm

	* modules/Makefile.in, modules/core/Makefile.in, src/Makefile.in:
	  - Fixed $Id: fullhist.php,v 1.1 2005/11/03 18:52:18 adx Exp $ tags echoed from Makefile.in into .depend

2001-12-10 22:35  db

	* src/ircd.c:
	  - changed fd -> fb. How confusing.

2001-12-10 22:22  a1kmm

	* configure, help/Makefile.in, include/rsa.h, include/setup.h.in,
	  modules/Makefile.in, modules/core/Makefile.in, src/Makefile.in,
	  src/rsa.c, src/s_bsd_devpoll.c, src/s_bsd_kqueue.c,
	  src/s_bsd_poll.c, src/s_bsd_select.c, src/s_bsd_sigio.c:
	  - Fixed dependencies so they are saved to a file ".depend". This
	    means that building doesn't depend on sed, and it fixes the problems
	    admins on boxes that don't support cc -MM by allowing the .depend
	    file to already exist in the tarball.
	  - Moved all the #include "file" that were inside a #ifdef out of
	    them so that we always have dependencies at least as strong as they
	    should be.
	  - Wrapped rsa.h in #ifdef HAVE_LIBCRYPTO so we can include it even
	    when we don't have libcrypto.
	  - Took the dependency build out of configure.
	  - Added a depend target to help/Makefile.in
	  - Added a $Id: fullhist.php,v 1.1 2005/11/03 18:52:18 adx Exp $ tag to help/Makefile.in so commit doesn't complain.

2001-12-10 22:17  joant

	* src/s_log.c: Fixing SYSLOG_USERS compile cleanup

2001-12-10 22:12  joant

	* src/s_log.c: Fixing SYSLOG_USERS #define error

2001-12-10 22:09  db

	* src/fileio.c:
	  - formatting change only.

2001-12-10 18:21  leeh

	* modules/core/m_message.c, src/send.c:
	  - dont check to->from == from->from in sendto_anywhere, stops
	    clients privmsg'ing themselves
	  - moved the check for a client above @#channel etc
	  - fixed a bogus check, only disallow non-chanops to send to
	  +%@#channel

2001-12-10 02:26  androsyn

	* src/s_bsd_sigio.c: Removed unnecessary variable..

2001-12-10 02:24  androsyn

	* src/s_bsd_sigio.c: Some cleanups of sigio..

2001-12-10 02:15  androsyn

	* src/send.c, include/fdlist.h: So the last commit to fdlist.h was
	  misguided...

	  We now go into send_queued_write() directly rather than trying to go
	  into comm_setselect() to do it first...This seems to make sigio work
	  right..

2001-12-10 01:57  androsyn

	* include/fdlist.h: Added a field to track writes for sigio

2001-12-10 01:01  androsyn

	* src/s_bsd_sigio.c: Keep sigio from using 100% of the cpu..

2001-12-10 00:09  lusky

	* include/patchlevel.h:
	  - revved patchlevel to 7beta9

2001-12-09 23:37  jdc

	* configure:
	  - Removal of -R for SSL when using --disable-shared-modules.

2001-12-09 23:17  jdc

	* include/irc_string.h, include/sprintf_irc.h, src/sprintf_irc.c:
	  - Fixes for ircsprintf() declaration problems.

2001-12-09 22:55  jdc

	* src/channel.c:
	  - Follow-up fix for s_iphost.

2001-12-09 22:52  jdc

	* modules/m_knock.c, src/channel.c:
	  - Renamed s_host to src_host; s_host is reserved on Solaris 8,
	    apparently.  s_ipaddr also renamed to src_ipaddr to keep
	  consistency.

2001-12-09 21:59  db

	* include/sprintf_irc.h, src/hash.c, src/hostmask.c,
	  src/irc_string.c, src/ircdauth.c, src/linebuf.c,
	  src/sprintf_irc.c:
	  - register keyword is SOOO obsolete its not even funny.
	    DIE DIE DIE DIE DIE DIE

2001-12-08 19:57  jdc

	* configure:
	  - Fix for duplicate -lz's during link-time.

2001-12-08 13:27  jdc

	* configure:
	  - zlib version checking during configure.

2001-12-07 17:53  db

	* include/send.h, modules/m_invite.c, modules/core/m_message.c,
	  src/send.c:
	  - do not send to origin in sendto_channel_remote()

2001-12-07 05:59  leeh

	* doc/example.conf, include/s_conf.h, modules/m_join.c,
	  src/ircd_lexer.l, src/ircd_parser.y:
	  - added configserverhide.disable_local_chanels

2001-12-07 05:45  leeh

	* contrib/: m_clearchan.c, m_jupe.c, m_ojoin.c:
	  - these needed updating wrt the struct Message change done ages ago

2001-12-06 18:34  davidt

	* make.com:
	  - Remove accidental #Id# tag from ChangeLog
	  - Add #Id# tag to make.com

2001-12-06 17:52  davidt

	* TODO:
	  - Add $Id: fullhist.php,v 1.1 2005/11/03 18:52:18 adx Exp $ line.

2001-12-06 16:55  androsyn

	* TODO: Test commit

2001-12-06 15:46  leeh

	* include/modules.h:
	  - missing knockll_msgtab

2001-12-06 14:14  androsyn

	* src/s_bsd_sigio.c: Minor cleanups in s_bsd_sigio.c

2001-12-06 12:33  androsyn

	* include/s_bsd.h, src/ircd_signal.c, src/s_bsd.c,
	  src/s_bsd_sigio.c: Added the workings for SIGIO support with RT
	  signals on Linux.

2001-12-06 10:03  androsyn

	* src/adns.c: Remove two stupid comments from adns.c

2001-12-06 10:02  androsyn

	* src/adns.c: Fix a coredump in adns.c on rehash.  Basically if
	  there were any pending events, adns would dump core upon the timeout
	  of that event.  We now timeout *all* pending dns requests on a
	  /rehash dns, making them fail no matter what.

2001-12-04 09:13  ejb

	* src/ircd.c:
	  - fix a bug where we always sent CAP_ZIP even if the link wasn't
	  zipped.

2001-12-04 04:32  leeh

	* modules/m_topic.c:
	  - only for +s chans it is :P

2001-12-04 04:00  leeh

	* modules/m_topic.c:
	  - dont send TOPICWHO if theyre not members

2001-12-04 03:30  db

	* include/s_conf.h:
	  - added oper_reason to conf struct, nothing with it yet

2001-12-03 13:38  androsyn

	* src/channel.c: Forgot to remove a MyFree on topic_info

2001-12-03 11:31  androsyn

	* include/s_serv.h: Fixed a minor compile issue.

2001-12-03 11:23  androsyn

	* include/s_serv.h, src/s_serv.c: Add caps for TBURST.

2001-12-03 11:21  androsyn

	* modules/core/m_sjoin.c: Actually do something with the ts_winner
	  field

2001-12-03 11:17  androsyn

	* include/channel.h, include/hook.h, src/hook.c, src/s_serv.c:
	  Minor changes to support a hook on bursting channels and add a field
	  to keep track of the ts winner...

2001-12-03 10:35  wcampbel

	* contrib/help/opers/notice, contrib/help/opers/privmsg,
	  help/opers/notice, help/opers/privmsg: Update of the NOTICE and
	  PRIVMSG help files for opers to include opers@server as a target

2001-12-02 10:16  ejb

	* doc/technical/debug_api.txt, src/debug.c:
	  - Added documention for debug API.

2001-12-02 10:15  leeh

	* src/s_serv.c:
	  - we only support one cipher both ways:
	    ENC:BF/256,BF/256 -> ENC:BF/256

2001-12-02 10:00  leeh

	* BUGS, include/s_conf.h, modules/m_rehash.c, modules/m_unkline.c,
	  src/ircd.c, src/modules-dld.c, src/modules.c, src/s_conf.c:
	  - make MODRESTART cause a rehash, to reload modules from the conf
	  - rehash() was taking source_p and client_p, yet doing nothing with
	    them, so dont bother passing them

2001-12-02 09:30  leeh

	* modules/core/m_message.c:
	  - $server -> $$server
	  - #host.mask -> $#host.mask

2001-12-02 09:11  leeh

	* modules/m_knock.c:
	  - commited KNOCK stuff.. clients doing a KNOCK on a LL will have the
	    uplink answer their queries, theres a bit of kludging here.. but it
	  works

2001-12-02 08:31  leeh

	* modules/core/m_nick.c:
	  - fixed up the hostname/username checking, we dont need to pass
	    source_p (its always gunna be the same as client_p anyway) and due
	    to the fact we dont prefix nick - source_p isnt always where the
	  nick originated..

2001-12-02 07:55  leeh

	* doc/example.conf:
	  - cleanups

2001-12-02 07:11  leeh

	* src/s_user.c:
	  - removed an extra :

2001-12-02 07:08  leeh

	* src/s_user.c:
	  - dont give out ips on fake direction of NICK

2001-12-02 07:05  leeh

	* modules/m_topic.c:
	  - if serverhide is on and a LL forwards us a topic request - if
	    we're masking who set the topic, mask it to the LLs servername, not
	  ours..

2001-11-30 14:04  db

	* include/ircd_defs.h:
	  - Well, that definition is obsolete.

2001-11-30 11:59  androsyn

	* include/channel.h, modules/m_topic.c: Made topic_info a part of
	  struct Channel and not just a pointer

2001-11-30 10:18  davidt

	* modules/m_knock.c:
	  - oops, also introduce unknown clients to LL servers when
	  propigating KNOCK

2001-11-30 10:06  davidt

	* modules/m_knock.c: only pass KNOCK to servers which know about
	  chptr (LL fix)

2001-11-30 08:45  leeh

	* modules/m_knock.c:
	  - propagate knock remotely..

	    there still needs to be LL stuff in here

2001-11-30 04:52  a1kmm

	* src/s_user.c:
	  - Removed extraneous argument in a kill_client.

2001-11-30 04:45  a1kmm

	* include/send.h, modules/m_invite.c, modules/core/m_message.c,
	  src/send.c:
	  - Ran m_message.c and send.c through indent - they were unreadable
	    before because of tabs.
	  - Cleaned up send.h - removed separate __GNUC__ and not gnuc
	    prototypes and made a single macro to give format attributes.
	    Removed prototypes for functions which no longer exist.
	  - Made sendto_remote_list work and send a linebuf once to every
	    remote user on the list.
	  - Don't require remote users to be in the channel to invite.
	  - Fixed vchan naming and propagation issues.
	  - Don't send error about a user being in channel if they are in
	    another vchan which is secret when you invite them(silently ignore).
	  - Don't send error about a user being on a different server if
	    server hiding is on and they are invited to a local channel(silently
	  ignore).
	  - Propagate invite to all servers where there are chanops or
	    halfops, as well as to where the invited user resides.
	  - Send a notice to all local chanops and halfops if a channel is +p
	    when someone invites.
	  - Don't accept privmsg/notice for local channels from servers.
	  - Don't send privmsg/notice for local channels to servers.
	  - Only propagate @%+ channel messages to servers that have ops,
	    half-ops or ops, and halfops-ops-voiced respectively.
	  - Allow privmsg from servers - it is stupid not to when we allow
	    notices from servers.
	  - Killed the mallocs and reallocs in the message code - we now use a
	    static buffer.
	  - Probably introduced a few bugs because I'm tired(but hopefully
	  not).

2001-11-29 17:45  jdc

	* Hybrid-team:
	  - Updated Email address, as to welcome even more spam.  *rolls eyes*

2001-11-29 17:33  jdc

	* TODO:
	  - Updated my portion of the TODO list.  *cry*

2001-11-29 17:20  leeh

	* Hybrid-team:
	  - updated my email and sanified the core list slightly

2001-11-29 17:00  db

	* Hybrid-team:
	  - Added einride to core, moved from contributor

2001-11-29 15:23  leeh

	* include/client.h, include/numeric.h, include/s_conf.h,
	  include/s_serv.h, modules/m_knock.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/messages.tab, src/s_conf.c, src/s_serv.c:
	  - added first half of knock stuff.. the remote propagation doesnt
	    exist yet, and the numerics needadding to messages/*

	    but ive run out of time, ill finish later :P

2001-11-29 10:57  db

	* src/: messages.tab, numeric.c: Removed unnecessary casting on
	  NULL in messages.tab be a bit more paranoid in numeric.c

2001-11-29 00:53  db

	* include/numeric.h, modules/m_knock.c, src/messages.tab,
	  src/numeric.c:
	  - KNOCK is now using a numeric at least on local server.
	  - numeric.c was not checking all validity

2001-11-28 20:54  db

	* include/send.h: -fixed prototype for sento_channel_remote

2001-11-28 20:27  jdc

	* include/rsa.h, modules/m_cryptlink.c, src/ircd.c, src/s_serv.c:
	  * include/rsa.h:
	    - Remove #include <openssl/rsa.h>.  #include in include files ==
	    yuck.
	  * modules/m_cryptlink.c:
	    - Re-order #include statements, particularly rsa.h being included
	      BEFORE <openssl/rsa.h>
	    - Remove #include for <openssl/bio.h> and <openssl/pem.h>.  FYI,
	      the pem.h include breaks a lot of things due to OpenSSL's include
	      structure being a gigantic mess.
	  * src/s_serv.c
	    - Same as modules/m_cryptlink.c, for the most part.
	  * src/ircd.c
	    - Tinker with the pid file writing stuff.  Made it an unsigned
	      int, vs.  just an int.  Little more verbose if fbputs() fails too.

2001-11-28 20:03  db

	* include/send.h, modules/m_knock.c, modules/core/m_message.c,
	  src/send.c:
	  - This re-adds remote KNOCK capability in the same way it was done
	    in h6.  Its not a good way of doing it. There should be a KNOCK
	    CAPAB for h7 servers to lessen the traffic sent for a KNOCK. There
	    should also be some NUMERICS here instead of notices.

2001-11-28 12:48  db

	* src/: parse.c, send.c: tiny format change in parse.c

	  The guts of it is here. When using sendto_match_butone() which is
	  =only= used to do the "oper magic" messages. i.e. /msg $server.mask
	  and /msg #hostmask The prefix sent to remote servers is only the
	  nick, not the nick!user@host.  The prefix sent to local users is
	  nick!user@host

2001-11-28 08:47  leeh

	* modules/core/m_kick.c, src/channel_mode.c:
	  - dont allow halfops to kick halfops, or set +/-h
	  - allowing +h to set bans, but not see a real banlist is daft
	  - halfops can also set simple modes

2001-11-28 07:34  leeh

	* include/channel_mode.h, src/channel_mode.c:
	  - undef BOUNCE_BAD_HOPS by default and reenable for release.

2001-11-28 07:33  leeh

	* src/channel_mode.c:
	  - attempt at fixing up +a.. there was a bogus if() that was
	    preventing resyncs when setting -a, amongst other things.. (unsure
	    if it was ok to remove, hunt for the XXX)

	    theres still a bug where setting -ao will give a user the oplist..

2001-11-27 13:30  davidt

	* include/linebuf.h, src/linebuf.c, src/packet.c, src/s_serv.c:
	  - Yet more linebuf fixes.
	    * Rename 'binary' flag 'raw', since it was confusing people, and
	      didn't reflect what the code actually did.
	    * Initialise binary/raw flag to 0, to avoid bogusly stripping
	      \r\n from sent data.
	    * Fix linebuf_get to correctly strip leading \r\n from data, when
	      required, instead of removing the correct number of bytes from
	      the _end_ of the string.

2001-11-26 19:49  davidt

	* contrib/m_flags.c, contrib/m_mkpasswd.c, modules/m_map.c:
	  - Fix compile warnings in contrib modules

2001-11-26 19:48  davidt

	* contrib/m_opme.c:
	  - Fix m_opme.c to compile

2001-11-26 15:25  a1kmm

	* src/: ircd.c, linebuf.c:
	  - Let's initialise the resolver in the right place...

2001-11-26 13:01  davidt

	* src/linebuf.c:
	  - Apply fix as discussed on mailing list and IRC.
	    * Do not incorrectly terminate buffer simply because we ran out of
	      data to _read_.

2001-11-26 07:27  androsyn

	* src/adns.c, src/ircd.c, src/ircd_lexer.l, src/ircd_parser.y,
	  doc/example.conf: Okay..the dns_host stuff was a good idea..but
	  its a chicken vs the egg problem.  The parser needs to setup the
	  dns_host stuff..but the parser relies on the resolver being started
	  already...oh well..  This removes the dns_host and dns_port option

2001-11-26 02:38  a1kmm

	* src/linebuf.c:
	  - Fixed a bug to stop carriage returns or linefeeds making their way
	    into messages under some cases.

2001-11-24 21:59  wcampbel

	* doc/: Makefile.in, opers.txt, users.txt: With the new help
	  system, opers.txt and users.txt are no longer needed

2001-11-24 15:35  leeh

	* contrib/example_module.c:
	  - missed this one when I added the extra param

2001-11-21 15:04  leeh

	* modules/m_help.c:
	  - updated the headers

2001-11-21 14:08  wcampbel

	* help/Makefile.in, contrib/help/opers/ping,
	  contrib/help/opers/pong, help/opers/ping, help/opers/pong: Added
	  the final two help files, PING and PONG.

2001-11-21 09:57  androsyn

	* TODO: Updated a few things..

2001-11-21 09:54  androsyn

	* doc/example.conf: A half-assed attempt at documenting the
	  dns_host and dns_port options.  I'm sure somebody else could explain
	  it better than I did :P

2001-11-21 09:51  androsyn

	* include/ircd.h, include/s_conf.h, src/adns.c, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_bsd_poll.c,
	  src/s_conf.c: Added dns_host and dns_port to server info.
	  Modified set_time() to use gettimeofday() and store the result in
	  struct timeval SystemTime.  CurrentTime is now a macro to
	  SystemTime.tv_sec.

2001-11-21 04:46  androsyn

	* BUGS: I hate mailx on solaris..did i ever tell you this?

2001-11-21 03:49  androsyn

	* BUGS: Please work...

2001-11-21 01:21  wcampbel

	* help/Makefile.in, contrib/help/opers/challenge,
	  contrib/help/opers/dmem, contrib/help/opers/knock,
	  help/opers/challenge, help/opers/dmem, help/opers/knock: Added 3
	  of the remaining missing help files.  From what I can see, there is
	  only "ping" and "pong" left to do.

2001-11-21 01:09  wcampbel

	* help/ison, help/lusers, contrib/help/opers/ison,
	  contrib/help/opers/lusers, help/opers/ison, help/opers/lusers,
	  contrib/help/opers/oper, help/opers/oper: Update to help oper
	  Moved two rev 1.1 help files to their proper locations

2001-11-21 01:06  wcampbel

	* help/Makefile.in, contrib/help/opers/capab,
	  contrib/help/opers/cburst, contrib/help/opers/client,
	  contrib/help/opers/cryptlink, contrib/help/opers/drop,
	  contrib/help/opers/eob, contrib/help/opers/error,
	  contrib/help/opers/help, contrib/help/opers/lljoin,
	  contrib/help/opers/llnick, contrib/help/opers/nburst,
	  contrib/help/opers/pass, contrib/help/opers/post,
	  contrib/help/opers/server, contrib/help/opers/sjoin,
	  contrib/help/opers/svinfo, contrib/help/opers/uhelp,
	  contrib/help/opers/user, help/opers/capab, help/opers/cburst,
	  help/opers/client, help/opers/cryptlink, help/opers/drop,
	  help/opers/eob, help/opers/error, help/opers/help,
	  help/opers/lljoin, help/opers/llnick, help/opers/nburst,
	  help/opers/pass, help/opers/post, help/opers/server,
	  help/opers/sjoin, help/opers/svinfo, help/opers/uhelp,
	  help/opers/user: Another large burst of help files.  Only a few
	  still left to do, and indexes made.

2001-11-20 23:27  wcampbel

	* help/Makefile.in, help/ison, help/lusers,
	  contrib/help/opers/notice, contrib/help/opers/privmsg,
	  contrib/help/opers/userhost, contrib/help/users/notice,
	  contrib/help/users/privmsg, help/opers/notice,
	  help/opers/privmsg, help/opers/userhost, help/users/notice,
	  help/users/privmsg: More help files.  Nearly complete now.

2001-11-20 23:08  wcampbel

	* help/Makefile.in, contrib/help/opers/motd,
	  contrib/help/opers/userhost, contrib/help/opers/users,
	  contrib/help/opers/whois, help/opers/motd, help/opers/userhost,
	  help/opers/users, help/opers/whois: Ok, another batch of help
	  files

2001-11-20 22:41  wcampbel

	* contrib/help/opers/cmode, contrib/help/opers/credits,
	  contrib/help/opers/invite, contrib/help/opers/join,
	  contrib/help/opers/links, contrib/help/opers/time,
	  contrib/help/opers/who, help/opers/cmode, help/opers/credits,
	  help/opers/invite, help/opers/join, help/opers/links,
	  help/opers/time, help/opers/who: Spellchecked all the help files.
	  Another batch will be coming soon.

2001-11-20 22:36  wcampbel

	* help/Makefile.in, contrib/help/opers/credits, help/opers/credits:
	  Added the /help credits

2001-11-20 22:22  wcampbel

	* help/Makefile.in, contrib/help/opers/admin,
	  contrib/help/opers/away, contrib/help/opers/invite,
	  contrib/help/opers/join, contrib/help/opers/kick,
	  contrib/help/opers/links, contrib/help/opers/list,
	  contrib/help/opers/names, contrib/help/opers/nick,
	  contrib/help/opers/oper, contrib/help/opers/part,
	  contrib/help/opers/quit, contrib/help/opers/time,
	  contrib/help/opers/topic, contrib/help/opers/version,
	  contrib/help/opers/who, contrib/help/opers/whowas,
	  help/opers/admin, help/opers/away, help/opers/invite,
	  help/opers/join, help/opers/kick, help/opers/links,
	  help/opers/list, help/opers/names, help/opers/nick,
	  help/opers/oper, help/opers/part, help/opers/quit,
	  help/opers/time, help/opers/topic, help/opers/version,
	  help/opers/who, help/opers/whowas, contrib/help/users/stats,
	  contrib/help/users/umode, help/users/stats, help/users/umode:
	  Added the second batch of contributed help files.

2001-11-20 20:40  wcampbel

	* help/Makefile.in, contrib/help/opers/accept,
	  contrib/help/opers/cjoin, contrib/help/opers/close,
	  contrib/help/opers/cmode, contrib/help/opers/connect,
	  contrib/help/opers/die, contrib/help/opers/dline,
	  contrib/help/opers/gline, contrib/help/opers/kill,
	  contrib/help/opers/kline, contrib/help/opers/locops,
	  contrib/help/opers/modlist, contrib/help/opers/modload,
	  contrib/help/opers/modrestart, contrib/help/opers/modunload,
	  help/opers/accept, help/opers/cjoin, help/opers/close,
	  help/opers/cmode, help/opers/connect, help/opers/die,
	  help/opers/dline, help/opers/gline, help/opers/kill,
	  help/opers/kline, help/opers/locops, help/opers/modlist,
	  help/opers/modload, help/opers/modrestart, help/opers/modunload,
	  contrib/help/opers/operwall, contrib/help/opers/rehash,
	  contrib/help/opers/restart, contrib/help/opers/resv,
	  contrib/help/opers/set, contrib/help/opers/squit,
	  contrib/help/opers/stats, contrib/help/opers/testline,
	  contrib/help/opers/umode, contrib/help/opers/undline,
	  contrib/help/opers/ungline, contrib/help/opers/unkline,
	  contrib/help/opers/unresv, contrib/help/opers/wallops,
	  help/opers/operwall, help/opers/rehash, help/opers/restart,
	  help/opers/resv, help/opers/set, help/opers/squit,
	  help/opers/stats, help/opers/testline, help/opers/umode,
	  help/opers/undline, help/opers/ungline, help/opers/unkline,
	  help/opers/unresv, help/opers/wallops: Large batch of help files
	  (mainly copied out of opers.txt and users.txt) More will be coming.

2001-11-20 14:29  davidt

	* modules/m_help.c: fix /quote help to display index

2001-11-20 12:34  db

	* modules/core/m_server.c:
	  - This considerably simplifies m_server. No more support for 2.6(?)
	  protocol

2001-11-20 11:54  androsyn

	* README.FIRST: Modified the supported platforms slightly...

2001-11-19 09:35  androsyn

	* src/client.c: MEMDEBUG build was broken..

2001-11-19 00:39  lusky

	* BUGS: Nth try is the charm

2001-11-19 00:34  lusky

	* BUGS: pleeeeeeese work

2001-11-19 00:32  lusky

	* BUGS: I think it's finally working

2001-11-19 00:22  lusky

	* BUGS: test commit 5

2001-11-19 00:17  lusky

	* BUGS: test commit 3

2001-11-19 00:15  lusky

	* BUGS: test commit 2

2001-11-18 23:57  lusky

	* BUGS: test commit

2001-11-18 21:07  androsyn

	* src/event.c: Documented the undocumented functions in event.c

2001-11-18 09:49  kreator

	* src/balloc.c:
	  - fix broken build for balloc.c (one extra c comment ending)

2001-11-17 15:41  androsyn

	* src/balloc.c: Documented balloc.c a bit better than what it was.

2001-11-17 15:16  androsyn

	* src/s_bsd_poll.c: Updated function documentation for
	  comm_select()

2001-11-16 23:28  wcampbel

	* doc/ircd.8: Updated our manpage to be correct with our current
	  implementation.  Corrected a few minor formatting issues with the
	  manpage.

2001-11-15 15:04  leeh

	* modules/core/m_server.c:
	  - err - if servernameis too long, you need to reject it - not chop
	  it..

2001-11-15 11:17  androsyn

	* src/adns.c: Fixed buglet where timeout_adns would get readded to
	  the event list on each /rehash

2001-11-14 21:25  bill

	* Hybrid-team:

	  pro is dead, billy-jon took his place

2001-11-14 08:33  androsyn

	* include/s_bsd.h, src/s_auth.c, src/s_bsd.c, src/s_bsd_poll.c,
	  src/s_serv.c: Cleaned up the poll() loop so that it is really
	  only using a single list now.  Also modified the timeout parameters
	  for ADNS.  Added a flag to comm_connect_tcp() so that the caller can
	  pass a timeout.  We needed this to reduce the timeout on identd
	  checking, which is now set to a 10 second timeout.

2001-11-14 08:31  androsyn

	* Makefile.in: Modified build so that any errors during the make
	  will cause the make process to stop.

2001-11-13 18:35  leeh

	* help/.cvsignore:
	  - added a cvsignore to help

2001-11-13 18:30  leeh

	* modules/m_help.c:
	  - parv[1] might not actually exist, so check parc before blindly
	  passing it

2001-11-13 13:17  kreator

	* modules/: m_challenge.c, m_cryptlink.c:
	  - fix broken build for --disable-openssl

2001-11-13 08:35  leeh

	* include/numeric.h, messages/ayb.po, messages/custom.po,
	  modules/m_cjoin.c, src/messages.tab, src/vchannel.c:
	  - added ERR_VCHANDISABLED (when vchans are disabled)
	    ERR_ALREADYONVCHAN (client tries to create two vchans)

2001-11-13 07:55  leeh

	* include/vchannel.h, modules/m_help.c, modules/m_join.c,
	  modules/m_knock.c, modules/m_lljoin.c, modules/m_names.c,
	  modules/core/m_part.c, src/m_error.c, src/modules-dld.c,
	  src/modules.c, src/vchannel.c:
	  - added proper comments to vchannel.c
	  - removed a couple of places we passed client_p and source_p, but
	    never used client_p
	  - fixed a few places I forgot to add the rcount param

2001-11-13 06:45  leeh

	* include/msg.h, messages/ayb.po, messages/custom.po,
	  modules/m_accept.c, modules/m_admin.c, modules/m_away.c,
	  modules/m_capab.c, modules/m_cburst.c, modules/m_challenge.c,
	  modules/m_cjoin.c, modules/m_close.c, modules/m_connect.c,
	  modules/m_cryptlink.c, modules/m_dmem.c, modules/m_drop.c,
	  modules/m_eob.c, modules/m_gline.c, modules/m_help.c,
	  modules/m_info.c, modules/m_invite.c, modules/m_ison.c,
	  modules/m_join.c, modules/m_kline.c, modules/core/m_die.c,
	  modules/core/m_kick.c, modules/core/m_kill.c, modules/m_knock.c,
	  modules/m_links.c, modules/m_list.c, modules/m_lljoin.c,
	  modules/m_llnick.c, modules/m_locops.c, modules/m_lusers.c,
	  modules/m_motd.c, modules/m_names.c, modules/m_nburst.c,
	  modules/m_oper.c, modules/m_operwall.c, modules/m_pass.c,
	  modules/m_ping.c, modules/m_pong.c, modules/m_post.c,
	  modules/m_rehash.c, modules/m_restart.c, modules/m_resv.c,
	  modules/m_set.c, modules/m_stats.c, modules/m_svinfo.c,
	  modules/m_testline.c, modules/m_time.c, modules/m_topic.c,
	  modules/m_trace.c, modules/m_unkline.c, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/core/m_nick.c,
	  modules/core/m_quit.c, modules/core/m_server.c,
	  modules/core/m_sjoin.c, modules/core/m_squit.c, modules/m_user.c,
	  modules/m_userhost.c, modules/m_users.c, modules/m_version.c,
	  modules/m_wallops.c, modules/m_who.c, modules/m_whois.c,
	  modules/m_whowas.c, src/messages.tab, src/parse.c:
	  - extended stats m (a la ircnet).
	    now: COMMAND TOTALCOUNT TOTALBYTES REMOTECOUNT

	    where remotecount is the count coming from a server.. this lets you
	    gauge how many commands are coming from our clients - how many
	  from servers..

2001-11-13 05:20  leeh

	* modules/m_stats.c:
	  - allow stats ? for non-opers on the condition flatten_links is
	    disabled, dont give them capab info tho..

2001-11-13 04:54  leeh

	* modules/m_trace.c:
	  - sending nothing in reply to a trace is bad, send RPL_ENDOFTRACE, I
	    dont see why we cant actually send a limited trace (servers/opers)

2001-11-13 03:59  leeh

	* contrib/help/opers/topic, help/opers/topic, src/version.c.SH:
	  - added a copyright for US to version.c.SH
	  - made the topic help use <> and []

2001-11-12 18:32  kreator

	* src/hostmask.c:
	  - another small fix for hostmask.c and find_conf_by_address()

2001-11-12 17:44  leeh

	* help/Makefile.in:
	  - skip dirs when installing help..

2001-11-12 17:08  leeh

	* BUGS:
	  - kre fixed the auth thing, removed

2001-11-12 16:57  kreator

	* src/hostmask.c:
	  - fix find_conf_by_address() issue which resulted in auth{} (and
	    other) blocks to malfunction, ie. issue when admins had to add
	    wildcards after '@' to get them working

2001-11-12 12:37  leeh

	* modules/m_capab.c:
	  - dont allow capab from registered servers - it breaks the capab mon
	  code

2001-11-11 12:37  ejb

	* Makefile.in, configure, contrib/help/opers/info,
	  contrib/help/opers/topic, contrib/help/opers/trace,
	  contrib/help/users/info, help/Makefile.in, help/opers/info,
	  help/opers/topic, help/opers/trace, help/users/info:
	  - added help/ directory; added a few sample help files, this will
	    need to be completed before release.

2001-11-11 12:07  ejb

	* include/config.h:
	  - hm.. put paths correct way around

2001-11-11 12:05  ejb

	* include/config.h, include/ircd_defs.h, modules/m_help.c:
	  - added better /help ..
	    still need to write help files and make them install.

2001-11-11 11:38  leeh

	* include/numeric.h, messages/ayb.po, messages/custom.po,
	  src/messages.tab:
	  - added RPL_HELPSTART, RPL_HELPTXT, RPL_ENDOFHELP, ERR_HELPNOTFOUND

2001-11-11 11:15  leeh

	* src/: modules-dld.c, modules.c:
	  - removed the start notice from modlist
	  - changed a strstr() in modules-dld -> match, as per modules.c
	  - use RPL_ENDOFMODLIST

2001-11-11 11:05  leeh

	* include/numeric.h, messages/ayb.po, messages/custom.po,
	  src/messages.tab:
	  - bumped ERR_LASTERRMSG upto 999
	  - added 506 -> 999 into messages.tab
	  - moved RPL_MODLIST -> 702 (conflicted with other ircds)
	  - added RPL_ENDOFMODLIST (703)

2001-11-11 10:17  leeh

	* include/client.h, modules/m_who.c:
	  - fixes for /who (jv)

2001-11-09 08:16  leeh

	* modules/m_list.c:
	  - show a vchans topic in list - not its roots

2001-11-09 07:27  leeh

	* include/s_conf.h, src/ircd.c, src/ircd_parser.y:
	  - allow 0 to disable links_delay, when its raised, add the event

2001-11-08 17:36  leeh

	* src/ircd.c:
	  - check links_delay is > 0 before adding the event

2001-11-08 12:49  leeh

	* modules/m_client.c:
	  - removed m_client.c, it was only there while we established
	    m_nick.c was ok..

2001-11-08 11:38  bill

	* src/modules.c:
	  - made MODLIST parameter wild-card matching

2001-11-08 00:04  wcampbel

	* doc/example.conf: Apparently EFnet opers can't take a joke

2001-11-07 17:43  davidt

	* src/channel_mode.c:
	  - fix pretty_mask to not damage the passed in string, so we can
	    use it afterwards.

2001-11-07 17:24  leeh

	* BUGS:
	  - added the specific auth block thing

2001-11-04 21:10  wcampbel

	* doc/messages.txt: Updated messages.txt from the SGML source

2001-11-04 20:02  wcampbel

	* INSTALL, doc/challenge.txt, doc/server-version-info: First three
	  generated docs committed.  This means that they can no longer be
	  edited directly.  INSTALL, doc/challenge.txt, and
	  doc/server-version-info

2001-11-04 00:20  wcampbel

	* tools/: README.mkpasswd, mkpasswd.c: Updated mkpasswd from the
	  master site.

2001-11-03 19:50  db

	* modules/m_invite.c:
	  - backwards test broke m_invite.c

2001-10-30 23:04  ejb

	* tools/: descrip.mms, mkpasswd.c:
	  - added VMS support for mkpasswd.

2001-10-30 19:51  ejb

	* tools/: descrip.mms, mkpasswd.c:
	  - mkpasswd for VMS.

2001-10-30 19:27  ejb

	* README.VMS, include/setup.h_vms, src/channel.c,
	  tools/descrip.mms:
	  - couple more VMS fixes, and updated README.VMS.

2001-10-30 18:39  bill

	* contrib/vms_crypt.c:

	  - this is new src/crypt.c

2001-10-30 18:39  bill

	* make.com, modules/descrip.mms, src/balloc.c, src/crypt.c,
	  src/descrip.mms, src/ircd.c, src/ircd_lexer.l, src/s_serv.c:

	  - VMS fixes a la larne

2001-10-28 11:14  wcampbel

	* BUGS: Minor documentation correction in BUGS

2001-10-27 01:43  androsyn

	* modules/m_trace.c: Tracked down that ever annoying /trace bug
	  that causes garbage to end up in it.

2001-10-26 17:04  db

	* modules/m_invite.c:
	  - *sigh* I should have known better. yes yes yes *fwap*
	    another reversed if

2001-10-25 22:21  wcampbel

	* doc/whats-new.txt: Updated whats-new.txt to not reference removed
	    items and to be technically accurate with the current operation of
	  ircd.  Corrected an unclear commit comment.

2001-10-25 19:46  androsyn

	* src/s_user.c: Fixed problem that was causing /mode Nick to fail

2001-10-25 08:44  db

	* modules/m_ping.c:
	  - needed #include "hash.h"

2001-10-25 01:21  wcampbel

	* .cvsignore, Makefile.in, RELNOTES, doc/challenge.txt, doc/ircd.8,
	  doc/modes.txt, doc/technical/cookies.txt,
	  doc/technical/index.txt, tools/rsa_respond/Makefile,
	  tools/rsa_respond/README: Massive documentation update: Corrected
	  some missed items in the CHALLENGE changes Removed the incomplete
	  cookies proposal Updated version references to 7b8 Minor changes in
	  other documents Correct make rsa_respond (generate
	  rsa_respond.tar.gz) Add rsa_respond.tar.gz to .cvsignore Fixed make
	  clean in tools/rsa_respond.

2001-10-25 00:23  db

	* src/channel.c:
	  - make_nick_user_host was just too stupid for words

2001-10-24 22:36  db

	* include/client.h, include/hash.h, modules/m_accept.c,
	  modules/m_connect.c, modules/m_gline.c, modules/m_invite.c,
	  modules/m_ison.c, modules/m_lljoin.c, modules/m_llnick.c,
	  modules/m_nburst.c, modules/m_pong.c, modules/m_trace.c,
	  modules/m_userhost.c, modules/m_who.c, modules/m_whois.c,
	  modules/core/m_kill.c, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/core/m_nick.c,
	  modules/core/m_sjoin.c, src/channel_mode.c, src/client.c,
	  src/hash.c, src/parse.c, src/s_serv.c, src/s_user.c,
	  src/vchannel.c:
	  - removed a pile of extra parameters that were not really used
	    in find_client()

2001-10-24 14:14  androsyn

	* include/patricia.h: Don't need this either

2001-10-24 14:13  androsyn

	* src/patricia.c: I don't think we need this anymore.

2001-10-24 14:03  androsyn

	* src/rsa.c: Fixed stupidness with headers that prevented us from
	  including openssl/pem.h

2001-10-24 10:41  androsyn

	* modules/m_challenge.c: Make /challenge honor minor details like
	  hostmasks :P

2001-10-24 06:36  db

	* include/client.h, include/hash.h, src/client.c, src/hash.c,
	  src/s_conf.c:
	  - more wallpaper stripping... get_server() did nothing but call
	    hash_get_server() pointless call.
	  - other cleanups

2001-10-24 02:19  db

	* include/channel.h, include/hash.h, modules/m_cburst.c,
	  modules/m_cjoin.c, modules/m_drop.c, modules/m_invite.c,
	  modules/m_join.c, modules/m_knock.c, modules/m_list.c,
	  modules/m_lljoin.c, modules/m_names.c, modules/m_resv.c,
	  modules/m_topic.c, modules/m_who.c, modules/core/m_kick.c,
	  modules/core/m_message.c, modules/core/m_mode.c,
	  modules/core/m_part.c, modules/core/m_sjoin.c, src/channel.c,
	  src/hash.c, src/parse.c, src/resv.c, src/vchannel.c:
	  - get_channel() was being called with a NULL always. silly. ditto
	    with get_resv() second argument always a NULL.
	    replaced get_channel(... CREATE) with get_or_create_channel()
	    if channel does not exist, its created. Simplifies interface.

2001-10-24 01:28  androsyn

	* doc/example.conf: Updated the example config to reflect the
	  change with challenge.

2001-10-24 01:26  androsyn

	* doc/challenge.txt, include/rsa.h, modules/m_challenge.c,
	  src/ircd_parser.y, src/rsa.c, tools/rsa_respond/Makefile,
	  tools/rsa_respond/genkey.c, tools/rsa_respond/respond.c: Changed
	  challenge to use standard PEM format keys similiar to those used for
	  cryptlinks in hybrid.  Removed the genkey utility as well, as the
	  standard openssl command is capable of generating the keys that are
	  necessary.

2001-10-23 22:00  wcampbel

	* doc/: CIDR.txt, modeg.txt: Minor doc update

2001-10-22 23:09  db

	* contrib/m_flags.c:
	  - We renamed IsSetOperN to IsOperN, correcting this contrib module
	  to match

2001-10-22 22:33  androsyn

	* modules/m_challenge.c: Fixed a problem where we were not
	  attaching the conf when using challenge, like we do with /oper.

2001-10-21 16:48  leeh

	* src/channel_mode.c:
	  - MODE_QUERY -> MODE_ADD

2001-10-21 16:45  leeh

	* src/channel_mode.c:
	  - dont allow bans > NICKLEN/USERLEN/HOSTLEN
	  - dont ignore bans > NICKLEN+USERLEN+HOSTLEN, youll cause desync

2001-10-21 15:10  davidt

	* src/Makefile.in:
	  - Update Makefile.in - I used src/*.c, which missed this out. Oops.

2001-10-21 15:03  davidt

	* src/channel_mode.c:
	  - Some misc. fixes for bugs in channel_mode.c
	    (-o+h was sent to clients as -o+h+o, +o on a +v'd client was sent
	     locally as -v+o, but all remote servers converted it to plain +o,
	     minor other things).

2001-10-21 11:40  davidt

	* src/channel.c, src/channel_mode.c, src/client.c, src/ircd.c,
	  src/s_serv.c, src/s_user.c, src/vchannel.c, include/channel.h,
	  include/channel_mode.h, include/send.h, modules/m_cjoin.c,
	  modules/m_invite.c, modules/m_join.c, modules/m_knock.c,
	  modules/m_list.c, modules/m_lljoin.c, modules/m_names.c,
	  modules/m_topic.c, modules/m_who.c, modules/m_whois.c,
	  modules/core/m_kick.c, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/core/m_sjoin.c:
	  - Commit of fixed table mode code:
	     * Non USE_TABLE_MODE code is gone.  If we commit this patch, we
	       go with USE_TABLE mode.
	     * The TABLE_MODE code has been broken out into channel_mode.[ch].
	     * -o on +a channels has been fixed to show the user being deopped
	       the mode change, and to resync their oplist.
	     * +a on channels has been fixed to resync the channel's oplist.
	     * The code has been cleaned up, although it's still a bit icky in
	       some places, but there shouldn't be any weird mystical -1/0/1
	       constants lying around anymore.
	     * +b/-b from servers is NOT pretty_mask'ified (like the old code,
	       I beleive).
	     * -b from clients will be pretty_mask'ed, but if that doesn't
	       match a ban on the channel, the original, un prettified mask is
	     checked.
	  * Misc other bug fixes.
	     * Misc other bugs introduced. (probably :)

	  - If BOUNCE_BAD_HOPS is #define'd, the following is also done:
	     * +h is translated to +o for non CAP_HOPS servers
	       except towards the target's own server
	       (i.e. no priviledges can be gained using this).
	     * -h is translated to -o for non CAP_HOPS servers (this can never
	       happen towards the target's own server).
	     * -o is translated to -h from non CAP_HOPS servers.
	     * A +h on a client which is linked through a non CAP_HOPS server
	       is bounced back to the server that sent it (or dropped if from
	       a client) as sendto_one(client_p, ":%s MODE %s -h %s", me.name,
	       chptr->chname, target_p->name). [Although multiple bounces
	       are merged into one MODE].  Assuming source_p is a client,
	       a notice is also sent back.  Note that this notice will
	       probably break serverhiding, so something should be done about
	       this if we want to use BOUNCE_BAD_HOPS.
	     * BOUNCE_BAD_HOPS will allow mixed CAP_HOPS/non CAP_HOPS nets to
	       work sanely(ish), by ensuring the whole net will see the client
	       as privileged, or unprivileged, and the clients local server will
	       never see a +h'd user as +o'd.
	  - This will probably have a few bugs, but it needs a few linked
	    servers to test properly.

2001-10-20 22:16  davidt

	* src/ircd.c:
	  - Back out memset of ConfigChannel and ConfigFileEntry, since CVS
	    has been broken due to it for ages.  We need to zero it before we
	    read the config files, but we have to initialize the /SET options
	    after reading the conf files, so this is the wrong function.
	    Also zeroing ConfigFileEntry won't work too well since we store
	    the config/kline/etc filenames in there.
	    This might take a while to fix, which is why I'm backing out the
	    change so people can upgrade.

2001-10-19 11:51  wcampbel

	* BUGS, Hybrid-team, INSTALL, README.FIRST, RELNOTES, TODO,
	  doc/whats-new.txt, tools/README, tools/README.mkpasswd,
	  tools/mkpasswd.c: Documentation fixes

2001-10-18 01:54  db

	* src/packet.c:
	  - bug fix by |Rain| fixes handling of EOF

2001-10-17 12:07  leeh

	* include/client.h, modules/m_connect.c, modules/m_gline.c,
	  modules/m_info.c, modules/m_kline.c, modules/m_stats.c,
	  modules/m_trace.c, modules/m_unkline.c, modules/core/m_kill.c,
	  src/listener.c, src/modules-dld.c, src/modules.c, src/s_conf.c,
	  src/s_user.c:
	  - IsSetOper* -> IsOper* for consistency, half were IsOper, half were
	    IsSetOper..

2001-10-17 11:32  jdc

	* modules/core/m_kill.c:
	  * Someone please fix this.  We lack the IsSetOperGlobalKill() macro.
	    This is commited just to make things build.

2001-10-17 11:25  jdc

	* contrib/vms_lex_yy.c, contrib/vms_y_tab.c, contrib/vms_y_tab.h,
	  doc/example.conf, doc/whats-new.txt, include/s_conf.h,
	  include/supported.h, modules/m_cjoin.c, modules/core/m_sjoin.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c:
	  * CONF CHANGE: channel {} "disable_vchans"  renamed to
	  "use_vchans".

2001-10-16 22:40  db

	* src/ircd.c:
	  - zero out config structs in case they are full of garbage

2001-10-15 18:42  davidt

	* src/linebuf.c, src/packet.c, src/s_serv.c, include/linebuf.h:
	  - Improved binary code for linebuf_get/parse, hoepfully this will
	    fix the compression/encryption problems.

2001-10-14 23:13  db

	* modules/: m_connect.c, m_gline.c, m_kline.c, m_rehash.c,
	  m_unkline.c, core/m_die.c, core/m_kill.c, core/m_squit.c:
	  - Wrong flag was being tested in m_kill.c, never noticed since
	    usually kline = yes; is set.
	  - The error messages were obsolete, make it easier to know what to
	    change in the ircd.conf

2001-10-13 04:08  a1kmm

	* src/hostmask.c:
	  - Oops forgot to change > back to >= from Rain's patch.
	  - Fixed a K&R style { after an if, found by fl.

2001-10-13 02:40  a1kmm

	* src/hostmask.c:
	  - Changed back part of |Rain|'s patch: There is nothing wrong with
	    comparing a pointer with an invalid pointer so long as you don't
	    dereference the invalid pointer(which we don't). This saves a few
	  clockticks.
	  - Optimised a little by not bothering to check the terminating NULL
	    of a hostmask is not a wildcard.

2001-10-13 00:41  db

	* include/s_bsd.h, src/hostmask.c, src/s_bsd_poll.c:
	  - Bug fixes contributed by  Ben Winslow <rain@bluecherry.net>

2001-10-12 23:29  wcampbel

	* contrib/m_ojoin.c: Added the old m_cinfo and m_ojoin modules to
	  our devel tree.  They may not be the most up to date versions...but
	  they are here

2001-10-11 23:51  wcampbel

	* contrib/README: Updated the README to be consistant with the
	  deletes I did earlier.

2001-10-11 19:21  davidt

	* modules/m_info.c, src/ircd_parser.y, src/s_conf.c:
	  - Prevent use_halfops from being changed at runtime, as that would
	    Break Stuff(TM).
	  - Add use_* to m_info.c

2001-10-11 16:15  wcampbel

	* Makefile.in, configure, contrib/Makefile.in: Completed repo
	  move/cleanup.  It will now build again, you MAY have to do a clean
	  checkout after this...

2001-10-11 14:09  db

	* doc/example.conf:
	  - updated with current EFNet requirements, note that HOPS (half ops)
	    is not presently accepted on EFNet.

2001-10-11 13:18  jdc

	* include/ircd.h, src/channel.c, src/ircd.c, src/s_serv.c:
	  * Make use_halfops adjust sending HOPS capability.
	  * Added default_server_capabs to ircd.c; this contains the default
	    startup capabilities (CAP_MASK), with certain ones AND+NOT'd out
	    based on server configuration (i.e. use_halfops = no).
	  * s_serv.c had CAP_MASK replaced with default_server_capabs.

2001-10-11 11:41  jdc

	* doc/example.conf, include/s_conf.h, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c:
	  * Support for channel {} block command "use_halfops".  Default is
	    yes.  The code which uses the use_halfops variable hasn't been
	    written yet, though.  This is just for the config and what not.

2001-10-10 22:42  androsyn

	* src/Makefile.in: Forgot to commit Makefile.in

2001-10-10 22:39  androsyn

	* configure, include/irc_string.h, include/setup.h.in,
	  src/snprintf.c: Added a vsnprintf() stolen from mutt that is
	  necessary on platforms that do not have any native vsnprintf()

2001-10-10 14:50  davidt

	* src/modules.c:
	  - Slightly modified version of poptix's patch, just check len > 3
	    before testing [len-3], and cache the result of strlen.

2001-10-09 09:47  androsyn

	* configure, include/setup.h.in, src/irc_string.c: Gee..I broke
	  another beta.  I forgot to remove the rest of the strtok_r() crap.
	  oops

2001-10-08 23:37  lusky

	* include/patchlevel.h, modules/core/m_sjoin.c:
	  - revved patchlevel to beta8
	  - removed unused variable

2001-10-08 12:44  davidt

	* BUGS:
	  - Reword the /MODUNLOAD core entry to be more accurate, and include
	    a simpler workaround.  We should perhaps default to
	    --disable-shared-modules, but with some way to easily add
	    additional contrib modules automagically.

2001-10-08 10:13  androsyn

	* include/irc_string.h: Removed the macro for strtoken()

2001-10-07 23:05  db

	* modules/core/m_sjoin.c, src/channel.c:
	  - Look sorry, I know, but this code was just too stupid for words...

2001-10-07 04:57  leeh

	* contrib/README:
	  - updated README to cover whats actually in contrib/

2001-10-06 14:32  leeh

	* modules/m_gline.c:
	  - we need to set the time on gline2, not gline1..

2001-10-06 13:51  androsyn

	* include/irc_string.h: Added a change to allow strtok_r() to work
	  without warnings..

2001-10-06 13:35  androsyn

	* modules/Makefile.in, modules/core/Makefile.in,
	  servlink/Makefile.in, src/Makefile.in, tools/Makefile.in: Added
	  change to the make depend rule so that IRCD_PREFIX is defined.

2001-10-06 10:26  leeh

	* modules/core/m_sjoin.c:
	  - commented where the magic number 6 comes from

2001-10-06 00:24  db

	* modules/core/m_sjoin.c, src/balloc.c:
	  - reformatted balloc.c to project standard format
	  - added part of Lee's proposed m_sjoin.c patches. We are simply
	    being very very anal IMO.

2001-10-05 22:50  androsyn

	* src/balloc.c: Fixed the stupid core related to typecasting. I'll
	  fix the warnings on sun later

2001-10-05 22:33  wcampbel

	* src/ircd.c: Removed the "value of NOFILE" message

2001-10-04 23:46  db

	* src/ircd.c:
	  - three eventAdds() completely missing in latest... oops
	    missing cleanup_channels, cleanup_glines and cleanup_tklines

2001-10-04 17:26  androsyn

	* contrib/Makefile.in: contrib/ is all happy too

2001-10-04 17:22  androsyn

	* tools/: convertklines.c, encspeed.c: Even more warnings I missed

2001-10-04 17:22  androsyn

	* servlink/: io.c, io.h: Even more warning i missed..

2001-10-04 16:56  androsyn

	* modules/m_accept.c, modules/m_cryptlink.c, src/rsa.c,
	  src/s_serv.c: Warnings related to signedness of char

2001-10-04 16:53  androsyn

	* src/balloc.c: Keep Forte C from whining so much...

2001-10-04 16:47  androsyn

	* src/: irc_string.c, linebuf.c, sprintf_irc.c:
	  Warnings..warnings..more warnings...not anymore :)

2001-10-04 16:44  androsyn

	* include/irc_string.h: Accidently removed the prototype for
	  strtoken()..oops

2001-10-04 16:37  androsyn

	* include/: irc_string.h, memory.h: Cleaned up some stuff that
	  generated lots of warnings on solaris

2001-10-04 13:51  androsyn

	* BUGS: Added info about TCP resolver bug.

2001-10-04 12:21  androsyn

	* src/adns.c: Changed the way adns rehashes.  Previously we just
	  reloaded the config, but previous releases did tear down the socket.

2001-10-04 10:25  androsyn

	* src/adns.c: That would be dns_state->nservers not nserver

2001-10-04 10:22  androsyn

	* src/adns.c: Three asserts that will hopefully track down the bug
	  where ads->nserver == 0, which is technically not possible

2001-10-03 15:16  androsyn

	* src/balloc.c: Well..its useful to stick in setup.h before trying
	  to grab stuff autoconf defined..

2001-10-03 15:12  androsyn

	* include/balloc.h: A misplaced define broken --disable-balloc

2001-10-03 00:17  wcampbel

	* contrib/m_flags.c, modules/m_map.c: Fixed m_map.c's random
	    failing to be recognized as a command without a trailing space.
	  Added m_flags.c, ircd-comstud like FLAGS command, completely
	    optional bloat.  It works, has been tested, and as far as I can
	    tell, has no issues.  This is slightly different than the one I
	  posted.  It had the same issue as MAP did.

	  Anyone available to explain why these won't work sometimes with 0,
	  1, 0 in the msgtab while 0, 0, 0 does.  It only appears to be that
	  one combination of parameters too, as JUPE's 0, 3, 0 and NICKINFO's
	  0, 2, 0 work fine.

2001-10-02 21:31  db

	* src/channel.c:
	  - reformatting this makes it understandable now.

2001-10-02 14:23  androsyn

	* src/: ircd_lexer.l, ircd_parser.y: Changed SHARED to T_SHARED as
	  SHARED clashed with a #define from sys/mman.h on solaris

2001-10-02 12:36  db

	* contrib/m_clearchan.c, contrib/m_opme.c, include/channel.h,
	  modules/m_cburst.c, modules/m_cjoin.c, modules/m_drop.c,
	  modules/m_invite.c, modules/m_join.c, modules/m_knock.c,
	  modules/m_list.c, modules/m_lljoin.c, modules/m_topic.c,
	  modules/core/m_message.c, modules/core/m_mode.c, src/channel.c,
	  src/vchannel.c:
	  - After online discussion on IRC, I took the plunge. no more stupid
	    NullChn all replaced with NULL, hence all the touched files here.

2001-10-02 12:13  db

	* include/channel.h, include/hash.h, modules/core/m_sjoin.c,
	  src/channel.c, src/hash.c:
	  - This takes some silliness out of m_sjoin.c

2001-10-02 01:34  a1kmm

	* include/channel.h, include/linebuf.h, src/linebuf.c:
	  - Fixed the 513 vs 511 issue in the linebuf code.

2001-10-01 23:55  db

	* tools/Makefile.in:
	  - If fixklines.c is missing in tools, it shouldn't be in Makefile

2001-10-01 21:41  wcampbel

	* contrib/README.HASH, contrib/m_hash.c, tools/fixklines.c,
	  tools/ircd_start.c, tools/klineParse.c, tools/mkconf,
	  tools/start_ircd.c: Updated numerics.txt some more (including
	  fixing a discrepency) Did part one of the "pruning" of the source
	    tree, as discussed on the e-mail list and on IRC.  Approval by Diane

2001-10-01 16:27  androsyn

	* src/balloc.c: Fixed compile for when mmap() is not there..

2001-10-01 15:18  davidt

	* modules/core/m_sjoin.c, src/channel.c:
	  - Fix evil core that killed half the testnet, we now need to check
	    the length of remote channel names, since we use the block
	    allocator, and no longer just allocate whatever amount is required.
	    We now send a message to opers when a SJOIN to a long channel is
	    detected, as well as ignoring the SJOIN.

2001-09-29 22:39  db

	* src/messages.tab: added ':' to RPL_STATSQLINE DLINE KLINE as per
	  discussion with walter online, originally suggested by Chris Behrens

2001-09-29 22:09  db

	* modules/m_rehash.c:
	  - We have no more /rehash GC, so removed that from help

2001-09-29 22:07  a1kmm

	* src/linebuf.c:
	  - Fixed linebuf code so that it sets the length correctly. It now
	    works entirely with jv's converted IRCnet burst.  Approved by Diane
	  on IRC.

2001-09-29 20:27  davidt

	* include/linebuf.h, src/linebuf.c, src/packet.c:
	  - More fixes for linebuf.c, this should hopefully cope with any
	    length of line properly.

2001-09-29 19:14  db

	* configure, src/linebuf.c: Simply reformatted linebuf.c a tad to
	  agree with the rough coding standards of project. No electrons were
	  harmed.

	  Oh yes, fixed configure script. we were over-writing an array in
	  conftest.c (hidden inside config.c) nl[] declared as 4 instead of 5.
	  I believe it was jv that pointed this one out to me.

2001-09-29 19:05  a1kmm

	* modules/core/m_sjoin.c, src/linebuf.c, src/memory.c,
	  src/packet.c, src/parse.c:
	  1) Fixed a bug where we were not properly terminating long lines
	     sent to the parser.
	  2) Fixed several bugs in linebuf_copyline where we were not
	     correctly stripping \r\n or there was a possibility of a buffer
	  underflow.
	  3) Left in two of the less expensive asserts which I used to catch
	     these bugs.  Commit approved by db on IRC.

2001-09-29 18:59  davidt

	* modules/m_challenge.c:
	  - Zero pointers after they are freed, before this commit doing
	    /challenge foo
	    /challenge <anything not starting with '+'>
	    would core the ircd (where foo was a valid oper with a public key)

2001-09-29 18:52  davidt

	* modules/core/m_nick.c, modules/m_client.c, src/channel.c:
	  - Fix Count.invisi and Count.oper so they are only incremented once
	    per user.
	  - Use BlockHeapFree() not MyFree() to free bans, since they use the
	    block allocator..

2001-09-29 10:37  wcampbel

	* src/s_debug.c: Fix for STATS r showing long values in a %d, found
	  by jv, aproved by Diane

2001-09-28 12:40  davidt

	* src/balloc.c:
	  - Change 'int zero_fd' to 'static int zero_fd' to cut down on
	    unneeded globals.  Approved by Diane on IRC.

2001-09-28 00:33  wcampbel

	* BUGS, Hybrid-team, INSTALL, doc/operguide.txt: Updated BUGS,
	  INSTALL, and Riedel's operguide.txt.  Updated numerics.txt slightly.
	  Aproval from Diane on IRC.

2001-09-27 17:57  wcampbel

	* src/hostmask.c: Fix for STATS i/I showing restricted mode auth
	  blocks as 'i' as discussed on the ircd-coders list.

2001-09-26 15:43  leeh

	* modules/m_pong.c:
	  - unregged clients cant route ping, so they cant get routed pongs..
	    (discussed on irc)

2001-09-26 15:28  leeh

	* modules/m_pong.c:
	  - client_p is where we get data from, dont clear FLAGS_PINGSENT (jv)

2001-09-26 09:51  androsyn

	* configure, include/setup.h.in, src/balloc.c: Added the mmap()
	  check in autoconf that was discussed earlier.  Added a work around
	  for balloc.c if mmap() isn't found.  I feel bad for the poor bastard
	  who doesn't have a mmap().

2001-09-26 00:44  androsyn

	* servlink/io.c: Eliminated a stupid compile warning when ziplinks
	  and cryptlinks are disabled

2001-09-25 22:24  androsyn

	* configure, include/setup.h.in: Please don't use autoconf 2.5x for
	  hybrid.

2001-09-25 16:42  androsyn

	* src/memory.c: Okay..so everything thinks it can pass a NULL
	  pointer to MyFree()..shoot me :P

2001-09-25 16:30  androsyn

	* src/memory.c: Would you like an assert.h

2001-09-25 16:23  androsyn

	* include/balloc.h, include/memory.h, src/balloc.c, src/memory.c:
	  Umm..fixed some stuff :P

2001-09-25 16:20  davidt

	* src/linebuf.c:
	  - Um, move this assert again. I'm sure i commited this before....

2001-09-25 12:16  leeh

	* modules/core/m_sjoin.c:
	  - dont forward nicks thatdont exist in sjoin..

2001-09-25 10:44  db

	* modules/m_stats.c:
	  - remove unused function

2001-09-25 08:27  jdc

	* modules/m_stats.c:
	  - modules/m_stats.c: #if 0'd out stats_fd() to fix unused warning.

2001-09-25 06:35  leeh

	* src/s_serv.c:
	  - you cannot check remote servers for capabs

2001-09-25 04:11  a1kmm

	* configure, include/balloc.h, include/memory.h,
	  include/setup.h.in, src/balloc.c, src/client.c, src/list.c,
	  src/tools.c:
	  - Fixed up a few more things with configure.
	  - Made some assumptions which should always be valid to optimise
	    linked lists.
	  - Rewrote the block allocator with a better algorithm.

2001-09-25 01:22  db

	* modules/m_stats.c, src/fdlist.c, src/s_bsd.c, src/s_bsd_kqueue.c:
	  - removed an unnecessary call in m_stats.c, call fd_dump() directly
	    instead of confusing things. (for stats f)


	  - reworked s_bsd_kqueue.c to use EV_SET() macro. This ensures
	     all kevent struct members are properly initialized at all times.

	  - removed NOTE_LOWAT kludge, this is not necessary if kevent struct
	    is initialized properly as in above.

	  - added and remvoved fd_dump_debug() call.

	  - do not bother closing fd's 0,1,2,3 hey if they are in use, ircd
	    can't use them. 4 ignored fd's aint going to hurt ircd. As it
	    turns out fd 3 is typically used for profiler, which caused CPU to
	    hit 100% as kqueue thought fd 3 was closed (which it was) since
	    profiler thought it was open, but ircd had closed it. ugh. such a
	  lose.

2001-09-24 14:06  leeh

	* src/parse.c:
	  - added ID checks to parse()

2001-09-24 13:43  leeh

	* src/s_bsd_kqueue.c:
	  - missing ;, preume the break; was meant to be return; ? ;)

2001-09-24 10:31  jdc

	* src/s_bsd_kqueue.c:
	  - src/s_bsd_kqueue: Error checking on some kevent() calls.  ktrace
	    is your friend.

2001-09-24 08:00  jdc

	* configure:
	  - Fixes for Andrew's recent configure additions.

2001-09-24 07:13  a1kmm

	* configure, include/balloc.h, include/memory.h,
	  include/setup.h.in, src/balloc.c, src/channel.c, src/class.c,
	  src/fdlist.c, src/hook.c, src/ircd.c, src/ircd_parser.y,
	  src/list.c, src/listener.c, src/memory.c, src/s_conf.c:
	  - Some memset calls added.
	  - A few more configure options added:
	     --enable-profile - makes a profile build.
	     --enable-efence - makes an ElectricFence build.
	     --enable-memdebug - make a memory debugging build.
	     --disable-block-alloc - makes a build without the balloc so
	                             buffer overruns always show up under efence.

2001-09-23 19:54  a1kmm

	* configure, include/irc_string.h, include/setup.h.in,
	  modules/Makefile.in, modules/core/Makefile.in, src/memory.c:
	  - Fixed a _MyRealloc debug version bug.
	  - Kludged the strncpy_irc for now so it doesn't core(someone please
	  fix!)
	  - Fixed the depend system for modules so it actually works with both
	    static and shared modules.

2001-09-23 18:35  a1kmm

	* include/memory.h, src/memory.c:
	  - Changing a #ifdef to a #undef is not a smart way to disable
	  something.

2001-09-23 18:33  a1kmm

	* include/memory.h, src/memory.c:
	  - Fixed a possible NULL deref I did ages ago in the debug version of
	    MyRealloc

2001-09-23 17:38  davidt

	* src/list.c:
	  - erp, un break compile

2001-09-23 12:39  davidt

	* src/list.c:
	  - Move assert(t) above t->refcount = 1;
	  - Make assert()s in list.c slightly more informative.

2001-09-23 05:35  leeh

	* modules/m_cjoin.c:
	  - dont send ids in cjoin (see email)

2001-09-23 04:44  a1kmm

	* include/balloc.h, include/memory.h, modules/m_dmem.c,
	  src/balloc.c, src/class.c, src/ircd_parser.y, src/list.c,
	  src/memory.c:
	  - Got memory debugging going. There seems to be a few leaks already,
	    which I will fix soon. There also seems to be a core somewhere when
	    I link with efence that I need to fix.
	  - Added "dmem x" option to command to write memory log to a file.

2001-09-23 00:50  a1kmm

	* src/linebuf.c:
	  - Initialise refcount on linebufs to 0. That should account for the
	    following from the profile and hopefully improve performance a bit,
	    as well as drastically reduce leaked memory.
	  -----------------------------------------------

	                  0.00        0.00      30/1244178     linebuf_attach [195]
	                  0.03        0.00  170040/1244178
	                  linebuf_new_line [22] 0.03        0.00
	                  203872/1244178     newblock [26] 0.05        0.00  340107/1244178
	                  BlockHeapFree [50] 0.08        0.00  530129/1244178
	  BlockHeapAlloc [20] [28]     4.3    0.19        0.00 1244178
	  dlinkAddTail [28]

	  -----------------------------------------------

2001-09-22 22:26  a1kmm

	* modules/m_accept.c, modules/m_away.c, modules/m_cjoin.c,
	  modules/m_gline.c, modules/core/m_part.c, src/s_serv.c:
	  - We need to do lots more work on UIDs, but this is a start.
	  - I think we will have to leave SJOIN until after the release
	    because it needs a major rewrite. Unfortunately, as it is now, it
	    just forwards UIDs or NICKs to all servers as it receives them,
	    which will break non-UID servers. We can't change it easily though,
	    because if we substitute them it might overflow the buffer unless we
	    are prepared to split 1 SJOIN message into 2. Too risky to do at
	  this stage.

2001-09-21 13:53  leeh

	* modules/core/m_nick.c:
	  - missing U

2001-09-21 11:11  wcampbel

	* doc/users.txt: Again, do not use TAB's in text sent to clients

2001-09-21 10:58  wcampbel

	* doc/opers.txt: Do not use TAB's in any text that is sent to a
	  client.

2001-09-20 23:29  wcampbel

	* configure: dnl is not REALLY legal in m4 files...gnu m4 seems to
	  accept it but others may not.

2001-09-20 16:10  jdc

	* contrib/m_jupe.c:
	  - contrib/m_jupe.c: Cosmetical change ("Juped:" --> "JUPED:").

2001-09-19 20:21  lusky

	* servlink/Makefile.in: pass CFLAGS during linking too

2001-09-19 14:08  androsyn

	* src/: s_auth.c, s_user.c: Fixed the 0::1 stuff for IPv6 support
	  and removed stupid check as well.

2001-09-18 23:19  db

	* include/s_conf.h, src/ircd_parser.y, src/kdparse.c, src/s_conf.c:
	  - 3 line functions are silly, so removed one.

2001-09-18 17:57  davidt

	* include/event.h, src/event.c, src/send.c:
	  - Fix src/send.c to send the correct data to io_debug
	  - Add eventDelete to event.c, prototype to event.h

2001-09-18 09:33  db

	* include/s_conf.h, src/s_conf.c, src/s_serv.c:
	  - yet more cleanups. Its still a cesspool.
	    no more attach_cn_lines its now attach_connect_block

2001-09-18 09:02  db

	* include/s_conf.h, src/s_conf.c:
	  - some cleanups to s_conf.c, no more attach_Iline vs. attach_iline
	    (happy now jer?) IMO s_conf.c is still a cesspool.

2001-09-18 04:15  jdc

	* include/s_conf.h, modules/m_cryptlink.c, src/ircd.c,
	  src/listener.c, src/s_conf.c, src/s_serv.c:
	  * src/s_conf.c: Check for lack-of serverinfo {} description field in
	    configuration file.  Error out if conf lacks one.
	  * Many cosmetical changes (I got bored).

	  NOTE TO CODERS:  We should rename the "attach_iline" and
	  "attach_Iline" functions soon.  Two function names which are
	  identical except for case is not a good thing.  Look in s_conf.c for
	  more info.

2001-09-16 23:18  jdc

	* src/listener.c:
	  * src/listener.c: Fix for Hwy101's problems relating to IPv6 and
	    FreeBSD.  This _WILL_ break IPv6 support for Linux.  Linux-ers,
	    please look around line 379.

2001-09-16 17:40  davidt

	* modules/m_map.c:
	  - Tidy up m_map.c slightly, and add missing RPL_MAPEND.

2001-09-13 11:32  habeeb

	* modules/core/m_nick.c: Fix for Lee's patch to m_nick.c, ms_nick
	  didn't check whether it was a new nick (parc = 9) or a nick change
	  (parc = 3) and when a nick change happened it tried to check the
	  user/host which used the arguments parv[5] and parv[6].

2001-09-12 20:19  habeeb

	* src/event.c: more changes to event code.  Fixed eventNewTime and
	  a few other things.

2001-09-12 14:00  leeh

	* modules/core/m_nick.c:
	  - only kill long usernames/hostnames, warn about erroneous ones

2001-09-12 13:00  leeh

	* include/client.h, modules/core/m_nick.c, src/client.c:
	  - added checks for bad usernames/hostnames too..
	    we cant just chop them off at hostlen, else you have a different
	    host across the network..

2001-09-12 02:24  db

	* modules/m_rehash.c, src/event.c:
	  - minor cleanups

2001-09-12 01:42  habeeb

	* modules/: m_rehash.c, core/m_server.c: you might need those 2
	  files updated also.

2001-09-12 01:39  habeeb

	* include/event.h: for previous commit..

2001-09-12 01:39  habeeb

	* src/: adns.c, channel.c, client.c, event.c, ircd.c, linebuf.c,
	  s_auth.c, s_bsd.c, s_conf.c, s_gline.c, s_log.c, s_serv.c: This
	  changes event to a static table.  It is not complete so please
	  finish: *Add eventDelete code that will basically set the active
	  flag to 0 *impliment active flag *fix eventNextTime ; need to add a
	  variable to store next time.  *check line 593 in src/s_serv.c i
	   commented it, need to set the event inactive if the if() is true

	  This should be all for now;  If I missed anything I will update
	  this.

2001-09-12 01:09  db

	* src/ircd_parser.y:
	  - corrected tiny typo. Our table size is still too large for yacc
	    We are going to have to require bison.

2001-09-11 21:01  db

	* include/event.h, include/s_serv.h, src/event.c, src/ircd.c,
	  src/ircd_parser.y, src/s_serv.c:
	  - first pass at making events static and recurring instead of
	    one-shot.  This saves a malloc each time an event is added and the
	    need to re-add an event each time. The default is recurring for
	  static events.

	  - ripped expr out of ircd_parser.y Sorry Edward, but tired of byacc
	    coring all the time and its not really needed.

2001-09-11 14:49  jdc

	* doc/example.conf:
	  - Removed "hide_server" command; use serverhide {} instead.

2001-09-11 14:47  leeh

	* src/ircd_parser.y:
	  - missing |

2001-09-10 12:28  davidt

	* src/packet.c:
	  - We could occasionally fail to notice we hadn't read the correct
	    amount of data for a servlink command, due to a missing return;.

2001-09-08 21:41  androsyn

	* src/s_auth.c: Resolved the stupid ::1 issue. So we are doing 0::1
	  now. This is ugly..but it works and is still a legal IPv6 address.

2001-09-08 11:27  androsyn

	* doc/example.conf, include/s_conf.h, src/irc_string.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_auth.c, src/s_bsd.c:
	  Adds a dot_in_ip6_addr option in general {}

	  Also..only add the . on to sockhost.  Oh..and I just broke ::1 stuff
	  again so that it will get fixed in the next 50 years.

2001-09-06 18:46  leeh

	* src/match.c:
	  - . is an acceptable ident char

2001-09-06 08:34  leeh

	* doc/example.conf:
	  - updated links_delay description to say how it actually works

2001-09-06 07:34  leeh

	* include/s_bsd.h, src/ircd.c, src/ircdauth.c, src/listener.c,
	  src/s_auth.c, src/s_bsd.c, src/s_serv.c:
	  - added oper/admin flags to report_error()
	    untested as im not sure how to get one of these to trigger ;p

2001-09-05 18:03  davidt

	* src/linebuf.c, modules/m_map.c:
	  - Fix linebuf.c/linebuf_putmsg to correctly "\r\n\0" terminate
	    extra-long lines, instead of "\0\r\n\0" terminating them, which
	    tickles yet another BitchX bug. '\0' bad.
	  - Include s_conf.h in m_map.c so it at least compiles.

2001-09-05 08:14  leeh

	* contrib/Makefile.in, contrib/spy_admin_notice.c,
	  contrib/spy_info_notice.c, contrib/spy_links_notice.c,
	  contrib/spy_motd_notice.c, contrib/spy_stats_notice.c,
	  contrib/spy_trace_notice.c, contrib/spy_whois_notice.c,
	  include/hook.h, modules/m_admin.c, modules/m_info.c,
	  modules/m_motd.c, modules/m_trace.c:
	  - moved the rest of the FLAGS_SPY stuff to contrib/

2001-09-05 07:14  leeh

	* contrib/: Makefile.in, links_notice.c, stats_notice.c,
	  whois_notice.c:
	  - *_notice.c -> spy_*_notice.c

2001-09-05 07:06  leeh

	* contrib/build_one, messages/build_one:
	  - added checks for Makefile to build_one

2001-09-04 14:00  leeh

	* doc/example.conf, modules/m_cryptlink.c, src/s_serv.c:
	  - updated it to cover cryptlinks..
	  - added it to example.conf

2001-09-04 12:53  leeh

	* include/client.h, include/s_serv.h, modules/core/m_server.c,
	  src/client.c, src/s_serv.c:
	  - initial revision of th ehide server stuff

2001-09-04 10:25  leeh

	* include/s_conf.h, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_conf.c:
	  - added two new conf options for shide.. hidden and allow_hidden

2001-09-04 08:26  leeh

	* modules/m_version.c:
	  - changed the strcat()'s for the config info to pointers..

2001-09-02 21:56  wcampbel

	* BUGS: Updated the BUGS list a wee bit

2001-08-31 14:04  habeeb

	* src/event.c: Small bug fix in eventAdd()

2001-08-31 10:02  leeh

	* contrib/spy_stats_notice.c, contrib/stats_notice.c,
	  include/hook.h, modules/m_stats.c, modules/core/m_server.c:
	  - removed some debug stuff from write_links_file()
	  - changed stats notice back to a letter.. else you can get some
	    "original" notices to give to opers..

2001-08-31 09:16  leeh

	* modules/m_stats.c:
	  - fixed the stats spy stuff

2001-08-31 08:59  leeh

	* src/: modules-dld.c, modules.c:
	  - modlist/modrestart dont require params, modrestart doesnt take
	    them, theyre optional in modlist

2001-08-31 08:54  leeh

	* doc/example.conf:
	  - updated example.conf

2001-08-31 08:48  leeh

	* modules/m_map.c, include/channel.h, include/ircd.h,
	  include/s_conf.h, modules/m_admin.c, modules/m_info.c,
	  modules/m_links.c, modules/m_lusers.c, modules/m_motd.c,
	  modules/m_ping.c, modules/m_set.c, modules/m_stats.c,
	  modules/m_time.c, modules/m_users.c, modules/m_version.c,
	  modules/m_who.c, modules/m_whois.c, modules/m_whowas.c,
	  modules/core/m_server.c, src/client.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/parse.c, src/s_conf.c, src/s_user.c:
	  - gave serverhide its own config block :P

2001-08-30 13:38  davidt

	* src/: client.c, s_serv.c, send.c:
	  - Attempt to flush sendq of exiting clients
	  - When flushing a sendq, attempt to flush as many lines as possible,
	    instead of one line per call of send_queued_write.
	  - Close fds 0/1/2 for slink process on non solaris platforms.
	  - Zero localClient after allocating it.

2001-08-30 06:45  leeh

	* modules/m_motd.c, src/motd.c:
	  - allow unregged clients to see the motd, but then drop them.

	    this doesnt actually work atm:
	        MOTD
	        :mafia.leeh.co.uk 375 * :- mafia.leeh.co.uk Message of the Day
	        - Connection closed by foreign host.

	    we disconnect the client before we send them the full motd, we
	    should dump a users queue to them, then boot them

2001-08-29 11:29  leeh

	* src/linebuf.c:
	  - reverted the linebuf changes, they caused more problems than they
	  fixed

2001-08-29 11:14  leeh

	* doc/example.conf, include/s_conf.h, modules/m_stats.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c:
	  - added stats_P_oper_only

2001-08-28 12:41  wcampbel

	* contrib/build_one, messages/build_one: Added two scripts, one to
	  build a single module in contrib based upon what is present in the
	  Makefile, another to build a single message file.  Both depend on a
	  sucessful configure run.

	  They are not perfect, but they work on my system.

2001-08-28 11:23  wcampbel

	* doc/: index.txt, technical/index.txt: Completed the
	  repo-move/reorganization of the doc tree, updated the index files.

2001-08-27 21:54  wcampbel

	* tools/mkpasswd.c: Synced up mkpasswd

2001-08-27 04:28  jdc

	* contrib/m_hash.c:
	  - Renamed hash_find_client() to find_client().  Oops.

2001-08-26 21:20  db

	* src/event.c:
	  - There was a bug in eventAdd which could lead to an infinite loop.
	    I rewrote eventAdd and eventDelete. They actually look sane now.

2001-08-26 20:40  androsyn

	* modules/m_stats.c: localtime and strftime need time.h

2001-08-26 18:24  kreator

	* doc/example.conf, src/ircd_parser.y, tools/convertconf.c:
	  - misc formatting fixes for example.conf
	  - check if ServerInfo.max_clients is bigger than MAX_CLIENTS which
	    would cause fdtable[] initialisation to core
	  - update convertconf a bit

2001-08-26 17:08  habeeb

	* src/linebuf.c: Fix for linebuf parsing problem that apparently
	  broke ZIPLINKS.

2001-08-26 14:09  davidt

	* include/s_serv.h, modules/m_stats.c, src/ircd.c, src/s_serv.c:
	  - Tweak /stats Z slightly to be more useful, and handle overflows
	  gracefully

2001-08-26 11:26  davidt

	* src/hook.c:
	  - Forgot to commit these changes when I added the hooks for
	  m_iodebug.c

2001-08-26 00:31  wcampbel

	* BUGS, Hybrid-team, README.FIRST, README.small_nets, RELNOTES,
	  TODO, contrib/README, doc/index.txt, doc/messages.txt,
	  include/defaults.h, tools/README:
	  1. Numerous doc cleanups (spelling, obsolete things, efnow.net
	     references, missing files, files that have been removed)
	  2. Updated my TODO list some more
	  3. Synced up the defaults in include/defaults.h to the ones we
	     discussed with ievil back in the early 6.1 days
	  4. Added doc/messages.txt, a user and admin document on using and
	     creating custom message files

2001-08-26 00:05  db

	* include/numeric.h, modules/m_map.c, src/messages.tab:
	  - added jv's mods I locally added numerics for the map function

2001-08-25 22:41  wcampbel

	* TODO: Updated a good portion of TODO

2001-08-25 12:22  db

	* include/client.h, include/hash.h, modules/m_accept.c,
	  modules/m_lljoin.c, modules/m_llnick.c, modules/m_pong.c,
	  modules/m_trace.c, modules/m_whois.c, modules/core/m_kill.c,
	  modules/core/m_nick.c, src/client.c, src/hash.c, src/vchannel.c:
	  - renamed hash_find_client() to find_client() in hash.c
	    find_client() in client.c was simply calling hash_find_client()
	    anyway.

2001-08-25 12:04  wcampbel

	* contrib/m_mkpasswd.c: This is an updated m_mkpasswd.c, allowing
	  you to use a second parameter to specify which password hashing
	  algorithm to use, DES or MD5.

2001-08-25 05:15  a1kmm

	* src/client.c:
	  - Fixed the core on JUPE bug, we cannot remove capabs when a juped
	    server exits if we never set them for that server.

2001-08-25 04:22  a1kmm

	* include/channel.h:
	  - I can't get RESV to core as fl seemed to think it did with
	    USE_CHANNEL_MODE before. We really need to get this stable so we can
	    get an rc out soon, so I am enabling it so we can pick up any bugs
	    in it sooner rather than later. I suspect that USE_CHANNEL_MODE will
	    be more important on efnet than the RESV as it fixes problems with
	    conflicts between hybrid-7 which has only one of ohv at the same
	    time and other servers, so if we can't fix it we should probably
	  disable RESV.

2001-08-25 03:41  a1kmm

	* include/irc_string.h, src/hostmask.c:
	  - Hopefully this will fix most of the hostmask.c problems we have
	    been experiencing. I am not entirely sure the IPv6 code is right but
	    it is better than it was.

2001-08-25 01:25  wcampbel

	* contrib/: Makefile.in, README, m_mkpasswd.c: Added a basic
	  m_mkpasswd module to contrib, this generates DES passwords only, and
	  you cannot specify a salt.  This is also at present available to
	  regular users, and paced.  Please provide a valid reason before
	  removing support for regular users.

2001-08-24 19:53  davidt

	* configure, include/hook.h, src/linebuf.c, src/packet.c,
	  src/s_bsd.c, src/send.c:
	  - Fix configure[.in] so --enable-assert/--disable-assert do what
	    they claim, not the opposite.
	  - Add hooks for m_iodebug.so, to allow dumping the raw IO to a
	    logfile using m_iodebug.c (not committed, since it could also be
	    used for slightly different reasons...)

2001-08-24 12:27  leeh

	* src/motd.c:
	  - commented out the no oper motd line.. if they dont see one, there
	    isnt one.. seems kinda obvious surely? :)

2001-08-24 11:31  leeh

	* include/s_misc.h, include/s_serv.h, include/s_user.h,
	  modules/m_stats.c, src/s_misc.c, src/s_serv.c, src/s_user.c:
	  - more of em.. I cant even remember which this time :P

2001-08-24 09:58  leeh

	* include/s_gline.h, modules/m_stats.c, src/s_gline.c:
	  - moved report_glines() to m_stats.c

2001-08-24 08:14  leeh

	* include/hostmask.h, modules/m_stats.c, src/hostmask.c:
	  - moved report_dlines and report_elines -> m_stats.c and merged them
	    with the stats function that called them

2001-08-24 07:52  leeh

	* modules/m_join.c:
	  - dumped build_list_of_channels, theres no point remaking the
	    buffer, with the possibility that we will ignore half of the new
	  buffer anyway

	    I havent dropped the strtoken()'s yet.. possibly later :)

2001-08-23 18:41  davidt

	* doc/technical/cryptlink.txt: Add Id tag

2001-08-23 18:30  davidt

	* src/parse.c:
	  - Fix string_to_array so that we correctly handle the weirdness of
	    empty params, etc.  I think this is right, but it's hard to test on
	    a network with at least 3 different versions of parse.c running on
	  it..

2001-08-23 03:03  db

	* modules/m_join.c:
	  - I couldn't take it anymore. cleaned up build_list_of_channels
	  slightly
	  - started preliminary code for JOIN TS from remote server.

2001-08-22 17:44  leeh

	* doc/example.conf, doc/modes.txt, doc/opers.txt,
	  doc/whats-new.txt, include/client.h, src/ircd_parser.y,
	  src/s_conf.c, src/s_user.c:
	  - removed +e and stuck gecos on the end of the +c notice

2001-08-22 16:24  leeh

	* modules/core/m_sjoin.c:
	  - added back the second buffer, this time it actually does something
	    and is less complex

2001-08-22 11:01  leeh

	* modules/core/m_sjoin.c:
	  - theres no need to make two sjoin bufs at all, especially when
	    theyre *identical* and one of them isnt even done properly..

2001-08-22 09:59  leeh

	* modules/core/m_sjoin.c:
	  - setting a pointer to p, which is null, then checking if its \0 is
	  bad.

2001-08-22 09:48  leeh

	* modules/core/m_sjoin.c:
	  - added check for trailing spaces..

2001-08-22 09:41  leeh

	* modules/core/m_sjoin.c:
	  - cleanups

2001-08-22 09:29  leeh

	* modules/core/m_sjoin.c:
	  - *p = '\0';
	    p++;
	    -> *p++ ='\0';

2001-08-22 08:39  leeh

	* modules/core/m_sjoin.c:
	  - fixed sjoin.. I commented most of it
	    someone should probably review this :)

2001-08-22 01:06  androsyn

	* src/parse.c: Okay so strspn() wasn't such a great idea...

2001-08-22 00:39  androsyn

	* src/parse.c: Changed the arguments and make string_to_array work
	  right

2001-08-22 00:03  androsyn

	* src/parse.c: This has a hopefully faster version of
	  string_to_array()

2001-08-21 18:56  leeh

	* include/config.h:
	  - drop defaults down low so it will run first time

2001-08-21 18:50  leeh

	* contrib/m_opme.c:
	  - remove modded files before you commit ;)

2001-08-21 18:11  davidt

	* contrib/m_opme.c, doc/example.conf, include/config.h,
	  src/linebuf.c, src/send.c:
	  - Oops, fix a couple tiny bugs in the new linebuf_putmsg code that
	    caused some major problems truncating various bits of messages.

2001-08-21 17:16  davidt

	* src/linebuf.c:
	  - Ahem, 'make install' is needed for testing, 'make' doesn't help
	    much.  Anyway, now that I'm testing the actual changes, this _does_
	    help improve burst times (on a hub, that needs to relay the burst
	    elsewhere) by up to 12.5% (this was measured on a
	    localhost->localhost burst, if there's a bandwidth bottleneck, the
	    bandwidth will probably be the major bottleneck anyway).

2001-08-21 16:54  davidt

	* include/linebuf.h, src/linebuf.c, src/packet.c, src/s_bsd.c,
	  src/send.c:
	  - Create linebuf_putmsg, which essentially replaces linebuf_put,
	    since we no longer use linebuf_put anywhere.  This get rids of a few
	    needless copies of outgoing messages per call of sendto_* functions.
	  - Unfortunately, we now use snprintf/vsnprintf, not ircsprintf,
	    since there is no irc[v]snprintf function available.  Not sure how
	    badly this affect things, but if it's bad, make a ircvsnprintf
	  function...
	  - Tidy a few warnings in --disable-assert mode.

2001-08-21 14:59  davidt

	* modules/core/m_sjoin.c:
	  - Clean up m_sjoin.c slightly.

2001-08-21 14:51  androsyn

	* modules/core/m_sjoin.c, src/linebuf.c: Diane's optimizations of
	  the SJOIN code and some of the linebuf code.

2001-08-20 23:19  androsyn

	* modules/core/m_sjoin.c: Kill one memset()

2001-08-20 23:06  androsyn

	* configure, include/irc_string.h, include/setup.h.in,
	  src/irc_string.c: Check for strtok_r()...if it exists, use it
	  instead of strtoken().  If strtok_r is found, we define a macro to
	  call strtok_r() instead...

2001-08-20 21:31  db

	* src/hostmask.c:
	  - a little more cleanup

2001-08-20 19:32  db

	* src/hostmask.c:
	  - changed temp in report_Klines to k_or_K

2001-08-20 19:30  db

	* src/hostmask.c:
	  - re idented to conform with project standards.
	  - removed unnecessary strncat, replaced with strncpy()

2001-08-20 16:41  androsyn

	* src/s_bsd_poll.c: This is a hack to make poll() use a single
	  list. This isn't the right way to do it, but it will do for now.

2001-08-20 15:00  androsyn

	* src/linebuf.c: I think this fix is right for linebuf_copy_line()
	  please look at it as it could probably still use work.

2001-08-19 19:30  leeh

	* modules/m_list.c:
	  - not pacing a possible 50k channel list between a HUB <-> LL is
	    slightly evil..

2001-08-19 19:12  leeh

	* modules/core/m_nick.c:
	  - removed an unneeded variable

2001-08-18 13:37  davidt

	* TODO, contrib/Makefile.in, modules/m_map.c:
	  - Add m_map.c to contrib/, since it was in TODO and I was bored.

2001-08-18 08:55  leeh

	* TODO, doc/Makefile.in, doc/dline.conf, doc/resv.txt,
	  doc/users.txt:
	  - doc updates
	  - added a blank dline.conf
	    (should we just use touch instead?)

2001-08-17 20:58  jdc

	* configure:
	  - Flipped order of CFLAGS addition (at the end, not at the
	  beginning).

2001-08-17 20:54  jdc

	* configure, contrib/Makefile.in, doc/Makefile.in,
	  modules/Makefile.in, modules/core/Makefile.in, src/Makefile.in:
	  - Many fixes for CFLAGS variable support.
	  - Fixed  --enable-assert and  --disable-assert.
	  - Cosmetical changes all over (formatting issues).

2001-08-17 18:03  davidt

	* src/s_bsd_poll.c:
	  - Instead of polling SERVICES,SERVERS,/*BUSYCLIENTS*/,IDLECLIENTS,
	    and delaying on IDLECLIENTS (which means we _should_ always delay
	    for the full x ms, if they are really idle clients), do it in
	    reverse: poll IDLECLIENTS, /*BUSYCLIENTS*/, SERVICES, then delay on
	    SERVERS, so we delay on (presumably) the busiest links, and we'll
	    wake up if anything happens.
	    I fail to see how the multi-list stuff really helps us...

2001-08-17 02:39  androsyn

	* src/: channel.c, linebuf.c: Changed a few eventAdd()'s to
	  eventAddIsh() which keeps some of the events from running all at
	  once.  We should look into making some of the events do this.

2001-08-17 01:21  androsyn

	* src/linebuf.c: Oops..an off by one error..

2001-08-17 01:17  androsyn

	* src/linebuf.c: Its helpful if you update the length of the
	  bufhead as well as the bufline

2001-08-16 23:10  androsyn

	* include/channel.h, src/channel.c, src/client.c, src/ircd.c: Added
	  block heap allocation for struct Channel.  This ends up enabling us
	  to return most all of the memory allocated while servers are joined
	  back to the OS.

2001-08-16 22:45  androsyn

	* src/linebuf.c: Yet another swing at this. This time we use
	  memcpy().

2001-08-16 20:19  davidt

	* src/linebuf.c:
	  - Of course, it didn't work, but this does.

2001-08-16 20:16  davidt

	* src/linebuf.c:
	  - Commit fixed version of improved linebuf_copy_line.
	    This _should_ work. I hope.

2001-08-16 16:20  leeh

	* include/client.h:
	  - missed this one

2001-08-16 16:19  leeh

	* include/ircd.h, modules/m_links.c, modules/core/m_server.c,
	  src/client.c, src/ircd.c, src/s_serv.c:
	  - GlobalServList (used pointers in struct Client) to dlink_list
	    global_serv_list (dbd)

2001-08-16 10:26  androsyn

	* src/linebuf.c: Minor little change that should speed things up a
	  tiny bit..

2001-08-16 09:53  androsyn

	* include/linebuf.h, src/linebuf.c, src/packet.c: Removed the
	  binary flag from linebuf_copy_line(). First we are not doing
	  ziplinks within ircd, second, the ziplink code never actually
	  generates a \r or \n, so this code was likely a mute point in the
	  first place.

2001-08-15 10:48  leeh

	* doc/modeg.txt:
	  - updated the docs to cover the multi accept system

2001-08-15 10:43  androsyn

	* include/list.h: Missing prototype for init_dlink_nodes() or
	  whatever the function is called :)

2001-08-14 18:58  davidt

	* src/modules.c:
	  - Use free_dlink_node(node) not MyFree(node), since node is from
	    balloc, and is inside a chunk of memory from mmap, not something
	  free()able.

2001-08-14 13:44  db

	* src/linebuf.c:
	  - removed unused variable, since we are back to using a block
	  allocator

2001-08-13 22:00  leeh

	* doc/example.conf:
	  - missing ;

2001-08-13 17:44  leeh

	* include/client.h, include/numeric.h, messages/ayb.po,
	  messages/custom.po, modules/m_accept.c, src/client.c,
	  src/messages.tab:
	  - updated the accept stuff:
	     - add_accept() is now in m_accept.c
	     - list_accepts() is now in m_accept.c

	     - added five new numerics:
	        281 RPL_ACCEPTLIST - accept list
	        282 RPL_ENDOFACCEPT - end of accept list

	        456 ERR_ACCEPTFULL - full accept list
	        457 ERR_ACCEPTEXIST - trying to add a client already on their
	        list 458 ERR_ACCEPTNOT - removing a client not on their list

2001-08-13 16:56  androsyn

	* src/: ircd.c, linebuf.c, list.c: make_dlink_node now uses the
	  block heap again..

2001-08-13 16:14  androsyn

	* src/client.c: Put memset() back for struct Client allocations..

2001-08-13 15:17  jdc

	* modules/m_cryptlink.c:
	  - modules/m_cryptlink.c: Call verify_private_key() before
	  MyMalloc().

2001-08-13 14:16  androsyn

	* src/s_serv.c: It is useful to set a fd_note() on a non cryptlink
	  server.

2001-08-13 13:45  androsyn

	* include/list.h, src/ircd.c, src/list.c: Block heap for struct
	  User now..

2001-08-13 12:51  androsyn

	* src/balloc.c: Getting pages via /dev/zero actually compiles and
	  works now.

2001-08-13 12:44  androsyn

	* include/balloc.h, src/balloc.c, src/ircd.c: Added support for
	  getting anonymous pages via the /dev/zero method

2001-08-13 11:27  androsyn

	* src/balloc.c: That should be balloc.h

2001-08-13 10:20  androsyn

	* src/: balloc.c, client.c, linebuf.c: Removed memset() from
	  BlockHeapAlloc() it is up to the caller to do the init of its block.

2001-08-13 01:25  androsyn

	* src/balloc.c: Make sure the garbage collector doesn't remove the
	  root block.

2001-08-13 01:09  androsyn

	* include/balloc.h, src/Makefile.in, src/balloc.c, src/client.c,
	  src/linebuf.c: Okay..second attempt at this commit..

2001-08-13 01:06  androsyn

	* src/blalloc.c: Please work

2001-08-13 00:48  androsyn

	* include/blalloc.h, include/memory.h, src/Makefile.in,
	  src/blalloc.c, src/client.c, src/linebuf.c: Brought back the
	  block heap allocator, with improvments.  Added support in client.c
	  and linebuf.c

2001-08-12 12:32  leeh

	* doc/example.conf, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_conf.c:
	  - removed traces of no_hack_ops as its not optional anymore

2001-08-11 16:42  leeh

	* modules/core/m_server.c:
	  - you cant use a hash table lookup for incoming servers, else you
	    can have *.com on one side of the net, and x.com on the other.

	    you have to use two match()'s

2001-08-10 07:25  leeh

	* modules/m_version.c:
	  - I agree with Hwy, we should block remote versions at all, mainly
	    because you know the first server to reply to the request, if its
	    not the target is a hub.. which would make hub hiding useless.. :)

2001-08-07 23:03  leeh

	* modules/: Makefile.in, core/Makefile.in:
	  - commited dabulldogs patch:
	    slight idiot proofing.. will move the modules dir to modules-old,
	    then install in modules/

2001-08-07 07:54  leeh

	* modules/core/m_server.c:
	  - when you get server exists, you cannot exit the duplicate, you
	    have to drop your uplink, else you cause *massive* problems

2001-08-06 22:35  leeh

	* src/parse.c:
	  - attempting to use things from a null struct is bad (jv)

2001-08-06 03:36  db

	* src/parse.c:
	  - missing set of last_ptr. oops.

2001-08-06 03:03  ejb

	* contrib/vms_lex_yy.c, contrib/vms_y_tab.c, contrib/vms_y_tab.h,
	  include/irc_string.h, modules/descrip.mms, src/descrip.mms,
	  src/irc_string.c, src/version.com:
	  - fixed VMS support; appears to work (compile + link)

2001-08-06 02:18  ejb

	* src/ircd_parser.y:
	  - well, it seems BSD yacc no longer dump core when we uncomment
	    negative number support in the parser, so enable it.

2001-08-05 16:42  db

	* src/s_bsd.c:
	  - uhmm an int is not a string. repeat after me. an int is not a
	    string.  changed %s to %d

2001-08-05 14:01  leeh

	* include/channel.h:
	  - undef'd use_table_mode.

	    Do NOT redefine this without first talking to diane.  Ill email my
	    backtrace to the list when it comes back online, we will probably
	    beta tonight, and the table code has cores.

	    Do not reenable this, the rest of the coders are in agreement about
	    this

2001-08-05 06:42  leeh

	* include/client.h, modules/core/m_sjoin.c:
	  - made hybrid7 TS5

2001-08-05 03:22  a1kmm

	* include/channel.h, src/channel.c:
	  - Send "*" on -k, this should fix the key problems with the
	    USE_TABLE_MODE code. We really shouldn't enable the old code,
	    because it has issues with many things such as wrong compatibility
	    with clients/servers which support more than one of +o/+v/+h. I am
	    tempted to get rid of the previous code altogether.
	  - I can't reproduce fl's reported core on unjupe with the new code,
	    so a bt would be good.

2001-08-04 11:35  leeh

	* doc/example.conf, include/s_conf.h, src/channel.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c:
	  - added ConfigChannel.persist time to determine the minimum length
	    of time a channel will remain when its last user quits from it

	    Its minimum, because it will exist until the next cleanup_channels()

2001-08-04 10:56  wcampbel

	* doc/server-version-info: Updated server-version-info from Lee's
	  changes last night

2001-08-04 09:13  leeh

	* modules/m_info.c, modules/m_version.c, src/s_debug.c:
	  - updated info
	  - updated letters in /version

2001-08-04 07:40  leeh

	* contrib/spy_whois_notice.c, contrib/whois_notice.c,
	  modules/m_whois.c:
	  - minor cleanups

2001-08-04 07:26  leeh

	* contrib/m_jupe.c:
	  - updated jupe to take account of the GloalServerList

2001-08-03 10:14  leeh

	* include/channel.h:
	  - undeffed USE_TABLE_MODE, theres a bug in chcap stuff which will
	    core when removing jupes

2001-08-03 09:10  leeh

	* contrib/links_notice.c, contrib/m_jupe.c,
	  contrib/spy_links_notice.c, contrib/spy_stats_notice.c,
	  contrib/stats_notice.c, contrib/vms_y_tab.c, include/client.h,
	  include/send.h, modules/m_admin.c, modules/m_away.c,
	  modules/m_cburst.c, modules/m_client.c, modules/m_cryptlink.c,
	  modules/m_eob.c, modules/m_gline.c, modules/m_info.c,
	  modules/m_kline.c, modules/m_lljoin.c, modules/m_llnick.c,
	  modules/core/m_kill.c, modules/m_motd.c, modules/m_nburst.c,
	  modules/m_oper.c, modules/m_post.c, modules/m_rehash.c,
	  modules/m_resv.c, modules/core/m_message.c,
	  modules/core/m_nick.c, modules/core/m_server.c, modules/m_set.c,
	  modules/m_svinfo.c, modules/m_trace.c, modules/m_unkline.c,
	  modules/core/m_sjoin.c, modules/core/m_squit.c, src/channel.c,
	  src/client.c, src/ircd.c, src/ircd_parser.y, src/ircdauth.c,
	  src/list.c, src/listener.c, src/m_error.c, src/modules-dld.c,
	  src/modules.c, src/parse.c, src/restart.c, src/s_auth.c,
	  src/s_bsd.c, src/s_conf.c, src/s_debug.c, src/s_serv.c,
	  src/s_user.c, src/send.c:
	  - added a new param to sendto_realops_flags()
	    this is an indication of what level the opers need:
	      L_ALL: opers and admins
	      L_OPER: opers who arent admins
	      L_ADMIN: admins only

2001-08-03 02:30  spookey

	* modules/m_who.c:
	   - show /who user when user is +i  ..  thanks poptix

2001-08-02 13:29  leeh

	* src/s_bsd.c:
	  - changed report_error -> sendto_realops_flags()
	    allows us to show IP to admins, not to opers..

	    adding an ilog() for read errors.

2001-07-31 05:30  leeh

	* src/s_conf.c:
	  - added cryptlinks to stats c

2001-07-29 16:06  leeh

	* src/channel.c:
	  - allow -ovh from servers

2001-07-28 21:51  leeh

	* src/: client.c, ircd.c, s_serv.c:
	  - make it compile with USE_TABLE_MODE #undef'd

2001-07-28 18:55  wcampbel

	* tools/mkpasswd.c: Updated the mkpasswd.c program, forgot about
	  this one

2001-07-28 18:51  wcampbel

	* tools/README.mkpasswd: Updated the docs for mkpasswd.c

2001-07-28 06:47  a1kmm

	* include/channel.h, src/channel.c, src/client.c, src/ircd.c,
	  src/s_serv.c:
	  - Fixed the table mode code.

2001-07-27 15:55  leeh

	* include/channel.h:
	  - #undef'd USE_TABLE_CODE
	    this is *fucked*.

2001-07-27 15:34  androsyn

	* src/channel.c: This ain't the right fix..but this thing needs
	  rewritten..badly..

2001-07-27 12:45  leeh

	* src/channel.c:
	  - added numerous comments to explain the new code..

2001-07-27 12:39  leeh

	* src/channel.c:
	  - coding when tired is bad..

2001-07-27 08:14  leeh

	* src/channel.c:
	  - sendto_one() doesnt care about LL, so we need to check manually..

2001-07-27 07:27  leeh

	* src/channel.c:
	  - I am fl_! breaker of cvs!

2001-07-27 06:26  leeh

	* src/channel.c:
	  - make sure there IS a capab, before you check IsCapable

2001-07-26 16:01  leeh

	* src/channel.c:
	  - fix the +eI cap business
	    we now loop the serv_list in send_cap_mode_changes, stringing
	    modebufs as we go..

2001-07-26 11:52  leeh

	* modules/core/: m_server.c, m_squit.c:
	  - someone had used client_p->host instead of client_p->name in
	    m_squit.c, meaning when a server squit their uplink, their host got
	    broadcast ugh

	  - made the links file use GlobalServerList

2001-07-26 11:31  leeh

	* modules/m_links.c:
	  - make links use GlobalServerList

2001-07-26 11:23  leeh

	* include/client.h, include/ircd.h, include/s_serv.h,
	  modules/core/m_server.c, src/client.c, src/ircd.c, src/s_serv.c:
	  - added GlobalServerList
	    this will allow a better way to loop for servers, than looping
	    50k clients to do a /links list :P

2001-07-25 17:23  leeh

	* modules/m_pong.c:
	  - an unregged client should never get a remote ping.. therefore
	    it should never need to be routed
	  - changed an irccmp() to a !match()

2001-07-24 20:50  leeh

	* doc/example.conf, src/ircd_lexer.l, src/ircd_parser.y:
	  - added a catcher for those who dont bother reading the config
	    files, will exit() the ircd unless its removed (its off if the lines
	  not there)

2001-07-23 20:56  leeh

	* modules/m_stats.c:
	  - IsAdmin != IsSetOperAdmin
	    ugh ugh ugh!

2001-07-23 09:48  androsyn

	* src/s_bsd.c: Changed "Remote closed the connection" to "Remote
	  host closed the connection"

2001-07-22 10:03  leeh

	* src/channel.c:
	  - only show +eI modes to chanops/halfops

2001-07-21 16:18  androsyn

	* configure: Added a --enable-assert/--disable-assert option.
	  Currently it defaults to enable-assert, but this should be changed
	  for the release.

2001-07-20 15:35  androsyn

	* include/irc_string.h: I think i this should be the right way to
	  do the inline stuff :)

2001-07-20 11:30  androsyn

	* src/sprintf_irc.c: inline vsprintf_irc() for the sake of
	  ircsprintf() save a single function call at least :)

2001-07-20 11:22  androsyn

	* include/irc_string.h, src/irc_string.c: Made some changes to
	  strncpy_irc().

	  Basically on systems using gcc with -O2 set, gcc will provide its
	  own builtin version of memcpy() which is far faster than
	  strncpy_irc() so we set a macro to do that.

	  For systems not using gcc, but have inlined functions, we provide an
	  inlined version of strncpy_irc().

	  Alas, for systems that neither use gcc or support inlined functions
	  we fall back to the plain old version we've been using all the long.

2001-07-20 10:44  androsyn

	* include/setup.h.in, configure: Added check for inlined
	  functions..

2001-07-20 08:45  wcampbel

	* modules/m_help.c: UHELP command added, this lets an oper view the
	  user help file without deopering.  UHELP for non-opers just does a
	  regular HELP for non-opers (paced) UHELP for opers is not paced.

2001-07-20 07:28  leeh

	* include/m_info.h, src/motd.c:
	  - added UHPATH to /info
	  - needed case UHELP_MOTD: in motd.c, for a blind commit hwy, it was
	    a nice job :)

2001-07-19 23:50  wcampbel

	* doc/Makefile.in, include/config.h, include/motd.h,
	  include/s_conf.h, modules/m_help.c, modules/m_rehash.c,
	  src/ircd.c: Add in /quote HELP for users.  doc/users.txt is the
	  file that's sent to the user.  It's also already paced, so that
	  concern of Diane's is taken care of.

	  Someone please test this, as I don't have a server set up and
	  running at the moment.

2001-07-19 23:46  wcampbel

	* src/irc_string.c: Fix my commit from before, nameser.h is needed
	  on FreeBSD

2001-07-19 22:23  wcampbel

	* src/irc_string.c: Removed an include (arpa/nameser.h) This breaks
	  Cygwin compiles, and appears to not be needed.

	  Someone want to check on this for me?

2001-07-19 09:31  androsyn

	* include/ircd.h, include/setup.h.in, src/ircd.c, src/s_debug.c:
	  Fix for the broken fix of the compile warnings that I fixed
	  yesterday on 64bit platforms, but ended up needing to refix on 32bit
	  platforms.

	  The universe truly hates me :P

2001-07-19 03:15  a1kmm

	* doc/example.conf, include/s_conf.h, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c:
	  - Re-enabled the #ifdef PACE_CONNECTs
	  - Added a configuration option throttle_time = <seconds>; Set to 0
	    to disable throttling.

2001-07-18 21:13  bill

	* include/s_conf.h:

	  - PACE_CONNECT now off by default

2001-07-18 16:57  wcampbel

	* Hybrid-team: Added jv

2001-07-18 12:03  androsyn

	* src/ircd_lexer.l: Fixed stupid warnings in ircd_lexer.l one of
	  the fixes is not so nice.

2001-07-18 11:40  androsyn

	* BUGS: Reflected the fact that the openssl related warnings are
	  fixed.

2001-07-18 11:39  androsyn

	* include/ircd.h, modules/m_trace.c, modules/m_version.c,
	  src/ircd.c, src/s_user.c, src/version.c.SH: Changed char *version
	  to char *ircd_version to prevent clash with openssl headers..

2001-07-18 11:22  androsyn

	* src/: restart.c, s_debug.c, s_misc.c: Fixed some issues with
	  64bit version and remove some drain bamage as well.

2001-07-18 11:04  androsyn

	* src/rsa.c: Sorta fixed the warnings in rsa.c.  We need to figure
	  out why we can't include pem.h.

2001-07-18 10:36  androsyn

	* src/channel.c: Fixed compile warning on 64bit platforms

2001-07-18 10:12  leeh

	* modules/: Makefile.in, core/Makefile.in, core/m_nick.c:
	  - missed a 'fi' in the makefile
	  - fixed two stupid bugs:
	    i) if a client has an id.. hes already regged, so calling
	         client_from_server == core.
	    ii) fixed the logic for people changing nick case

2001-07-18 08:11  leeh

	* contrib/: Makefile.in, m_jupe.c:
	  - IRCD_CFLAGS -> IRC_CFLAGS (or whatever it was ;p)
	  - removed an ugly hack in m_jupe.c I added when not thinking

2001-07-18 07:53  leeh

	* modules/: Makefile.in, core/Makefile.in:
	  - make install will rm m_client.so if it exists

2001-07-18 00:28  androsyn

	* src/s_log.c: A stray log() still needed to be converted to ilog()

2001-07-18 00:01  leeh

	* modules/: Makefile.in, core/Makefile.in, core/m_nick.c:
	  - *********** blat ************
	    rewrote m_nick.c to include m_client.c, seperated out all the
	    collide stuff and removed god knows how much bloat

	    I now need to gocrawl into bed.

2001-07-17 23:50  lusky

	* include/patchlevel.h:
	  - revved patchlevel to b7

2001-07-17 23:48  androsyn

	* tools/Makefile.in: I am AndroSyn..breaker of beta releases :P

2001-07-17 23:34  lusky

	* include/patchlevel.h:
	  - revved patchlevel to b6

2001-07-17 23:05  androsyn

	* contrib/Makefile.in, modules/Makefile.in,
	  modules/core/Makefile.in, servlink/Makefile.in, src/Makefile.in,
	  tools/Makefile.in, configure: Fixes default compile flags to
	  include -Wall and friends...

2001-07-17 19:19  leeh

	* modules/m_client.c, src/s_user.c:
	  - minor cleanups

2001-07-17 17:12  leeh

	* configure:
	  - I didnt mean to do that (it explains the double commit) I saw it
	    commiting configure and went "erp!"

	    this backs out the configure change ;)

2001-07-17 17:04  leeh

	* configure, doc/example.conf, include/client.h, include/ircd.h,
	  include/s_conf.h, modules/m_client.c, src/client.c, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_bsd.c, src/s_conf.c,
	  src/s_user.c:
	  - thats it, persistent clients are gone

	    they are never gunna be workable realitically for real clients,
	    theres too much scope for abuse

	    that leaves them to be an opers toy, and frankly, that just makes it
	    bloat.  The other coders are in agreement, so theyre gone.

2001-07-17 15:31  leeh

	* doc/example.conf, messages/ayb.po, messages/custom.po,
	  src/ircd_parser.y, src/messages.tab, src/s_conf.c:
	  - fixed a logic error in ircd_parser
	  - updated example.conf slightly
	  - (from jv)
	    make the password field in stats c show the link type:
	    	A - autoconnect
	  	C - cryptlinks
	  	L - lazylink
	  	M - masked (eg: *.fi)
	  	Z - ziplink
	  	* - none of above

2001-07-16 20:26  leeh

	* modules/m_connect.c:
	  - /connect new.server 0 hub.server

	    make hub.server connect to new.server on the port it has in its
	    config, providing it has one..

	    (requested by jv, and I quite like it :) )

2001-07-16 20:01  leeh

	* modules/m_ping.c:
	  - change two irccmp() -> !match() to take account of masking
	    (reported by jv)

2001-07-16 16:06  leeh

	* modules/m_stats.c, modules/m_trace.c, src/listener.c:
	  - IsSetOperAdmin != IsAdmin

	    stats l * needs to mask stuff too..

2001-07-16 15:39  leeh

	* src/listener.c:
	  - server ips in stats P are admin only.

2001-07-16 14:48  leeh

	* modules/m_admin.c:
	  - an unregged client might not have a nick.. send "*" if they dont

2001-07-16 14:45  spookey

	* configure:
	  - changes kqueue support checking to looking for kevent() instead of
	  sys/event.h

2001-07-16 00:11  spookey

	* configure: modified ircd-hybrid-7/autoconf/configure.in to check
	  properly for sys/event.h if kqueue is selected and to properly
	  discard prepend underscore checking in shared libraries when nlist.h
	  cannot be found updated configure from autoconf/configure.in

2001-07-15 16:52  leeh

	* include/m_info.h:
	  - added ipv6/pace_connect to /info

2001-07-15 16:18  leeh

	* doc/example.conf:
	  - added an example ipv6 listen.. some people just dont read comments

2001-07-14 19:08  leeh

	* modules/: m_capab.c, m_cryptlink.c:
	  - dont exit clients on capab either, people will just make newbies
	    abuse it (hey! /capab will make you a god!)
	  - m_registered for cryptlink!? :)  lets just ignore it ;)

2001-07-14 19:04  leeh

	* modules/m_cburst.c:
	  - call m_ignore instead of m_error when issued by client/oper
	    (noticed by jv)

2001-07-13 15:02  leeh

	* messages/ayb.po, messages/custom.po, src/messages.tab,
	  src/resv.c:
	  - there was a *@* on the end of RPL_STATSQLINE.. quite what its
	    intention was I dont know..

2001-07-12 20:10  leeh

	* src/hostmask.c:
	  - dont show spoofs to non-local opers..

2001-07-10 12:08  jdc

	* doc/example.conf:
	  - Typo fix.

2001-07-08 22:00  androsyn

	* include/modules.h: Forgot the msgtab stuff in modules.h for
	  static builds..

2001-07-08 18:44  androsyn

	* src/modules.c: When adding new modules, you really need to update
	  modules.c so that the having thoses modules compiled statically
	  works right.

2001-07-08 06:12  a1kmm

	* modules/core/m_sjoin.c:
	  - If we get a small TS on a non-existant channel, set the newts to
	    800000000 not 0.

2001-07-07 23:12  a1kmm

	* include/client.h, src/client.c, src/send.c:
	  - Reverted the testsuite module stuff, it probably shouldn't be
	    committed yet.

2001-07-07 23:00  a1kmm

	* include/client.h, src/channel.c, src/client.c, src/send.c:
	  - Actually set the key/limit to 0 on -k / -l as join requires this,
	    turning off the mode flag is not enough.
	  - Adding some of the code which will eventually be used to allow a
	    test-suite module.

2001-07-07 11:03  leeh

	* doc/: index.txt, resv.txt, whats-new.txt:
	  - added docs for resv

2001-07-04 16:42  wcampbel

	* .cvsignore, Makefile.in, doc/Makefile.in, include/Makefile.in,
	  messages/Makefile.in, modules/Makefile.in,
	  modules/core/Makefile.in, servlink/Makefile.in, src/Makefile.in,
	  tools/Makefile.in: Added make lint here, it's still broken
	  though.

2001-07-04 10:09  leeh

	* modules/m_resv.c:
	  - removed two pointless defines :P

2001-07-04 09:28  leeh

	* doc/example.conf, doc/opers.txt, modules/m_stats.c:
	  - stats m doesnt need to be oper only.. we send it to a user on
	    /help anyway

	  - updated the conf to reflect resv {};

2001-07-04 09:05  leeh

	* src/: resv.c, s_conf.c:
	  - fixed a couple of compile warnings

2001-07-04 05:59  leeh

	* messages/ayb.po, messages/custom.po, src/messages.tab,
	  src/resv.c:
	  - added the letter 'Q' to the front of a stats Q..
	    'q' == /resv
	    'Q' == conf resv

2001-07-03 17:14  leeh

	* include/hash.h, include/resv.h, modules/m_join.c,
	  modules/m_resv.c, modules/core/m_nick.c, src/hash.c,
	  src/ircd_parser.y, src/resv.c:
	  - wheeeeeeeeeeeee :)

	    added support for wildcard nick resv's
	    this means two seperate structs.. channels are in the hash for
	    speed reasons.. but we have to search through a linked list of
	    nicks, due to us having to call match() and not irccmp()

2001-07-03 09:32  leeh

	* include/s_conf.h, src/s_conf.c:
	  - removed traces of q_conf, I think its gone forever now :)

2001-07-03 09:26  leeh

	* src/: ircd_lexer.l, ircd_parser.y, s_conf.c:
	  - quarantine{}; no longer exists.  its been replaced by:

	    resv {
	      reason="no services on this network";
	      nick="chanserv";
	      nick="nickserv";
	      channel="#services";
	    };

	    you can still list them by doing stats Q

2001-07-03 07:46  leeh

	* include/resv.h, include/s_conf.h, modules/m_resv.c,
	  modules/m_stats.c, src/resv.c, src/s_conf.c:
	  - report_qlines -> report_resv
	    (s_conf.c)    -> (resv.c)

	  - stats Q now lists resv's.. I think I need to add the letter Q on
	    the beginning of the reply tho :P

2001-07-03 07:01  leeh

	* include/resv.h, modules/m_resv.c, src/resv.c:
	  - added reasons to resv

2001-07-03 00:52  wcampbel

	* .cvsignore, contrib/.cvsignore, doc/.cvsignore,
	  include/.cvsignore, messages/.cvsignore, modules/.cvsignore,
	  servlink/.cvsignore, src/.cvsignore, tools/.cvsignore,
	  tools/rsa_respond/.cvsignore: Added the .cvsignore files, this
	  helps coders more easily see if something is in the tree and
	  shouldn't be, or should be cvs add'ed

2001-07-02 15:09  jdc

	* modules/m_capab.c, modules/m_challenge.c, modules/m_cryptlink.c,
	  src/ircd_parser.y:
	  - modules/m_capab.c
	    modules/m_challenge.c
	    modules/m_cryptlink.c
	    src/ircd_parser.y
	      * Moved all strcasecmp()s to irccmp()s.

2001-07-02 15:03  jdc

	* doc/technical/cryptlink.txt, doc/example.conf, include/client.h,
	  include/modules.h, include/s_conf.h, include/s_serv.h,
	  modules/m_capab.c, modules/m_cryptlink.c, src/ircd_parser.y,
	  src/modules.c, src/s_conf.c, src/s_serv.c: Monster Update(tm)
	  time.  Please read the following disclaimer:

	  Cryptlinks have been slightly redone in a different format: THE
	  PROTOCOL HAS CHANGED.  You will *NOT* be able to connect an older
	  hybrid-7 daemon with this and future versions of hybrid-7.  The same
	  goes for present hybrid-6 connecting to this hybrid-7 or vice-versa.
	  The result of trying to connect older daemons will be a timeout, or
	  otherwise odd behaviour.

	  - doc/cryptlink.txt
	      * Updated the protocol; should be cleaner, handled under one
	        command: CRYPTLINK.  Subset commands are AUTH and SERV (eg.
	        CRYPTLINK AUTH, and CRYPTLINK SERV).
	      * Error handling is now documented.
	      * Examples of protocol transactions.

	  - doc/example.conf
	      * Updated comments regarding how to use "cipher_preference" and
	        "default_cipher_preference" directives.

	  - include/client.h
	      * Cosmetical changes.

	  - include/defaults.h
	      * Cosmetical changes.

	  - include/modules.h
	  - src/modules.c
	      * Removed "cryptauth_msgtab" and "cryptserv_msgtab" defs.
	      * Added "cryptlink_msgtab" extern declaration.

	  - include/s_conf.h
	  - src/s_conf.c
	      * Changed "cipher_preference" and "default_cipher_preference"
	        defs from from EncPreference to EncCapability.

	  - include/s_serv.h
	  - src/s_serv.c
	      * Removed EncPreference structure.
	      * Renamed "enccaptab" to "CipherTable".
	      * Changed cryptlink_error() function to take a lot more
	        arguments; the syntax has greatly changed.
	      * cryptlink_error() extended to not only send messages to
	        admins, opers, and call exit_client (dynamically), but also
	        ilog().  About time!
	      * Renamed select_cipher() to check_cipher().
	      * Added #ifdef's around portions of CipherTable to ensure
	        completely that we do not even add the cipher to our list in the
	        case that autoconf does not find it to be a supported cipher.  This
	        is needed for the cipher detection methods which use CipherTable
	      anywhere.
	  * Removed all the silly cipher "priority" garbage.  Good riddance.
	      * Much __MUCH__ better error handling and error descriptions.
	        Now both ends of the link should get an idea of what's wrong.
	      * Cosmetical changes.
	      * Added some comments.

	  - modules/m_capab.c
	      * Removed code to support multiple cipher preferences via ","
	        delim.  This is silly; pick a cipher and use it.
	        Autonegotiation is pretty pointless for this kind-of communication
	        medium.  This should also speed up the code a bit; no more
	  strtoken().

	  - modules/m_cryptlink.c
	      * Renamed mr_cryptserv() to cryptlink_serv().
	      * Renamed mr_cryptauth() to cryptlink_auth().
	      * Added mr_cryptlink().  This function is VERY simple, and uses
	        a table (CryptLinkStruct) to refer to it's commands.  This
	        should be useful for the future, particularly in regards to things
	        like key regeneration and for general expansion.  Someone should
	        probably check mr_cryptlink() out for any problems, though.
	      * Much __MUCH__ better error handling and error descriptions.
	        Now both ends of the link should get an idea of what's wrong.
	      * cryptlink_serv() and cryptlink_auth() both were doing
	        case-sensitive cipher checks; moved from strcmp() to
	  strcasecmp().

	  - src/ircd_parser.y
	      * In code pertaining to cipher_preference and
	        default_cipher_preference, __completely__ changed how the cipher
	        mechanism is done.  Before, we were doing some hoky crap with memory
	        allocation and creating a buffer for "cipher priority".  All of this
	        is now gone.  Instead, we use pointers to point into CipherTable.
	      This is *FAST AND CLEAN*.  Yay.
	  * Fixed bug: /REHASH could possibly corrupt the key on an error.
	      * Fixed minor memory leak (I think; could be wrong on this one).
	      * Changed some error messages to be more clear.
	      * Cosmetical changes.

2001-07-02 10:21  androsyn

	* src/ircd.c: Fixed buglet where we print the pid before fork() not
	  after fork().

2001-07-02 01:13  jdc

	* include/linebuf.h, src/linebuf.c, src/resv.c:
	  - include/linebuf.h
	    src/linebuf.c
	      * Missing declarations for functions; resulted in warnings.
	      * Some functions lacked void in function definition; just being
	      picky.
	  - src/resv.c
	      * Lacked include for hash.h.

2001-07-02 00:56  jdc

	* modules/m_resv.c:
	  - modules/m_resv.c
	      * Missing include for "hash.h" -- warnings...

2001-07-02 00:53  jdc

	* messages/: ayb.po, custom.po:
	  - messages/*.po
	    messages/translations/*.po
	      * Updated with latest changes to src/messages.tab to ensure
	      sanity.

2001-07-02 00:35  db

	* src/: m_error.c, modules.c:
	  - fixed m_error.c grrrr

2001-07-02 00:35  wcampbel

	* doc/kline.conf: Fix kline.conf.....

2001-07-02 00:18  wcampbel

	* configure, tools/Makefile.in, tools/viconf.c: Remove the last
	  vestiges of USE_RCS from viconf Install the two hard links to viconf
	  (vimotd and viklines) The above entails a configure and Makefile.in
	  update Re-add the empty kline.conf file, needed for make install if
	  installing to a new directory

2001-07-01 22:54  db

	* include/: config.h, config.h.dist, m_info.h:
	  - removed USE_RCS from config and m_info.c , it never worked
	  properly anyway!

2001-07-01 22:52  db

	* include/numeric.h, src/client.c, src/messages.tab:
	  - fixed missing change of local client ts (tsinfo) when client
	  changes nick
	  - changed "too many nick" changes notice into a 438 numeric, stolen
	    numeric from ircu... but we did the anti nick flood code first!
	    Note, all the language dependent message.tabs now have to be
	    updated. ick

2001-07-01 01:30  greg

	* Hybrid-team, src/s_serv.c: Added myself to h7 core team, since I
	  just almost had a coronary over h7 not following the rules of TS ...

	  server_estab resets firsttime .. burst times will be more accurate.

2001-06-30 22:19  androsyn

	* src/adns.c: Another shot at that dns patch..

2001-06-30 21:56  androsyn

	* src/adns.c: Added flags to adns_submit_reverse to make CNAME's in
	  PTRs work a bit better. Patch submitted by EO.

2001-06-29 12:03  leeh

	* modules/m_resv.c, src/resv.c:
	  - fixed the compile warnings..

2001-06-29 03:25  a1kmm

	* src/ircd_parser.y:
	  - Set uplink to NULL on changing to a hub.

2001-06-28 18:57  leeh

	* include/resv.h, modules/Makefile.in, modules/core/Makefile.in,
	  src/Makefile.in, src/resv.c:
	  - I should probably actually add the files ;p
	  - made the makefiles compile them too

2001-06-28 18:49  leeh

	* include/channel.h, include/hash.h, modules/m_join.c,
	  modules/core/m_nick.c, modules/m_resv.c, src/channel.c,
	  src/hash.c:
	  - hash tables hash tables everywhere!

	    extending RESV support for nicks:
	    -irc2.leeh.co.uk- *** Notice -- fl_!flame@irc2.leeh.co.uk{flame}
	    has placed a local RESV on nick: test

	    -> Server: nick test
	    test Nick/channel is temporarily unavailable

	    it only works with /resv atm, im going to rename quarantine {}; to
	    resv {}; (for obvious reasons.. dont wanna be too confusing now do
	    we)

	    I would really, really like someone to review this.. but if you
	    wanna change stuff find me first.. as I know where resv is going
	  ;p

2001-06-27 13:41  androsyn

	* include/linebuf.h, src/linebuf.c: Commit of Diane's linebuf
	  allocator thingy...

2001-06-27 04:20  a1kmm

	* include/channel.h:
	  - Better commit this header so my mode code compiles...

2001-06-27 01:17  a1kmm

	* src/channel.c:
	  - Fixed channel modes, hopefully they work entirely correctly now.

2001-06-26 16:55  androsyn

	* modules/m_gline.c: Yet another memset

2001-06-26 16:51  androsyn

	* src/: client.c, linebuf.c, s_auth.c, s_bsd.c, send.c: Remove some
	  unnecessary memset()'s

2001-06-26 16:45  androsyn

	* src/memory.c: Knocked off about 12 seconds of a burst by
	  replacing malloc/memset with calloc. Go figure..

2001-06-26 16:08  androsyn

	* include/memory.h: Its seems inlining MyMalloc() doesn't help
	  much...

2001-06-26 15:57  leeh

	* modules/m_join.c:
	  - moved the is_resv() check down to accomodate #x,#y

2001-06-26 15:48  leeh

	* include/channel.h, modules/m_join.c, modules/m_post.c,
	  modules/m_resv.c, src/channel.c, src/ircd.c:
	  - fixed a header in m_post.c
	  - added RESV - h7's channel jupes

	    /RESV - locally "jupe" a channel, to prevent anyone joining that
	            channel.  It will return the ERR_UNAVAILRESOURCE numeric
	  	  (juped).
	    /UNRESV - remove a RESV thats been placed

	    I shall extend it to nicks shortly.. as for permanence, I dont think
	    it should be an issue.. if they want it permanent, they can add it
	    to ircd.conf ;p

2001-06-26 15:27  androsyn

	* include/irc_string.h: Next time profile a function first before
	  you go and replace it :P

2001-06-26 15:09  androsyn

	* include/irc_string.h: Needed an #undef for on certain platforms..

2001-06-26 15:09  androsyn

	* include/: irc_string.h, memory.h: Some definitions to support
	  inlined versions of strcpy and MyMalloc() and friends...

2001-06-26 14:07  androsyn

	* src/ircd.c: This seems to get bursts back down to closer to
	  normal times..still not as fast as -6 though.

2001-06-26 06:02  jdc

	* doc/technical/README.openssl:
	  - doc/README.openssl
	      * More minor stuff; added a bit to the "SERVER CONFIGURATION"
	        section, with more to be added later in the future.

2001-06-26 05:52  jdc

	* tools/mkkeypair:
	  - tools/mkkeypair
	      * Someone wanted this awhile back.  I think it was you, greg.
	      ;-)

2001-06-26 05:50  jdc

	* doc/technical/cryptlink.txt:
	  - doc/cryptlink.txt
	      * Minor changes (cosmetical, grammatical, typos).

2001-06-26 05:18  a1kmm

	* src/channel.c:
	  - Tried to fix the mode code a little more. Still minor problems
	    with the stuff sent to the local client on -o+v

2001-06-26 05:09  jdc

	* modules/m_whois.c:
	  - modules/m_whois.c
	      * Minor warning fixed up (line 551; if statement
	      vague/ambiguous).

2001-06-26 05:00  jdc

	* doc/technical/cryptlink.txt, doc/example.conf, include/s_conf.h,
	  src/ircd_lexer.l, src/ircd_parser.y, src/rsa.c, src/s_conf.c,
	  src/s_serv.c:
	  - doc/cryptlink.txt
	      * Fixed up "CAPAB <stuff>" -- should be "CAPAB :<stuff>".
	  - include/s_conf.h
	    src/ircd_lexer.l
	    src/ircd_parser.y
	    src/rsa.c
	    src/s_conf.c
	    src/s_serv.c
	      * rsa_private_key  -->  rsa_private_key_file
	      * rsa_public_key   -->  rsa_public_key_file
	        (No more sticking keys in the actual conf; finally actual
	        files!) Who wrote the original rsa_public_key code anyways?
	        It was totally wacky (ascii!?!).
	      * Fixed a few issues with some buffers not getting cleared
	        (regarding RSA keys) on /REHASH.
	      * Fixed up some of the error checking code for public keys.
	      * Fixed up some code which was doing error checking at the wrong
	        time/wrong order.
	  - doc/example.conf
	      * Changed examples to be precise with the above.

2001-06-25 12:55  jdc

	* src/rsa.c:
	  - src/rsa.c  -- Looks like the RSA_free() prior to the PEM_ function
	                  results in a segfault.  I had a feeling about this;
	                  so what the hell are the OpenSSL people talking
	                  about?

2001-06-25 12:28  jdc

	* include/rsa.h, modules/m_cryptlink.c, src/rsa.c:
	  - include/rsa.h  -- Changed verify_private_key() to return int.
	    modules/m_cryptlink.c  -- Updated use of verify_private_key().
	    src/rsa.c  -- Madness regarding OpenSSL.  I'm going to murder
	                  whoever wrote openssl/pem.h.  If things no longer
	                  work past this point, it's probably due to the
	                  typecast on line 110.  *sigh*

2001-06-25 11:40  jdc

	* src/rsa.c:
	  - src/rsa.c
	      * Changed the assignment for PEM_read_bio_RSAPrivateKey().
	        There are bugs/caveats for using &ptr in the 2nd argument vs. an
	        actual assignment with a TYPE_free() prior to it.  Don't
	        believe me? Check out
	      http://www.openssl.org/docs/crypto/pem.html#BUGS
	  * Changed the error checking drastically, matching with what the
	        official OpenSSL documentation states we should do.  Now
	        things like specifying an invalid file in serverinfo{}'s
	        "rsa_private_key" should hopefully error out properly and not beat
	      the jig.
	  * Hoping these changes fix some major issues -- the first is a
	        pretty major one.  :-)

2001-06-25 05:23  a1kmm

	* include/channel.h, src/channel.c:
	  - Fixed redundant ops/voices etc... removal
	  - Added redundant sync_oplists removal. Note that there is still a
	    bug I am looking for: /mode #chan +o-o on a non-opped user still
	    seems to sync_oplists and give away the oplist by deopping all the
	    ops for some reason. I will fix this later.

2001-06-24 00:55  a1kmm

	* modules/core/m_squit.c, src/client.c, src/hostmask.c,
	  src/listener.c, src/s_conf.c:
	  - Committing jv's patch for the SQUIT bug.
	  - Fixed IPv4 dlines/exempts for IPv6 boxes.
	  - Fixed exempt matching for rate limiting.

2001-06-23 09:02  leeh

	* modules/: m_cryptlink.c, m_svinfo.c, core/m_server.c:
	  - some get_client_name() updates..

2001-06-23 07:35  db

	* modules/m_connect.c:
	  - fixed some formatting

2001-06-22 11:24  leeh

	* modules/m_whois.c:
	  - if someone asks a server to reply about a client thats not his..
	    it HAS to be non-detailed, else the info is just gunna be wrong

	  - (the big one), made ms_whois() work.. if someone asks a LL to
	    answer about a client thats not /on/ the LL.. stuff will just break,
	    so the hub will answer for the LL

	    this made the hub more conscious about what it can/cant do.. it
	    could possibly be tidied up but its.. dodgy

	    someone needs to audit this, its *very* well documented in the
	    source, you just need to follow it..

2001-06-22 03:03  jdc

	* modules/m_gline.c:
	  - modules/m_gline.c: time_t warning (moved to %lu with a typecast).

2001-06-21 20:09  leeh

	* src/s_conf.c:
	  - added a missing #ifdef PACE_CONNECT

2001-06-21 14:38  leeh

	* modules/core/m_squit.c:
	  - fixed serverhide bug in squit

2001-06-21 14:25  leeh

	* modules/m_whois.c:
	  - heres another go :)

2001-06-21 13:57  leeh

	* modules/m_whois.c:
	  - this should fix the whois bug

2001-06-20 17:39  jdc

	* doc/technical/README.openssl:
	  - Whee.  Sorry to update the updated update *grin* kre, but I
	    figured with all of the recommended Solaris workarounds, this would
	    be a more effective way of listing them all.  Thanks for providing
	    more alternatives!

2001-06-20 17:23  kreator

	* doc/technical/README.openssl:
	  - small openssl documentation updates: prngd, sunwski, andirand.

2001-06-19 12:07  leeh

	* modules/m_gline.c:
	  - when we send glines to hyb6 servers, they need to come from the
	    opers server, not the opers nick..

2001-06-19 05:58  jdc

	* doc/technical/README.openssl:
	  - doc/README.openssl
	      Severe "touch-ups," and added a section pertaining to Solaris
	      and it's lack of /dev/random or /dev/urandom.  Hopefully this
	      will help Solaris users out a little bit.

2001-06-19 04:25  db

	* modules/m_gline.c:
	  - redid m_gline to write kline.conf compatible files

2001-06-19 03:54  a1kmm

	* include/channel.h, src/channel.c:
	  - Finished off Diane's USE_TABLE_MODE patch.

2001-06-18 21:49  leeh

	* modules/: m_gline.c, m_kline.c:
	  - disallow ! in klines/glines..

2001-06-18 05:26  jdc

	* BUGS:
	  - Mentioned the implicit decl. and warning messages during
	    compile-time, which pertain to OpenSSL.  People like Jamie will
	    bitch and whine, so might as well be precautious.  *grin*
	  - Reformatted some stuff (purely cosmetical).

2001-06-18 05:20  jdc

	* include/rsa.h, include/s_conf.h, modules/m_cryptlink.c,
	  src/rsa.c:
	  - Fixes compile issues with prior update for OpenSSL error logging.
	    One small note:  There is no way I know of to get around the
	    implicit declaration warning for PEM_read_bio_RSAPrivateKey().  If
	    you include <openssl/pem.h>, you break everything.  Either our SSL
	    code is really, and I mean __REALLY__ bad, or OpenSSL is just a
	    hunk of junk.  fetchmail and mod_ssl don't have the problems we
	    are, though...

2001-06-18 04:40  db

	* include/channel.h, src/channel.c:
	  - bug in USE_TABLE_MODE set_channel_mode code
	    I've undeffed it for now until this fix is verified... This
	    code should be rather more carefully tested...
	  - Basically chptr->chname does not always point at the real name as
	    seen by users when on a vchan. The root channel name is passed to
	    set_channel_mode() for this reason. set_channel_mode is given
	    the chptr corresponding to the mapped channel (#foo_{TS}) but
	    the local users should only see the "#foo" part, which is what
	    chname passed down is (the root channel name)
	  - I'm unable to test this fix atm. Someone else will have to ;-(

2001-06-18 03:30  jdc

	* include/s_conf.h, modules/m_cryptlink.c, src/ircd_parser.y,
	  src/rsa.c, src/s_serv.c:
	  - Modifications to support verbose logging for cryptlink problems.
	    Patches originally written by einride.  Logging levels are
	    L_NOTICE and L_CRIT.
	    Modified files:
	      * include/s_conf.h
	      * modules/m_cryptlink.c
	      * src/ircd_parser.y
	      * src/rsa.c
	      * src/s_serv.c

2001-06-18 02:09  a1kmm

	* .indent.pro:
	  - Committing my version of .indent.pro

2001-06-17 13:10  db

	* src/channel.c:
	  - ircsprintf() conveniently returns the length of string

2001-06-17 11:17  toot

	* src/channel.c: renamed some stuff in channel.c so it makes some
	  more sense

2001-06-17 08:07  toot

	* .indent.pro, src/channel.c, src/vchannel.c: added -ncs to
	  .indent..
	  (re)indented channel.c and vchannel.c..

2001-06-17 07:43  toot

	* .indent.pro: added .indent.pro to use in other dirs "-gnu -nut
	  -npcs -cdw" seems close to what we use..  feel free to change stuff
	  :)

2001-06-17 07:17  toot

	* src/channel.c: finished formatting channel.c

2001-06-16 18:56  a1kmm

	* src/: hostmask.c, s_conf.c:
	  - Changed an irccmp to a match so we don't break host = "*.blah";

2001-06-16 17:57  db

	* src/s_conf.c:
	  - same fix needed in hybrid-7 in attach_cn_lines
	    both the servers irc name has to match and the host/ip
	    match is used to allow hostmasking (ugh)

2001-06-16 12:36  toot

	* src/channel.c: more formating fixes in channel.c

2001-06-16 11:21  toot

	* src/channel.c: started reformatting some code in channel.c.. it
	  was hell to read commited it so far so as not to get out of sync :)

2001-06-16 04:12  a1kmm

	* src/s_conf.c:
	  - '>' != '<'

2001-06-16 04:11  a1kmm

	* src/s_conf.c:
	  - Cleaned up remove_one_ip a little.

2001-06-16 03:57  a1kmm

	* src/listener.c:
	  - Ripped out the last remnants of the TOO_MANY code I was going to
	    commit but then decided was pointless so ripped most of it before...

2001-06-16 03:19  a1kmm

	* src/: channel.c, s_serv.c:
	  - Fixed that "/squit" bug where we don't remove channels/nicks from
	    a linked list.
	  - Ripped lazylink_nicks, it probably uses more cycles/memory than it
	  saves.

2001-06-16 02:50  jdc

	* doc/technical/README.openssl:
	  - doc/README.openssl: Lots of changes, and still some left to do (a
	    section on how to modify your configuration file, and what's
	    what).

2001-06-16 02:07  jdc

	* doc/technical/README.openssl:
	  * Small typos and the like.

2001-06-15 22:55  a1kmm

	* include/s_conf.h, src/ircd.c, src/listener.c, src/s_bsd_kqueue.c,
	  src/s_conf.c:
	  - 1 microsecond != 1 millisecond. Changed the delay stuff so ircd
	    doesn't hang for too long.
	  - Added some connect pacing(for 7.1). It is all wrapped in #ifdef
	  for now.

2001-06-15 16:50  toot

	* modules/m_names.c: /names should say "#channel End of /NAMES
	  list.", even when the channel doesn't exist

2001-06-15 06:26  a1kmm

	* src/hostmask.c:
	  - Fixed IPv6 klines.

2001-06-15 04:42  toot

	* src/restart.c: fixed a compile warning..

2001-06-14 16:48  androsyn

	* src/match.c: #ifdef out some dead code

2001-06-13 20:23  leeh

	* doc/whats-new.txt:
	  - slight updates

2001-06-13 20:14  leeh

	* modules/: m_oper.c, core/m_nick.c:
	  - started removing server names in collisions..
	    the old ones are wrapped in #if 0 for now
	  - removed an excess ) from m_oper.c

2001-06-13 13:41  leeh

	* src/client.c:
	  - ug, I came across check_klines() when trying to find this bug..
	    it was just about unreadable..

2001-06-13 00:57  androsyn

	* modules/m_oper.c: Cleaned up more abuses of inetntoa()

2001-06-13 00:55  androsyn

	* modules/m_rehash.c: sockhost is the string version of the IP..duh
	  :P

2001-06-13 00:48  androsyn

	* include/irc_string.h: Minor cleaups...

2001-06-13 00:47  androsyn

	* src/irc_string.c: Minor cleanups...

2001-06-12 17:55  androsyn

	* src/s_bsd.c: Oops..i should have been checking to see if the
	  connection was an AF_INET6

2001-06-12 17:43  androsyn

	* src/s_conf.c: All this world is not 32bits...

2001-06-12 17:23  androsyn

	* src/: s_bsd_devpoll.c, s_bsd_kqueue.c, s_bsd_poll.c,
	  s_bsd_select.c: Forgot to commit these files as well with the
	  previous commit

2001-06-12 17:20  androsyn

	* include/s_bsd.h, src/s_bsd.c: Changes a bunch of unsigned long's
	  to time_t's for timeouts..

2001-06-12 17:13  androsyn

	* configure, include/setup.h.in: Fixes autoconf so that u_int32_t
	  always is a 32bit integer on all platforms, include 64bit ones..

2001-06-12 16:59  androsyn

	* src/s_bsd.c: Maybe this will fix the ipv6 . problem

2001-06-12 14:11  androsyn

	* src/Makefile.in: Fixed Makefile.in after I borked it last night.

2001-06-12 00:51  androsyn

	* src/Makefile.in: Helps if you commit the right makefile.in

2001-06-12 00:50  androsyn

	* configure: Disable iauth and libnsl/libresolv checks, as we
	  really don't need, or want these libraries.

2001-06-11 16:46  toot

	* modules/m_svinfo.c: slight cosmetic fix to the TSdelta notice to
	  admins.

2001-06-11 15:56  leeh

	* include/client.h, modules/m_cryptlink.c, modules/m_svinfo.c,
	  modules/core/m_server.c, src/client.c, src/m_error.c,
	  src/parse.c, src/s_bsd.c, src/s_conf.c, src/s_serv.c,
	  src/s_user.c, src/send.c:
	  - FLAGS_ADMIN -> FLAGS_SERVADMIN
	    this means the notices goes to admins who are +s, and not all
	    admins..  (this is how it shouldve been)
	  - FLAGS_NOTADMIN -> FLAGS_SERVOPER
	    as above

2001-06-11 15:38  androsyn

	* src/ircd.c: Its always useful to rearm your timer.

2001-06-11 15:36  androsyn

	* src/ircd.c: Changed waitpid() check for zombies to run once every
	  30 seconds, rather than once per i/o loop cycle.

2001-06-11 15:19  androsyn

	* servlink/control.c, src/channel.c, src/hostmask.c, src/restart.c,
	  src/s_bsd_devpoll.c, src/sprintf_irc.c: Fixes for various moans
	  and groans that gcc emitted.

2001-06-11 14:05  androsyn

	* src/s_bsd_devpoll.c: Fixed /dev/poll to do something useful other
	  than eat cpu..

2001-06-10 22:49  androsyn

	* src/s_bsd_devpoll.c: Turned off logging of /dev/poll that was
	  filling my disk

2001-06-10 18:29  kreator

	* configure:
	  - added /usr/pkg and /usr/local paths for openssl detection since i
	    have systems with those paths used for ssl - NetBSD, etc.

2001-06-10 12:41  toot

	* src/s_conf.c: put that assert back in get_oper_name

2001-06-10 09:13  db

	* src/channel.c:
	  - I should not commit code when tired.
	    anyway, this fixes a NULL pointer.

2001-06-10 02:46  db

	* src/channel.c:
	  - don't check that assert unless uplink is NON NULL dork

2001-06-10 02:12  db

	* src/: channel.c, s_serv.c:
	  - don't make uplink a non local server. this really should NOT
	  happen...
	  - assert if uplink is a non local server, furthermore whine to
	    logging if it is.

2001-06-10 01:12  a1kmm

	* include/channel.h, src/channel.c:
	  - Cleaned up + optimised the USE_TABLE_MODE stuff.

2001-06-09 21:09  a1kmm

	* src/channel.c: More mode table stuff:
	  - Implement +I/+e
	  - Fix -v+o sort of case.
	  - Send nothing on +n-n sort of thing.

2001-06-09 20:03  db

	* modules/core/m_message.c:
	  - allow opers to always send through a +g

2001-06-09 14:56  toot

	* modules/m_kline.c, src/ircd.c, src/s_conf.c: fixed some compile
	  warnings

2001-06-09 14:37  toot

	* src/s_conf.c: fixed possible overflow in get_oper_name, and
	  removed the assert

2001-06-09 07:16  a1kmm

	* src/channel.c:
	  - We probably want to #if 0 this out until 7.1, especially as it
	    isn't finished and it needs more stuff to be moved into headers
	  etc... later.
	  - Implements a table driven channel mode system. Not quite complete,
	  but almost.

2001-06-09 04:35  androsyn

	* include/s_bsd.h, src/ircd.c, src/packet.c, src/s_auth.c,
	  src/s_bsd.c, src/s_bsd_devpoll.c, src/s_bsd_kqueue.c,
	  src/s_bsd_poll.c, src/s_bsd_select.c: Okay...this fixes the
	  usleep hack.  Basically we end up doing the delay in
	  select/poll/kqueue.  In the case of poll() we set the delay on the
	  last poll list, which seems sane enough.  The biggest change here is
	  the fact that we are no longer using time_t for delays, but an
	  unsigned long, which is holding a millisecond value.  I've tested
	  the poll() case and that seems to work okay.

2001-06-08 18:31  kreator

	* doc/example.conf, include/rsa.h, include/s_conf.h,
	  src/ircd_lexer.l, src/ircd_parser.y, src/rsa.c, src/s_conf.c,
	  src/s_serv.c:
	  - add EGD support; setup via use_egd=yes; and egdpool_path="path";
	  - rewrite some repeating RAND_bytes calls

2001-06-08 12:18  db

	* tools/convertklines.c:
	  - fixed header, it read convertconf still
	  - fixed spelling mistake seperate -> separate a very common one..

2001-06-08 11:01  jdc

	* src/s_conf.c:
	  * Fixed time_t vs. long warnings (typecasted properly as '(long)').

2001-06-08 06:52  leeh

	* README.FIRST, tools/Makefile.in, tools/convertklines.c:
	  - added convertklines to convert klines from old format -> new
	  format

2001-06-08 06:24  a1kmm

	* include/ircd_defs.h, include/s_conf.h, modules/m_kline.c,
	  modules/m_rehash.c, modules/m_unkline.c, src/ircd_parser.y,
	  src/s_conf.c:
	  - Improved logging of oper activities to include opernick or
	  operserver.

2001-06-08 05:59  leeh

	* modules/m_kline.c:
	  - extended valid_comment() to be in mo_kline() and ms_kline()

2001-06-08 03:41  db

	* modules/m_kline.c:
	  - can't have a " inside a " duh

2001-06-08 03:37  db

	* include/s_conf.h, src/kdparse.c, src/s_conf.c:
	  - renamed KParseFile to parse_k_file DParseFile to parse_d_file

2001-06-08 03:30  db

	* modules/m_kline.c:
	  - valid_comment() should only toss away " for now... could escape it
	  in future

2001-06-08 03:08  db

	* doc/kline.conf:
	  - what was this 0 length file doing here?

2001-06-08 01:41  db

	* README.small_nets:
	  - updated slightly

2001-06-08 01:33  db

	* include/s_conf.h, modules/m_unkline.c, src/kdparse.c:
	  - unkline and undline now work with the new formats
	  - Exceptions to D and K lines MUST only be in ircd.conf now.

2001-06-07 23:49  db

	* include/config.h, include/config.h.dist, include/s_conf.h,
	  modules/m_kline.c, src/kdparse.c, src/s_conf.c:
	  - write the current_date to the reason field
	  - dline.conf cannot be == kline.conf now
	  - someone has to redo the unkline/undline code now.

2001-06-07 23:13  db

	* doc/example.conf, include/s_conf.h, src/Makefile.in,
	  src/kdparse.c, src/oldparse.c, src/s_conf.c:
	  - redid kline/dline parser to use a spreadsheet compatible file
	    format klines are now stored as discussed on ircd-coders
	    "user","host","reason","time" (for now) I'll convert time
	    to decimal field later, and add oper id ...
	    for now this works..
	  - also fixed typo in example.conf pointed out by MrPerfect

2001-06-07 00:32  jdc

	* src/Makefile.in:
	  * Fixed SSL_LIBS= =stuff.  Note the extra equals sign.

2001-06-07 00:22  androsyn

	* configure: My attempt at fixing the SSL include/libs stuff..its
	  good and likely I screwed pretty bad, but it worked for me :P

2001-06-06 18:00  kreator

	* configure:
	  - added missing #include <stdlib.h> for exit() calls in configure

2001-06-06 17:48  jdc

	* contrib/Makefile.in, doc/Makefile.in, modules/Makefile.in,
	  modules/core/Makefile.in, servlink/Makefile.in, src/Makefile.in,
	  tools/Makefile.in:
	  * Yup.  Here we go again.  Changes for OpenSSL to work properly
	    during make; servlink/Makefile.in was also majorly wrong, including
	    the SSL LIBS for INCLUDES rather than the INCLUDES, blah blah
	    blah...  It's all fixed now.

2001-06-06 14:28  jdc

	* servlink/Makefile.in:
	  * Little fix for missing @SSL_LIBS@ (-L) in servlink/Makefile.in

2001-06-06 14:21  leeh

	* contrib/Makefile.in, contrib/README, contrib/example_module.c,
	  doc/index.txt:
	  - added an example module to the cvs, detailing how to build them,
	    and what individual bits mean..

2001-06-06 14:13  jdc

	* configure, contrib/Makefile.in, doc/Makefile.in,
	  modules/Makefile.in, modules/core/Makefile.in, src/Makefile.in,
	  tools/Makefile.in:
	  * Round 3 of the OpenSSL madness.  This *SHOULD* take care of
	    everything (isn't that what I said last time?).  Someone might want
	    to examine the Makefile.in's in other directories and see if they
	    need SSL though.  People, ***PLEASE TRY THIS OUT*** to make sure it
	    works for you.

2001-06-06 11:39  androsyn

	* src/: irc_string.c, s_bsd.c: Lets see if this fixes the issue
	  with '.' getting all over everything and everything else.

2001-06-06 10:27  leeh

	* src/client.c:
	  - if ConfigFileEntry.no_oper_flood dont stop opers nick changes..

2001-06-06 10:23  androsyn

	* configure, include/setup.h.in: Fixed stuff that was breaking the
	  compile of ircd.c on solaris.

2001-06-06 10:06  leeh

	* modules/m_cjoin.c, src/m_error.c:
	  - FLAGS_ALL -> FLAGS_NOTADMIN
	  - m_error -> m_ignore

2001-06-06 09:46  leeh

	* modules/: m_info.c, m_motd.c:
	  - them cores arent fixed in hyb7.. "oops"

2001-06-05 23:16  toot

	* doc/example.conf, doc/whats-new.txt, include/ircd_defs.h,
	  include/s_conf.h, include/supported.h, modules/m_info.c,
	  modules/m_join.c, modules/m_knock.c, modules/m_lljoin.c,
	  src/channel.c, src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c,
	  src/vchannel.c: moved knock_delay, max_chans_per_user, and
	  quiet_on_ban to the channel block in ircd.conf and added maxbans to
	  it

2001-06-05 18:06  toot

	* servlink/servlink.c, tools/encspeed.c: fixed some little compile
	  errors

2001-06-05 17:33  db

	* doc/example.conf, include/s_conf.h, include/supported.h,
	  modules/m_cjoin.c, modules/m_info.c, modules/m_knock.c,
	  modules/core/m_sjoin.c, src/channel.c, src/ircd.c,
	  src/ircd_parser.y, src/motd.c, src/s_conf.c:
	  - ok, moved channel {} block related stuff into ConfigChannel struct
	    this was all over the place
	  - removed redundant extern for ConfigFileEntry
	  - removed typedef on ConfigFileEntry struct

2001-06-05 16:20  jdc

	* doc/technical/README.openssl:
	  * And here we are, folks.  Read it and weep.

2001-06-05 16:18  db

	* doc/example.conf, include/s_conf.h, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c:
	  - added initial channel {} block to set unset channel specific
	    options use_invex use_except use_knock
	    vchans might be nice to move into this block as well?

2001-06-05 15:24  toot

	* include/s_conf.h, src/channel.c, src/ircd.c, src/s_conf.c: added
	  use_except.  moved the default for use_invex/except to
	  set_defaults() still need parser stuff, hehe

2001-06-05 14:25  leeh

	* modules/m_eob.c:
	  - [19:22] (greg) *** Notice -- *** End of burst from efnow.sdk.ca (1
	    seconds)
	    [19:22] (greg) too many *'s.

2001-06-05 14:14  db

	* include/s_conf.h, src/channel.c, src/ircd.c:
	  - added GlobalSetOptions.use_invex, no parser entry for it yet

2001-06-05 14:05  leeh

	* contrib/: m_clearchan.c, m_jupe.c, m_opme.c:
	  - log() -> ilog()

2001-06-05 12:41  leeh

	* include/handlers.h, src/m_error.c, src/parse.c, src/s_bsd.c,
	  src/s_serv.c, src/send.c:
	  - it seems to be give fl_ annoying code to fix hour..
	  - removed mr_error(), as it err.. didnt do a lot.. it got called,
	    then returned cuz the client was unregged ;)

2001-06-05 12:11  leeh

	* modules/: core/m_server.c, core/m_squit.c, m_svinfo.c:
	  - youd be amazed how many of these bloody things there are :P

2001-06-05 12:07  kreator

	* src/ircd.c:
	  - err, be more precise: setup limit only if get limit succeeds

2001-06-05 11:53  leeh

	* modules/core/m_nick.c:
	  - get_client_name(client_p, HIDE_IP) -> client_p->name
	    showing IPs to opers is bad :P

2001-06-05 10:58  kreator

	* src/Makefile.in:
	  - fixed -L order in IRCDLIBS that was causing this on systems
	    containing system libadns:
	    /home/kreator/work/cvs/ircd-hybrid-7/src/adns.c:56: undefined
	    reference to `adns__rereadconfig'

2001-06-05 10:51  kreator

	* src/ircd.c:
	  - add setup_corefile() that will rlimit corefilesize to system max

2001-06-04 23:56  db

	* modules/m_restart.c:
	  - =I= Missed a log to ilog in m_restart *sigh*

2001-06-04 23:54  ejb

	* contrib/vms_version.c:
	  - no longer needed.

2001-06-04 23:53  ejb

	* make.com:
	  - don't copy version.c any more, since we generate it via
	  version.com.

2001-06-04 21:55  ejb

	* src/: ircd_lexer.l, ircd_parser.y:
	  - oops, do these too.

2001-06-04 21:46  db

	* modules/: m_challenge.c, m_connect.c, core/m_die.c, m_kline.c,
	  m_oper.c, core/m_kill.c, m_rehash.c, m_svinfo.c, m_unkline.c,
	  core/m_squit.c:
	  - committed my side of the great log() to ilog() change

2001-06-04 21:45  ejb

	* README.VMS, include/s_log.h, src/adns.c, src/client.c,
	  src/debug.c, src/ircd.c, src/ircd_signal.c, src/ircdauth.c,
	  src/memory.c, src/modules-dld.c, src/modules.c, src/oldparse.c,
	  src/restart.c, src/s_auth.c, src/s_bsd.c, src/s_bsd_devpoll.c,
	  src/s_bsd_kqueue.c, src/s_conf.c, src/s_debug.c, src/s_log.c,
	  src/s_serv.c, src/send.c:
	  - change src/ to use ilog() rather than log().
	    this is needed for systems which put the math library
	    in the main C RTL.

2001-06-04 10:30  davidt

	* src/s_serv.c, servlink/io.c, servlink/io.h, servlink/servlink.c,
	  servlink/servlink.h:
	  - Check select() return value for errors.
	  - Minor fixes for errors introduced with the new servlink code to
	    avoid using dup2().
	  - Fix for order of ciphers in s_serv.c

2001-06-04 09:22  db

	* src/modules.c:
	  - oops forgot a node = next in the for

2001-06-04 00:05  db

	* src/modules.c:
	  - fixed core on /rehash

2001-06-03 19:44  ejb

	* doc/example.conf, include/motd.h, src/ircd_lexer.l,
	  src/ircd_parser.y:
	  - VMS fixes to motd.h.
	  - support for port = 1, 2; and port =1 .. 5; in ircd.conf.

2001-06-03 19:19  jdc

	* configure:
	  * Fix for --enable-openssl.  Now the automatic mode (no =DIR
	    arguments) correctly traverses through the list of internal paths.
	    I forgot a break statement.

2001-06-03 15:03  davidt

	* include/: ircd.h, memory.h:
	  - Fix the two easiest compile warnings from VMS.

2001-06-03 13:39  davidt

	* src/s_serv.c, servlink/control.c, servlink/io.c, servlink/io.h,
	  servlink/servlink.c, servlink/servlink.h, servlink/setup.h.in:
	  - fix servlink problem with dup2() closing the server fd.

2001-06-03 10:17  davidt

	* modules/m_cryptlink.c:
	  - Set hopcount correctly for cryptlinks

2001-06-03 09:59  davidt

	* modules/m_join.c, src/ircd_parser.y:
	  - Remove some #if 0'd code from m_join.c which is broken and
	  unneeded.
	  - Fix stupid bug in ircd_parser.y from my mass-cleanup..

2001-06-03 09:55  db

	* src/client.c: From jason@sabruno.wiz.cx  Sat Jun  2 23:59:06 2001

	  typo in hybrid 7:

	  [20:57|wiz] KLINE over-ruled for
	  tek-X[bigpoppate@a24b161n137client58.hawaii.rr.  com], client is
	  kline_exmpt

	  should be kline_exempt.

2001-06-02 18:12  leeh

	* doc/example.conf, src/s_serv.c:
	  - made vhost6 actually do something and work..
	    we can now have ipv6 only servers.. it relies on aftype= in the
	    ircd.conf

	    Theres still a bug with ipv6 incoming connections.. if it resolves
	    and you have the IP, not the host in the config, itll error and
	    give bad hostname.. we should accept both IP and host, and I dont
	    think I can fix this one.. andro? a1kmm? care to help? ;)

2001-06-02 10:21  jdc

	* configure:
	  * Fixed output so that --disable-openssl doesn't bother checking for
	    include directories and the like.  Minor fix (mainly cosmetical).

2001-06-02 08:15  davidt

	* src/s_conf.c: make STATIC_MODULES compile again

2001-06-02 07:19  jdc

	* configure:
	  * --enable-openssl has changed quite dramatically.  See below.
	      ! <non-existant>        : Try auto-finding OpenSSL.
	      ! --enable-openssl      : Try auto-finding OpenSSL.
	      ! --enable-openssl=DIR  : Use DIR as the OpenSSL **BASE
	      DIRECTORY**.  ! --disable-openssl     : Disable support for
	  OpenSSL.

	    The "auto-finder" checks /usr/include/openssl,
	    /usr/local/openssl/include, and /usr/local/ssl/include.  The first
	    is the stock location for FreeBSD 4.x and 5.x.  The second is the
	    stock location for FreeBSD's ports install of OpenSSL.  The third is
	    the path the "stock" OpenSSL source uses for the default install
	  (/usr/local/ssl).

	    Please note that --enable-openssl=PATH requires you to specify the
	    **BASE DIRECTORY** where you installed OpenSSL.  Do **NOT**
	    include the actual include/ directory in the path.

	    Thanks to wjr for bringing all of this to my attention.

2001-06-02 01:52  ejb

	* modules/m_gline.c:
	  - and this.

2001-06-02 01:48  ejb

	* include/setup.h_vms:
	  - and this one.

2001-06-02 01:47  ejb

	* modules/m_info.c:
	  - VMS compile fix.

2001-06-02 01:46  ejb

	* README.VMS, include/config.h, src/s_debug.c:
	  - removed last traces of CMDLINE_CONFIG.

2001-06-01 08:20  leeh

	* doc/example.conf:
	  - commented out the module="some_module.so", for the admins who dont
	    realise..

2001-06-01 07:05  leeh

	* doc/example.conf, include/s_conf.h, modules/m_info.c,
	  modules/m_stats.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_conf.c:
	  - ?_lines_oper_only -> stats_?_oper_only

2001-05-31 21:23  davidt

	* contrib/: m_clearchan.c, m_jupe.c, m_opme.c:
	  - Fix contrib for the new send.c

2001-05-31 20:55  davidt

	* include/send.h, modules/m_away.c, modules/m_cjoin.c,
	  modules/m_client.c, modules/m_connect.c, modules/m_gline.c,
	  modules/m_join.c, modules/core/m_kick.c, modules/m_kline.c,
	  modules/core/m_message.c, modules/m_oper.c,
	  modules/core/m_nick.c, modules/m_operwall.c, modules/m_topic.c,
	  modules/core/m_part.c, modules/core/m_squit.c,
	  modules/m_wallops.c, src/channel.c, src/client.c, src/ircdauth.c,
	  src/s_conf.c, src/send.c:
	  - Replace sendto_*serv* with sendto_server.
	    sendto_server(one, NULL, NULL, NOCAPS, NOCAPS, NOFLAGS, format,
	    ...) works like sendto_serv_butone() did before, perhaps it should
	    be made into a macro... but we don't seem to _use_ a simple
	    'sendto_serv_butone()' in many places any more, lazylinks/etc make
	  it a bit more complicated.
	  - Also fix a few compile warnings, which mostly appear to have
	    already been committed by toot, so that just added some conflicts
	    for me to sort out before committing.  Maybe I should just do one
	  thing at a time :)

2001-05-31 19:25  toot

	* modules/m_gline.c, src/modules.c, src/s_conf.c: . added call to
	  set_default_conf before parsing the conf . fixed a few compile
	  warnings

2001-05-31 15:42  davidt

	* doc/example.conf, include/config.h, include/defaults.h,
	  include/modules.h, include/s_conf.h, src/ircd_lexer.l,
	  src/ircd_parser.y, src/modules.c, src/s_conf.c, src/s_serv.c:
	  - Pass 2 of config file cleanup.
	    * default ConfigFileEntry stuff is now set in
	    s_conf.c:set_default_conf().
	  * default stuff for blocks using yy_aconfs is done at the start of
	      the ircd_parser.y code, where make_conf() is called.
	    * any validation of config stuff is now done in
	    s_conf.c:check_conf().
	  * validation of yy_aconf blocks is done at the end of the code,
	      before add_conf*() is called.
	    * we free anything we might have allocated in the config file
	      _BOTH_ in s_conf.c:clean_out_old_conf(), and ircd_parser.y.
	      - ircd_parser.y incase a line is duplicated in a block.
	      - clean_out_old_conf() incase a line is removed from the config
	    file.
	  * we no longer close listeners until we are about to call yyparse(),
	      so if we abort, we don't end up with no open ports.

	  - Work remaining (someone else can do this if they want):
	    * tidy up example.conf/simple.conf/ircd_parser.y/ircd_lexer.y
	      -- rename some of the hideous options we have, like the
	      double negative 'warn_no_nlines = no;' or 'non_redundant_klines
	    = no;'.
	  * clean up include/defaults.h - do we want a define for default
	      options for every option??
	    * clean up include/config.h - it'd be nice if we could make the
	      remaining stuff configuarable through autoconf/ircd.conf too...
	    * clean up set_default_conf()/check_conf() - the defaults are
	      reasonably sane I think, but could do with tweaking --
	      example.conf should probably either match these, or include
	      (default: ...) in a comment for each option.

2001-05-31 12:30  davidt

	* README.VMS, configure, doc/example.conf, include/config.h,
	  include/config.h.dist, include/defaults.h, include/m_info.h,
	  include/s_conf.h, include/s_serv.h, include/setup.h_vms,
	  modules/m_error.c, src/class.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/packet.c, src/s_conf.c, src/s_serv.c:
	  - Pass one of config file cleanup.
	    * config.h[.dist] is now a little cleaner, still some stuff to
	    sort out[1]
	  * defaults for ircd.conf stuff now go in defaults.h
	    * added set_default_conf() and check_conf():
	        set_default_conf() - called before yyparse() to set
	                             ConfigFileEntry stuff to default values.
	        check_conf()       - called after yyparse() to ensure that
	                             ConfigFileEntry stuff is actually sane,
	                             and reset to defaults if not.
	  - Lots more to do... But this _works_ (hopefully), so I'm committing
	    it before doing anything insane.

	  [1] - MAX_BUFFER et all seem to be completely misused by the code,
	        so documenting what they do is impossible, since it seems to do
	        nothing useful.

2001-05-31 02:23  db

	* doc/example.conf, include/hostmask.h, modules/m_stats.c,
	  src/hostmask.c:
	  - finished adding the k_ines_oper_only flag, (leeh can review!)

2001-05-31 01:38  db

	* src/parse.c:
	  - fixed bug with single space in privmsg not being seen. <= instead
	  of <
	  - reformatted to be consistent

2001-05-30 18:12  leeh

	* doc/example.conf, src/hostmask.c:
	  - added the i_lines_oper_only to config..

2001-05-30 18:03  leeh

	* include/hostmask.h, include/s_conf.h, modules/m_stats.c,
	  src/hostmask.c, src/ircd_lexer.l, src/ircd_parser.y:
	  - ok, big revision of stats I, you can now show users nothing,
	    everything, or matching auth blocks

	    ill be doing the stuff for stats k/K tomorrow..  but for now, stats
	    K may be dodgy ;p

2001-05-30 11:06  davidt

	* include/modules.h, src/Makefile.in, src/s_serv.c:
	  - Use fork() not vfork().
	  - Fix --disable-shared-modules build
	  - Add warning flags to compile of y.tab.c, so we see problems in
	    ircd_parser.y...

2001-05-30 09:43  jdc

	* Hybrid-team:
	  * Apparently the blank lines actually contained spaces.  Oops.

2001-05-30 09:41  jdc

	* Hybrid-team:
	  * I must have my vanity...

2001-05-30 09:37  jdc

	* include/m_info.h:
	  * Forgot to add HAVE_LIBZ to /INFO output.  Oops.

2001-05-30 09:30  jdc

	* include/m_info.h, modules/m_info.c:
	  * m_info.c information is now in table form.  Hooray.  There are
	    still some remaining entries (particularly in m_info.h) which should
	    be moved (or better yet, removed!) in the future.  I'll be adding
	    more ConfigFileEntry variables to m_info.c in the near future.

2001-05-30 07:06  leeh

	* modules/m_gline.c:
	  - check for spoofed glines coming in from hyb6 servers

2001-05-30 06:12  leeh

	* modules/m_eob.c, src/s_serv.c:
	  - fix two compile warnings

2001-05-30 01:05  db

	* src/s_bsd.c:
	  - this log(L_CRIT is left over from debugging

2001-05-30 00:05  ejb

	* src/ircd_parser.y:
	  - removed negative number support in the yacc grammar for now.

2001-05-29 23:06  ejb

	* src/getopt.c:
	  - VMS-style ircd/foo getopt support (only on VMS, not Unix).

2001-05-29 22:59  ejb

	* src/ircd.c:
	  - set a process name on VMS.

2001-05-29 18:50  leeh

	* modules/m_eob.c, src/s_serv.c:
	  - eob has a problem with negative deltas.. just use the time
	    connected (its only a rough gauge anyway)

2001-05-29 18:44  davidt

	* src/ircdauth.c:
	  - This fixes the compile for --enable-ipv6, and IPv6 should work as
	    before... However, iauth certainly wont work for IPv6, but it
	    didn't even compile before this commit.

2001-05-29 18:25  davidt

	* modules/m_cryptlink.c:
	  - Revert commit checking client_p->name is "", since i've no idea
	    what its trying to do, and it breaks stuff.  (heh. oddly enough
	    'Break Stuff' is currently playing on MTV2. weird.)

2001-05-29 17:25  leeh

	* tools/Makefile.in:
	  - updated make clean to remove encspeed

2001-05-29 17:11  davidt

	* include/s_conf.h, include/s_serv.h, servlink/io.c,
	  servlink/servlink.h, src/ircd_parser.y, src/packet.c,
	  src/s_conf.c, src/s_serv.c:
	  - Fix connect_cipher_preference code in ircd_parser.y
	  - Fix 3 other minor problems in ircd_parser.y found when I compiled
	    it with warnings enabled
	  - Fix problem in servlink where EOF error messages weren't being
	  displayed.

2001-05-29 12:25  jdc

	* modules/m_info.c:
	  * Only send kernel compile information to admins on an /INFO.

2001-05-29 12:20  jdc

	* tools/encspeed.c:
	  * Fixed "no previous declaration for start/stoptimer()" warnings by
	    defining functions as static.

2001-05-29 12:15  jdc

	* modules/m_info.c:
	  * Added max_chans_per_user to /INFO output.

2001-05-29 12:10  jdc

	* doc/example.conf, doc/whats-new.txt, include/config.h,
	  include/config.h.dist, include/m_info.h, include/s_conf.h,
	  include/supported.h, modules/m_join.c, modules/m_lljoin.c,
	  src/channel.c, src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c,
	  src/vchannel.c:
	  * Support for a new general {} variable, 'max_chans_per_user'.  This
	    replaces the previous (statically defined) MAXCHANNELSPERUSER.
	    After adding this feature, I realised it should probably go into a
	    class {} block.  However, the general {} method keeps with the
	    historical aspect (being globally defined).

2001-05-28 21:39  toot

	* include/: config.h, config.h.dist: reset some defaults in
	  config.h that got changed.

2001-05-28 21:19  a1kmm

	* src/memory.c:
	  - Write out a memory log on running out of memory, if MEMDEBUG is
	  defined.

2001-05-28 20:58  a1kmm

	* modules/m_cryptlink.c:
	  - Always always do a compile test, even for simple patches. cptrs
	    don't exist anymore...

2001-05-28 20:56  a1kmm

	* modules/m_cryptlink.c:
	  - Fixed the same bug in CRYPTSERV as was in PASS.

2001-05-28 16:35  androsyn

	* src/: ircd_lexer.l, ircd_parser.y: Changed ipv4_vhost/ipv6_vhost
	  to vhost and vhost6 respectively.

2001-05-28 16:07  leeh

	* include/s_conf.h, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_conf.c, src/s_serv.c:
	  - added ipv6_vhost="", and changed vhost= to ipv4_vhost=, this will
	    allow us to connect to ipv4 servers using ipv4, and ipv6 servers
	    using ipv6.. it doesnt actually do anything yet though :P

	    if you have a vhost= line, change it to ipv4_vhost!

2001-05-28 13:10  davidt

	* configure, doc/example.conf, include/s_conf.h, include/s_serv.h,
	  modules/m_cryptlink.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_serv.c, tools/Makefile.in, tools/encspeed.c:
	  - Correct configure.in detection of cast (oops)
	  - cipher_preference is now per-connect{} block, with a
	    default_cipher_preference line in general{}
	  - Add modified version of encspeed.c from hybrid-6 cryptlinks patch

2001-05-28 11:10  davidt

	* servlink/io.c:
	  - Fix HAVE_ZLIB vs HAVE_LIBZ #ifdef that resulted in any ziplinks
	    failing every 5 minutes.  bad david.

2001-05-28 10:58  davidt

	* configure:
	  - Fix autoconf to properly disable openssl on detecting a broken
	    version of OpenSSL.
	  - Make autoconf print out the detected ciphers on completion, in a
	    style that matches the cipher_preference=''; line.

2001-05-28 10:09  jdc

	* contrib/: m_clearchan.c, m_opme.c:
	  * Updated the _version definitions in m_clearchan, m_nickinfo, and
	  m_opme.

2001-05-28 10:08  jdc

	* contrib/: m_clearchan.c, m_opme.c:
	  * Typecasted time_t references to their appropriate types (%ld being
	    signed long, %lu being unsigned long).  Yes, there are some %lds,
	    believe it or not.

2001-05-28 09:45  jdc

	* modules/m_cjoin.c, modules/m_join.c, modules/m_kline.c,
	  modules/m_lljoin.c, modules/core/m_nick.c, modules/m_svinfo.c,
	  modules/core/m_sjoin.c, src/channel.c, src/client.c, src/ircd.c,
	  src/ircdauth.c, src/s_log.c, src/s_serv.c, src/s_user.c:
	  * Typecasted time_t references to their appropriate types (%ld being
	    signed long, %lu being unsigned long).  Yes, there are some %lds,
	    believe it or not.

2001-05-28 09:31  jdc

	* configure, include/setup.h.in:
	  * Removed time_t long check.  I'll just typecast the bastards to be
	    longs...

2001-05-28 03:34  a1kmm

	* modules/core/m_server.c:
	  - Ignore server commands from other servers with a user prefix.

2001-05-28 00:27  jdc

	* configure, include/setup.h.in, src/ircd.c:
	  * Added autoconf support for RLIMIT_* definitions; prior, all this
	    work was done in ircd.c.  Someone running Linux should test this and
	    pay close attention to the configure output.

2001-05-27 15:57  davidt

	* configure, include/client.h, include/s_serv.h,
	  include/setup.h.in, servlink/Makefile.in, servlink/README,
	  servlink/TODO, servlink/control.c, servlink/io.c,
	  servlink/servlink.c, servlink/servlink.h, servlink/setup.h.in,
	  src/client.c, src/packet.c, src/s_serv.c:
	  - Convert MISSING_SOCKPAIR into HAVE_SOCKETPAIR and make configure
	    check for it.
	  - Make servlink/ as independant as possible from hybrid's build
	    setup, so it can be used hopefully unchanged (except for the
	    Makefile) in other projects that may want to. (e.g. hybserv).
	    * Add servlink/setup.h

2001-05-27 12:17  toot

	* modules/m_stats.c, servlink/io.c, src/channel.c: fixed a few new
	  compile warnings

2001-05-27 11:51  davidt

	* src/send.c:
	  - Fix format string problem if we send ourselves a message
	    (debug message was broken)

2001-05-26 23:17  a1kmm

	* modules/m_pass.c, src/s_bsd.c:
	  - Fixed a tsinfo bug.

2001-05-26 22:33  leeh

	* modules/m_trace.c:
	  - fix trace for ipv6 ips

2001-05-26 21:24  davidt

	* src/channel.c:
	  - Fix mode for dlink_list *loc*;

2001-05-26 21:08  davidt

	* servlink/servlink.h:
	  - oops, most people probably don't want debugging enabled...

2001-05-26 20:49  davidt

	* configure:
	  - oops, commit regened configure. (strange cvs conflict must've
	    deleted the copy i was testing.. weird..)

2001-05-26 19:56  davidt

	* include/config.h, include/config.h.dist, include/s_serv.h,
	  include/send.h, include/setup.h.in, include/setup.h_vms,
	  modules/Makefile.in, modules/core/Makefile.in,
	  servlink/Makefile.in, servlink/README, servlink/control.c,
	  servlink/control.h, servlink/io.c, servlink/io.h,
	  servlink/servlink.c, servlink/servlink.h, src/Makefile.in,
	  src/packet.c, src/send.c:
	  - Improve configure.in detection of gettext, openssl and zlib
	  - Fix problem with creating module installation dirs
	  - If read_packet is called for a 'dead' client, exit it.
	    NOTE: since we don't exit_client in dead_link, there is a chance
	          we can mark a client dead without exiting it.
	          we can't exit any dead clients in parse.c, since we could
	          have already exited it.  perhaps we need a new flag.
	  - servlink: Update docs to match implemented protocol
	  - servlink: Split process_command into different functions, and
	              stick them into command_table.

2001-05-26 18:59  leeh

	* doc/example.conf, src/ircd_parser.y:
	  - commited pasky's patch so we now support ipv6 ips for outgoing
	    connections
	  - im tempted to add vhost_ipv6="" then use ipv6/ipv4 depending on
	    the target.. as right now you either connect out on ipv4, or ipv6,
	  never both

2001-05-26 15:33  leeh

	* modules/m_ping.c:
	  - ok, based on comments ive changed the way we handle local pings:
	    - if the ping isnt cross-server, origin == what they sent
	    - if the ping is cross-server, origin == their nick

2001-05-26 12:54  cosine

	* src/: Makefile.in, ircd.c, ircdauth.c, s_auth.c:
	  - fixed memory leak in s_auth.c
	  - iauth is now working again (under #define USE_IAUTH)

2001-05-26 10:03  jdc

	* configure, include/setup.h.in:
	  * Added support for time_t size checking during configure.  Would be
	    appreciated if someone on a i386 Linux machine checked to see if
	    the configure output returns 'no' or 'yes'...

2001-05-26 08:39  davidt

	* servlink/io.c, src/packet.c:
	  - Doh. hopefully fix the endianness issue with the servlink io code,
	    which I missed when cleaning up the code (i fixed the code to read
	    data lengths, but not commands, oops).

2001-05-26 08:24  leeh

	* modules/m_ping.c:
	  - PING origin :destination
	    why would the origin ever be anything but a clients nick, or a
	    servers name?

	    the old code is #if 0'd for now.. if we're in agreement, we can
	    probably remove the origin variable altogether, and just use
	  sptr->name..

2001-05-25 20:48  davidt

	* modules/core/m_sjoin.c:
	  - Fix netjoins for the loc* stuff, move to locpeons, not peons..
	  ahem..

2001-05-25 20:27  ejb

	* src/version.com:
	  - added generation support to version.com.

2001-05-25 20:25  davidt

	* include/channel.h, include/config.h, include/linebuf.h,
	  modules/core/m_sjoin.c, src/channel.c, src/linebuf.c, src/send.c:
	  - refcounts for outgoing sendbufs
	    send.c now creates linebufs, which send_linebuf attaches to the
	    clients sendq (increasing the refcount).  The same linebuf may
	    be attached multiple times to different clents.
	    As usual, send_queued_write will then call linebuf_flush,
	    which will attempt to write the data to the net, and call
	    linebuf_done_line (which now only frees the buf if the refcount
	    is zero) if successful.

	    We still do some weird stuff in send.c, and I'd be a lot happier if
	    we adjusted sprintf_irc.c to contain a vsnprintf function, instead
	    of relying on IRCD_BUFSIZE*2.  It might also be useful to create
	    a varargs linebuf_put function to avoid vsnprintf'ing into a
	    buffer, then copying that into a linebuf.

	  - Add dlink_list locchanops, lochalfops, locvoiced, locpeons; to
	    struct Channel;
	    I'm not sure if this should stay...
	    On the one hand: it speeds up
	    sendto_channel_local/sendto_common_channels on channels with a
	    large number of remote users.  On the other hand: it uses an extra
	    32bytes/channel + 48bytes/member, and also slows down MODE +ovh/-ovh
	    slightly on channels with lots of local users.

2001-05-25 20:06  ejb

	* src/: descrip.mms, version.com:
	  - make version.c for vms actually work..

2001-05-25 19:01  ejb

	* README.VMS, src/descrip.mms, src/version.com:
	  - added auto version.c support for VMS (thanks to robert byer).

2001-05-25 18:28  leeh

	* modules/: m_stats.c, m_trace.c:
	  - dont show ips of servers/admins in /trace for non-admins
	  - dont show ips of servers/admins in /stats L for non-admins ;p

	    are there anymore?  stats c, stats ? are already done..

2001-05-25 14:11  db

	* include/linebuf.h:
	  - removed BUF_BLOCK_SIZE no block allocator.

2001-05-25 12:50  davidt

	* servlink/: TODO, io.c, servlink.h:
	  - Fix problems with >8:1 compression.

2001-05-25 11:35  davidt

	* servlink/servlink.c:
	  - Remove isatty(0) check, as it may very well be a tty now...

2001-05-25 11:30  davidt

	* src/s_serv.c:
	  - Erp, we now set fds 3..LAST_SLINK_FD non blocking, not
	    0..LAST_SLINK_FD, somehow FreeBSD-CURRENT doesn't care, but
	    FreeBSD-STABLE really really does...

2001-05-25 11:19  davidt

	* servlink/: io.c, servlink.c:
	  - Add missing #include and #ifdef.. argh.

2001-05-25 10:57  davidt

	* include/s_serv.h, servlink/servlink.c, servlink/servlink.h,
	  src/s_serv.c:
	  - change servlink to avoid using stdin/stdout/stderr, and start from
	    fd 3, in an attempt to make solaris happy.

2001-05-25 10:45  davidt

	* include/client.h, include/fdlist.h, include/packet.h,
	  include/s_serv.h, modules/m_stats.c, modules/core/m_mode.c,
	  servlink/README, servlink/TODO, servlink/control.h,
	  servlink/io.c, servlink/io.h, servlink/servlink.c,
	  servlink/servlink.h, src/client.c, src/fdlist.c, src/ircd.c,
	  src/packet.c, src/s_serv.c, src/send.c:
	  - Make fd_note take (int fd, char *format, ...), to avoid using
	    sprintf every single place we call fd_note.
	  - add support for reading from the servlink control fd in ircd.
	  - add error messages to servlink, which are displayed to all opers
	    on the local ircd...
	  - add zipstats (/stats Z, updated every time collect_zipstats is
	    called [see /stats E]).

2001-05-25 10:43  leeh

	* src/s_misc.c:
	  - hide ips in stats ? from opers..
	    we also need to do this in trace

2001-05-25 01:58  ejb

	* servlink/io.c:
	  - fix compile on freebsd.

2001-05-24 21:46  ejb

	* README.VMS, make.com, contrib/README, contrib/vms_version.c:
	  - add the version.c stuff also.

2001-05-24 21:44  ejb

	* README.VMS, make.com, modules/descrip.mms, src/descrip.mms,
	  tools/descrip.mms, tools/fixklines.c:
	  - ok, i think this is the last VMS commit for a while.
	    it should work fine .. updated the docs (README.VMS) too.

2001-05-24 21:02  ejb

	* include/ircd.h, include/setup.h_vms, servlink/io.c,
	  servlink/servlink.c, src/ircd.c, src/ircd_signal.c, src/s_bsd.c,
	  src/s_serv.c:
	  - VMS support. not SERVLINK yet, still working on it ..
	    however, we can now link a VMS server, and it'll work.

2001-05-24 19:44  davidt

	* src/s_serv.c:
	  - Ugh. revert the last commit, we don't have the capab from the
	    remote server until it recognises the CRYPTSERV command, so we can't
	    do that must get more sleep....

2001-05-24 19:37  davidt

	* src/s_serv.c:
	  - test for ENC capab before trying to create an encrypted link, else
	    the remote server doesn't respond to CRYPTSERV, and we sit there
	    for a while and time out...

2001-05-24 19:15  davidt

	* src/modules.c:
	  - add cryptlinks commands to STATIC_MODULES list

2001-05-24 19:09  davidt

	* servlink/: io.c, servlink.c, servlink.h:
	  - oops, miscounted a } in my fix, so cryptlinks + ziplinks broke.
	    really really fix it this time. heh. I'm tired after a day of
	    debuging that evilness... :)

2001-05-24 18:55  davidt

	* contrib/Makefile.in:
	  - hmm, forgot to commit this... remove outdated @SSL_*@ stuff from
	    contrib/Makefile.in

2001-05-24 18:48  davidt

	* servlink/: io.c, servlink.c, servlink.h:
	  - Remove some of the evil debugging stuff...
	  - Tidy up the code

2001-05-24 18:42  ejb

	* servlink/descrip.mms, servlink/io.c, servlink/servlink.c,
	  src/packet.c:
	  - SERVLINK support for VMS.

2001-05-24 18:25  davidt

	* servlink/: io.c, servlink.c, servlink.h:
	  - EVIL EVIL EVIL EVIL EVIL EVIL bug. I'm stupid.
	  - I'll tidy up the mess i made of this code in a minute, but I can
	    barely beleive I found that bug, so I'm committing the fix now.

2001-05-24 17:30  davidt

	* servlink/: io.c, servlink.c, servlink.h:
	  - erk, turn off slink-*-logs by default, since they could easily
	    become huge...
	  - also select different data to be logged, since the problem seems
	    to be 100% crypt related, now just log data pre/post
	    encrypt/decrypt, instead of as its read from the ircd, and as its
	  written to the wire..

2001-05-24 17:17  davidt

	* servlink/: io.c, io.h, servlink.c, servlink.h:
	  - Fix compiler warnings in servlink

2001-05-24 16:02  davidt

	* servlink/: servlink.c, servlink.h:
	  - ick, commit _working_ IO logging support....

2001-05-24 15:38  davidt

	* servlink/control.h, servlink/io.c, servlink/io.h,
	  servlink/servlink.c, servlink/servlink.h, src/rsa.c:
	  - use checkError instead of a bunch of tests against
	    EAGAIN/-1/0/etc, the code should now: a) work on VMS, b) look
	  slightly cleaner
	  - add optional (#define'able) IO logging in an attempt to track down
	    this evil bug where decryption fails for random blocks of data.
	  - add asserts to try to find said bug.
	  - move two break;s inside an #endif

2001-05-24 13:42  androsyn

	* src/irc_string.c: Fixed for a very stupid buglet that would treat
	  3ffe:x:x::1 as ::1

2001-05-24 11:54  ejb

	* include/config.h, include/setup.h_vms, src/adns.c, src/getopt.c,
	  src/ircd.c, src/s_bsd.c, src/s_bsd_select.c:
	  - more VMS support.
	    ircd.exe now builds and runs, and accepts clients.
	    still servlink left to do.

2001-05-24 11:45  davidt

	* include/client.h:
	  - Fix core in HasID()

2001-05-24 11:26  db

	* include/config.h, include/config.h.dist, servlink/TODO:
	  - removed the SYSLOG for the debug block allocator, there is no more
	    block allocator
	  - fixed typo in TODO

2001-05-24 09:28  davidt

	* servlink/io.c, servlink/servlink.c, servlink/servlink.h,
	  src/s_serv.c:
	  - Fix buffer overflow in s_serv.c setting fd_note stuff
	  - Tidy up servlink code more in an attempt to find the weird and
	    evil bug which is in there somewhere...

2001-05-24 09:25  kreator

	* README.FIRST:
	  - fix self-referencing in README.FIRST :-)

2001-05-24 06:04  kreator

	* doc/example.conf:
	  - fix small typo in example conf (comRession options :-)

2001-05-24 05:28  leeh

	* modules/m_cjoin.c, modules/m_join.c, modules/m_kline.c,
	  modules/m_lljoin.c, modules/m_svinfo.c, modules/core/m_nick.c,
	  modules/core/m_sjoin.c, src/channel.c, src/client.c, src/ircd.c,
	  src/s_log.c, src/s_serv.c, src/s_user.c:
	  - %u -> %lu
	  - %d -> %ld
	  - This broke more stuff than it fixed.. theyre fine like this ;p

2001-05-24 00:22  ejb

	* contrib/vms_crypt.c, contrib/vms_lex_yy.c, contrib/vms_y_tab.c,
	  contrib/vms_y_tab.h, include/setup.h_vms, modules/descrip.mms,
	  modules/core/m_quit.c, src/debug.c, src/descrip.mms,
	  src/irc_string.c, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/listener.c, src/s_auth.c, src/s_bsd.c,
	  src/s_serv.c:
	  - IRCD.EXE now compiles on VMS.  servlink not working yet,
	    nor openssl etc. it doesn't seem to run after it compiles either.

2001-05-23 17:45  davidt

	* modules/m_cryptlink.c, src/s_serv.c:
	  - Add slightly more user-friendly error messages to m_cryptlink.c
	  - Fix stupid bug where both fd_note's were set on the same socket.

2001-05-23 16:59  davidt

	* include/client.h, include/fdlist.h, include/s_serv.h,
	  servlink/io.c, servlink/servlink.c, servlink/servlink.h,
	  src/client.c, src/packet.c, src/s_serv.c:
	  - MISSING_SOCKPAIR support, for systems which don't support
	    SOCKPAIR, use individual (unidirectional) pipes to communicate with
	  servlink.

2001-05-23 15:46  davidt

	* servlink/servlink.c:
	  - fix non-openssl build

2001-05-23 15:08  jdc

	* servlink/io.c:
	  * Fixed implicit decl. of bzero(3).

2001-05-23 15:02  jdc

	* modules/m_cjoin.c, modules/m_join.c, modules/m_kline.c,
	  modules/m_lljoin.c, modules/m_svinfo.c, modules/core/m_nick.c,
	  modules/core/m_sjoin.c, src/channel.c, src/client.c, src/ircd.c,
	  src/s_log.c, src/s_serv.c, src/s_user.c:
	  * Changed a whole slew of long int references (%ld and %lu) to
	    %d or %u.  Most of these went alongside channelts, which is
	    defined as time_t.

2001-05-23 14:53  leeh

	* doc/example.conf:
	  - kserver -> cryptlink

2001-05-23 13:13  davidt

	* configure:
	  - Fix gettext detection

2001-05-23 11:26  davidt

	* src/linebuf.c:
	  - Fix for an encrypted/compressed recvq overflowing the linebuf that
	    it is stuffed into until we can hand it off to servlink to be
	    decrypted into something that we _can_ parse into lines, since it
	    may very well not include any \r\n chars....

2001-05-23 10:29  davidt

	* servlink/: Makefile.in, io.c:
	  - Remove extra 'depend:' line
	  - Tidy up servlink code slighty

2001-05-23 09:23  davidt

	* configure, servlink/.depend, servlink/Makefile.in, servlink/io.c,
	  servlink/servlink.c:
	  - Add check for openssl >= 0.9.6
	  - Convert servlink to the new dependency system

2001-05-23 05:07  toot

	* modules/m_cryptlink.c, servlink/io.h: fixed a format error, and a
	  couple of compile warnings

2001-05-22 21:28  ejb

	* contrib/.depend, contrib/Makefile.in, modules/Makefile.in,
	  modules/core/Makefile.in, src/Makefile.in:
	  - better  make depend, no longer uses .depend;

2001-05-22 15:11  davidt

	* servlink/README: Big commit of cryptlinks_ng-pre6b.diff.

	  There's only two remaining known issues with the
	  servlink/cryptlink/ziplink code, and maintaining patch sets is
	  becoming lots of work, so I'm committing this.  I think everyone
	  agrees this should be in before 7.0 anyway, so it should get as much
	  testing as possible in the tree...

	  Various things done:
	  - Added servlink, external process for server<->server links.
	  	Known issue: decompression buffer can be filled, and the servlink
	  		process will abort.  Need to flush the output then start
	  		decompressing again, as increasing the size of the output
	  		buffer beyond *6 is getting silly.
	  - Added hookq to configure.in to detect zlib.
	  - Fixed configure.in to detect openssl more sanely.
	  - Added cryptlinks support to ircd/servlink
	  	Known bug: DES/56 and 3DES/168 doesn't work between hybrid-7 and
	  		hybrid-6 servers.  This should be fixed by an update to
	  		the hybrid-6 patch.
	  - Updated example.conf
	  - A few other bugfixes I can't remember, no doubt.

2001-05-22 15:11  davidt

	* Makefile.in, configure, doc/example.conf,
	  doc/technical/cryptlink.txt, doc/whats-new.txt,
	  doc/technical/whats-new-code.txt, include/client.h,
	  include/config.h, include/linebuf.h, include/m_info.h,
	  include/modules.h, include/s_conf.h, include/s_serv.h,
	  include/send.h, include/setup.h.in, messages/Makefile.in,
	  modules/Makefile.in, modules/core/Makefile.in, modules/m_capab.c,
	  modules/m_challenge.c, modules/m_cryptlink.c,
	  modules/core/m_message.c, servlink/.depend, servlink/Makefile.in,
	  servlink/TODO, servlink/control.h, servlink/io.c, servlink/io.h,
	  servlink/servlink.c, servlink/servlink.h, src/Makefile.in,
	  src/client.c, src/ircd.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/linebuf.c, src/listener.c, src/md5.c, src/modules.c,
	  src/packet.c, src/rsa.c, src/s_conf.c, src/s_serv.c, src/send.c,
	  tools/Makefile.in: Big commit of cryptlinks_ng-pre6b.diff.

	  There's only two remaining known issues with the
	  servlink/cryptlink/ziplink code, and maintaining patch sets is
	  becoming lots of work, so I'm committing this.  I think everyone
	  agrees this should be in before 7.0 anyway, so it should get as much
	  testing as possible in the tree...

	  Various things done:
	  - Added servlink, external process for server<->server links.
	  	Known issue: decompression buffer can be filled, and the servlink
	  		process will abort.  Need to flush the output then start
	  		decompressing again, as increasing the size of the output
	  		buffer beyond *6 is getting silly.
	  - Added hooks to configure.in to detect zlib.
	  - Fixed configure.in to detect openssl more sanely.
	  - Added cryptlinks support to ircd/servlink
	  	Known bug: DES/56 and 3DES/168 doesn't work between hybrid-7 and
	  		hybrid-6 servers.  This should be fixed by an update to
	  		the hybrid-6 patch.
	  - Updated example.conf
	  - A few other bugfixes I can't remember, no doubt.

2001-05-22 14:33  toot

	* include/channel.h, modules/m_list.c: . changed /list so vchan
	    Id's show just before the topic, instead of in the channel name .
	  renamed a variable in channel.h that was just 'blah' :)

2001-05-22 11:32  toot

	* include/channel.h, src/channel.c: renamed num_bed to num_mask,
	  there's no +d mode now

2001-05-22 11:04  toot

	* contrib/: links_notice.c, spy_links_notice.c, spy_whois_notice.c,
	  whois_notice.c: added  those tags properly, :P

2001-05-22 11:00  toot

	* contrib/links_notice.c, contrib/spy_links_notice.c,
	  contrib/spy_whois_notice.c, contrib/whois_notice.c,
	  doc/kline.txt, doc/modes.txt: updated some docs slightly, and
	  added a couple of CVS id tags

2001-05-19 11:36  davidt

	* Makefile.in: Remove duplicate 'modules' entry in SUBDIRS=

2001-05-19 01:09  a1kmm

	* src/s_serv.c: *sigh* yet another commit, we do check in
	  sendnick_TS after all. Hopefully the last commit for this bug...

2001-05-19 01:03  a1kmm

	* src/s_serv.c:
	  - Made client_burst_if_needed check the target actually is a client
	  :)

2001-05-19 00:56  a1kmm

	* src/send.c:
	  - Had second thoughts about my last commit - now we burst the client
	    sending the message if necessary. Also changed all of the functions.
	    Note however that we still need to change more of the functions to
	    use this new functionality by passing the source_p instead of
	  client_p.

2001-05-19 00:45  a1kmm

	* include/hostmask.h, modules/m_kline.c, src/channel.c, src/send.c:
	  - Don't send modes to lazy link clients for channels when the client
	    doing the mode change hasn't been burst. This is a pretty ugly
	    kludge as the mode is simply not sent(which could result in a
	    desync!) but it is better than having the mode dropped and the
	  client sending it killed.

2001-05-18 10:46  db

	* doc/index.txt:
	  - removed mtrie doc from index.txt

2001-05-17 22:53  lusky

	* doc/index.txt:
	  - added some missing docs to the index

2001-05-17 22:33  lusky

	* include/patchlevel.h:
	  - revved patchlevel to beta5

2001-05-17 22:11  db

	* modules/m_kline.c:
	  - resolved conflict in CVS oopsies

2001-05-17 21:44  lusky

	* include/patchlevel.h:
	  - revved patchlevel to beta4

2001-05-17 18:09  leeh

	* modules/m_kline.c:
	  - make klines come from users too.. this simplifies things massively

	    a side effect being all remote klines prior to this wont work :P

2001-05-17 16:05  toot

	* modules/m_gline.c: simplifies things in ms_gline a little more

2001-05-17 15:44  jdc

	* modules/m_kline.c:
	  * Admins permitted to do Dlines with bitmasks as small as /8.

2001-05-17 15:15  leeh

	* modules/m_gline.c:
	  - theres no reasons why glines cant use the opers nick.. it
	    simplifies things massively.. well, if we didnt support hyb6 that is
	  ;)

	    this will break older hyb7s, buts its better now than later

2001-05-17 13:15  toot

	* modules/m_gline.c: it was okay before, actually :P

2001-05-17 12:31  toot

	* modules/m_gline.c: fixed -6 style glines so they are treated more
	  line -7 style..

2001-05-17 12:10  toot

	* modules/m_gline.c: added compatability with hyb-6 glines

2001-05-17 02:16  a1kmm

	* modules/core/m_kill.c:
	  - Removed unused local variable.

2001-05-16 19:32  leeh

	* modules/core/m_sjoin.c:
	  - tis the season of goodwill comments, and all that :)

2001-05-16 14:47  leeh

	* src/channel.c:
	  - let halfops see and set +eI

2001-05-16 13:51  leeh

	* modules/m_gline.c:
	  - check parc == 5, because if we trust hyb6 glines.. we'll gline the
	    oper instead of the target..

2001-05-16 12:59  leeh

	* modules/: m_gline.c, core/m_sjoin.c:
	  - optimised the sjoin table slightly.. +nt should really be first ;)
	  - sendto_serv_butone -> sendto_cap_serv_butone() in m_gline..

2001-05-16 04:50  toot

	* contrib/m_hash.c, include/supported.h, src/channel.c: . some misc
	  cosmetic cleanups . fixed CHANMODES token.

2001-05-15 18:43  leeh

	* src/s_auth.c:
	  - added the looking up hostname msg back

2001-05-15 18:24  leeh

	* modules/core/m_kill.c:
	  - more formatting things for server kills..

2001-05-15 15:33  leeh

	* modules/core/m_kill.c:
	  - fixed logging for kills..

2001-05-15 14:17  db

	* src/s_conf.c:
	  - fixed core on /rehash

2001-05-15 06:06  toot

	* modules/m_version.c: slight mistake in ms_version

2001-05-15 05:37  toot

	* include/s_user.h, include/supported.h, modules/m_version.c,
	  src/s_user.c: . show ISUPPORT numeric on remote /version (will be
	  105 rather than 005) . only put the VCHANS token in ISUPPORT if
	  disable_vchans if off

2001-05-15 03:32  jdc

	* modules/core/m_sjoin.c:
	  * Forgot a comma.  Oops.  :-)

2001-05-15 03:23  db

	* modules/core/m_sjoin.c:
	  - missing {0,0} in flags in set_final_mode. How this has worked
	    so long without being spotted, is beyond me.

2001-05-15 03:20  toot

	* BUGS: removed a fixed bug from BUGS

2001-05-14 23:17  androsyn

	* configure: Fixed borked version of configure that was built with
	  a beta version of autoconf.  It broke IPV6 support..go figure..

2001-05-14 09:35  toot

	* modules/m_trace.c: /trace <nick> didn't know the time

2001-05-14 06:08  toot

	* contrib/m_clearchan.c, include/channel.h, modules/m_admin.c,
	  modules/m_cjoin.c, modules/m_client.c, modules/m_join.c,
	  modules/m_lljoin.c, modules/m_names.c, src/channel.c: . unregged
	    clients can have a nick sometimes (NICK before USER), so changed
	  m_admin back and fixed it.  . names with no params was showing the
	    ENDOFNAMES numeric for each channel it should just show it once, at
	  the end with a * ..

2001-05-14 03:31  a1kmm

	* src/client.c:
	  - Fixed "ievil's core".

2001-05-13 18:09  leeh

	* modules/m_admin.c:
	  - unregged clients wont have a nick..

2001-05-13 17:39  davidt

	* modules/m_close.c: Fix core on /close

2001-05-13 14:09  db

	* include/channel.h, modules/m_join.c, src/channel.c:
	  - This should fix the multiple numeric 366's
	  - some cleanups

2001-05-12 22:55  db

	* src/vchannel.c:
	  - missing int duh

2001-05-12 22:33  a1kmm

	* src/packet.c:
	  - Removed 2 pointless asserts.

2001-05-12 21:32  db

	* src/vchannel.c:
	  - tidied up vchan_show_ids
	  - don't show <secret> twice

2001-05-12 10:17  toot

	* include/supported.h: put PREFIX's in the correct order, in 005
	  numeric.

2001-05-12 07:07  toot

	* contrib/m_clearchan.c: clearchan was calling
	  remove_user_from_channel with the wrong number of args..

2001-05-12 06:27  kreator

	* modules/m_cjoin.c:
	  - commited fl_'s patch:
	    make cjoin take account of disable_vchans=yes;

2001-05-10 14:33  fl_

	* src/s_serv.c:
	  - we shouldnt really send CAP_ZIP.. we can actually support it but
	    in theory we dont, the code is left in, just the cap sending

2001-05-10 02:30  a1kmm

	* include/ircd.h, include/list.h, src/channel.c, src/client.c,
	  src/hook.c, src/list.c, src/memory.c:
	  - Fixed a major memory leak.
	  - Added some better memory debugging code for dlink_nodes.

2001-05-09 04:20  a1kmm

	* src/s_bsd_poll.c:
	  - Re-added androsyn's fix for blocking on one list and neglecting
	    the others.  Didn't realise that it had been recently reverted. We
	    should no longer go up to 100% CPU with the graduated usleep code.

2001-05-09 04:08  a1kmm

	* include/client.h, include/ircd.h, modules/m_cryptlink.c,
	  src/client.c, src/ircd.c, src/s_bsd_devpoll.c,
	  src/s_bsd_kqueue.c, src/s_bsd_poll.c, src/s_bsd_select.c,
	  src/s_misc.c, src/send.c:
	  - Added a graduated delay system to stop the idle or lowly loaded
	    ircd from soaking up too many clockcycles, and removed some of the
	    unneccessary calls to set_time/time.

2001-05-08 20:30  db

	* modules/core/m_kill.c:
	  - removed more inflammatory language from comments.

2001-05-08 18:50  ejb

	* modules/core/m_kill.c:
	  - remove the somewhat controversial message wrt Path: in kill
	  messages.

2001-05-08 14:18  fl_

	* src/s_bsd_poll.c:
	  - this: Try setting the delay rate for the poll idleclient to 0 like
	  the rest of the poll() stuff is...

	  seemed to make ircd spin out of control.. it was stuck on 100% cpu..
	  so its reverted, dunno what this actually did though..

2001-05-07 19:51  androsyn

	* include/setup.h.in, modules/Makefile.in,
	  modules/core/Makefile.in: Fixed various minor issues with
	  autoconf...

2001-05-07 17:27  fl_

	* include/hostmask.h, src/hostmask.c:
	  - #if IPV6 -> #ifdef IPV6

2001-05-07 11:50  toot

	* doc/example.conf, include/config.h.dist, include/s_conf.h,
	  modules/m_info.c, modules/m_oper.c, src/ircd_lexer.l,
	  src/ircd_parser.y: removed show_failed_oper_id cause it was
	  redundant.. failed_oper_notice does the same thing

2001-05-06 07:08  androsyn

	* modules/: Makefile.in, core/Makefile.in: Seems I broke the
	  modules install process..this fixes it now..

2001-05-05 23:11  androsyn

	* src/s_bsd_poll.c: Try setting the delay rate for the poll
	  idleclient to 0 like the rest of the poll() stuff is...

2001-05-05 20:04  androsyn

	* Makefile.in, configure, include/setup.h.in, modules/Makefile.in,
	  modules/core/Makefile.in, src/Makefile.in: Added support for
	  statically linked modules within autoconf.  Use ./configure
	  --disable-shared-modules to get statically linked ones...

2001-05-05 17:56  fl_

	* modules/m_stats.c:
	  - tidy up the IsOper() checks

2001-05-05 17:50  fl_

	* include/s_serv.h, modules/m_stats.c, src/s_serv.c:
	  - removed cap_vchan, as we dont actually use it anywhere..
	  - added mo_stats()

2001-05-05 09:46  fl_

	* INSTALL:
	  - slight update :P

2001-05-05 09:37  fl_

	* include/config.h:
	  - till make install takes account of the paths in config.h, people
	    shouldnt change the paths in there.. especially not the modules
	    ones.. so warn them not to :P

2001-05-04 22:17  db

	* src/send.c:
	  - major major stupid buffer overflow in send.c MEA CULPA fixed.

2001-05-04 21:38  androsyn

	* src/ircd_parser.y: Added a check for spoofs to prevent moron
	  server admins from doing stupid things like having spoofs in excess
	  of HOSTLEN.

2001-05-04 18:23  fl_

	* include/channel.h, modules/m_join.c, modules/core/m_kick.c,
	  modules/core/m_part.c, modules/core/m_sjoin.c, src/channel.c,
	  src/client.c, src/s_serv.c:
	  - dont burst persistant channels
	  - destroy_channel() if the user is parting.. persistant chans should
	    only be for splits imo, else users are just gunna break their
	  channels ;)

	    ideally this should be extended to quits which arent a netsplit..
	    but ill see about that another day :P

2001-05-02 20:18  androsyn

	* src/: s_bsd_poll.c, s_bsd_select.c: I think I really found the
	  source of fl_'s cores.  Basically what was happening was we were not
	  resetting the callback to NULL like we do for
	  s_bsd_kqueue/s_bsd_devpoll so I *think* we were calling the callback
	  multiple times.

2001-05-02 19:07  toot

	* include/supported.h: added WALLCHOPS to 005 numeric, as we
	  support /notice @#channel

2001-05-02 19:00  toot

	* include/supported.h: updated PREFIX format in 005 numeric, and
	  added CHANMODES=A,B,C,D see supported.h

2001-05-02 14:35  androsyn

	* src/s_bsd.c: $5 says this fixes fl_'s cores...I don't think this
	  is the right fix though..

2001-05-02 12:53  androsyn

	* src/send.c: Undo my send_queued_write() hack..

2001-05-02 12:31  androsyn

	* src/s_bsd.c: Another assert() to try to catch fl_'s cores...

2001-05-02 05:09  a1kmm

	* doc/technical/hostmask.txt:
	  - added hostmask docs.

2001-05-02 04:09  a1kmm

	* src/packet.c:
	  - Minor fix on my last commit, for when >1 line is read at the same
	    time...

2001-05-02 03:16  a1kmm

	* include/client.h, include/config.h, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/core/m_part.c, src/linebuf.c,
	  src/packet.c, src/s_user.c:
	  - Sanified the flood checking and sendq checking code a little.

2001-05-02 02:27  db

	* modules/: m_topic.c, core/m_mode.c:
	  - removed caching of channels for lazylinks in mode and topic
	    I think those were the two flame was complaining about.

2001-05-01 15:06  ejb

	* src/getopt.c:
	  - typo.

2001-05-01 15:02  ejb

	* src/getopt.c:
	  - fixed STRING types in getopt.c.

2001-05-01 14:58  db

	* src/s_bsd.c:
	  - removed bogus assert() its trying to call that callback, it can't
	  be NULL

2001-04-30 16:08  fl_

	* modules/m_stats.c:
	  - stats fixy thing :P

2001-04-30 14:56  toot

	* modules/m_stats.c: use the parser to do the parc check in m_stats
	  instead..

2001-04-30 11:52  jdc

	* messages/: ayb.po, custom.po:
	  * Previous changes to message.tab applied to these two .pos.

2001-04-30 11:32  jdc

	* src/messages.tab:
	  * RPL_ENDOFSTATS was returning the requested STATS character/word as
	    a %c, while the argument passed in m_stats() was a string.  All
	    fixed (%c --> %s).

2001-04-30 11:31  jdc

	* modules/m_stats.c:
	  * m_stats() did not check the parc count.  Doing a /STATS without
	    any arguments could result in the server just sitting there until
	    some output was sent, then the connection would be severed.
	  * Please note the change to message.tab (in another update) -- this
	    is CRUCIAL to the above fix.
	  * Added descriptions for the STATS letters in stats_let_table[].
	    This will be used (in the future) for for something like /STATS
	    HELP, once word-based STATS are added.

2001-04-30 10:29  jdc

	* doc/opers.txt:
	  * Added /QUOTE ACCEPT documentation to opers.txt.

2001-04-30 10:03  ejb

	* modules/m_kline.c:
	  - call valid_comment even for IPv6..

2001-04-30 01:52  a1kmm

	* modules/m_stats.c:
	  - Fixed the compile warnings with fl_'s stats code.

2001-04-29 17:39  androsyn

	* src/s_bsd_poll.c: Removed the assert()'s andrew had put there.
	  This seems to get rid of the cores. But now I need to figure out why
	  poll() performance sucks so bad, other than it being poll() which
	  sucks by nature.

2001-04-29 15:31  androsyn

	* src/s_bsd_poll.c: Hmm..okay..a slightly different assert...

2001-04-29 15:10  androsyn

	* src/s_bsd_poll.c: Added "yet another assert"(tm) to track down
	  fl_'s core.

2001-04-29 13:05  fl_

	* doc/example.conf, modules/m_stats.c, src/s_conf.c:
	  - couple of small bugs in stats
	  - replaced unused things in stats Q with "*"
	  - exempt {}; dont have reasons..

2001-04-29 10:23  fl_

	* contrib/spy_stats_notice.c, contrib/stats_notice.c,
	  include/hook.h, modules/m_stats.c:
	  - massive rewrite of m_stats.c to use a table based lookup for
	    stats..  this means we can now support /stats auth etc.. dont
	    attempt it yet tho, the table hasnt been filled with the things ;)

2001-04-29 04:46  androsyn

	* src/s_bsd.c: Fixed to make solaris 8 compile properly for IPv6

2001-04-28 19:23  a1kmm

	* src/: s_bsd.c, s_bsd_poll.c:
	  - Added some more asserts to fd code to try and catch fl_'s core at
	    an earlier and more useful stage.

2001-04-28 11:56  fl_

	* modules/core/m_kick.c:
	  - dont warn ops that halfops are trying to kick them, we dont do it
	    for voices/peons, so why start now?

2001-04-28 11:52  jdc

	* src/ircd.c:
	  * Added support for -pidfile command-line argument, a la toot.

2001-04-28 11:43  fl_

	* contrib/m_clearchan.c:
	  - send kickers nick, not servername

2001-04-28 11:21  jdc

	* modules/core/m_kill.c:
	  * Bump up the _version string.

2001-04-28 11:17  jdc

	* modules/core/m_kick.c:
	  * A non-opped client in a +a channel should be shown the local
	    server that kicked them, NOT their own nick (eg. me.name  vs.
	  who->name).
	  * Server-based kicks (for things like CLEARCHAN) now show the actual
	    server that did the CLEARCHAN (previously it showed your own
	    nick).  The reason for this is somewhat political (sptr->name vs.
	    me.name): in the case of oper abuse, the user should have *some*
	    idea of what server requested the CLEARCHAN, in the case of an oper
	    getting out of control.  This therefore provides some security for
	    the user who's channel just got cleared.

2001-04-28 10:40  fl_

	* modules/core/m_kill.c:
	  - you know, I just hate irc clients.

2001-04-28 10:28  fl_

	* modules/core/m_kill.c:
	  - shouldnt really send our name, then the path, then the reason ;P

2001-04-28 09:28  habeeb

	* modules/m_names.c: Modified NAMES to work with vchans.  "NAMES
	  <channel> [vkey]".  If no vkey is specified it will check if you are
	  on <channel> or one of its vchans and default to that channel.
	  Otherwise a list of vchans are specified.  "NAMES <channel> !" will
	  give a list of channels since the key is invalid.  It should not
	  break current clients.

2001-04-27 23:32  habeeb

	* src/vchannel.c: Fix for vchan listing bug.

2001-04-27 20:52  habeeb

	* modules/m_names.c: Fix for similar bug that was in WHO.

2001-04-27 17:12  habeeb

	* src/channel.c: Switched channel_chanop_or_voice() around to
	  return half ops before voice.

2001-04-27 17:09  habeeb

	* modules/m_whois.c: Fix for WHOIS buffer overflow in listing
	  channels pointed out by pasky.

2001-04-27 06:59  fl_

	* modules/core/m_kill.c:
	  - you cant add brackets if the kill isnt yours :)
	    if you do your gunna end up with a reason like ((((((ghost))))))
	    ;P

2001-04-26 22:48  jdc

	* src/s_bsd_kqueue.c:
	  * Fixed unused retval variable in kq_update_events() via #if 0.
	  * In kq_update_events(), kqoff was never set to 0 correctly (typo;
	    someone had "== 0", not "= 0").

2001-04-26 22:44  jdc

	* modules/core/m_kill.c:
	  * Fixed unused path declaration via #if 0.
	  * ms_kill() lacked a "(%s)" for the kill reason at the end of the
	  function.

2001-04-26 09:24  fl_

	* modules/core/m_kill.c:
	  - ok, this should fix kill
	    parv[2] contains both path and reason.. to save us splitting
	    parv[2] up to get at the path.. we generate the path ourselves
	    (user who sent the kills server/host/ident/nick)..

2001-04-26 08:32  fl_

	* src/ircd_parser.y:
	  - tiny fix to the parser

2001-04-26 07:34  toot

	* doc/example.conf, include/client.h, include/s_conf.h,
	  src/client.c, src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c:
	  added max_accept to ircd.conf.. to replace hard coded MAX_ALLOW

2001-04-26 03:53  kreator

	* README.FIRST:
	  - no need to ask for getopt() in README.FIRST, since we provide one
	    (ejb-s fix)
	  - added NetBSD in tested platforms (I run hyb6&7 there)

2001-04-25 20:49  fl_

	* modules/m_cryptlink.c:
	  - ifdef 0 -> if 0

2001-04-25 18:15  kreator

	* tools/convertconf.c:
	  - missing "" for vhost in convertconf, together with missing `;' in
	    oper_umodes line.

2001-04-25 04:18  toot

	* include/ircd.h: added make_daemon in ircd.h to kill a compile
	  warning..

2001-04-25 01:08  lusky

	* include/patchlevel.h:
	  - revved patchlevel to beta3
	  - moved dserv out of the tree

2001-04-25 00:37  db

	* src/s_bsd_kqueue.c:
	  - optimized kqueue a bit

2001-04-25 00:11  androsyn

	* src/s_bsd_kqueue.c: Fix so that kqueue will compile on FreeBSD
	  4.2 which doesn't have NOTE_LOWAT.

2001-04-24 23:55  habeeb

	* Hybrid-team: Adding me, because I'm bored.

2001-04-24 23:37  androsyn

	* src/send.c: Please test this.  Basically we try
	  send_queue_write() before entering select/poll/kqueue now.

2001-04-24 22:42  androsyn

	* src/irc_string.c: Really fix the ::1 stuff. It seems that the
	  COMPAT macro doesn't see ::1 as a ipv4 compatible address.

2001-04-24 22:17  androsyn

	* src/irc_string.c: Fixed the ::1 stuff for good :)

2001-04-24 21:51  db

	* Hybrid-team, src/s_bsd_kqueue.c:
	  - committed Alfred Perlsteins (zb^3) changes to s_bsd_kqueue.c
	    tested..

2001-04-24 17:45  androsyn

	* BUGS: The ::1 bug is fixed by mapping it to its ipv4
	  counterpart..

2001-04-24 17:42  androsyn

	* src/s_bsd.c: This hack will map ::1 to 127.0.0.1 along with any
	  other IPv6 addresses that have the upper 96bits set to 0.

2001-04-24 17:33  androsyn

	* BUGS, src/adns.c: Fixed coredump if /etc/resolv.conf is
	  unreadable.  We log the event to the logfile right now.  I need to
	  move the dns init up further in the init process so we can output to
	  standard error.

2001-04-24 05:47  habeeb

	* include/setup.h.in, modules/m_away.c, src/ircd.c, src/s_conf.c:
	  Changed daemon() to make_daemon() to fix printing of startup
	  messages, removed code to check for daemon() in configure, cleaned
	  up a few things.

2001-04-24 05:41  jdc

	* BUGS:
	  * Removed kqueue bug; recent cvs seems to have fixed it.

2001-04-24 03:20  db

	* src/s_bsd_kqueue.c:
	  - this fixes kqueue. over-ride low water with a NOTE_LOWAT
	    setting low water to 1 as in the man page. (thanks to adrian for
	    pointing me to this)

2001-04-24 02:26  jdc

	* src/ircd.c:
	  * Fixed implicit decl. of kill(2) (lacked signal.h include)

2001-04-24 01:10  androsyn

	* src/: packet.c, s_bsd_devpoll.c: /dev/poll now works.  Somebody
	  should check and see if this fixes kqueue as well

2001-04-24 00:59  androsyn

	* src/packet.c: Fixed a potential buglet where we ignore EAGAIN
	  when returning from recv()

2001-04-23 18:21  db

	* doc/: blalloc.txt, mtrie.txt:
	  - removed docs for code we have removed
	  - hint. someone should write up a doc on how the hash kline code
	  works. hint

2001-04-22 10:19  fl_

	* modules/core/m_kill.c:
	  - added back oper accountability for KILL's.. if the client we're
	    killing is opered, we should tell them who sent the kill..

2001-04-21 17:59  toot

	* src/: s_debug.c, s_stats.c: made stats t and stats z a bit more
	  readable.

2001-04-21 15:45  kreator

	* doc/example.conf, src/ircd.c:
	  - fix example conf: we don't support cpp, but we do support .include
	    "blah" and .include <blah>
	  - add check_pidfile() that does kill 0 ircd_pid from PPATH: that
	    will check if there exists another daemon running and exit if it is
	  there

2001-04-21 14:23  fl_

	* src/s_debug.c:
	  - changed an assert to a simple warning.. its a bit too highly
	    sensitive to have an assert there..

2001-04-21 12:57  fl_

	* src/: ircd.c, s_log.c:
	  - habeebs pid fix..

2001-04-21 12:01  toot

	* include/memory.h: undefine MEMDEBUG

2001-04-21 08:39  fl_

	* src/channel.c:
	  - switched the order of voices/halfops so theyre right..

2001-04-20 17:05  fl_

	* doc/example.conf:
	  - missing ;

2001-04-20 06:45  a1kmm

	* src/channel.c:
	  - Fixed a deadlock when non-opped users request names on a +a
	    channel. Fixed the code to work correctly too.

2001-04-20 04:35  a1kmm

	* src/: client.c, s_conf.c:
	  - Fixed K-line exemptions on oper spoofed users on rehash.

2001-04-20 03:49  jdc

	* TODO:
	  * Added dns_query_host and dns_query_port options to TODO list.
	    These would be fantastic; some of us always wish to query on
	    port 53 on a certain IP, ya know.  :-)

2001-04-20 03:15  a1kmm

	* src/s_conf.c:
	  - Removed wrong log message that was in with the real one.

2001-04-20 02:10  a1kmm

	* include/memory.h, include/s_conf.h, modules/core/m_part.c,
	  src/irc_string.c, src/md5.c, src/memory.c:
	  - Fixed some compiler warnings.

2001-04-20 01:49  androsyn

	* src/s_bsd.c: I'm bad and added a C++ style comment

2001-04-20 01:45  androsyn

	* src/irc_string.c: Added a new at the end of the file to make
	  Sun's cc happy.

2001-04-20 01:08  androsyn

	* TODO: Added TODO for static modules

2001-04-20 00:59  db

	* include/channel.h, modules/m_names.c, modules/m_who.c,
	  src/channel.c:
	  - removed function in m_names recoded m_names a bit
	  - made set_channel_mode_flags global
	  - started on cleanups for m_who, notably now using
	  set_channel_mode_flags

2001-04-19 23:33  db

	* src/channel.c:
	  - oops. peons were being shown as voiced.

2001-04-19 22:41  db

	* src/channel.c:
	  - rewrote channel_member_names finally. first cut

2001-04-19 19:54  jdc

	* BUGS:
	  * Added kqueue bug.
	  * Added LL server channel existence bug.

2001-04-19 18:29  a1kmm

	* include/event.h, include/ircd.h, src/event.c, src/ircd.c,
	  src/s_bsd_poll.c, src/s_bsd_select.c:
	  - Fixed the warning about setting the clock back.
	  - Attempt to recover from a set back clock by moving the scheduled
	    events back in time by the amount the clock was set back.

2001-04-19 18:00  fl_

	* modules/core/m_part.c:
	  - its amazing the difference < and > make.. (ta habeeb)

2001-04-19 17:18  fl_

	* modules/core/m_part.c:
	  - ops should never have their part reason removed..

2001-04-19 16:17  fl_

	* tools/convertconf.c:
	  - puts() could do with some \n's in there..

2001-04-19 16:15  fl_

	* INSTALL, doc/example.conf, tools/convertconf.c:
	  - *groan*  ok, this will make convertconf add
	    logging/modules/general blocks to the ircd.conf, after its converted
	  it..

	    we should probably encourage a bit more wider usage of it too..

2001-04-19 03:38  a1kmm

	* include/packet.h, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/core/m_part.c, src/packet.c,
	  src/s_user.c:
	  - Re-enabled the anti-flooding code.
	  - Give the user a burst for 3s at the start when they can send more
	    stuff like JOINs and WHOs etc...
	  - Added a penalty which sets the user back as if they didn't have
	    this extra burst if they try to use MODE on a channel, or PRIVMSG or
	    PART in this period.

2001-04-19 01:42  a1kmm

	* modules/m_join.c, modules/core/m_part.c, src/channel.c:
	  - Adding habeeb's patch to fix the antispambot code.
	  - Added a check on part message similar to that for QUIT to decide
	    if the part reason should be allowed to be shown.

2001-04-19 00:29  a1kmm

	* modules/: m_kline.c, m_unkline.c:
	  - Fixed the code to prevent redundant K-lines.
	  - Made sure we can always remove K-lines which are placed.

2001-04-18 22:53  a1kmm

	* include/hostmask.h, modules/m_testline.c, modules/m_unkline.c,
	  src/hostmask.c, src/s_conf.c:
	  - Fixed unkline/undline to work properly with hostmasks. Still a bit
	    messy, and the rehash at the end is really bad, however.

2001-04-18 08:54  fl_

	* doc/users.txt:
	  - beginnings of a file we can dump to users on /help.. currently
	    only covers usermodes/channelmodes.. additions are welcome :P

2001-04-18 07:37  a1kmm

	* modules/m_testline.c, src/client.c, src/hostmask.c,
	  src/ircd_parser.y, src/s_conf.c:
	  - Fixed hostmask code to work with exempt{} blocks.

2001-04-18 06:57  fl_

	* doc/example.conf, include/hostmask.h, modules/m_stats.c,
	  src/hostmask.c:
	  - we now have stats e.. admittedly it doesnt actually do anything
	    yet, but ill sort that later

2001-04-18 06:15  fl_

	* include/s_conf.h, src/ircd_lexer.l, src/ircd_parser.y:
	  - framework for exempt blocks

2001-04-18 06:05  jdc

	* doc/example.conf:
	  * example.conf incorrect in regards to vhost="" syntax.  Fixed.

2001-04-18 04:08  jdc

	* src/ircd.c:
	  * Added display of pid to startup output.

2001-04-17 18:35  fl_

	* include/client.h, include/s_conf.h, modules/m_kline.c,
	  src/client.c, src/hostmask.c, src/ircd_parser.y, src/oldparse.c,
	  src/s_conf.c, src/s_gline.c, src/s_user.c:
	  - Eline -> ExemptKline
	  - Fline -> ExemptLimits

2001-04-17 17:21  toot

	* src/class.c: this fixes the coredump if you did /trace with any
	  "unknown" connections

	  get_class_name needed to default to something rather than NULL :)

2001-04-16 07:42  fl_

	* BUGS, doc/example.conf:
	  - minor updates

2001-04-15 20:03  fl_

	* BUGS:
	  - updated bugs with the msglocale stuff..

2001-04-15 05:44  toot

	* modules/m_time.c, src/ircd.c, src/md5.c, src/s_log.c: a few
	  little cleanups

2001-04-14 11:34  davidt

	* src/: linebuf.c, packet.c, send.c: Fix non OPENSSL build

2001-04-13 18:39  davidt

	* doc/technical/cryptlink.txt, doc/example.conf,
	  doc/kserver-dt.txt, doc/kserver.txt, doc/msghash.txt,
	  include/client.h, include/linebuf.h, include/md5.h,
	  include/rsa.h, include/s_conf.h, include/s_serv.h,
	  modules/Makefile.in, modules/m_challenge.c, modules/m_close.c,
	  modules/core/Makefile.in, modules/m_cryptlink.c,
	  modules/core/m_server.c, src/Makefile.in, src/client.c,
	  src/ircd.c, src/ircd_lexer.l, src/ircd_parser.y, src/linebuf.c,
	  src/listener.c, src/md5.c, src/packet.c, src/parse.c, src/rsa.c,
	  src/s_conf.c, src/s_serv.c, src/send.c:
	  - Add CRYPTLINK (formerly KSERVER) support.
	    It seems to be mostly working, however:
	    * The protocol will probably change next week, to be compatable
	      with hybrid 6, etc..
	    * There's a few possible bugs I can see in the code, but there's
	      no sane way of fixing them until I (or someone else, hint hint :),
	      creates a 'helper' process for server<->server links, which
	      handles ziplinks/cryptlinks etc.

2001-04-13 09:36  fl_

	* doc/example.conf:
	  - added a warning about the order of auth blocks

2001-04-11 23:37  db

	* src/s_log.c:
	  - formatting fix

2001-04-11 06:24  fl_

	* Hybrid-team:
	  - added kre to contributors

2001-04-11 06:20  kreator

	* src/ircd_lexer.l:
	  - oops, forgot to reinit lineno and include_stack_ptr to make lexer
	    reentrant.

2001-04-11 05:51  a1kmm

	* src/ircd_parser.y:
	  - oops, forgot a DupString in parsing deny blocks in the parser.
	    This fixes it.

2001-04-10 19:43  kreator

	* src/: Makefile.in, ircd_lexer.l: Made .include for lexer.

2001-04-10 18:55  db

	* src/messages.tab:
	  - RPL_TRACEUNKNOWN third arg should have been a %s, remnant of
	    the class # to class name move. oops. reported by Joao Luis
	    Marques Pinto Lamego@PTlink.net

2001-04-10 01:21  a1kmm

	* include/hostmask.h, modules/m_stats.c, modules/m_testline.c,
	  src/hostmask.c:
	  - Oops, do not delete tklines on rehash!
	  - Fixed testline a little to match "user@*" I-lines when an IP
	  address is given.

2001-04-09 11:13  davidt

	* include/: dline_conf.h, patricia.h: Re-adding

2001-04-09 11:11  davidt

	* src/dline_conf.c: Please work?

2001-04-09 11:09  davidt

	* src/patricia.c: please work..

2001-04-09 08:41  fl_

	* modules/: m_admin.c, m_info.c, m_lusers.c, m_motd.c, m_stats.c,
	  m_time.c, m_users.c, m_whowas.c:
	  - added serverhiding checking to commands that can be used
	  remotely..

2001-04-09 07:03  a1kmm

	* src/s_serv.c:
	  - Removed a htonl that shouldn't be there... so now vhosts should
	  work.

2001-04-09 06:38  a1kmm

	* src/hostmask.c:
	  - Think that this gets the endianness right for the hash.

2001-04-09 05:02  a1kmm

	* modules/m_ping.c:
	  - GlobalSetOptions != ConfigFileEntries. Always check stuff works
	    before you commit :)

2001-04-09 04:49  a1kmm

	* modules/m_ping.c:
	  - Always reply locally when a non-oper tries to use PING to ping a
	    server and hide_server is on.

2001-04-09 04:29  a1kmm

	* doc/example.conf, include/dline_conf.h, include/hostmask.h,
	  include/patricia.h, include/s_conf.h, modules/m_gline.c,
	  modules/m_kline.c, modules/m_stats.c, modules/m_testline.c,
	  modules/m_unkline.c, src/Makefile.in, src/client.c,
	  src/dline_conf.c, src/getopt.c, src/hostmask.c, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/listener.c,
	  src/patricia.c, src/s_conf.c, src/s_gline.c:
	  - Did my hashtable lookup code for hosts/addresses properly - now
	    replaces patricia tries too, and provides proper IP parsing to
	    replace is_address that works with IPV4 and IPV6. This also means
	    that both CIDR and ip.* work with both IPV4 and IPV6.
	  - Changed the parser a little, so that we now simplify things by
	    putting IP addresses in quotes. Deleted the complicating user=a@b vs
	    ip=... ipv6=...  thing for auth{} blocks, we now always do user=a@b,
	    but we can put IPs(both V4 & V6) into the auth{} block. This means
	    we can specify a username too, and simplifies things, although it
	  does make unchanged older confs incompatible.

2001-04-08 18:50  davidt

	* doc/: kserver-dt.txt, msghash.txt: After reformatting
	  kserver.txt, I couldn't resist rewriting bits of it, so I decided
	  instead of overwriting A1kmm's version, I'd add an alternative..

	  I broke it into 2 seperate pieces, a KSERVER public key
	  authentication system/capab, and a MSGHASH capab (which requires
	  KSERVER) for verifying inter-server commands...

	  They both require lots of work :)

2001-04-08 16:18  davidt

	* doc/kserver.txt:
	  - Tidied up kserver.txt a little.

	    Mainly formatting changes, but I also adjusted some grammar that
	    took me 5 minutes to parse :)

2001-04-08 14:03  fl_

	* doc/opers.txt, modules/core/m_sjoin.c:
	  - moved the bogus TS message to FLAGS_DEBUG
	  - updated opers.txt

2001-04-08 12:27  fl_

	* modules/core/m_sjoin.c:
	  - fixed a small bug

2001-04-07 16:26  toot

	* modules/m_invite.c, src/vchannel.c: /invite was showing the
	  secret vchan name to users, cleaned m_invite a bit too fixed
	  "voodoo" invites on root chans

2001-04-06 05:36  fl_

	* TODO:
	  - updated todo a bit..

2001-04-06 05:30  a1kmm

	* src/adns.c:
	  - Started the long process of reviewing and tidying up/documenting
	    the adns code. Unfortunately, there is still much more to do. By
	    doing this, hopefully we will make it easier to find and fix some of
	    those adns cores that keep happening.

2001-04-05 19:18  androsyn

	* src/adns.c: Added a few asserts to check for NULL callbacks. I'm
	  still not sure why this is happening though.

2001-04-05 03:01  a1kmm

	* doc/kserver.txt:
	  - Added a proposed KSERVER protocol which will reduce the risk of
	    password sniffing or connection hijacking attacks against servers.

2001-04-04 12:17  androsyn

	* include/modules.h, src/ircd_parser.y, src/modules.c: Additional
	  changes for static modules.  We just need to make the build system
	  deal with this now.

2001-04-04 11:22  androsyn

	* modules/: m_accept.c, m_admin.c, m_away.c, m_capab.c, m_cburst.c,
	  m_challenge.c, m_cjoin.c, m_client.c, m_close.c, m_connect.c,
	  m_dmem.c, core/m_die.c, m_drop.c, m_eob.c, m_error.c, m_gline.c,
	  m_help.c, m_info.c, m_invite.c, m_ison.c, m_join.c,
	  core/m_kick.c, core/m_kill.c, m_kline.c, m_knock.c, m_links.c,
	  m_list.c, m_lljoin.c, m_llnick.c, m_locops.c, m_lusers.c,
	  m_motd.c, core/m_message.c, core/m_mode.c, m_names.c, m_nburst.c,
	  core/m_nick.c, m_oper.c, m_operwall.c, core/m_part.c, m_pass.c,
	  m_ping.c, m_pong.c, m_post.c, m_rehash.c, m_restart.c,
	  core/m_quit.c, core/m_server.c, m_set.c, core/m_sjoin.c,
	  m_stats.c, m_svinfo.c, m_testline.c, core/m_squit.c, m_time.c,
	  m_topic.c, m_trace.c, m_unkline.c, m_user.c, m_userhost.c,
	  m_users.c, m_version.c, m_wallops.c, m_who.c, m_whois.c,
	  m_whowas.c: First half of my attempt to do statically loaded
	  modules.  I suppose that either all or none with static/dynamic
	  modules, for the sake of simlicity.

2001-04-04 00:52  androsyn

	* src/s_bsd.c: Fixed a particular adns core..i don't think this was
	  the one walter was talking about.

2001-04-03 14:00  ejb

	* src/getopt.c:
	  - fixed getopt.

2001-04-03 02:39  ejb

	* include/getopt.h, include/ircd_getopt.h, src/getopt.c,
	  src/ircd.c:
	  - changed getopt.h to ircd_getopt.h.

2001-04-03 02:10  androsyn

	* src/s_bsd.c: Fixed what could be a potential bug with the adns
	  code.

2001-04-03 01:55  androsyn

	* src/s_conf.c: Fixed adns /rehash core..

2001-04-02 22:35  db

	* src/ircd.c:
	  - Edward, could you review this?
	    this fixes botch with getops.h

2001-04-01 20:06  toot

	* src/: ircd_lexer.l, ircd_parser.y: removed some old stuff from
	  the parser

2001-04-01 19:28  toot

	* modules/m_svinfo.c: somemore ugly %lu's changed back to %d.

2001-04-01 19:14  toot

	* src/ircd.c: fixes a couple of compile warnings in ircd.c..

2001-04-01 18:06  ejb

	* doc/technical/message-customisation.txt, src/getopt.c:
	  - make an error be printed for unknown arguments.
	  - add 'ayb' to message-customisation.txt.

2001-04-01 16:20  ejb

	* include/getopt.h, src/getopt.c, src/ircd.c:
	  - some fixes to the getopt stuff.

2001-04-01 14:30  ejb

	* include/debug.h, include/getopt.h, src/Makefile.in, src/debug.c,
	  src/getopt.c, src/ircd.c, src/m_error.c, src/send.c:
	  - added first stab at new command line arguments system..
	    not yet tested well, seems to work ok though.

2001-04-01 09:45  ejb

	* include/setup.h.in, src/ircd.c:
	  - fix for broken daemon(), caused abort upon start.

2001-03-31 18:01  db

	* src/s_debug.c:
	  - one more batch of cleanups on s_debug.c

2001-03-31 17:23  ejb

	* include/debug.h, src/Makefile.in, src/debug.c, src/ircd.c:
	  - added debug.c for debugging. not used yet..

2001-03-31 17:04  db

	* src/s_debug.c: -more cleanups to s_debug.c

2001-03-31 13:59  ejb

	* configure, src/ircd.c:
	  - more verbose initialisation messages.

2001-03-31 13:35  toot

	* include/linebuf.h, src/client.c, src/linebuf.c, src/s_debug.c:
	  fixes some compile warnings

2001-03-31 13:12  ejb

	* Makefile.in, configure, contrib/Makefile.in, modules/Makefile.in,
	  modules/core/Makefile.in, src/Makefile.in:
	  - fixed make .include checking stuff to actually work;
	    rebuilt dependencies.

2001-03-31 12:56  ejb

	* src/s_debug.c:
	  - remove 'always on' things from s_debug.c
	    No point putting them in if they never change..

2001-03-30 22:44  db

	* doc/opers.txt, src/s_debug.c:
	  - removed the /rehash GC from opers.txt
	  - cleaned up s_debug.c a tad more, added in stats for bans, invex,
	  except
	  - renamed cryptic variable names into more self documenting ones in
	    s_debug.c

2001-03-30 15:13  ejb

	* modules/m_rehash.c, src/ircd_lexer.l:
	  - added kre's /* */ comment code to the lexer
	  - properly fixed /rehash gc core (what's the point
	    in keeping it and not making it do anything? just
	    remove the whole thing).

2001-03-30 12:46  androsyn

	* modules/m_rehash.c: Removed a reference to the block allocator in
	  m_rehash.c that prevented it from being loaded.

2001-03-29 17:21  fl_

	* modules/m_who.c:
	  - never do testing in BitchX..

2001-03-29 17:10  fl_

	* modules/m_who.c:
	  - transferred the masking from channel.c for /names to m_who.c for
	    /who..  we now randomly poll /who lists too..

2001-03-29 04:11  db

	* include/client.h, include/linebuf.h, include/list.h,
	  include/s_conf.h, modules/Makefile.in, modules/core/Makefile.in,
	  src/Makefile.in, src/client.c, src/ircd.c, src/linebuf.c,
	  src/list.c, src/s_debug.c:
	  - cleaned up s_debug.c memory reporting somewhat, there is still
	    a duplicate user memory report to cleanup
	  - cleanedup the linebuf.c code a bit, removed unnecessary gotos
	  (*fwap* adrian)
	  - bsd make does not like not having quotes around .includes, I have
	    been bad, and temp commented them out for now...

2001-03-28 14:56  db

	* src/: client.c, list.c, memory.c, s_bsd.c:
	  - more cleanups

2001-03-28 08:15  androsyn

	* src/s_auth.c: Fixed adns core.  Somebody accidently forgot to set
	  the callback for auth_dns_callback().  -Wall caught this rather
	  easily. BTW -Wall should probably be turned on for gcc by default.

2001-03-28 04:04  fl_

	* contrib/Makefile.in, modules/Makefile.in,
	  modules/core/Makefile.in, src/Makefile.in:
	  - changed lots of include ".depend" into include .depend..

2001-03-28 03:23  fl_

	* contrib/: .depend, m_clearchan.c:
	  - we were potentially joining a user to a channel more than once..
	    not a good thing..

2001-03-28 00:51  db

	* include/blalloc.h, src/blalloc.c:
	  - removed blalloc.c and blalloc.h

2001-03-28 00:50  db

	* include/ircd_defs.h, include/memory.h, include/res.h,
	  src/Makefile.in, src/adns.c, src/client.c, src/event.c,
	  src/linebuf.c, src/list.c, src/s_auth.c, src/s_bsd.c,
	  src/s_conf.c, src/s_debug.c:
	  - Massive commit to remove blalloc.c code, first pass through
	    When we first did blalloc, systems did not use block allocators
	    for malloc, now they all do. blalloc.c/blalloc.h have now outlived
	    their usefulness.

2001-03-27 23:50  androsyn

	* src/: adns.c, s_auth.c, s_bsd.c, s_conf.c: Fixed stupid connect
	  bug...the block heap doesn't memset() our blocks..grr...

2001-03-26 17:16  ejb

	* messages/ayb.po:
	  - more messages for ayb.po

2001-03-26 11:03  ejb

	* messages/: Makefile.in, ayb.po, custom.po: Someone in a
	  #ircd-coders far, far away..

	  BOOM!!

	  <Dianora> What happen? <Rodder> Someone set up us the IRCD!!
	  <Rodder> Main server turn on.  <Dianora> It's you.  <madmax> How are
	  you client_ps? <madmax> All your root chptr are belong to us!
	  <madmax> You have no chance to rehash <madmax> Make your time.
	  <madmax> Ha Ha Ha.

	  - added ayb.po
	  - fixed custom.po

2001-03-25 11:00  davidt

	* doc/example.conf: Reformatted example.conf to 80 chars wide

2001-03-23 18:21  ejb

	* src/s_conf.c:
	  - removed CPP for now.

2001-03-23 06:31  ejb

	* doc/example.conf:
	  - updated example.conf to match the new parser.

2001-03-23 05:47  ejb

	* doc/example.conf, include/fileio.h, include/setup.h.in,
	  src/s_conf.c:
	  - added cpp support to the parser.
	    we now pass ircd.conf through 'cpp -P' before we pass it
	    to lex.  this could possibly be implemented slightly better
	    (esp. error checking).

2001-03-23 03:43  ejb

	* src/: ircd_lexer.l, ircd_parser.y:
	  - add support for decades, centuries, millannia,
	    and terabytes in the parser.

2001-03-23 03:38  toot

	* src/: s_user.c, send.c: couple of fixes for fussy compilers

2001-03-23 03:29  ejb

	* doc/example.conf, src/ircd_parser.y:
	  - add support for '1 minute 30 seconds' and suchlike in the parser.

2001-03-23 02:58  ejb

	* src/ircd_parser.y:
	  - add a simple arithmatic parser to ircd.conf.  it understands
	    +, -, *, / and () precedence.

2001-03-23 02:33  ejb

	* src/ircd_parser.y:
	  - duh. i like |.  don't you like |? | are gooooooood.

2001-03-23 02:30  ejb

	* doc/example.conf, src/ircd_lexer.l, src/ircd_parser.y:
	  - support for saying '20 megabytes' and '5 hours' and such like
	    in ircd.conf.  for some reason 'sendq=100;' to mean 100kb isn't
	    working.. should be fixed before release.

2001-03-22 00:51  ejb

	* include/send.h:
	  - commit send.h as well..

2001-03-22 00:51  ejb

	* src/: channel.c, send.c:
	  - add sendto_match_vacap_servs(), and make set_channel_mode
	    use it.  not tested yet ..

2001-03-22 00:31  androsyn

	* modules/m_trace.c: Forgot an argument to inetntop()

2001-03-22 00:29  androsyn

	* modules/m_trace.c: This should fix /trace for the IPv6 case..

2001-03-21 21:57  ejb

	* configure, include/md5.h, src/md5.c:
	  - turn uint32_t into u_int32_t and make configure check for it.

2001-03-21 21:52  ejb

	* configure:
	  - warn if user specified no $MAKE to configure..

2001-03-21 21:13  ejb

	* configure, contrib/Makefile.in, modules/Makefile.in,
	  modules/core/Makefile.in, src/Makefile.in:
	  - detect in configure how we should include files in Makefile.
	    This isn't a perfect test, but it should work..

2001-03-19 12:12  toot

	* modules/m_away.c: /away flood control was a bit harsh

2001-03-19 05:24  toot

	* include/: config.h, config.h.dist: restored some stuff in
	  config.h that'd been changed..  and synced config.h.dist

2001-03-19 04:59  toot

	* doc/example.conf, include/config.h, include/m_info.h,
	  include/s_conf.h, modules/m_info.c, modules/core/m_quit.c,
	  src/ircd_lexer.l, src/ircd_parser.y: . moved
	  anti_spam_exit_message_time to ircd.conf . don't add "Client Exit: "
	  if the quit message was blank anyway.

2001-03-18 20:51  madmax

	* src/: s_user.c, messages.tab: RPL_WELCOME now says: Welcome to
	  the NETWORK_NAME Internet Relay Chat Network

	  mIRC actually parses this and puts the NETWORK_NAME string into
	  $network

2001-03-16 20:34  db

	* doc/guidelines.txt:
	  - Submitted on behalf of Walter Campbell

2001-03-16 11:29  androsyn

	* src/rsa.c: Somebody used the boilerplate from vchannel.c and
	  forgot to change the filename on the top. Yes I know I'm nit-picking
	  :)

2001-03-16 04:57  fl_

	* src/s_user.c:
	  - another minor fix..

2001-03-16 04:00  fl_

	* src/s_user.c:
	  - minor fix to the oper_umode stuff..

2001-03-15 17:53  db

	* include/linebuf.h:
	  - This alleviates the high counts found in the block allocator in
	    profiles.  The problem was a # of block count that was set way too
	    low.  128 for BUF_BLOCK_SIZE means we allocate a bit map of 128 bits
	    which means for many allocated linebufs, we end up with a series
	    of smallish Block's with 128 bit maps...
	    In reality, the block allocator should be rewritten to embed a
	    "hint" into the allocated memory as to where the returned memory
	    block should go. There are a few other easier to do optimizations
	    as well. It has been pointed out that modern OS's have now caught
	    up and now use block allocation for malloc, if thats true, the
	    block allocator code might well be obsolete.

2001-03-15 15:03  db

	* include/channel.h, modules/m_names.c, src/channel.c:
	  - print all channel member lists at once in names
	    this hides somewhat better who the chanops are.
	    Its not optimized at all at the moment, fact is its terrible.
	    If someone optimizes it before me, great. I won't mind. ;)

2001-03-15 14:14  fl_

	* contrib/m_jupe.c:
	  - made jupe use exit_client()
	  - added a hack for the long reason core.. I made into into a
	    topiclen, until someone wants to change it to something that wont
	    core like ircnsprintf when its >reallen

2001-03-15 06:19  fl_

	* doc/whats-new.txt:
	  - tidied up whats-new a lot.. split the stuff into sections etc :)

2001-03-14 18:01  toot

	* modules/m_join.c: this fixes the bug that made join #x,0 put you
	  in #x0

2001-03-14 17:37  fl_

	* doc/example.conf, include/s_conf.h, modules/core/m_sjoin.c,
	  src/ircd_lexer.l, src/ircd_parser.y:
	  - added a config file option for disabling vchans.. added by request
	    but I dont like it :|

2001-03-14 16:50  androsyn

	* include/irc_string.h: I forgot a ; on the strlcpy prototype.

2001-03-14 16:17  androsyn

	* include/irc_string.h, src/irc_string.c, configure: Adds strlcat
	  and strlcpy for systems that don't have them.  configure now checks
	  for the existance of such functions on the system.

2001-03-14 13:29  davidt

	* doc/example.conf, src/ircd_parser.y:
	  - Fix multiple user=""; lines per auth{} block slightly.
	  - Allow multiple user=""; lines per operator{} block.
	  - Documented the above.

2001-03-14 13:03  fl_

	* doc/example.conf, include/client.h, include/config.h,
	  include/config.h.dist, include/s_conf.h, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_user.c:
	  - moved oper_umodes (modes set on /oper) from config.h ->
	    example.conf with a check if there isnt one in the config..
	  - mebbe we should allow this per oper block on hyb7.1?

2001-03-14 11:31  androsyn

	* src/s_bsd_devpoll.c: Fixed devpoll support so it would actually
	  compile on Solaris.  I'm not sure if it works yet or not though.

2001-03-14 00:27  toot

	* modules/m_client.c, modules/m_gline.c, src/channel.c: . let
	  halfops set +v and +k . removed some unused variables, and moved one
	    of trhe PERSISTANT_CLIENT ifdefs to kill a compile warning ;)

2001-03-13 18:52  davidt

	* doc/example.conf, src/ircd_parser.y:
	  - Allow multiple user="..."; lines per auth{} block...
	    (oper{}, etc. blocks can probably be changed to work the same way
	     quite easily, I'll look at it tomorrow, to see what would
	     actually benefit from it)

2001-03-13 17:35  ejb

	* modules/: Makefile.in, core/Makefile.in:
	  - don't build m_error.c as a module, it has to be static for now.

2001-03-13 15:42  fl_

	* include/config.h:
	  - ripped the flood bit out of config.h, also if they dont set a
	    config option, we default to 8 in ircd.c, which is what was in
	  config.h

2001-03-13 15:38  fl_

	* doc/example.conf, include/m_kline.h, include/s_conf.h,
	  modules/m_gline.c, modules/m_kline.c, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y:
	  - added min_nonwildcard to config for the minimum real chars you
	    need for a gline/kline (remote/local)
	  - moved the set options below the config file reading in ircd.c
	  - instead of #define FLOODCOUNT in config.h.. we now set the default
	    on startup in the config.. I think ill try doing of much as this as
	    I can, so config.h gets smaller :)

2001-03-13 11:41  adrian

	* configure, src/Makefile.in, src/s_bsd_devpoll.c:

	  initial /dev/poll support, again ripped from my devpoll code in a
	  squid branch.

	  /dev/poll is the solaris solution to the suckiness of poll/select on
	  large/active FD sets. Its kind of like kqueue but using a poll
	  interface. My (quick) tests show that its actually rather nifty with
	  large FD sets, so this should make hybrid-7 Not Suck(tm) under
	  Solaris 7/8.

	  I believe there's a linux patchset to give the kernel /dev/poll, but
	  I hear its crap. heh.

	  This code isn't guaranteed to even compile on a solaris box yet, but
	  I wanted to get it in anyway. It doesn't break a "default" build (ie
	  without --enable-devpoll). I promise to fix it in a few hours. :)

2001-03-12 15:14  androsyn

	* src/ircd_parser.y: semicolons are our friends. I like semicolons,
	  don't you :P

2001-03-12 01:36  a1kmm

	* doc/example.conf, include/client.h, include/config.h,
	  include/hostmask.h, include/ircd.h, include/numeric.h,
	  include/s_conf.h, modules/m_client.c, src/client.c,
	  src/hostmask.c, src/ircd.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/linebuf.c, src/memory.c, src/messages.tab, src/packet.c,
	  src/s_bsd.c, src/s_user.c:
	  - Fixed fl_'s revert and fixed the klines bug.
	  - Please not that persistant clients are temporarily back in, but
	    please don't try and remove them by reverting because I can
	    guarantee it will break more stuff than it fixes, like last time.
	    These things are best removed manually, as it is silly to revert
	    days of work for a little thing like a "hme" to should be a "hmc" as
	    one done last time. However, this being an open source project, we
	    probably don't want to actually hide our code from the public -
	  how about if we go for: #ifdef PERSISTANT_CLIENTS #error Persistant
	  clients aren't finished yet.  ...  #endif
	   which should stop people defining but not block people from seeing
	   it. Furthermore, we should not so much as put a #undef
	   PERSISTANT_CLIENTS or /* #define PERSISTANT_CLIENTS */ in config.h
	   or anything, as that is just asking people to define it. Or we
	   could just manually delete them(which will be easy as they are all
	  wrapped in #ifdef PERSISTANT_CLIENTS except a few harmless things in
	  the lexer/parser.

2001-03-12 00:31  androsyn

	* include/client.h, src/client.c: Removed remains of
	  release_dns_client_reply()

2001-03-11 17:40  wcampbel

	* Hybrid-team: Removed myself from the Hybrid-Team, moved myself
	  down to a contributer

2001-03-11 15:20  toot

	* src/memory.c: memory.c needs restart.h (recommit)

2001-03-11 12:47  davidt

	* modules/m_topic.c, src/ircd_parser.y:
	  - Fix topic for vchans
	  - Recommitting the following fixes:
	    * Tidied up TODO, it had a bunch of stuff in it that had already
	    been done.
	  * Multiple ports are now allowed per listen{} block.
	      Note that host=""; lines must come before port=123; lines (they
	      apply to any port=...; lines following).

2001-03-11 12:44  fl_

	* doc/example.conf, include/client.h, include/config.h,
	  include/hostmask.h, include/ircd.h, include/memory.h,
	  include/s_conf.h, modules/m_client.c, src/client.c,
	  src/hostmask.c, src/ircd.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/linebuf.c, src/memory.c, src/messages.tab, src/packet.c,
	  src/s_bsd.c, src/s_user.c:
	  - This reverts the tree to its state on the 8th

	    The main reason for this is to fix klines.. which were broken in a
	    hostmask.c commit.. but finding out what was wrong wouldve been
	    insane.. the patch is available of what ive changed to restore it
	    back with persistant clients (which this removes), and the buggy
	    kline stuff..

	  - We need a stable tree for beta3.. not a buggy one :/

2001-03-11 11:30  fl_

	* include/config.h:
	  - undefine persistant clients by default.. is there a missing
	    messages.tab?
	  - we need to discuss this before any more commits..

2001-03-11 05:21  fl_

	* include/m_kline.h, modules/m_kline.c:
	  - added wildcard checking for remote klines
	  - upped the minimum non-wildcard chars from 2 to 4..

2001-03-11 03:36  a1kmm

	* src/: messages.tab, s_user.c:
	  - Added numeric 20 for "Your ID and key is" so we can have clients
	  read them.

2001-03-11 03:09  a1kmm

	* doc/example.conf, include/s_conf.h, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_user.c:
	  - Added a flag "persistant=yes" to CONF_CLIENT(auth{} blocks).
	  Without this flag, you cannot become +p.

2001-03-11 02:07  a1kmm

	* doc/example.conf, include/s_conf.h, modules/m_client.c,
	  src/client.c, src/ircd_lexer.l, src/ircd_parser.y, src/s_user.c:
	  - We now expire timed out persistant connections.

2001-03-11 00:12  a1kmm

	* include/config.h, modules/m_client.c, src/client.c,
	  src/linebuf.c, src/packet.c:
	  - Got some basic reattaching to work, but it is not finished yet so
	    you may not want to have PERSISTANT_CLIENTS defined. We also need to
	  decide what to send on reattach, as well as a nicer way of sending
	  the id/key.

2001-03-10 19:36  fl_

	* modules/m_gline.c:
	  - added some checking to make sure glines from other servers have
	    enough none wildcard chars.. (gline *@* anyone?)

2001-03-10 18:32  a1kmm

	* src/: client.c, s_user.c:
	  - Wrapped the +p and the detach_client stuff in #ifdef
	  PERSISTANT_CLIENTS

2001-03-09 11:02  fl_

	* modules/: Makefile.in, m_post.c, core/Makefile.in:
	  - added rejection for the post command from unregged clients

2001-03-09 10:11  davidt

	* TODO:
	  - Tidied up TODO, it had a bunch of stuff in it that had already
	  been done.

2001-03-09 09:36  fl_

	* contrib/m_clearchan.c:
	  - dont allow clearchan from servers.. ick!

2001-03-09 09:22  davidt

	* doc/example.conf, src/ircd_parser.y:
	  - oops, apparantly I forgot to commit my multiple-ports-per-listen{}
	  patch.  Note: host= lines must now come before port= lines

2001-03-09 05:19  a1kmm

	* include/client.h, include/config.h, include/hostmask.h,
	  include/ircd.h, include/memory.h, src/client.c, src/hostmask.c,
	  src/ircd.c, src/memory.c, src/packet.c, src/s_bsd.c,
	  src/s_user.c:
	  - Some basic support for persistant clients(usermode +p) as well as
	    a few general fixes here and there.  It is late here so please
	  forgive my bugs which are most probably there.

2001-03-08 22:15  toot

	* src/: memory.c, s_debug.c: removed some more ugly %lu's memory.c
	  needed restart.h

2001-03-08 12:09  androsyn

	* include/memory.h, src/blalloc.c, src/list.c, src/memory.c: Moved
	  outofmemory() to memory.c from list.c.  Also updated a few comments
	  regarding outofmemory().

2001-03-08 10:58  androsyn

	* src/s_serv.c: Removed an #if 0'd relic that was pointing to a
	  function in what was res.c

2001-03-07 20:55  jdc

	* contrib/m_clearchan.c:
	  * Lacking list.h include; _free_dlink_node was implicit.

2001-03-07 18:01  db

	* modules/m_list.c:
	  - We had forgotten to send RPL_LISTSTART

2001-03-07 15:07  androsyn

	* include/client.h, include/s_serv.h, src/s_serv.c: More
	  incremental progress on ziplinks.  It will send out CAPAB ZIP if
	  compressed = YES in the config file.

2001-03-07 14:50  madmax

	* src/client.c: Netsplits now show client quits as (irc.server.com
	  a.server.split.from.<network>.net) So clients pick up the split now:
	   NetSplit: a.server.on.EFnet.net split from irc.efnow.net
	  [02:44pm]

	  Also swapped strcpy and strcat for an ircsprintf.

2001-03-07 14:49  fl_

	* src/parse.c:
	  - changed the numerics warning..

2001-03-07 14:30  fl_

	* contrib/m_clearchan.c:
	  - this fixes clearchan.. we do stuff in a certain order which
	    unfortunately means the channel is never really destroyed.. the oper
	    can cycle if they want that..

2001-03-07 14:03  androsyn

	* include/s_conf.h, include/s_serv.h, src/ircd_lexer.l,
	  src/ircd_parser.y: Stuff to get ziplinks support in the config
	  files at least...Adds a compressed = YES/NO option to connect {}
	  blocks.

2001-03-07 01:21  toot

	* modules/m_trace.c: removed a couple of pointless checks;
	  IsInvisible() on a server or unknown :P

2001-03-07 01:05  toot

	* modules/m_trace.c: /trace wasn't showing the correct Client and
	  Server info

2001-03-06 11:07  toot

	* modules/m_eob.c: cast eob message to (int), for prettyness :P

2001-03-06 10:53  toot

	* contrib/m_jupe.c, include/s_serv.h, modules/m_client.c,
	  modules/m_close.c, modules/m_connect.c, modules/core/m_die.c,
	  modules/m_invite.c, modules/m_ison.c, modules/core/m_kill.c,
	  modules/m_kline.c, modules/m_links.c, modules/m_lljoin.c,
	  modules/m_llnick.c, modules/core/m_message.c, modules/m_nburst.c,
	  modules/core/m_mode.c, modules/core/m_nick.c, modules/m_ping.c,
	  modules/m_pong.c, modules/core/m_server.c,
	  modules/core/m_sjoin.c, modules/core/m_squit.c,
	  modules/m_stats.c, modules/m_trace.c, modules/m_userhost.c,
	  modules/m_who.c, modules/m_whois.c, src/channel.c, src/class.c,
	  src/client.c, src/parse.c, src/s_auth.c, src/s_debug.c,
	  src/s_misc.c, src/s_serv.c, src/s_stats.c, src/s_user.c,
	  src/send.c, src/vchannel.c: . ugly %lu in /stats v and  temp
	  tkline removed . acptr had been renamed to aclient_p, when we wanted
	  target_p.

2001-03-05 22:42  androsyn

	* src/: ircd.c, s_conf.c, s_serv.c: Fixed vhost= to function
	  properly when modifying it on rehash..

2001-03-05 21:29  toot

	* modules/m_challenge.c: removed a couple of redundant if's

2001-03-05 21:24  androsyn

	* contrib/: links_notice.c, spy_links_notice.c, m_clearchan.c,
	  m_hash.c, m_jupe.c, m_opme.c, spy_stats_notice.c,
	  spy_whois_notice.c, stats_notice.c, whois_notice.c: Changes sptr
	  cptr and acptr to source_p client_p and target_p respectively

2001-03-05 21:22  androsyn

	* include/channel.h, include/client.h, include/dline_conf.h,
	  include/event.h, include/fdlist.h, include/handlers.h,
	  include/hook.h, include/ircd_handler.h, include/m_kline.h,
	  include/msg.h, include/s_conf.h, include/s_serv.h,
	  include/s_user.h, include/scache.h, include/send.h,
	  include/vchannel.h, modules/m_accept.c, modules/m_admin.c,
	  modules/m_away.c, modules/m_capab.c, modules/m_cburst.c,
	  modules/m_challenge.c, modules/m_cjoin.c, modules/m_client.c,
	  modules/m_close.c, modules/m_connect.c, modules/m_dmem.c,
	  modules/core/m_die.c, modules/m_drop.c, modules/m_eob.c,
	  modules/m_error.c, modules/m_gline.c, modules/m_help.c,
	  modules/m_info.c, modules/m_invite.c, modules/m_ison.c,
	  modules/m_join.c, modules/core/m_kick.c, modules/m_kline.c,
	  modules/core/m_kill.c, modules/m_knock.c, modules/m_links.c,
	  modules/m_list.c, modules/m_lljoin.c, modules/m_llnick.c,
	  modules/m_locops.c, modules/m_lusers.c, modules/m_motd.c,
	  modules/core/m_message.c, modules/core/m_mode.c,
	  modules/m_names.c, modules/m_nburst.c, modules/core/m_nick.c,
	  modules/m_oper.c, modules/m_operwall.c, modules/core/m_part.c,
	  modules/m_pass.c, modules/m_ping.c, modules/m_pong.c,
	  modules/core/m_quit.c, modules/m_rehash.c, modules/m_restart.c,
	  modules/core/m_server.c, modules/m_set.c, modules/core/m_sjoin.c,
	  modules/m_stats.c, modules/core/m_squit.c, modules/m_svinfo.c,
	  modules/m_testline.c, modules/m_time.c, modules/m_topic.c,
	  modules/m_trace.c, modules/m_unkline.c, modules/m_user.c,
	  modules/m_userhost.c, modules/m_users.c, modules/m_version.c,
	  modules/m_wallops.c, modules/m_who.c, modules/m_whois.c,
	  modules/m_whowas.c, src/adns.c, src/channel.c, src/class.c,
	  src/client.c, src/dline_conf.c, src/event.c, src/fdlist.c,
	  src/hostmask.c, src/listener.c, src/m_error.c, src/modules-dld.c,
	  src/modules.c, src/motd.c, src/parse.c, src/s_conf.c,
	  src/s_debug.c, src/s_gline.c, src/s_log.c, src/s_serv.c,
	  src/s_stats.c, src/s_user.c, src/scache.c, src/send.c,
	  src/vchannel.c: That should have been source_p not server_p

2001-03-05 21:04  androsyn

	* include/channel.h, include/client.h, include/dline_conf.h,
	  include/event.h, include/fdlist.h, include/handlers.h,
	  include/hash.h, include/hook.h, include/ircd_handler.h,
	  include/m_kline.h, include/msg.h, include/s_conf.h,
	  include/s_serv.h, include/s_user.h, include/scache.h,
	  include/send.h, include/vchannel.h, modules/m_accept.c,
	  modules/m_admin.c, modules/m_away.c, modules/m_capab.c,
	  modules/m_cburst.c, modules/m_challenge.c, modules/m_cjoin.c,
	  modules/m_client.c, modules/m_close.c, modules/m_connect.c,
	  modules/m_dmem.c, modules/m_drop.c, modules/m_eob.c,
	  modules/core/m_die.c, modules/m_error.c, modules/m_gline.c,
	  modules/m_help.c, modules/m_info.c, modules/m_invite.c,
	  modules/m_ison.c, modules/m_join.c, modules/core/m_kick.c,
	  modules/core/m_kill.c, modules/m_kline.c, modules/m_knock.c,
	  modules/m_links.c, modules/m_list.c, modules/m_lljoin.c,
	  modules/m_llnick.c, modules/m_locops.c, modules/m_lusers.c,
	  modules/core/m_message.c, modules/m_motd.c, modules/m_names.c,
	  modules/core/m_mode.c, modules/m_nburst.c, modules/m_oper.c,
	  modules/core/m_nick.c, modules/m_operwall.c, modules/m_pass.c,
	  modules/m_ping.c, modules/core/m_part.c, modules/m_pong.c,
	  modules/m_rehash.c, modules/core/m_quit.c, modules/m_restart.c,
	  modules/m_set.c, modules/core/m_server.c, modules/m_stats.c,
	  modules/core/m_sjoin.c, modules/core/m_squit.c,
	  modules/m_svinfo.c, modules/m_testline.c, modules/m_time.c,
	  modules/m_topic.c, modules/m_trace.c, modules/m_unkline.c,
	  modules/m_user.c, modules/m_userhost.c, modules/m_users.c,
	  modules/m_version.c, modules/m_wallops.c, modules/m_who.c,
	  modules/m_whois.c, modules/m_whowas.c, src/adns.c, src/blalloc.c,
	  src/channel.c, src/class.c, src/client.c, src/dline_conf.c,
	  src/event.c, src/fdlist.c, src/hash.c, src/hostmask.c,
	  src/linebuf.c, src/list.c, src/listener.c, src/m_error.c,
	  src/memory.c, src/modules-dld.c, src/modules.c, src/motd.c,
	  src/packet.c, src/parse.c, src/s_auth.c, src/s_bsd.c,
	  src/s_conf.c, src/s_debug.c, src/s_gline.c, src/s_log.c,
	  src/s_misc.c, src/s_serv.c, src/s_stats.c, src/s_user.c,
	  src/scache.c, src/send.c, src/vchannel.c, src/whowas.c: Changed
	  cptr  to client_p and sptr to server_p and acptr to target_p as
	  discussed in #ircd-coders with larne and toot.  These names make a
	  bit more sense.

2001-03-04 01:34  androsyn

	* README.FIRST: We don't need a functional system resolver anymore
	  :)

2001-03-03 11:47  wcampbel

	* doc/opers.txt: Document STATS A

2001-03-02 14:35  fl_

	* modules/core/m_sjoin.c:
	  - added some TS rules to permanent channels..
	    if a remote server sends users to a perm channel, we drop our
	    modes, and use theirs, else we are really going to break things..

	    if they are bursting a perm channel, and we have one, use whoevers
	    TS is older..

2001-03-02 12:16  fl_

	* modules/core/m_sjoin.c:
	  - dont pass received sjoins on for persistant chans, to those not
	    using CAP_VCHAN.. do we need another cap?

2001-03-02 11:20  davidt

	* modules/core/m_sjoin.c:
	  - Reset buf/sjbuf/sjbuf_nh to "" in m_sjoin, so we don't accidentaly
	    reuse previous nicks....

2001-03-02 03:45  a1kmm

	* src/hostmask.c:
	  - Fixed a potential buffer overflow where strncat is used
	  incorrectly.

2001-03-01 23:37  db

	* src/s_log.c:
	  - missing #ifdef USE_SYSLOG on #include
	    replaced this for now  /* XXX #ifdef HAVE_SYSLOG_H */
	    Should this be in configure?

2001-03-01 18:22  lusky

	* include/patchlevel.h:
	  - revved patchlevel to beta2

2001-03-01 17:28  fl_

	* src/parse.c:
	  - removed the extra debug message for the numerics, as it shouldve
	    been caught now

2001-03-01 17:00  fl_

	* include/channel.h, src/channel.c, src/s_serv.c:
	  - ok.. did it a different way, we only burst perm channels to those
	    who support CAP_VCHAN, as older servers wont time them out

2001-03-01 16:02  fl_

	* src/channel.c:
	  - reverted my patch, im gunna do it a different way

2001-03-01 15:42  fl_

	* src/channel.c:
	  - this fixes the 403 stuff.. we now actually burst userless channels
	    (could help stop desyncs), which stops us sending +b's for
	    non-existant channels..

	    this doesnt break hyb6, but its revertable if it causes serious
	    problems

2001-03-01 08:20  davidt

	* src/hostmask.c:
	  - Fix for a core on /rehash when removing in-use I lines.

2001-03-01 08:14  androsyn

	* include/res.h: Forgot to commit res.h last night

2001-03-01 01:46  androsyn

	* include/numeric.h, src/adns.c, src/messages.tab,
	  modules/m_stats.c: Adds a /STATS A for listing the current set of
	  DNS servers adns is using.

2001-03-01 01:12  androsyn

	* src/adns.c: this lets adns process timeouts correctly.

2001-03-01 01:02  db

	* src/memory.c:
	  - can't use mem_frob if NDEBUG is defined

2001-03-01 01:00  db

	* src/blalloc.c:
	  - mem_frob() is not valid if NDEBUG is defined hence it can't be
	  called here

2001-03-01 00:04  androsyn

	* src/listener.c: Gets rid of the dns lookup in listener.c it was a
	  dumb idea..if you ask me :P

2001-02-28 23:21  db

	* modules/m_eob.c:
	  - grrr calculate a delta , if its reasonable use it.
	    Otherwise, report 0. blah.
	    The =proper= fix is to store the TS delta from the svinfo
	    into the server struct for that server.

2001-02-28 19:44  db

	* src/hostmask.c:
	  - fixed misc I lines/klines so *@* now works again.

2001-02-28 14:27  fl_

	* src/s_user.c:
	  - put back the 502 numeric (cant change modes for other users)
	  - put back the warning about servers changing our usermodes

	  these were commented out.. but I dont see why: noticed by jv

2001-02-28 01:01  androsyn

	* src/Makefile.in: Doh..i'm a tard

2001-02-28 00:58  androsyn

	* src/Makefile.in: Fixed yacc for real this time :)

2001-02-28 00:55  androsyn

	* configure, src/Makefile.in: Makes yacc/bison detection work
	  right.

2001-02-28 00:34  androsyn

	* src/client.c: Well..this fixes that core dump..The problem is now
	  that I lines don't seem to be working right :/

2001-02-27 23:51  ejb

	* configure, modules/Makefile.in, modules/core/Makefile.in,
	  src/Makefile.in:
	  - fixes to make compile on solaris using sunsoft cc work.
	    tested compile, and it loads the module fine, but i haven't
	    checked that it works any more than that.

2001-02-27 18:50  db

	* src/hostmask.c:
	  - don't try to use a flag on a NULL pointer

2001-02-27 01:17  androsyn

	* configure, include/config.h, include/setup.h.in: Made IPv6 a
	  configure option

2001-02-26 23:46  androsyn

	* configure, include/setup.h.in, src/Makefile.in,
	  src/s_bsd_kqueue.c, src/s_bsd_poll.c, src/s_bsd_select.c: Minor
	  change to the build system so that s_bsd_*.c will always generate an
	  .o file, but are empty for the loop type you're not using. Makes for
	  slightly cleaner makefiles.

2001-02-26 16:17  fl_

	* modules/m_eob.c, src/s_serv.c:
	  - This fixes EOB timing.. we rely on the remote server to calculate
	    the time spent, may be some issues with TS deltas which ill fix
	    later

2001-02-26 13:37  androsyn

	* configure: Half a fix for Sun's CC.

2001-02-26 13:04  androsyn

	* src/: hostmask.c, oldparse.c, s_bsd.c: Fixes for Sun's CC. Things
	  actually compile now with it.

2001-02-26 08:51  ejb

	* README.FIRST, src/Makefile.in, src/ircd_lexer.l,
	  src/ircd_parser.y:
	  - fix to make ircd_parser.y work
	  - notes on Solaris compile.

2001-02-26 08:21  db

	* src/: client.c, tools.c:
	  - don't frob memory if NDEBUG is set

2001-02-26 01:53  androsyn

	* include/listener.h, include/res.h, include/s_auth.h, src/adns.c,
	  src/client.c, src/listener.c, src/s_auth.c, src/s_bsd.c,
	  src/s_conf.c: More updates to adns.  Using the block allocator
	  for struct DNSQuery now.

2001-02-26 00:59  androsyn

	* src/listener.c, src/s_auth.c, src/s_bsd.c, include/client.h,
	  include/fdlist.h, include/s_auth.h, include/s_conf.h: Minor
	  interface change to adns.  Basically we have the callbacks freeing
	  memory for the struct DNSQuery in the callbacks.  I should probably
	  modify this to use the block allocator.

2001-02-25 18:59  jdc

	* src/listener.c:
	  * Here we go again.  ;-) Fixes to make /STATS P not show the same
	    listening port twice after a /REHASH, and make things all clean
	    and happy on BSD:

	    listener.c: In function `inetport':
	    listener.c:194: invalid lvalue in assignment
	    listener.c: In function `find_listener':
	    listener.c:247: warning: passing arg 1 of `memcmp' makes pointer
	    from integer without a cast listener.c:247: warning: passing arg 2
	  of `memcmp' makes pointer from integer without a cast

2001-02-25 18:28  androsyn

	* src/listener.c: Uncommentted fixed code

2001-02-25 18:25  androsyn

	* doc/example.conf: Documented listen {} host=".." fix.

2001-02-25 18:20  androsyn

	* src/listener.c: Fixed host="ipaddress" in listen {} blocks for
	  IPv6.

2001-02-25 17:58  androsyn

	* src/s_bsd.c: Error condition for inetpton() should be <= 0 :)

2001-02-25 17:30  androsyn

	* src/adns.c: Fixed more weirdness..this was from my half assed
	  attempt at fixing /dns rehash

2001-02-25 17:29  androsyn

	* src/adns.c: Fixed weird dns bug..

2001-02-25 17:12  androsyn

	* src/s_conf.c: Remember that for inetpton() that is <= 0 is an
	  error condition not just == 0

2001-02-25 16:48  androsyn

	* configure: Without libresolv checks..

2001-02-25 16:25  androsyn

	* src/listener.c: Further fixes to listen {} blocks for adns
	  stuff...

2001-02-25 14:31  jdc

	* include/listener.h, src/listener.c: CVS prior to now would not
	  compile on FreeBSD.  So here are my fixes.  If any of this is wrong,
	  someone please fix it.  This isn't code I should be playing with in
	  the first place, but it seems to work...

	  * include/listener.h
	      Changed Listener 'addr' def. from struct in_addr to irc_inaddr.
	  * src/listener.c
	      make_listener(): copy_s_addr() needed to be changed due to the
	        include/listener.h change.
	      inetport(): lsin.sin_addr assignment needed to be changed (used
	        memcpy() to be safe; used inet6 stuff as example).
	      find_listener(): Changed PIN_ADDR() and IN_ADDR() to &PIN_ADDR()
	        and &IN_ADDR().  More importantly, memcmp() logic was
	        backwards I think -- result was /REHASH, then /STATS P showing
	        two of the same listening ports; changed to (!memcmp()).

2001-02-25 05:28  androsyn

	* src/: adns.c, listener.c: Fixed a few minor bugs I
	  introduced...ipv6 vhost listeners almost work. They re scribbling
	  over the listener port right now.. I don't think this happens for
	  IPv4 but I haven't checked either.

2001-02-25 04:58  androsyn

	* src/listener.c: Made listener.c use adns instead of
	  gethostbyaddr() which should kill the last of the libresolv code.
	  Also I think I've fixed vhosting for IPv6, but alas I have not
	  tested this just yet.

2001-02-25 04:39  toot

	* include/s_serv.h: reduced startup_connections_time from 5mins to
	  1min surely that's long enough? :)

2001-02-25 03:42  androsyn

	* src/adns.c: Second half of dns rehash fix. This actually works
	  now.

2001-02-24 11:01  wcampbel

	* BUGS, doc/example.conf, doc/technical/cookies.txt: Spell checked
	  all these files

2001-02-24 08:36  toot

	* include/modules.h, src/ircd_parser.y, src/modules-dld.c,
	  src/modules.c: fixed modules="..."; in ircd.conf

2001-02-24 07:16  toot

	* src/ircd_parser.y: fixed a little typo in ircd_parser.y with
	  client_exit option

2001-02-24 03:06  a1kmm

	* include/config.h:
	  - Make sure we get the right version of config.h

2001-02-24 00:32  a1kmm

	* include/: config.h, memory.h:
	  - Disable memory debugging for the beta release.

2001-02-23 18:36  a1kmm

	* src/: client.c, hostmask.c, parse.c:
	  - Fixed glines.
	  - Fixed parse.c so exit_client it is only called once.
	  - Fixed exit_client so we don't set the client dead until we have
	  sent the contents of the sendq.

2001-02-23 16:21  a1kmm

	* src/hostmask.c:
	  - Removed an assert which simply shouldn't be there.

2001-02-23 15:49  wcampbel

	* TODO, doc/technical/cookies.txt, doc/index.txt: Updated my TODO
	  list Added madmax's cookies proposal

2001-02-23 14:02  wcampbel

	* BUGS: Xride submitted the Danish translation, set that up in the
	  translations Makefile.  Also documented in BUGS that you have to set
	  the msglocale to standard before trying to update one in use, as it
	  will occasionally dump core.

2001-02-23 12:22  fl_

	* modules/core/m_quit.c:
	  - we dont need mo_oper(), an !IsOper() check is better :)

2001-02-23 11:27  androsyn

	* src/modules-dld.c: Untested module loader for HP-UX using
	  shl_*().  This should get integrated into the current modules.c, but
	  I didn't feel like messing with autoconf this morning. If you're
	  gonna use this make sure you hack your Makefile to use -lld instead
	  of -ldl

2001-02-23 00:45  db

	* src/: list.c, packet.c, parse.c, send.c:
	  - This appears to be stable under seans little "toy" test cloner.
	    I have moved the exit_client code outside of send.c and into
	    parse.c for now. Not sure if this is =quite= the right place but
	    I'd like to sleep tonight.

	    Anyway, a more optimum solution will be to fd_close in dead_socket()
	    I think and then mark the fd as -1 .. but I don't want to deal
	  with it tonight.

	    Oh, I'm not sure if cptr after handle_command() in parse.c needs to
	    be checked as well.

2001-02-22 20:36  wcampbel

	* configure: Fix configure to properly find and set the @RANLIB@
	  variable.

2001-02-22 19:31  fl_

	* modules/core/m_message.c:
	  - dont flood limit remote clients..
	    in doing this however.. we dont actually need to check if the
	    client is flooding or not.. it seems a waste just to generate an
	  error message.
	  - dont flood limit opers in private, in channels where theyre
	    unopped, they shouldnt be given preferential treatment, so limit
	  them with users
	  - RFC says we dont reply to notices.. if a client is flooding with a
	    notice, dont tell them theyre message didnt arrive

2001-02-22 15:24  fl_

	* messages/custom.po, src/messages.tab:
	  - added the +l usermode to the 004 numeric

2001-02-22 14:39  androsyn

	* src/adns.c: I forgot to commit some stuff. Part of the /dns
	  rehash fixes..well half-fix at least.

2001-02-21 09:07  androsyn

	* src/client.c: Fixed stupid misteak in last commit...

2001-02-21 08:55  androsyn

	* src/s_auth.c, src/s_conf.c, src/client.c, include/res.h: Misc
	  adns cleanups.  Half way to getting /dns rehash working again

2001-02-21 01:59  androsyn

	* src/listener.c: Minor fix replacing close() with fd_close()

2001-02-21 00:13  db

	* src/packet.c:
	  - flush queues if client is marked dead.

2001-02-20 22:07  wcampbel

	* messages/custom.po: Updates in the messages stuff

2001-02-20 21:05  wcampbel

	* configure: Updated (and corrected one small glitch in)
	  swedish.po, created the Makefile.in for it, and added it to autoconf

2001-02-20 18:22  davidt

	* src/: packet.c, s_bsd.c, s_serv.c, send.c:
	  - Missed test in src/packet.c, while( <get line from sendq> ) should
	    check the client hasn't died before parsing the line..
	  - Oddness in s_serv.c -- random garbage was being copied into
	    fd_note, whilst the correctly copied string was being completely
	  ignored...

2001-02-20 08:13  wcampbel

	* include/config.h: Make one of the define's easier to read

2001-02-20 04:43  toot

	* modules/core/m_mode.c: took out an unneeded if() in m_mode.c

2001-02-20 04:25  toot

	* include/vchannel.h, modules/core/m_mode.c, modules/core/m_part.c,
	  src/vchannel.c: use find_bchan instead of map_bchan.  it's much
	  quicker.

2001-02-19 23:14  wcampbel

	* doc/example.conf, messages/custom.po: Cleaned up an unclear
	  sentence in example.conf, and updated the messages file.  Someone
	  want to write user docs on the messages stuff?

2001-02-18 20:54  wcampbel

	* doc/example.conf, src/ircd_parser.y: ip="..."; in listen {} is
	  inconsistent, like a connect {} host entry, it can accept both IP's
	  and hostnames, so it should be host="..."; Also we had complaints
	  about needing " " here, while all other ip= lines do not use the " "

2001-02-18 00:44  wcampbel

	* Hybrid-team, Makefile.in, TODO, doc/Makefile.in,
	  doc/example.conf, doc/index.txt, doc/ircd.8,
	  doc/server-version-info, doc/whats-new.txt, include/config.h,
	  src/s_debug.c, tools/rsa_respond/Makefile,
	  tools/rsa_respond/README:
	  1.  Update the TODO list
	  2.  Massive update of the docs for the (hopefully soon) beta2
	  release.
	  3.  Made the rsa_respond/Makefile consistent
	  4.  Cleaned up make rsa_respond from the source root somewhat
	  5.  make install in doc/ installs the manpage (now that it's
	      reasonably up to date) to man8 in the prefix.
	  6.  Removed the last vestiges of CRYPT_LINK_PASSWORD
	  7.  Last but not least, added vulture to the credits as a
	  contributer

2001-02-16 23:44  androsyn

	* src/adns.c: Fixed /rehash dns finally.  Boy I'm awful lazy these
	  days :P

2001-02-16 19:37  a1kmm

	* include/hostmask.h, src/hostmask.c, src/ircd_parser.y,
	  src/s_conf.c:
	  - Reverted db's patch - we must not free I-lines a client is
	  attached to.
	  - Added some documentation to the functions.
	  - Added some ugly debug code in case the reason that the reverted
	    patch was needed shows up again, so we get more useful cores.

2001-02-16 12:37  db

	* src/hostmask.c:
	  - oops. reporting the wrong things for Klines. fixed.

2001-02-16 12:22  db

	* include/hostmask.h, src/hostmask.c:
	  - cleaned up hostmask.c clear_conf() there is no need to keep
	    a separate link list at all
	  - note register is deprecated or ignored with any modern compiler.

2001-02-16 11:42  ejb

	* modules/m_accept.c:
	  - fix for /quote accept -nick flooding

2001-02-16 09:36  db

	* include/dline_conf.h, modules/m_kline.c, src/dline_conf.c,
	  src/s_conf.c:
	  - This should catch all the nasty cases of adding to patricia trie
	    and not freeing ConfItem's on failure.

2001-02-15 23:55  androsyn

	* src/: dline_conf.c, patricia.c: Fixed a few bugs with dline
	  handling...

2001-02-15 23:27  db

	* modules/m_kline.c:
	  - stop nnn.nnn.*.* type dlines at the pass...

2001-02-15 00:16  db

	* modules/core/m_message.c:
	  - I think this fixes /msg $ and /msg # stuff
	  - also changed /msg opers@ to use local wallops

2001-02-14 23:39  androsyn

	* src/: adns.c, s_conf.c: The resolver will now actually reread
	  /etc/resolv.conf.  Also note that this pretty much does a full
	  restart on the resolver.

2001-02-14 21:01  wcampbel

	* doc/example.conf, include/config.h: Add +l (locops) to the
	  default oper umodes Fix a typo in example.conf Document fakename
	  (server hostmasking nonsense) in example.conf

2001-02-14 15:07  fl_

	* modules/core/m_message.c:
	  - fixes msg $irc.server.. the docs need updating..
	    $$irc.server has been reverted to $irc.server to keep
	    compatability I need to go shout at my isp so ill fix $# soon :)

2001-02-14 02:22  a1kmm

	* include/memory.h, src/hostmask.c:
	  - Made the special case of hostmasks with no wildcards work
	  properly.

2001-02-14 01:55  db

	* src/s_conf.c:
	  - somehow this fix got blown away accidentally...
	    puts the right ip into the aconf if hostname happens to be an IP

2001-02-14 00:58  a1kmm

	* src/linebuf.c:
	  - Use memset instead of bzero in an attempt to reduce the number of
	  deprecated function calls.

2001-02-14 00:53  toot

	* messages/custom.po, src/dline_conf.c, src/messages.tab,
	  src/s_auth.c: . added some CVS Id tags where they were lacking .
	  removed 'd' from MYINFO.. no more denys . made some formatting more
	  consistent :P

2001-02-14 00:14  a1kmm

	* src/s_conf.c:
	  - Re-reverted something I accidently reverted - always close all
	    files in your text-editor after cvs update!

2001-02-13 23:54  a1kmm

	* src/: dline_conf.c, patricia.c, s_conf.c:
	  - Finally that ConfItem memory leak seems to have gone - we now free
	    ip_ilines and even the associated conf items.

2001-02-13 04:03  db

	* TODO:
	  - updated TODO list

2001-02-13 03:46  a1kmm

	* src/hostmask.c:
	  - Slightly better clear_conf code - there was actually a risk of
	    double free before. Still we have that memory leak however :(

2001-02-13 03:34  db

	* src/ircd_parser.y:
	  - don't increment scount unless it was successfully added

2001-02-13 03:08  db

	* src/: s_bsd.c, s_conf.c:
	  - fixed IP in conf when ip is used for host = ""; in connect block
	    use inetpton() on given string, if returns 0 use dns... otherwise
	    its a valid IP to use. s_conf.c

	  - open fd to stderr.log, dup it to fd 2 s_bsd.c

2001-02-13 00:22  androsyn

	* include/s_conf.h, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_serv.c: Made server hostmasking work again.  Well, at least
	  in theory.  Added a fakename= option to the connect block for this.

2001-02-12 22:16  androsyn

	* src/s_conf.c: This fixes it properly this time :P

2001-02-12 22:13  androsyn

	* src/s_conf.c: This is the IPV6 half of that fix..

2001-02-12 22:00  db

	* src/s_conf.c:
	  - this fixes the IP showing on /connect for =now= AndroSyn will have
	    to tidy this up...

2001-02-12 10:02  jdc

	* include/s_conf.h:
	  - Logic for spoof_notice was backwards.  Oops.

2001-02-12 09:56  db

	* src/ircd_parser.y:
	  - make it compile at least for now

2001-02-12 02:23  androsyn

	* src/: s_auth.c, s_bsd.c, s_conf.c: Free allocated memory from
	  adns. Dumb bugs..

2001-02-12 01:44  a1kmm

	* include/memory.h, src/memory.c:
	  - Re-added that code to stop malloc() etc... getting in.

2001-02-12 00:13  androsyn

	* src/listener.c, src/s_bsd.c, include/s_bsd.h: Fixed some brain
	  damage on incoming connections...the code has been changed to make
	  it more friendly to ipv6.

2001-02-11 18:37  db

	* include/res.h, src/adns.c:
	  - reworked adns to not use fgetc, fprintf and friends, but the ircd
	    specific FBFILE library (fileio.h)
	  - removed duplicated redundant #include "memory.h"

2001-02-11 14:20  db

	* include/memory.h, src/memory.c:
	  - removed apparent debugging code left in

2001-02-11 03:28  a1kmm

	* src/hostmask.c:
	  - Put deleted hostmask confs on a list so we can free them later.
	    Still leaves some memory leaks somewhere in the config(but why?) but
	  it is partway there...

2001-02-11 01:06  a1kmm

	* include/memory.h, src/ircd_lexer.l, src/memory.c:
	  - Fixed adns to use My* memory functions.

2001-02-10 21:51  a1kmm

	* include/blalloc.h, include/memory.h, src/blalloc.c, src/client.c,
	  src/fdlist.c, src/hook.c, src/hostmask.c, src/ircd_lexer.l,
	  src/modules.c, src/patricia.c, src/s_conf.c:
	  - Some general tidyups to help catch memory leaks and other
	    problems, like changing calls to calloc and malloc and strdup to
	  MyMalloc, + a few memory leak fixes. Still some more to go, however.

2001-02-10 19:51  a1kmm

	* src/hostmask.c:
	  - Fixed IP I/K lines to work properly, but we still have to put IP I
	    lines and normal I lines on the same precedence scheme.

2001-02-10 18:33  fl_

	* src/parse.c:
	  - added extra logging for numerics sent to servers.. this should
	    be removed once we fix the causes of it (admin only for now)

2001-02-10 17:51  a1kmm

	* src/listener.c:
	  - Fixed DLINES - an irc_inaddr is not the same as a sockaddr
	  - We cannot return from accept_connection without re-selecting the
	    listener or the listener won't work properly!

2001-02-10 17:01  db

	* src/s_conf.c:
	  - /rehash should check_klines() !

2001-02-10 14:33  wcampbel

	* BUGS: Document the permissions bug on /etc/resolv.conf

2001-02-10 13:24  fl_

	* doc/technical/send.txt:
	  - sendto_realops_flags_oper became sendto_wallops_flags() :)

2001-02-10 09:06  jdc

	* src/listener.c:
	  - *Server name* being reported on connect was listener->name, not
	    me.name.

2001-02-10 08:26  jdc

	* modules/m_who.c:
	  - Fixed bug where /WHO *, /WHO NICK, and /WHO #chan would not show
	    +o or +v clients when opped or +h'd; bug was due to lack-of
	    is_any_op() check alongside MODE_HIDEOPS.
	  - Changed variable name reference 'oper' to 'server_oper' to avoid
	    confusion with chanops.

2001-02-10 03:31  db

	* src/hostmask.c:
	  - the hash table better be cleared as well

2001-02-10 03:20  db

	* src/client.c:
	  - This should fix the pesky asserts once and for all.
	    Remember the client struct hasnt' been freed yet, so its cool
	    here.

2001-02-10 02:17  a1kmm

	* src/hostmask.c:
	  - Reverted back to scanning forward in hostmask.c - the idea of
	    scanning backwards and not hashing the string seems to take more
	    clockcycles on the average hostname to get everything right than
	    just rehashing the string each time, since we have a relatively
	    good hash function(So we have to hash about 5 strings when a client
	    connects, but it isn't that bad). And we should also get rid of a
	    few special cases that were messing up k-lines and spoofs before.

2001-02-08 22:15  wcampbel

	* doc/example.conf: Minor update of example.conf

2001-02-08 21:51  db

	* src/s_serv.c:
	  - argh I always test before committing. right?

2001-02-08 21:20  db

	* src/s_serv.c:
	  - anytime we get a socket connect error, the client should be marked
	    with DEAD_SOCKET.. found by vulture.

2001-02-08 17:59  db

	* src/s_bsd.c:
	  - this at least prevents exit_client from exiting an already dead
	  client twice.

2001-02-08 02:30  db

	* src/listener.c:
	  - if an fd from accept is -1 don't add it !

2001-02-08 00:50  toot

	* src/vchannel.c: should use irccmp rather than strcmp when
	  checking vchan_id

2001-02-08 00:36  toot

	* src/vchannel.c: wasn't checking vchan_id for root channels..

2001-02-07 23:56  a1kmm

	* src/hostmask.c:
	  - That "bogus //" that Hwy changed to /*  shouldn't be there at all
	  - the code is needed for klines to work.

2001-02-07 19:00  db

	* src/s_conf.c:
	  - This fixes testline... find_tkline can be handed a NULL ip from
	  testline.

2001-02-07 18:07  wcampbel

	* include/patricia.h, src/dline_conf.c, src/hostmask.c: More bogus
	  C++ // comments

2001-02-07 12:18  wcampbel

	* src/client.c: Replaced bogus C++ // comment

2001-02-07 09:27  wcampbel

	* TODO, doc/example.conf: Updated the TODO list kline=yes|no; in
	  the conf controls KILL too

2001-02-07 03:33  db

	* include/linebuf.h, src/client.c, src/linebuf.c:
	  - ok. once a client has exited, any recvq linebufs it has, must be
	    flushed else client_dopacket() will try to parse stuff while the
	    client has a -1 fd... oops. The old code (before david cleaned it
	    up) swept this under the carpet by simply ignoring the buffer if the
	    fd < 0 Sooo instead exit_client() should flush all recvq linebufs
	    when it exits a client. I added a new interface client_flush_input()
	    to linebuf.c I don't think client.c should be diddling directly with
	    linebuf_donebuf but thats just me.

2001-02-07 02:14  db

	* src/send.c:
	  - one line comments aren't generally useful in fixing bugs.
	    THIS fixes the stack smash observed on dead links

2001-02-07 01:16  androsyn

	* src/s_auth.c: This *should* fix the long hostname bug..Untested
	  however

2001-02-06 01:10  androsyn

	* src/s_conf.c: Yup..that fix was okay..

2001-02-05 23:50  db

	* src/send.c:
	  - this fixes a stack smash when a socket goes dead, you CANNOT
	    ever try to send more stuff at it, or it goes into a nice nasty
	    loop as it tries to send an error to the dead socket...
	    There may be a better way of doing this.

2001-02-05 21:17  wcampbel

	* doc/example.conf: connect { aftype = ipv4|ipv6; }; documented

2001-02-05 19:14  db

	* src/s_conf.c:
	  - temporary fix for adns /rehash cores

2001-02-05 17:12  davidt

	* modules/core/m_mode.c: oops, missed a return

2001-02-05 17:00  androsyn

	* src/adns.c: Keeps adns from dumping core on us.  This needs to be
	  fix.

2001-02-05 15:12  davidt

	* contrib/m_clearchan.c, contrib/m_hash.c, contrib/m_jupe.c,
	  contrib/m_opme.c, include/client.h, include/handlers.h,
	  include/hash.h, include/ircd_handler.h, include/packet.h,
	  include/parse.h, modules/m_accept.c, modules/m_admin.c,
	  modules/m_away.c, modules/m_capab.c, modules/m_cburst.c,
	  modules/m_challenge.c, modules/m_cjoin.c, modules/m_client.c,
	  modules/m_close.c, modules/m_connect.c, modules/m_dmem.c,
	  modules/core/m_die.c, modules/m_drop.c, modules/m_eob.c,
	  modules/m_error.c, modules/m_gline.c, modules/m_help.c,
	  modules/m_info.c, modules/m_invite.c, modules/m_ison.c,
	  modules/m_join.c, modules/core/m_kick.c, modules/m_kline.c,
	  modules/core/m_kill.c, modules/m_knock.c, modules/m_links.c,
	  modules/m_list.c, modules/m_lljoin.c, modules/m_llnick.c,
	  modules/m_locops.c, modules/m_lusers.c, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/m_motd.c, modules/m_names.c,
	  modules/m_nburst.c, modules/m_oper.c, modules/m_operwall.c,
	  modules/core/m_nick.c, modules/core/m_part.c, modules/m_pass.c,
	  modules/m_ping.c, modules/m_pong.c, modules/core/m_quit.c,
	  modules/m_rehash.c, modules/m_restart.c, modules/m_set.c,
	  modules/core/m_server.c, modules/m_stats.c,
	  modules/core/m_sjoin.c, modules/core/m_squit.c,
	  modules/m_svinfo.c, modules/m_testline.c, modules/m_time.c,
	  modules/m_topic.c, modules/m_trace.c, modules/m_unkline.c,
	  modules/m_user.c, modules/m_userhost.c, modules/m_users.c,
	  modules/m_version.c, modules/m_wallops.c, modules/m_who.c,
	  modules/m_whois.c, modules/m_whowas.c, src/client.c, src/hash.c,
	  src/m_error.c, src/modules.c, src/packet.c, src/parse.c,
	  src/send.c: m_* functions no longer need a return value.. and
	  everything was using it in different ways (returning 0/1/-1 on
	  various different conditions), so it was just a mess..  If we do
	  decide to actually use the return value for something useful, it'd
	  need to change everything anyway, so since that probably won't
	  happen (soon anyway)....

2001-02-05 14:08  wcampbel

	* messages/custom.po, src/messages.tab: Print a U or X when
	  printing out gecos {} or shared {} entries Fix a couple mistakes in
	  the .po

2001-02-05 03:43  a1kmm

	* src/hostmask.c:
	  - Finally got the code to only hash the new parts of the hostname
	  when we try each token. Thanks to Dianora for the idea.

2001-02-05 02:28  androsyn

	* src/: s_conf.c, s_user.c: Missing '&'s are bad for your health
	  and your pointers :P

2001-02-05 02:08  db

	* include/s_conf.h:
	  - ya ya ya never check in something without testing, esp. when
	  tired.

2001-02-05 01:55  db

	* include/config.h:
	  - IPV6 should not be defined by default

2001-02-05 01:50  db

	* include/s_conf.h, src/dline_conf.c:
	  - removed unused variable
	  - added prototype for now for is_ipv6_address

2001-02-05 01:12  androsyn

	* src/s_user.c: Fixed bug for IPv6 when displaying the IP address
	  of the incoming connection.

2001-02-04 23:16  androsyn

	* Hybrid-team: Shameless self promotion...

2001-02-04 22:34  androsyn

	* src/s_auth.c: Fixed a tyop that prevented s_auth.c from
	  compiling.

2001-02-04 21:59  db

	* src/: hostmask.c, ircd_lexer.l, ircd_parser.y, s_conf.c:
	  - fixed core in hostmask.c add_conf() should check for NULL pointers
	  - added initial IPV6 specific code

2001-02-04 21:58  androsyn

	* src/s_auth.c: Added hostname length checking. Report error if
	  hostname is longer than HOSTLEN

2001-02-04 21:29  db

	* include/hostmask.h, src/hostmask.c, src/s_conf.c:
	  - changed code to use a patricia trie for the IP I lines

2001-02-04 21:24  ejb

	* doc/ircd.8, include/config.h, include/ircd_defs.h, src/s_bsd.c:
	  - fixed s_bsd.c for BSD ..

2001-02-04 21:18  androsyn

	* src/dline_conf.c: Stupid misnaming bug..

2001-02-04 21:08  androsyn

	* include/dline_conf.h, src/dline_conf.c: Added ip Iline interface
	  to dline_conf.c

2001-02-04 20:19  androsyn

	* src/s_conf.c: Default aconf->aftype to AF_INET

2001-02-04 20:05  androsyn

	* Makefile.in, configure, include/client.h, include/fdlist.h,
	  include/ircd_defs.h, include/res.h, include/s_auth.h,
	  include/s_bsd.h, include/s_conf.h, src/Makefile.in, src/adns.c,
	  src/class.c, src/client.c, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/res.c, src/s_auth.c, src/s_bsd.c,
	  src/s_conf.c, src/s_debug.c, src/s_serv.c: Well this is the ADNS
	  stuff.. Please test it throughly. It seems to work okay but it has
	  not been extenstively tested.  Have fun...

2001-02-04 19:17  fl_

	* modules/m_kline.c, src/s_conf.c:
	  - we notice the oper when we add a tkline remotely/locally..
	  (untested)
	  - dont give the path to our kline.conf in remote klines

2001-02-04 00:29  a1kmm

	* src/hostmask.c:
	  - Better free HostMaskEntries too when we clear_conf

2001-02-03 23:55  a1kmm

	* src/hostmask.c:
	  - 'I' is not the same as 'K'.
	  - flags is not the same as status.

2001-02-03 23:33  a1kmm

	* include/hostmask.h, include/mtrie_conf.h, modules/m_gline.c,
	  modules/m_kline.c, modules/m_stats.c, modules/m_testline.c,
	  modules/m_unkline.c, src/Makefile.in, src/hostmask.c, src/ircd.c,
	  src/ircd_parser.y, src/list.c, src/mtrie_conf.c, src/s_conf.c,
	  src/s_gline.c:
	  - Got rid of mtrie_conf, we now have new hashtable orientated code
	  that should be faster on servers with lots of k-lines & I-lines
	  etc...

2001-02-03 19:50  wcampbel

	* Makefile.in, doc/challenge.txt, tools/rsa_respond/README,
	  tools/rsa_respond/buffer.c, tools/rsa_respond/buffer.h: . make
	  rsa_respond will create a distributable rsa_respond.tar.gz . Rewrote
	  the rsa_respond README file . Removed buffer.c and buffer.h from
	    rsa_respond, they were old code, needed for rsa_respond.c.  The new
	    genkey/respond programs do not use these two files.  . Corrected my
	    spelling in challenge.txt... Do NOT document when you are tired Hwy!

2001-02-03 15:41  wcampbel

	* BUGS: Documented that ::1 is not a supported IP (reported by me
	  and poptix)

2001-02-03 11:02  db

	* modules/m_who.c:
	  - removed unused parameter in do_who() (chptr)
	  - removed duplicate #include "common.h"

2001-02-03 09:51  wcampbel

	* TODO, doc/index.txt: Documented a few more things that were fixed
	  from the TODO file Updated index.txt

2001-02-03 00:49  db

	* modules/m_who.c:
	  - after re-reading rfc1489 a bit, and the original tortured code
	    by avalon I think this is what was meant. I think. I'll have to
	    try a h6 server to verify.

2001-02-02 23:49  wcampbel

	* INSTALL, doc/challenge.txt: Cleaned up INSTALL a little Added
	  documentation for the challenge/response system

2001-02-02 23:05  a1kmm

	* tools/rsa_respond/: genkey.c, respond.c:
	  - Okay, this is under GPL not LGPL.

2001-02-02 23:02  a1kmm

	* tools/rsa_respond/: genkey.c, respond.c:
	  - Reapply Hwys changes I accidentally overwrote before(argc < 3 not
	  argc < 2)
	  - umask says what you don't want not the default modes!

2001-02-02 22:57  a1kmm

	* tools/rsa_respond/genkey.c:
	  - We now call umask before writing the key-files from genkey so they
	  aren't world readable.

2001-02-02 22:46  a1kmm

	* tools/rsa_respond/: Makefile, genkey.c, respond.c, rsa_respond.c:
	  - More secure encryption of private keys that genkey/respond uses.

2001-02-02 22:19  davidt

	* src/ircd_parser.y: Uhm.  I tested this... and it worked.. but
	  this code couldn't work.. uhm. oops.

2001-02-02 22:17  db

	* modules/m_who.c:
	  - This is a better m_who follows the RFC closer I think

2001-02-02 22:02  wcampbel

	* doc/whats-new.txt: Fixed an unclear sentence, found by caf@EFnet

2001-02-02 21:55  davidt

	* src/Makefile.in: oops, only link SELECT_SRC in once...

2001-02-02 21:51  davidt

	* include/config.h, modules/Makefile.in, modules/core/Makefile.in,
	  src/Makefile.in:
	  - Fix problem with assert() failure in ReadMessageFile...
	    It was caused by only generating dependency information for the
	    current select method -- if you used kqueue, and the .depend file
	    was for poll, changes to s_bsd_kqueue's headers wouldn't recompile
	  it...

2001-02-02 21:42  wcampbel

	* tools/rsa_respond/genkey.c: sigh...argc again

2001-02-02 21:39  wcampbel

	* tools/rsa_respond/respond.c: Don't core if we don't have the
	  challenge parameter

2001-02-02 21:38  davidt

	* configure, include/config.h: -I flags should be in CPPFLAGS, not
	  CFLAGS, updated configure to stop warning from make depend

2001-02-02 20:59  jdc

	* src/s_serv.c:
	  - Blah.  Okay, *finally* fixed passwords.  I shouldn't have changed
	    the strcmp()s like I did earlier.  The *REAL* bug was that one of
	    the sendto_one()'s was sending aconf->passwd, not spasswd.
	  - Encrypted passwords are still up in the air, but they might work.
	    Someone please try them, or work with me regarding it.

2001-02-02 20:13  jdc

	* src/s_serv.c:
	  - Attempt #2...  God this stuff is evil!
	  - Fixed bug where connect failed when send_password and
	    accept_password were not identical.  strcmp aconf->spasswd, not
	  aconf->passwd.
	  - The above fix might also (havent tested) fix encrypted password
	  links.

2001-02-02 19:33  jdc

	* src/s_serv.c:
	  - Fixed bug where connect failed when send_password and
	    accept_password were not identical.  strcmp aconf->spasswd, not
	  aconf->passwd.
	  - The above fix might also (havent tested) fix encrypted password
	  links.

2001-02-02 15:22  wcampbel

	* modules/m_who.c: m_who fix, not perfect, but it doesn't core now.

2001-02-02 05:07  a1kmm

	* include/config.h, modules/core/m_mode.c:
	  - "mode #channel !vchan [+...]" now works.

2001-02-02 03:36  a1kmm

	* include/client.h, modules/m_challenge.c, modules/m_oper.c,
	  src/rsa.c, src/s_user.c, tools/rsa_respond/Makefile,
	  tools/rsa_respond/buffer.c, tools/rsa_respond/genkey.c,
	  tools/rsa_respond/respond.c, tools/rsa_respond/rsa_respond.c:
	  - The challenge command finally works.

2001-02-01 16:49  jdc

	* src/s_conf.c:
	  - Removed initialization from incompatible pointer type warning due
	    to line 483.  Forced type as (char *).

2001-02-01 16:34  jdc

	* BUGS:
	  - module="" directive in modules {} block does not load module on
	  startup.

2001-01-31 15:15  davidt

	* doc/example.conf, include/config.h, include/s_conf.h,
	  modules/m_info.c, modules/core/m_message.c, src/channel.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c:
	  - Fix missing space between parabuf and : in channel.c
	  - Fix missing if(p_or_n != NOTICE) in m_message.c, allowing an
	    infinite loop of +g messages to DoS the server..
	  - Added caller_id_wait to remove 60 second hardcoded time between +g
	    notifications.

2001-01-31 04:13  jdc

	* TODO:
	  - Added myself into the TODO list.  Gee, don't I feel special?

2001-01-31 01:06  db

	* modules/core/m_message.c:
	  - fixed tiny bug that broke /msg $#host.mask messages for opers

2001-01-30 23:58  jdc

	* modules/m_kline.c:
	  - Fixed valid_comment() usage (didn't see line 691).  Now #ifndef
	    IPV6 is used to get rid of the -Wunused warning.  Someone should fix
	    this kludge properly before a final release.

2001-01-30 23:53  jdc

	* modules/m_kline.c:
	  - Removed aconf->ip = IN_ADDR(ip); warnings (force unsigned long).
	  - Commented out valid_comment function (unused so far?).

2001-01-30 15:34  davidt

	* modules/m_userhost.c: oops, fix core caused by previous change

2001-01-30 15:16  davidt

	* modules/m_userhost.c: fix userhost for lazylinks

2001-01-30 14:11  fl_

	* BUGS, include/client.h, modules/m_client.c,
	  modules/core/m_server.c, src/client.c, src/s_bsd.c, src/s_serv.c,
	  src/send.c:
	  - added FLAGS_NOTADMIN and removed as many of the double notices as
	    I could.. I might have missed some though :)

2001-01-30 13:26  fl_

	* contrib/m_clearchan.c, contrib/m_jupe.c, contrib/m_opme.c,
	  include/send.h, modules/m_connect.c, modules/m_locops.c,
	  modules/m_operwall.c, modules/m_wallops.c,
	  modules/core/m_squit.c, src/send.c:
	  - changed sendto_realops_flags_opers() -> sendto_wallops_flags()
	    it makes much more sense like that :)
	  - removed an unneeded if() from sendto_wallops_flags()

2001-01-30 09:53  wcampbel

	* modules/m_operwall.c: Removed "OPERWALL - " from in front of the
	  OPERWALL message...  This may be exerting my opinion...but the two
	  commands do the same damn thing, why should they look any different?
	  Other than "elite-ness", I don't see any reason why OPERWALL should
	  exist at all.

2001-01-30 03:03  a1kmm

	* src/blalloc.c:
	  - Fixed the memdebug code again, you can't add a void* to a ptr, it
	  is perfectly valid to add an unsigned long to a ptr however.

2001-01-29 14:04  jdc

	* src/s_bsd.c: Typo fix (FLAGS_ADMINS --> FLAGS_ADMIN).

2001-01-29 13:59  jdc

	* modules/: m_error.c, m_stats.c, core/m_server.c, core/m_squit.c,
	  m_svinfo.c, m_trace.c: Changed all get_client_name() references,
	  respectively, from TRUE/FALSE to SHOW_IP/HIDE_IP.  Also changed
	  HIDEME to MASK_IP.

	  Also, forgot to mention this:

	  src/s_bsd.c and src/s_serv.c were modified earlier to send two
	  sendto_realops_flags() notices, one for admins (with SHOW_IP) and
	  one for opers (with HIDE_IP).  This means admins will get two
	  notices during a connect/disconnect, but I digress.

2001-01-29 13:52  jdc

	* src/: client.c, m_error.c, parse.c, s_auth.c, s_bsd.c, s_misc.c,
	  s_serv.c, s_user.c, send.c: Changed all get_client_name()
	  references, respectively, from TRUE/FALSE to SHOW_IP/HIDE_IP.  Also
	  changed HIDEME to MASK_IP.

2001-01-29 13:37  db

	* include/client.h, src/send.c:
	  - simplified sendto_realops_flags(FLAGS_ALL... case

2001-01-29 13:09  wcampbel

	* doc/whats-new.txt: Removed CAPAB DE from the docs

2001-01-29 12:58  db

	* include/s_serv.h, src/channel.c:
	  - removed all reference to CAP_DE its GONE GONE GONE yay
	    removed modebuf_de pbuf_de etc.

2001-01-29 10:09  wcampbel

	* README.FIRST, doc/example.conf: Minor documentation cleanup

2001-01-29 00:09  lusky

	* include/patchlevel.h: revved patchlevel to beta1

2001-01-28 21:53  wcampbel

	* src/modules.c: Applied the OpenBSD a.out fix Someone test this to
	  make sure it still runs right on BSD/Linux/Solaris...

2001-01-28 21:08  ejb

	* include/channel.h, src/channel.c, src/s_serv.c: OOH YES YES YES
	  YES "$"*( YES !!!!!!! OOOOOOOOH YES.

	  um sorry.

	  - removed sea^H^H^H+d s^U
	  - removed +d support, as it causes more problems than it solves.

2001-01-28 18:34  jdc

	* src/parse.c: msg_hash_table bug (MAX_MSG_HASH+10 vs.
	  MAX_MSG_HASH) seems to be gone; do some more testing on this one,
	  but it's not showing up like in hybrid-6.

2001-01-28 18:17  jdc

	* modules/m_away.c: No throttling/"load" check for opers when
	  setting /AWAY.

2001-01-28 18:07  jdc

	* modules/m_userhost.c: Grumble grumble.  Put the code back in;
	  apparently mIRC and others use the "feature" to obtain the clients'
	  local IP.  This is needed for backwards compatibility.

2001-01-28 18:06  fl_

	* modules/core/m_kill.c:
	  - dont burst users to the server that the user is on
	  - removed useless IsOper() check
	  - this should be the last commit for a while :)

2001-01-28 17:44  jdc

	* modules/m_userhost.c: Commented out code which returns the actual
	  IP when a user/client does a USERHOST on itself.  Seems pointless to
	  me.  Return whatever the server says your host is.

2001-01-28 17:21  fl_

	* modules/core/m_kill.c:
	  - more minor fixes :)

2001-01-28 16:11  davidt

	* modules/core/m_kill.c: Fix kill for certain LL situations...

2001-01-28 15:33  fl_

	* modules/core/m_kill.c:
	  - this renders kill_client() redundant, but basically we werent
	    sending kills to every server, which was causing problems with hyb6
	    as we could introduce a nick twice..
	  - we now use sendto_cap_serv_butone() and sendto_nocap_serv_butone()
	  - we still use IDs where its possible
	  - im tired now :P

2001-01-28 10:59  davidt

	* modules/: m_client.c, core/m_kill.c, core/m_nick.c:
	  - Fix m_client.c / m_nick.c to mark clients introduced by a lazylink
	    as known by that lazylink (caused all kills of lazylink clients to
	    be replaced by nickcollision kills, which has the same effect
	  anyway.. weird bug :)
	  - Fix broken logic in m_kill.c, which caused a core on attempting to
	    kill an unknown UID.

2001-01-27 23:33  androsyn

	* include/client.h: Somebody commited an extra int aftype..This
	  backs that change out...

2001-01-27 23:07  androsyn

	* src/s_serv.c: Typo fix in the last vhost= change fixed.

2001-01-27 22:06  androsyn

	* src/s_serv.c: Finally fixed that damn /connect bug with
	  vhosts...Now will somebody else test it :).

2001-01-27 19:51  davidt

	* modules/core/m_part.c: oops, check if sptr can send to the
	  channel, not cptr

2001-01-27 18:11  fl_

	* modules/core/m_message.c:
	  - only reset idle on privmsg, not notice

2001-01-27 16:35  fl_

	* modules/core/m_message.c:
	  - dont reset idle time from notices.. only privmsg
	    I didnt alter notice #channel.. altho I spose we should so its
	    consistent..

2001-01-27 15:02  davidt

	* modules/: m_lljoin.c, m_join.c, core/m_sjoin.c: Prevent local
	  users creating fake vchans...

2001-01-27 14:24  fl_

	* contrib/m_jupe.c:
	  - configfileentry -> servinfo

2001-01-27 13:47  davidt

	* src/channel.c: Eventually found the weird bug which causes list.c
	  to complain about users still being on channels when they are freed.
	  Remove channel from user as well as user from channel in
	  delete_members.

2001-01-27 11:44  davidt

	* src/send.c: We only actually need one buffer here...

2001-01-27 10:18  davidt

	* modules/core/m_part.c: Remove warning, since it was being
	  displayed when it shouldnt anyway...

2001-01-27 10:12  davidt

	* modules/m_lljoin.c: Fix LLJOIN brokeness for vchans

2001-01-27 03:54  toot

	* include/client.h, modules/m_stats.c: . removed a redundant
	  if/else in stats . added aftype to localClient, which s_serv.c
	    wanted..  i this is right? . updated .depend

2001-01-27 03:18  androsyn

	* src/ircd_parser.y, src/s_serv.c, include/s_conf.h: Fixed vhosts
	  for outgoing connections finally.

2001-01-27 02:05  lusky

	* include/patricia.h, modules/core/m_nick.c:
	  - fixed some more sol26 compile warnings

2001-01-27 01:38  lusky

	* include/s_bsd.h, modules/core/m_nick.c, src/lex.yy.c,
	  src/listener.c, src/s_auth.c, src/s_bsd.c, src/y.tab.c,
	  src/y.tab.h:
	  - removed lex/yacc output
	  - put socklen_t's back in

2001-01-26 23:47  wcampbel

	* doc/: index.txt, operguide.txt: Minor docs cleanup Cleaned up the
	  formatting of operguide.txt (wouldn't fit properly on an 80
	  character wide terminal) and added a couple missing :'s to the
	  /quote lines

2001-01-26 23:26  db

	* TODO:
	  - removed some wording which not everyone would find funny *sigh*
	    Hey, I found it funny but ... it really shouldn't be in the beta.

2001-01-26 23:05  db

	* TODO:
	  - updated TODO list

2001-01-26 22:53  db

	* include/send.h, modules/core/m_kill.c, modules/core/m_nick.c,
	  src/s_user.c, src/send.c:
	  - changed code to send UID's for KILL's when possible.
	  - changed direct reference to id to ID macro in send.c

2001-01-26 18:16  db

	* contrib/: spy_stats_notice.c, stats_notice.c:
	  - corrected formatting
	  - added CVS $Id: fullhist.php,v 1.1 2005/11/03 18:52:18 adx Exp $ string in comments

2001-01-26 18:07  db

	* modules/core/m_kill.c, src/send.c:
	  - rewrote m_kill.c to use kill_client() in send.c noticed I had
	    the tests backwards in kill_client()

2001-01-26 17:55  wcampbel

	* README.FIRST, TODO, doc/example.conf, src/y.tab.c: Document the
	  requirements Update the TODO list Document the restricted auth {}
	  option

2001-01-26 17:40  jdc

	* modules/m_set.c: Cosmetical changes.

2001-01-26 15:45  db

	* include/send.h, src/send.c:
	  - added kill_client() for formatting up a KILL to an uid or nick as
	    needed unused function at the moment.

	  - added send_trim()' sto sendto_one_prefix()

2001-01-26 15:40  androsyn

	* include/fdlist.h: Fixed minor issue of #include ordering...

2001-01-26 14:56  androsyn

	* src/s_bsd.c: Fixed stupid /connect bug where hostname was not an
	  IP address.

2001-01-26 13:30  jdc

	* doc/example.conf, src/ircd_parser.y: TYES/TNO flipped to make
	  default value for spoof_notice 'yes'.  This keeps us "compatible"
	  with hybrid-6.  doc/example.conf changed to contain spoof_notice
	  example.

2001-01-26 13:05  wcampbel

	* src/: lex.yy.c, y.tab.c, y.tab.h: Update yacc/lex files (is-
	  please remove!) Do NOT enable IPV6 by default!

2001-01-26 13:02  androsyn

	* include/config.h: Somebody thought it was funny to commit
	  config.h with #define IPV6 1

2001-01-26 12:47  jdc

	* include/s_conf.h, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_conf.c: 'spoof_notice' variable added to auth {} blocks.
	  Enables/disables notification for when a client's host is changed
	  via 'spoof'.

2001-01-26 12:10  androsyn

	* src/: irc_string.c, s_bsd.c: Fixes for identd checking for IPv6.

2001-01-26 07:33  androsyn

	* src/ircd_parser.y: Fixed compile error for IPv4.

2001-01-26 02:14  db

	* src/client.c:
	  - This fixes odd cores associated with accept code /quit and nick
	    changes...  ALL references to a client must be removed when it
	  exits!

2001-01-26 00:40  ejb

	* include/config.h, include/ircd_defs.h, src/irc_string.c,
	  src/ircd.c, src/res.c:
	  - does this make IPv6 work? let's see.

2001-01-25 22:11  wcampbel

	* TODO, doc/modeg.txt: Added the mode +g documentation.  Added
	  another user suggestion to the TODO list

2001-01-25 21:31  db

	* modules/: m_away.c, core/m_message.c:
	  - allow /away to take an /away off at any time, pace other /away
	  - do not reply to a notice with a notice!! in +g mode

2001-01-25 16:27  db

	* src/s_conf.c:
	  - cleaned up some logging that was just plain wrong
	    and changed references to c/n's to "connect blocks"

2001-01-25 16:00  fl_

	* BUGS, modules/m_stats.c:
	  - removed a fixed bug from bugs..
	  - till someone decides what the hell we're doing with stats p and
	    shide, we show users the reply..  I dont like the idea of noticing
	    all opers..  frankly, itd get annoying, and the MOTD usually gives
	    oper nicks/chans anyway, so..

2001-01-25 14:40  fl_

	* modules/core/m_server.c:
	  - opers shouldnt see IPs of servers connecting.. show them MASK_IP
	    instead

2001-01-25 14:24  db

	* modules/core/m_server.c:
	  - replaced confusing host with name, its a server name not a DNS
	  host name

2001-01-25 14:03  androsyn

	* src/: irc_string.c, s_auth.c: Fixes for ident when compiled for
	  IPv6

2001-01-25 12:32  androsyn

	* src/: match.c, s_user.c: Fixed ircd from complaining about ':' in
	  hostnames on connect.  I don't know if we want this to be on just
	  for IPv6, but its on for IPv4 as well.

2001-01-25 12:05  db

	* src/send.c:
	  - sendto_channel_remote_prefix() was using sendto_one when it
	    should have been using send_message() this caused it to nicely
	    core on #%s%s%s... as sendto_one() is varargs unlike
	    send_message() This probably also explains some odd bugs cropping up
	  with uids..

2001-01-25 11:49  androsyn

	* src/s_auth.c: Fixed ident checking for IPv4.  Ident *may* work
	  for IPv6 as well, but don't count on it

2001-01-25 06:42  ejb

	* include/config.h, src/lex.yy.c, src/s_conf.c, src/y.tab.c,
	  src/y.tab.h:
	  - some fixes for ipv4

2001-01-25 04:39  ejb

	* include/config.h, src/s_conf.c:
	  - fix to prevent coring on IPv4 connections.

2001-01-25 02:23  db

	* src/: channel.c, s_conf.c:
	  - fixed restricted auth blocks works the same as it does in h6 for
	  now
	  - fixed core on /squit *oops*

2001-01-25 01:26  db

	* include/numeric.h, include/s_conf.h, src/ircd_parser.y,
	  src/lex.yy.c, src/messages.tab, src/oldparse.c, src/s_conf.c,
	  src/s_serv.c, src/s_user.c, src/y.tab.c, src/y.tab.h:
	    ConfItem->name is what should be used for server names
	    fixing that caused a cascade of other bugs to show up.. neato

	  - first off, added numeric for RESTRICTED numeric.h, messages.tab
	  - added notification of restricted mode to s_user.c
	  - free and zero spasswd in free_conf() s_conf.c
	  - conf_add_server() should return an int, modifed s_conf.c s_conf.h
	    if it fails, it should also log() and not free any given aconf,
	    thats up to the caller
	  - fix ircd_parse.y to NOT ignore the result of conf_add_server
	    and to free etc. whatever on errors

2001-01-24 20:56  wcampbel

	* src/: ircd_parser.y, lex.yy.c, y.tab.c: Diane's fix for the
	  connect {} in the conf

2001-01-24 19:06  wcampbel

	* TODO, doc/operguide.txt: Added an updated operguide.txt from
	  Riedel and added Riedel's auth specific motd suggestion to TODO

2001-01-24 19:05  db

	* modules/m_accept.c, src/client.c:
	  - don't allow /accept server. Redundant check in client.c

2001-01-24 16:40  davidt

	* include/ircd_defs.h, include/s_conf.h, src/irc_string.c,
	  src/lex.yy.c, src/list.c, src/listener.c, src/res.c, src/s_bsd.c,
	  src/s_conf.c, src/s_serv.c, src/y.tab.c, src/y.tab.h: IPv6 patch,
	  v2

2001-01-24 15:04  fl_

	* include/client.h, include/dline_conf.h, include/fdlist.h,
	  include/ircd_defs.h, include/mtrie_conf.h, include/patricia.h,
	  include/res.h, include/s_conf.h, modules/m_kline.c,
	  modules/m_testline.c, src/client.c, src/dline_conf.c,
	  src/irc_string.c, src/listener.c, src/mtrie_conf.c,
	  src/patricia.c, src/res.c, src/s_auth.c, src/s_bsd.c,
	  src/s_conf.c, src/s_serv.c, src/s_user.c:
	  - androsyn's ipv6 patch :)

2001-01-24 14:01  fl_

	* modules/m_lusers.c, src/s_user.c:
	  - removed a remote rate limit in lusers.. this should only be done
	    locally..
	  - if shide is on, we always report theres 1 server

2001-01-24 09:58  wcampbel

	* BUGS, Hybrid-team, README.small_nets, RELNOTES, TODO,
	  contrib/README, doc/CIDR.txt, doc/LazyLinks.as.implemented.txt,
	  doc/LazyLinks.txt, doc/technical/Persistent_Clients.txt,
	  doc/technical/event.txt, doc/example.conf, doc/index.txt,
	  doc/kline.txt, doc/technical/message-customisation.txt,
	  doc/technical/network.txt, doc/operguide.txt, doc/opermyth.txt,
	  doc/opers.txt, doc/technical/send.txt, doc/server-version-info,
	  doc/simple.conf, doc/whats-new.txt,
	  doc/technical/whats-new-code.txt, include/config.h,
	  messages/custom.po, src/messages.tab, tools/rsa_respond/README:
	  Ran all the docs through ispell

2001-01-24 09:10  db

	* include/client.h, include/s_conf.h, modules/m_oper.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/lex.yy.c, src/s_conf.c,
	  src/s_serv.c, src/y.tab.c, src/y.tab.h:
	  - partially added in "restricted=yes/no" in auth blocks
	    this is the old little i line support. Needs code in channel.c in
	    set_mode()
	  - added code to use crypt() in server passwords depending on
	    encrypted=yes/no flag in connect block

2001-01-24 03:16  db

	* src/s_serv.c:
	  - This code will need to be revisted for IPv6, but it at least works
	  now.

2001-01-24 02:49  db

	* modules/m_whowas.c, src/s_serv.c:
	  - m_whowas.c was referencing ConfigFileEntry intead of ServerInfo
	    causing a core. oops.
	  - cleaned up check_server() in s_serv.c, this is probably why
	    irc.efnow.net had connect problems.

2001-01-23 22:25  wcampbel

	* modules/core/m_server.c: Fixed spelling errors (Noticed by
	  Jonathan Roes)

2001-01-23 22:10  db

	* include/s_conf.h, modules/core/m_sjoin.c, src/ircd_lexer.l,
	  src/ircd_parser.y:
	  - removed the loop unrolling ... made it hard to read, also hid a
	    bug and loop unrolling is for the compiler to do.
	  - added no_hack_ops in serverinfo block, once set it will not
	    allow anyone to hack ops from your server. no way, no how.

2001-01-23 17:36  ejb

	* include/s_serv.h, src/lex.yy.c, src/s_auth.c:
	  - remove some remanants of splitcode

2001-01-23 00:01  db

	* modules/m_info.c, modules/m_whois.c, src/channel.c:
	  - this fixes paul's /whois core. basically, network_name,
	    network_desc moved from ConfigFileEntry to ServerInfo. These two
	    modules weren't changed somehow to use the new structs. *oops*

2001-01-22 23:48  wcampbel

	* TODO, src/s_conf.c: Fixed the off by 1 error in the syntax error
	  in the conf notice

2001-01-22 19:42  ejb

	* include/client.h, include/dline_conf.h, include/fdlist.h,
	  include/irc_string.h, include/ircd_defs.h, include/mtrie_conf.h,
	  include/patricia.h, include/s_conf.h, modules/m_kline.c,
	  modules/m_testline.c, src/client.c, src/dline_conf.c,
	  src/irc_string.c, src/ircd.c, src/ircd_parser.y, src/ircdauth.c,
	  src/lex.yy.c, src/listener.c, src/mtrie_conf.c, src/patricia.c,
	  src/s_auth.c, src/s_bsd.c, src/s_conf.c, src/s_serv.c,
	  src/s_user.c, src/y.tab.c, src/y.tab.h:
	  - initial commit of androsyn's ipv6 code, hacked up so it compiles.
	    it accepts a connection, but doesn't get further than the initial
	    connection, seems an fd is being weirded somewhere.

2001-01-22 17:03  fl_

	* modules/core/m_message.c:
	  - fixes opers@server and ident%host@server..
	  - I didnt add users@server, as we if people really want it, they can
	    use notice $server..

2001-01-22 15:33  fl_

	* BUGS, TODO:
	  - documented the double notice "feature".. IMO admins can live with
	    it, it should be the least of their worries..

2001-01-22 14:43  db

	* include/client.h, modules/m_accept.c, src/client.c:
	  - just tidy ups while debugging the accept core

2001-01-22 05:36  toot

	* modules/m_eob.c: did it again :P

2001-01-22 05:31  toot

	* src/s_misc.c: missed a bit

2001-01-22 05:22  toot

	* modules/m_eob.c, src/s_misc.c: fixed formatting shite in /time
	  and EOB message

2001-01-21 23:47  wcampbel

	* src/dline_conf.c: Changed some debugging code logging to L_NOTICE
	  to L_DEBUG

2001-01-21 23:18  lusky

	* include/memory.h, include/motd.h, src/dline_conf.c,
	  src/modules.c:
	  - removed XOPEN_SOURCE defines.  If you REALLY need these, it needs
	    to be detected by autoconf and specified in the CFLAGS--XOPEN_SOURCE
	    *must* be defined before you parse any system includes.
	  - fixed a couple of pedantic compile warnings, there are still more.

2001-01-21 20:28  wcampbel

	* TODO, doc/example.conf: Updated the docs to be with the present
	  status of the conf parser.  Also noted a few minor bugs and issues
	  into the TODO file

2001-01-21 18:55  db

	* src/: ircd.c, s_conf.c:
	  - fixed virtual host

2001-01-21 14:54  db

	* src/: lex.yy.c, y.tab.c, y.tab.h:
	  - can we remove these files, pulease?

2001-01-21 14:25  spookey

	* src/s_conf.c:
	   - rehash dns on full rehash

2001-01-21 14:21  db

	* include/client.h, include/s_conf.h, src/client.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/mtrie_conf.c,
	  src/packet.c:
	  - removed some unused definitions notably NONL was not used due to
	    adrians new line parse code.
	  - added gline_exempt to parser, not fully implemented, but europe
	    efnet want support for it.

2001-01-21 11:58  davidt

	* include/channel.h: updated depend, removed unused 'serverMask'
	  from struct Channel (lazyLinksChannelExists is what everything
	  should (and does) use....

2001-01-21 10:06  toot

	* modules/core/m_kick.c: changed the default kick msg to the
	  nickname of who's getting kicked, rather than the kicker's..  this
	  makes chanmode +a a little more effective

2001-01-21 08:02  davidt

	* modules/core/m_sjoin.c:
	  - Various fixes to sjoin..
	    The only one I can remember is "MODE #chan +h halfops" wasn't
	    being sent..  I need a new memory.

2001-01-21 07:33  davidt

	* src/channel.c: Missing space in parabuf_hops_id, caused
	  desyncs/error messages and other bad things

2001-01-21 07:26  davidt

	* src/parse.c: Send KILL for unknown IDs, not an SQUIT

2001-01-20 16:02  wcampbel

	* TODO: Updated TODO a little

2001-01-20 13:08  wcampbel

	* BUGS: Bug 1 is partially fixed and shouldn't be publicized

2001-01-20 12:57  davidt

	* modules/m_kline.c:
	  - Change "%s: %s" to "%s :%s" to fix remote klines

2001-01-20 12:35  fl_

	* modules/core/m_server.c:
	  - ambiguous messages are bloody annoying..

2001-01-20 11:00  davidt

	* src/parse.c: Re-enable the warnings for servers sending us
	  numerics, it shouldn't happen [except 'Register First' numerics,
	  when we send a old server a NOTICE AUTH :*** ... message whilest
	  it's connecting to us], and they indicate bugs..

2001-01-20 09:40  davidt

	* src/vchannel.c: Argh.  argh. always test compile something, no
	  matter how simple it is....

2001-01-20 09:33  db

	* include/s_conf.h, src/ircd_lexer.l, src/ircd_parser.y,
	  src/lex.yy.c, src/y.tab.c, src/y.tab.h:
	  - fixed memory leak in new listen {} code
	  - added max_clients = in serverinfo block

2001-01-20 09:25  davidt

	* src/vchannel.c: Fix silly warning

2001-01-20 08:58  fl_

	* modules/core/m_sjoin.c:
	  - the sjoin part to the vchan bug.. altho its still possible to make
	    fake vchans if youre timing is right :/

2001-01-20 08:49  davidt

	* modules/core/m_part.c, src/vchannel.c:
	  - Tidy up m_part.c (merge vchan/nonvchan stuff into the same code,
	    so we aren't duplicating stuff everywhere)
	  - Make sure ##vchannel_1234 has a TS of 1234 when we create it with
	    CJOIN, fl- is doing the same for SJOIN i think :)

2001-01-20 05:57  toot

	* src/: ircd.c, numeric.c: fixed compile error with gettext..
	  needed config.h included before the #ifdef..

2001-01-20 05:43  toot

	* src/: patricia.c, s_bsd_poll.c: fixed a compile warning removed
	  an old hacky #define which is fixed better now

2001-01-20 02:43  db

	* include/s_conf.h, src/ircd_parser.y, src/lex.yy.c, src/s_conf.c,
	  src/y.tab.c:
	  - removed a totally useless function..
	    add_listener() is now called directly from the parser.. no need to
	    through gyrations. *BLOAT*
	    This cleans up the parser a bit more as well.

2001-01-20 02:25  db

	* include/s_conf.h, modules/m_admin.c, src/ircd.c,
	  src/ircd_parser.y, src/lex.yy.c, src/s_conf.c, src/y.tab.c:
	  - removed CONF_ADMIN dumb dumb dumb, now its just AdminInfo struct

2001-01-20 01:48  db

	* include/s_conf.h, modules/m_oper.c, modules/m_stats.c:
	  - removed CONF_OPS from s_conf.h , its all CONF_OPERATOR now,
	    removed CONF_LOCOP while at it.

2001-01-20 01:38  db

	* src/: lex.yy.c, y.tab.c, y.tab.h:
	  - updated new lex.yy.c y.tab.c y.tab.h

2001-01-20 01:28  db

	* include/s_conf.h, modules/m_cjoin.c, modules/m_client.c,
	  modules/m_info.c, modules/m_invite.c, modules/m_ison.c,
	  modules/m_join.c, modules/m_list.c, modules/core/m_kill.c,
	  modules/core/m_message.c, modules/core/m_mode.c,
	  modules/m_names.c, modules/m_nburst.c, modules/core/m_nick.c,
	  modules/core/m_server.c, modules/core/m_sjoin.c,
	  modules/m_topic.c, modules/m_version.c, modules/m_who.c,
	  modules/m_whois.c, src/client.c, src/ircd.c, src/ircd_parser.y,
	  src/ircdauth.c, src/s_conf.c, src/s_serv.c, src/s_user.c,
	  src/send.c, src/y.tab.c:
	  - changed ConfigFileEntry.hub to ServerInfo.hub
	  - removed CONF_ME (ick) no more ConfItem for "me" its all in
	    one ServerInfo struct now.
	  - modified parser to use ServerInfo struct
	  - I couldn't stand it any more. sorry.

2001-01-19 16:56  adrian

	* src/s_bsd_poll.c:


	  * Kill the POLLREADFLAGS/POLLWRITEFLAGS/POLLERRORS gunk. God I hated
	    that

	  * replace it with something that makes a tad more sense-
	    - check all the various flags on return from poll() to catch all
	      IO types. Yes, all the IO types will be defined in most useful
	      OSes even if it only pays attention to one of them
	    - define POLLRDFLAGS as POLLIN and POLLWRFLAGS as POLLOUT for
	      older broken linux boxen

2001-01-19 12:36  db

	* modules/core/m_kill.c:
	  - just a spelling mistake in a comment, but I couldn't take it any
	    more! "automaticly"

2001-01-19 06:42  adrian

	* src/: lex.yy.c, s_bsd_select.c:

	  && != &

	  *sigh* commiting whilst sick.. :)

2001-01-19 06:04  adrian

	* src/s_bsd_select.c:

	  use the delay value when calling select(), rather than my hard-coded
	  value of '1'.

2001-01-19 05:59  adrian

	* src/s_bsd_select.c:

	  && != || :)

2001-01-19 05:52  adrian

	* src/s_bsd_select.c:

	  Initial pass at the select code rewrite.

	  * it isn't multilist like the poll code. that would be kind of
	    stupid considering that the fd set size is a function of the maximum
	    open fd, rather than the number of fds in a "set".

	  * for some reason the compiler on my laptop is smoking heavy crack
	    with hybrid-7 now. It seems to work, but debugging shows a lot of
	    gremlins.  I'll try it on my -stable box now that I'm back online
	    and fix any last minute bugs.

2001-01-19 02:39  ejb

	* src/: ircd.c, lex.yy.c, numeric.c, y.tab.c, y.tab.h:
	  - fixed placement of libintl.h in ircd.c/numeric.c

2001-01-19 02:20  ejb

	* README.VMS, modules/core/m_kill.c:
	  - typo in readme.vms
	  - fix logging in m_kill.c

2001-01-19 01:37  db

	* modules/core/: m_kill.c, m_message.c:
	  - committed androsyn' fix for m_message.c non ops should not be able
	    to message @#

	  - cleaned up m_kill.c a bit I hope... users should see just kill
	  reasons.

2001-01-18 23:06  db

	* modules/m_stats.c:
	  - fixed warped logic in m_stats.c, didn't allow stats L of anything

2001-01-18 22:15  db

	* src/s_log.c:
	  - made buffer smaller at the suggestion of bysin, earlier syslogs
	  could overflow

2001-01-18 22:12  wcampbel

	* TODO: Updated my TODO list

2001-01-18 22:11  wcampbel

	* src/dline_conf.c: Committed AndroSyn's fixed dline_conf.c

2001-01-18 21:42  db

	* src/: dline_conf.c, send.c:
	  - added /stats K for IP and D lines as done by androsyn
	  - corrected format bug in send.c found by bysin

2001-01-18 19:35  wcampbel

	* TODO: Updated my TODO list (sorry for the extra commit, working
	  in multiple trees here)

2001-01-18 19:30  db

	* include/patricia.h, include/s_conf.h, modules/m_info.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/lex.yy.c,
	  src/mtrie_conf.c, src/y.tab.c, src/y.tab.h:
	  - removed e_line_opers_only f_line_opers_only etc.
	    updated parser

2001-01-18 19:26  wcampbel

	* INSTALL, README.FIRST, TODO, contrib/README, doc/opers.txt,
	  doc/server-version-info, doc/whats-new.txt, tools/README: Misc
	  documentation fixes

2001-01-18 16:46  db

	* include/dline_conf.h, include/patricia.h, src/Makefile.in,
	  src/dline_conf.c, src/patricia.c, src/s_conf.c:
	  - initial commit of patricia code a decent trie for dlines/ip klines
	    etc.  work done by androsyn...

2001-01-18 16:27  wcampbel

	* doc/example.conf: Removed references to STATS/STATS p/LINKS
	  notices in the general block

2001-01-18 16:12  db

	* src/: lex.yy.c, y.tab.c:
	  - committed new y.tab.c lex.yy.c

2001-01-18 15:53  db

	* include/s_conf.h, modules/m_info.c, src/ircd_lexer.l,
	  src/ircd_parser.y:
	  - removed links_notice stats_notice whois_notice from conf, these
	    are handled by hooks now.

2001-01-18 15:06  davidt

	* include/s_conf.h, modules/m_motd.c: Reorder headers in
	  modules/m_motd.c to fix compile error on linux

2001-01-18 14:06  davidt

	* modules/core/m_message.c, src/lex.yy.c, src/send.c: Fixes to
	  m_message.c for lazylinks Make send.c reentrant, to fix problems
	  with calling client_burst_if_needed from inside various sendto_*
	  functions.

2001-01-18 12:38  ejb

	* src/: lex.yy.c, s_conf.c, s_debug.c:
	  - oops, better make it compile on unix too..

2001-01-18 12:32  ejb

	* README.VMS, include/channel.h, include/client.h,
	  include/irc_string.h, include/ircd.h, include/mtrie_conf.h,
	  include/res.h, include/s_bsd.h, include/s_conf.h,
	  include/s_stats.h, include/whowas.h, src/channel.c, src/class.c,
	  src/client.c, src/hash.c, src/ircd.c, src/listener.c, src/motd.c,
	  src/mtrie_conf.c, src/numeric.c, src/oldparse.c, src/parse.c,
	  src/restart.c, src/s_auth.c, src/s_bsd.c, src/s_conf.c,
	  src/s_debug.c, src/s_log.c, src/s_misc.c, src/s_serv.c,
	  src/s_stats.c, src/s_user.c, src/send.c, src/vchannel.c,
	  src/whowas.c:
	  - fix typoes in README.VMS
	  - now, src/* should compile fine on VMS with DECC compiler (with the
	    exception of res.c and s_bsd_select.c)

2001-01-18 08:08  ejb

	* make.com, include/res.h, include/s_bsd.h, src/descrip.mms,
	  src/restart.c, src/s_auth.c, src/s_bsd.c, src/s_conf.c,
	  src/s_debug.c, src/s_log.c, src/s_misc.c:
	  - some more fixes for VMS CC.

2001-01-18 05:54  ejb

	* README.VMS, make.com, include/res.h:
	  - added README.VMS and make.com
	  - minor compile for for VMX.

2001-01-18 04:07  ejb

	* include/config.h, include/dline_conf.h, include/ircd_defs.h,
	  include/modules.h, include/motd.h, include/res.h,
	  include/s_conf.h, include/send.h, include/setup.h_vms,
	  include/whowas.h, src/blalloc.c, src/descrip.mms,
	  src/dline_conf.c, src/fileio.c, src/hook.c, src/irc_string.c,
	  src/ircd.c, src/ircd_signal.c, src/ircdauth.c, src/lex.yy.c,
	  src/linebuf.c, src/md5.c, src/memory.c, src/modules.c,
	  src/parse.c, src/s_bsd.c, src/s_bsd_poll.c, src/s_bsd_select.c,
	  src/s_conf.c, src/s_user.c, src/y.tab.c, src/y.tab.h:
	  - start of VMS port .. doesn't work yet, we need
	    - res.c to use BIND8 (VMS does not support BIND4 compatibility)
	    - s_bsd_select.c to work
	  - include the output of yacc/bison in the distribution, for people
	    without yacc/lex (including VMS ..)

2001-01-17 21:34  db

	* include/client.h, modules/core/m_nick.c, src/client.c:
	  - fixed /nick changes so they are removed from accept lists of
	    any client that happens to have that nick on its accept list.
	    This stops someone from tracking nick changes using /accept *

	  - discovered bug in del_all_accepts()

	  - renamed misnomer in prototypes

2001-01-17 19:42  fl_

	* src/modules.c:
	  - shouldnt really leave debug code in when I commit stuff..

2001-01-17 19:34  fl_

	* contrib/m_clearchan.c, contrib/m_jupe.c, contrib/m_opme.c,
	  modules/m_connect.c, modules/core/m_squit.c:
	  - removed the last occurences of sendto_local_opers, replaced with
	    sendto_realops_flags_opers().. ta hwy ;)

2001-01-17 19:00  wcampbel

	* doc/example.conf, doc/modes.txt, doc/whats-new.txt,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c:
	  1. Updated documentation
	  2. Added 'locops' to the oper only umodes in the conf parser
	  3. Updated the oper_flags_as_string() function (which will be used
	     again once the ability to specify usermodes set by default in an
	     oper block is added in (NOTE:  if you add to this function, watch
	  the buffer size)

2001-01-17 18:27  fl_

	* src/modules.c:
	  - you can now specify a path in /modload and have it work :)

2001-01-17 17:56  fl_

	* doc/technical/send.txt:
	  - im tired.

2001-01-17 17:55  fl_

	* doc/: opers.txt, technical/send.txt:
	  - speaking of documentation..

2001-01-17 17:49  fl_

	* include/client.h, include/send.h, modules/m_locops.c,
	  modules/m_operwall.c, modules/m_wallops.c, src/s_user.c,
	  src/send.c:
	  - added +l for locops
	  - removed sendto_local_opers, replaced it with
	  sendto_realops_flags_opers
	  - therell be summat else.. I should really document it too..

2001-01-17 17:36  davidt

	* src/send.c: Fixed format bug found by bysin in ts_warn.

2001-01-17 14:35  davidt

	* include/listener.h, src/listener.c, src/s_bsd.c, src/s_conf.c:
	  Fix /rehash of listen{}; blocks.  We still keep old listeners around
	  until all clients 'using' them quit.  Currently s_user.c refers to
	  localClient->listener, nothing else seems to need it.

2001-01-17 14:28  fl_

	* src/channel.c:
	  - fixed a bug toyota found with +v not showing up in /names on anon
	  chans

2001-01-17 14:04  db

	* src/client.c:
	  - ping time out should use %d not %lu, cast it to int

2001-01-17 12:23  ejb

	* src/: hook.c, ircd.c:
	  - fix problem with hooks, need init_hooks() *before*
	  load_all_modules().

2001-01-17 01:02  toot

	* src/s_misc.c: fixed timestamp in ircd.log

2001-01-16 23:19  ejb

	* src/hook.c:
	  - another possible fix

2001-01-16 23:02  ejb

	* include/hook.h:
	  - se ebelow

2001-01-16 23:01  ejb

	* src/: hook.c, ircd.c:
	  - added hook_init, set hooks to zero at startup

2001-01-16 11:56  wcampbel

	* tools/mkpasswd.c: Fixed a compiler warning on Solaris

2001-01-16 10:57  ejb

	* contrib/: links_notice.c, spy_links_notice.c:
	  - commit links_notice.c

2001-01-16 10:41  db

	* src/sprintf_irc.c:
	  - reverted sprintf_irc.c
	    The entire point of sprintf_irc is to be much faster than sprintf
	    not to be a complete replacement for it. Treat it as another
	    function entirely that has a similar name.

2001-01-16 10:16  wcampbel

	* contrib/.depend: Updated .depend's

2001-01-16 04:00  db

	* src/: client.c, s_bsd.c:
	  - fix to check_pings, this probably explains some of the odd
	    cores...  ptr->next is corrupt at times after an exit_client
	  - tidied up the comm_open() comm_accep() error handling

2001-01-15 17:43  ejb

	* contrib/Makefile.in, include/hook.h, modules/m_links.c:
	  - added links_notice.so

2001-01-15 16:36  fl_

	* modules/m_links.c:
	  - removed an unneeded if()

2001-01-15 16:20  fl_

	* modules/m_links.c:
	  - fixes to not show server IPs in /links to opers

2001-01-15 12:05  db

	* include/client.h, src/client.c, src/res.c, src/s_auth.c,
	  src/s_bsd.c, src/tools.c:
	  - This fixes one of the nasty assert errors. comm_open() and
	    comm_accept() were both returning ENFILE instead of -1, which
	    happens to be 23.. This was seen as a valid fd. This was obviously
	  quite wrong. (s_bsd.c)

	  - removed numerous debugging code in other files.

2001-01-15 09:51  ejb

	* src/modules.c:
	  - slight cleanup to modrestart.

2001-01-15 09:43  ejb

	* contrib/Makefile.in, contrib/spy_stats_notice.c,
	  contrib/stats_notice.c, modules/m_stats.c:
	  - finished stats_notice.so

2001-01-15 09:32  ejb

	* modules/m_accept.c:
	  - don't let people flood by accepting them more than once.

2001-01-15 09:27  ejb

	* contrib/spy_stats_notice.c, contrib/stats_notice.c,
	  include/hook.h, modules/m_stats.c:
	  - initial stats_notice.so, not finished yet.

2001-01-15 09:20  wcampbel

	* tools/README.mkpasswd: And the docs too

2001-01-15 09:17  wcampbel

	* tools/mkpasswd.c: Committed a bug fixed mkpasswd.c (also
	  generates a more secure MD5 salt)

2001-01-15 08:28  ejb

	* contrib/.depend, contrib/Makefile.in, contrib/spy_whois_notice.c,
	  contrib/whois_notice.c, include/hook.h, modules/m_whois.c,
	  src/Makefile.in, src/hook.c:
	  - added hook support for modules
	    only has one hook so far, doing_whois, which is used for
	    whois_notice.so (in contrib).

2001-01-14 17:42  fl_

	* doc/opers.txt:
	  - documented /modrestart

2001-01-14 17:32  fl_

	* include/modules.h, src/ircd.c, src/modules.c:
	  - we now have a fully working, unobtrusive modrestart command

2001-01-13 17:04  fl_

	* src/modules.c:
	  - added the beginnings of a modrestart command
	    be warned:
	    this command will atm generate about (roughly) 120 notices telling
	    you which have been unloaded and which have been reloaded, but im
	    tired and gunna finish it tomorrow
	  - because of that I didnt document it :), thatll come tomorrow

2001-01-13 11:33  lusky

	* tools/README: test commit

2001-01-12 19:19  davidt

	* modules/core/m_sjoin.c: Add channel name to bogus TS message

2001-01-12 02:11  a1kmm

	* src/: blalloc.c, client.c, fdlist.c, res.c, s_auth.c:
	  - Made some minor modifications to help catch bugs like frobbing the
	  blockalloced stuff.

2001-01-11 20:22  ejb

	* include/md5.h, src/md5.c:
	  - possible fix for uint32_t problem

2001-01-11 19:05  a1kmm

	* src/blalloc.c:
	  - Do not show the blocks 0s old(like the ones from sendto_one!) so
	  we don't get in a loop.

2001-01-11 18:26  a1kmm

	* src/: s_misc.c, sprintf_irc.c:
	  - We now support %nu and %0nu (sort of, they are equivalent) in
	  sprintf_irc.

2001-01-11 17:34  davidt

	* src/client.c: report errors freeing localClient too

2001-01-11 16:51  a1kmm

	* src/: blalloc.c, client.c:
	  - Fixed a bug where we frob and then use something.
	  - Initialise the last to NULL, since we don't MemSet...

2001-01-11 16:10  a1kmm

	* src/blalloc.c:
	  - Fixed the blockallocator more, it looks like a double free is
	  still there, however.

2001-01-11 15:36  a1kmm

	* src/res.c:
	  - Fixed DNS to work(and leak :( ) again.

2001-01-11 15:17  a1kmm

	* include/blalloc.h, src/blalloc.c:
	  - Fixed dependencies and ensure we never mix debug and non-debug
	  BlockHeap code.

2001-01-11 14:51  a1kmm

	* src/blalloc.c: fixed a minor bug in the block free debugging
	  code.

2001-01-11 14:42  a1kmm

	* include/blalloc.h, include/memory.h, src/blalloc.c, src/memory.c,
	  src/res.c:
	  - Added block allocator memory debugging.
	  - Fixed MyRealloc()
	  - Fixed resolver back.

2001-01-11 04:30  a1kmm

	* include/irc_string.h, include/sprintf_irc.h, modules/m_eob.c,
	  modules/m_kline.c, src/Makefile.in, src/client.c, src/ircd.c,
	  src/ircd_parser.y, src/memory.c, src/motd.c, src/mtrie_conf.c,
	  src/res.c, src/rsa.c, src/s_log.c, src/s_misc.c, src/vchannel.c:
	  - Fixed some memory leaks and some potential buffer overflows and
	  some compiletime warnings.

2001-01-11 02:48  a1kmm

	* src/: ircd_lexer.l, ircd_parser.y, s_conf.c: Cleaned up some of
	  the memory leaks - nothing seems to leak from the parser or the
	  lexer, but there still are leaks on rehash.

2001-01-11 00:31  a1kmm

	* include/irc_string.h, include/ircd_defs.h, include/memdebug.h,
	  include/memory.h, include/modules.h, modules/m_dmem.c,
	  modules/core/m_message.c, modules/m_whois.c, modules/m_whowas.c,
	  src/Makefile.in, src/blalloc.c, src/channel.c, src/class.c,
	  src/client.c, src/dline_conf.c, src/event.c, src/fdlist.c,
	  src/fileio.c, src/hash.c, src/irc_string.c, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/ircd_signal.c,
	  src/ircdauth.c, src/linebuf.c, src/list.c, src/listener.c,
	  src/m_error.c, src/match.c, src/memdebug.c, src/memory.c,
	  src/modules.c, src/motd.c, src/mtrie_conf.c, src/numeric.c,
	  src/oldparse.c, src/packet.c, src/parse.c, src/res.c,
	  src/restart.c, src/rsa.c, src/s_auth.c, src/s_bsd.c,
	  src/s_bsd_kqueue.c, src/s_bsd_poll.c, src/s_bsd_select.c,
	  src/s_conf.c, src/s_debug.c, src/s_gline.c, src/s_log.c,
	  src/s_misc.c, src/s_serv.c, src/s_stats.c, src/s_user.c,
	  src/scache.c, src/send.c, src/sprintf_irc.c, src/tools.c,
	  src/vchannel.c, src/whowas.c: Improved memory debugging so it
	  actually works.

2001-01-10 17:59  db

	* include/channel.h, include/mtrie_conf.h, modules/core/m_sjoin.c,
	  src/channel.c, src/mtrie_conf.c:
	  - this removes the last remnant of bogus ban removal code..
	    this should be done using another cleaner mechanism. blah.
	  - cleaned up mtrie_conf.c slightly

2001-01-10 13:31  wcampbel

	* doc/simple.conf: Removed a reference to md5mkpasswd

2001-01-10 13:27  db

	* include/mtrie_conf.h, modules/m_stats.c, src/mtrie_conf.c:
	  - first pass at cleaning up mtrie_conf.c

2001-01-10 13:21  wcampbel

	* tools/README.mkpasswd: Added the documentation for the new
	  mkpasswd

2001-01-10 10:08  db

	* src/: channel.c, client.c:
	  - cleanups to client.c and channel.c
	    removed unnecessary function call, reformatted some code blocks
	    removed unused variable

2001-01-09 21:37  wcampbel

	* Makefile.in: Make clean and distclean descend into iauth and
	  contrib

2001-01-09 21:24  db

	* src/client.c:
	  - unnecessary loop removed for now

2001-01-09 20:00  toot

	* src/: listener.c, res.c: removed old NULL_POINTER_NOT_ZERO
	  #defines

2001-01-09 18:48  db

	* src/parse.c:
	  - removed unneeded space in parse.c, do_numeric() this caused
	    remote numerics to show up with an obvious extra space.

	    due to this -> ircsprintf(t," :%s", parv[parc-1]);

2001-01-09 15:23  wcampbel

	* modules/m_trace.c: We now show incomplete (unknown) connections
	  in TRACE to opers

2001-01-09 15:01  wcampbel

	* modules/m_info.c: All of the variables are shown in INFO now
	  (except for oper_only_umodes)

2001-01-09 14:11  wcampbel

	* doc/example.conf, doc/whats-new.txt, modules/m_info.c:
	  1. Some doc cleanup
	  2. Added some more variables to INFO...When I'm done, I will
	     alphabetize them...right now...they are NOT in any semblence of
	  order

2001-01-09 10:10  db

	* src/: s_auth.c, s_user.c:
	  - fixed backwards confusing if's on fd
	  - make sure CLIENT_EXITED is returned in s_user.c

2001-01-09 09:47  wcampbel

	* modules/m_ping.c: Sending PING :<any text> should return
	  :<server> PONG <server> :<same text sent in> NOT :<server> PONG
	  <server> :cptr->name

2001-01-08 22:02  wcampbel

	* contrib/Makefile.in, modules/Makefile.in,
	  modules/core/Makefile.in, src/Makefile.in: Fixed the
	  .depend's...We'll get a couple error messages when we run make
	  depend now, but at least system libs (rsa.h) in /usr/local/lib on
	  FreeBSD will not be included in the .depend's.

2001-01-08 21:18  wcampbel

	* contrib/m_opme.c: Minor fix of a NOTICE in opme

2001-01-08 19:54  toot

	* include/m_info.h, src/client.c, src/listener.c: put the DLine
	  notices back in..

2001-01-08 19:33  db

	* include/config.h, include/config.h.dist, modules/core/m_quit.c,
	  src/client.c, src/listener.c:
	  - removed two more #ifdef's from config.h

2001-01-08 19:12  fl_

	* src/client.c:
	  - guess we werent meant to make that change then, reverted it, it
	     was coring the ircd even worse

2001-01-08 18:40  fl_

	* src/client.c:
	  - changed an -1 < to 0 > which should fix a core..

2001-01-08 18:30  fl_

	* src/s_auth.c:
	  - commited dianes fix, modified slightly :)

2001-01-08 17:34  db

	* src/res.c:
	  - don't assume a client is only listed once in the request_list,
	    there might be a forward as well as reverse pending in the same
	    list.  Hope this fixes the assert() bug
	  - rewrote delete_resolver_queries to do the search and removal of
	    clients in one step instead of calling rem_request.

2001-01-08 16:26  wcampbel

	* tools/: Makefile.in, README, md5mkpasswd.c, mkpasswd.c: Removed
	  my md5mkpasswd and added in a replacement mkpasswd that can (if the
	  system supports it) generate both MD5 and DES based passwords, more
	  docs will be coming...use ./mkpasswd -h to see the usage

2001-01-08 14:40  db

	* modules/core/m_server.c:
	  - don't show real ip's of any hosts to non admins in m_server

2001-01-08 10:47  db

	* include/client.h:
	  - added FLAGS_DRONE to ALL_UMODES

2001-01-08 10:45  wcampbel

	* doc/example.conf, src/ircd_lexer.l, src/ircd_parser.y: Added
	  action=silent; to gecos blocks, like old X:...:2

2001-01-08 10:36  db

	* include/s_auth.h, src/ircdauth.c, src/s_auth.c, src/s_bsd_poll.c:
	  - dlinked s_auth.c
	  - in doing so found a nasty bug in s_bsd_poll.c where it would
	    "walk" over previous word to pollfds since a negative index was
	  used... oops
	  - ircdauth.c will need some re-writes

2001-01-08 10:24  madmax

	* include/client.h: added FLAGS_DRONE to OPER_UMODES for +e

2001-01-08 09:58  toot

	* src/ircd_parser.y: fixed a memleak dianora found, when reading
	  modules from the config

2001-01-07 22:16  toot

	* src/: s_conf.c, s_gline.c: expire_gline/tklines wasn't removing
	  more than 1 entry at a time

2001-01-07 21:55  db

	* include/s_auth.h, src/ircdauth.c:
	  - auth poll list did not need to be global...
	    ircdauth.c references it atm, #if 0 for now... we'll have to
	    rethink how to do this.
	  - struct AuthRequest had a now unused index

2001-01-07 20:34  db

	* include/s_auth.h, include/send.h, src/client.c, src/messages.tab,
	  src/s_auth.c, src/s_bsd_poll.c, src/send.c:
	  - removed unused variable in m_kill.c
	  - resolved global shadowing in send.c
	  - ensure any client being identd' is removed by exit_client()
	  - i before e, except after c (spelling mistake in messages.tab)

2001-01-07 19:57  db

	* src/: client.c, res.c:
	  - this fixes an assert() failure if a client exits before DNS has
	    completed We forgot to delete_resolver_queries() in exit_client() in
	  client.c

	  - I rewrote res.c to use dlink's instead of home grown link list
	  code.

2001-01-07 19:04  fl_

	* modules/core/m_kill.c:
	  - removed unused variable

2001-01-07 18:03  db

	* modules/core/m_kill.c, src/client.c:
	  - client.c check_klines() was referencing bad ptr's due to the exit
	    client this is why it wasn't klining more than one client at a time.
	  oops.

	  - fixed m_kill so user just see's a "Disconnected" message instead
	    of the inflammatory "killed by oper message" (as per suggestion of
	    David Harmlein) *sigh* its sad we cannot have more oper
	    accountability to users, however, a significant proportion of
	    users are proving to be very nasty lusers....

2001-01-07 10:53  fl_

	* BUGS:
	  - removed a fixed bug from BUGS file..

2001-01-07 10:52  fl_

	* BUGS:
	  - documented issues with modunload, that we cant realistically fix..

2001-01-06 23:46  db

	* modules/core/m_kick.c:
	  - forgot a ':' in the notice telling chanops about an attempted kick
	    by a halfop. oops

2001-01-06 23:28  ejb

	* include/config.h, src/send.c:
	  - initial start on INVARIANTS support.

2001-01-06 23:27  db

	* src/s_conf.c:
	  - removed quoting code from the k/d parser... the k/d lines in that
	    file must never be generated by humans any more... and our /kline
	    code ensures no bogus # in the middle of the file.

2001-01-06 23:05  db

	* src/ircd_parser.y:
	  - removed a major memory leak I introduced. *sigh*
	    I had forgotten yylval.string is memory duplicated already in the
	    lexer.
	  - also removed a rule no longer used  (leaf_block)

2001-01-06 22:34  davidt

	* modules/core/m_message.c: Sigh, I was right.. fix %@+#chan stuff

2001-01-06 22:25  davidt

	* include/send.h, modules/m_join.c, modules/core/m_kick.c,
	  modules/core/m_kill.c, modules/m_knock.c, modules/m_topic.c,
	  modules/core/m_message.c, modules/core/m_sjoin.c, src/channel.c,
	  src/parse.c, src/send.c: Fixes for lazylinks kill Fixes for
	  privmsg/notice for vchans Fixed some odd stuff in set_channel_mode
	  that was wrong..  and i'm sure i probably broke something, since
	  it's 3:30am.. *sigh*

2001-01-06 22:18  wcampbel

	* modules/m_info.c: Added some more conf variables to INFO

2001-01-06 21:44  db

	* include/send.h, src/send.c:
	  - added missing prototype for sendto_one_prefix, prettied the code
	  slightly

2001-01-06 21:12  wcampbel

	* include/s_conf.h: Removed whois_notice and topic_uh from the
	  ConfigFileEntry struct, one no longer exists, the other is always
	  enabled, neither variable is used ANYWHERE in the source, more
	  bloat...

2001-01-06 20:58  wcampbel

	* BUGS, INSTALL, contrib/README, doc/example.conf, doc/opers.txt,
	  doc/whats-new.txt: Numerous documentation cleanups

2001-01-06 20:48  fl_

	* src/parse.c:
	  - dont warn about numerics sent to us from servers
	    theyre gunna be unavoidable with lazylinks and nick collides..

2001-01-06 20:01  fl_

	* contrib/: m_clearchan.c, m_jupe.c, m_opme.c:
	  - added logging, amongst other things to the contrib stuff

2001-01-06 19:09  fl_

	* contrib/m_opme.c:
	  - fix the compile warning

2001-01-06 13:25  davidt

	* modules/core/m_server.c: Yet another lazylinks fix.  Prevent a
	  lazyleaf introducing other servers, even if it has a matching
	  hub_mask...

2001-01-06 13:13  db

	* doc/example.conf, modules/core/m_server.c, src/ircd_lexer.l,
	  src/ircd_parser.y:
	  - fixed leaf server code, please read comments in m_server.c
	  - removed leaf{} block, its really unnecessary read above

2001-01-06 13:12  davidt

	* modules/m_whois.c: Fix m_whois for lazyleafs -- hubs were asking
	  leafs about unknown people

2001-01-06 12:46  davidt

	* modules/core/m_server.c, src/s_serv.c: Oops, sorry, discovered
	  the lazylinks code moved to m_server.c, but slightly broken. Fixed
	  it, and removed my duplicate code...

2001-01-06 12:21  davidt

	* src/ircd_parser.y: Fix for changing hub at runtime with active
	  lazylinks

2001-01-06 12:18  davidt

	* src/s_serv.c: Uh.  what happened to check_server? Restored the
	  lazylink code..

2001-01-06 11:58  fl_

	* src/s_user.c:
	  - fix for user passwords

2001-01-06 10:42  fl_

	* contrib/m_opme.c:
	  - removed some excess code I left

2001-01-06 10:33  fl_

	* contrib/m_jupe.c, contrib/m_opme.c, modules/core/m_server.c,
	  src/parse.c:
	  - added an IsServer() check in parse.c
	  - split up three identical error messages in m_server.c, so you knew
	    which one youre getting
	  - fixes for jupe/opme

2001-01-06 10:32  toot

	* doc/example.conf: put quiet_on_ban in example.conf

2001-01-06 08:42  db

	* contrib/m_clearchan.c:
	  - full prefix is needed for JOIN

2001-01-06 08:37  fl_

	* doc/example.conf, modules/m_whois.c:
	  - didnt know we had a whois_wait.. which was set too high anyway so
	    its now 1 (same as hyb6?)

2001-01-06 08:29  fl_

	* modules/m_whois.c:
	  - small fix of an if()

2001-01-06 08:13  fl_

	* modules/m_whois.c:
	  - fixes and added rate limiting to remote whois (whois nick nick)

2001-01-06 07:38  toot

	* modules/m_users.c, src/s_user.c: it doesn't break them :P  a
	  missing blank line hardly matters

2001-01-06 07:06  fl_

	* modules/m_users.c, src/s_user.c:
	  - we always need a local users reply, it breaks clients not to have
	    one, we just spoof it as the global reply

2001-01-06 01:17  ejb

	* contrib/: Makefile.in, README, m_opme.c:
	  - added m_opme.c
	  - updated README

2001-01-06 01:13  a1kmm

	* doc/example.conf:
	  - Added examples of leaf{}s to the example config file.

2001-01-06 00:28  ejb

	* src/: list.c, send.c:
	  - fix IDs being set to random shit.

2001-01-05 23:43  db

	* contrib/Makefile.in:
	  - added m_nickinfo, /quote nickinfo nick
	    will give back its ID and tsinfo for developers

2001-01-05 22:42  a1kmm

	* modules/core/m_server.c:
	  - Removed debug code I accidentally commited.

2001-01-05 22:35  a1kmm

	* modules/core/m_server.c, src/ircd_lexer.l, src/ircd_parser.y:
	  - Cleaned up m_server a bit to squit the right client on error.
	  - We now support a leaf{} block.

2001-01-05 22:33  ejb

	* include/client.h, include/send.h, modules/core/m_part.c,
	  src/hash.c, src/parse.c, src/send.c:
	  - fix IDs for parse()
	  - added sendto_channel_remote_prefix()
	  - make part use it.

2001-01-05 21:47  davidt

	* modules/core/m_part.c: sptr vs cptr, jeez, that was hard to
	  figure out.

2001-01-05 21:19  ejb

	* src/hash.c:
	  - remove hash debugging code

2001-01-05 21:18  ejb

	* src/s_user.c:
	  - make remote users actually get their ID set..

2001-01-05 21:09  toot

	* modules/m_stats.c: dont show connection count in /stats u with
	  shide

2001-01-05 20:44  ejb

	* src/: hash.c, s_user.c:
	  - dont ever put the nick into the ID field.

2001-01-05 20:41  toot

	* modules/m_whois.c: no reason to block remote /whois now

2001-01-05 18:53  davidt

	* include/client.h, modules/m_llnick.c, modules/core/m_nick.c,
	  src/client.c, src/s_user.c: LazyLink initial nick collsion stuff
	  I did earlier..

2001-01-05 18:45  ejb

	* include/client.h, src/channel.c, src/s_user.c:
	  - fix some more IDs stuff.

2001-01-05 18:18  ejb

	* src/parse.c:
	  - fix parse.c format error

2001-01-05 18:13  ejb

	* src/: hash.c, parse.c, s_user.c:
	  - finally fixed bug with IDs killing remote users.

2001-01-05 16:52  a1kmm

	* src/s_conf.c: Don't try and DNS resolve ConfItems with wildcards
	  in them.

2001-01-05 16:23  db

	* src/: messages.tab, s_user.c:
	  - added umode +e , requested by pryzm.. She wants a specialized
	    +c connect monitor for watching for drones... rather than modify
	    +c to give her the information she wants, I've added +e...
	    Possibly only useful to pryzm *sigh*

2001-01-05 15:37  toot

	* include/s_conf.h, src/channel.c, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y: . put quiet_on_ban option back in . got rid of
	  ircd.c compile warning

2001-01-05 15:16  toot

	* modules/m_knock.c: fixed vchans for /knock.. still needs to send
	  a notice to remote chan members though

2001-01-05 14:29  db

	* modules/core/m_server.c:
	  - This finally fixes host server masks.. though the match loop in
	    here probably should move into s_conf.c

2001-01-05 13:31  cosine

	* src/hash.c: another DEBUGMODE bandaid

2001-01-05 13:30  cosine

	* src/hash.c: minor fix for DEBUGMODE #ifdef

2001-01-05 12:19  ejb

	* src/: hash.c, s_serv.c:
	  - remove ID debugging code, fix.

2001-01-05 12:00  ejb

	* src/: hash.c, ircd.c, s_serv.c, s_user.c:
	  - fixed IDs (removed USE_IDS, why was this added?)

2001-01-05 11:32  toot

	* modules/m_knock.c, src/s_conf.c: set a default knock_delay if its
	  nto in ircd.conf

2001-01-05 11:16  db

	* include/s_conf.h:
	  - you can't safely re-use bitmasks!

2001-01-05 10:42  db

	* include/s_conf.h, modules/core/m_server.c, src/ircd_parser.y,
	  src/s_conf.c:
	  - removed BLOAT again add_hub_or_leaf was not necessary with
	    new conf format, only with old.
	  - aconf->name is NAME of server only not hostname not IP but the
	    actual name of the server on the net. switched them around in
	    HUB/LEAF code

2001-01-05 10:27  toot

	* modules/m_knock.c, src/client.c, src/event.c, src/s_user.c: .
	  changed some ugly %lu formating back to %d (caused compile warnings
	  before) . use ircd.conf knock_delay instead of hard-coded 30
	  seconds, for m_knock

2001-01-05 09:52  toot

	* contrib/m_jupe.c, include/client.h, modules/m_connect.c,
	  modules/m_whois.c, src/s_conf.c, src/s_user.c: . made +a umode
	    propagate and admins can -a/+a themselves too, again.  everything
	  except /whois uses the conf flags as a check, rather than the umode.
	  . for local connects, always show idle time if shide is off, and
	    always show opers, and show your Own idle time.

2001-01-05 09:51  wcampbel

	* doc/example.conf, doc/modes.txt, src/ircd_lexer.l,
	  src/ircd_parser.y: Document the usermode 'drone' '+e' and add
	  support in oper_only_umodes for it.

2001-01-05 09:25  wcampbel

	* contrib/README.HASH, doc/opers.txt: Removed references to HASH in
	  opers.txt, and added README.HASH containing the old HASH
	  documentation

2001-01-05 07:40  toot

	* modules/m_users.c, src/s_user.c: don't show the local user count
	  if it's just lies, cause of shide skip it instead

2001-01-05 07:27  toot

	* src/s_user.c: it's okay to show the Total server count with shide
	  on

2001-01-05 07:17  toot

	* src/s_conf.c: updated s_conf.c CVS was playing tricks on me :)

2001-01-05 07:05  toot

	* doc/opers.txt: updated opers.txt

2001-01-05 06:57  toot

	* configure, contrib/m_clearchan.c, include/s_conf.h,
	  modules/m_client.c, src/modules.c: . took out -pedantic compile
	  flag . put conf_add_hub_or_leaf() back in for now, cause
	  ircd_parser.y needs it . use parse() to check param counts for
	  m_client! :) . added /modreload, (modunload and modload in one)

2001-01-05 05:32  a1kmm

	* modules/core/m_server.c, src/ircd_parser.y, src/s_serv.c:
	  - Fixed H and L lines.

2001-01-05 04:11  db

	* include/s_conf.h, src/s_conf.c:
	  - removed more BLOAT conf_add_hub_or_leaf() is now gone.

2001-01-05 03:21  db

	* include/s_conf.h:
	  - removed obsolete Qline struct

2001-01-05 03:11  db

	* contrib/m_hash.c, contrib/m_jupe.c, modules/core/m_server.c,
	  src/client.c:
	  - fixed m_jupe.c so it will work without coring.

	  - fixed a possible nasty core in client.c, its possible a client
	    will be on the unknown_list and be exited there, without being
	    on a linklist... it will promptly core the server. oops.
	    since it has no prev next pointers.

	  - patched m_hash.c so it will compile. its not very useful ATM

2001-01-05 02:47  a1kmm

	* include/client.h, include/s_conf.h, modules/m_connect.c,
	  modules/m_stats.c, modules/core/m_server.c,
	  modules/core/m_squit.c, src/class.c, src/client.c,
	  src/ircd_parser.y, src/oldparse.c, src/s_bsd.c, src/s_conf.c,
	  src/s_serv.c: Separate C/N structures no longer exist, only one
	  with status CONF_SERVER.

2001-01-05 02:29  db

	* contrib/m_jupe.c:
	  - fixed m_jupe.c so it works now. /squit jupe when done

2001-01-05 01:46  spookey

	* doc/opers.txt:
	   - adds match string to modlist

2001-01-05 01:14  spookey

	* modules/m_client.c:
	   - fixes compile warning

2001-01-05 01:09  spookey

	* modules/m_pass.c:
	   - fixes core in m_pass (const char* not char*)
	   - removes /usr/local/include/rsa.h from .depend (why was this
	   here?)

2001-01-05 00:52  db

	* src/s_user.c:
	  - never commit until you have done a compile test. duh.

2001-01-05 00:46  fl_

	* modules/: m_connect.c, core/m_squit.c:
	  - remote connects are giving wallops properly, this should fix it

2001-01-05 00:43  db

	* include/client.h, src/channel.c, src/s_user.c:
	  - in the aop case, it was trying to send an UID for a server
	    missing IsServer(sptr) ? sptr->name :sptr->user->id

	  - started adding umode +e code to watch possible drones

2001-01-05 00:22  fl_

	* src/channel.c:
	  - we should sync oplists after that too..

2001-01-05 00:11  fl_

	* src/channel.c:
	  - allow halfops to -h themselves

2001-01-04 22:04  wcampbel

	* contrib/.depend, contrib/Makefile.in, contrib/README,
	  contrib/m_hash.c, modules/m_hash.c: Moved m_hash.c from modules
	  to contrib (it hasn't been installed for a while) Also updated
	  .depend's and documented the 3 modules we have in contrib

2001-01-04 21:25  davidt

	* src/s_user.c: where'd this little irc_strncpy go....

2001-01-04 21:19  davidt

	* include/channel.h, src/channel.c, src/s_user.c: oops, the rest of
	  the sjoin fixes, along with a fix for not updating the global client
	  count.

2001-01-04 21:15  a1kmm

	* modules/m_client.c: Added check that parc is not too small for
	  m_client.

2001-01-04 21:03  davidt

	* modules/core/m_sjoin.c: Fix sjoin for +a channels, again

2001-01-04 20:11  ejb

	* include/Makefile.in, include/send.h, src/channel.c, src/send.c:
	  - make set_channel_mode support IDs (not fully tested)

2001-01-04 19:14  davidt

	* include/msg.h, modules/m_accept.c, modules/m_admin.c,
	  modules/m_away.c, modules/m_capab.c, modules/m_cburst.c,
	  modules/m_challenge.c, modules/m_cjoin.c, modules/m_client.c,
	  modules/m_close.c, modules/m_connect.c, modules/m_dmem.c,
	  modules/core/m_die.c, modules/m_drop.c, modules/m_eob.c,
	  modules/m_error.c, modules/m_gline.c, modules/m_hash.c,
	  modules/m_help.c, modules/m_info.c, modules/m_invite.c,
	  modules/m_ison.c, modules/m_join.c, modules/core/m_kick.c,
	  modules/m_kline.c, modules/m_knock.c, modules/core/m_kill.c,
	  modules/m_links.c, modules/m_list.c, modules/m_lljoin.c,
	  modules/m_locops.c, modules/m_lusers.c, modules/m_motd.c,
	  modules/core/m_message.c, modules/core/m_mode.c,
	  modules/m_names.c, modules/m_oper.c, modules/m_operwall.c,
	  modules/core/m_nick.c, modules/m_pass.c, modules/m_ping.c,
	  modules/m_pong.c, modules/core/m_part.c, modules/m_rehash.c,
	  modules/m_restart.c, modules/core/m_quit.c,
	  modules/core/m_server.c, modules/m_set.c, modules/core/m_sjoin.c,
	  modules/core/m_squit.c, modules/m_stats.c, modules/m_svinfo.c,
	  modules/m_testline.c, modules/m_time.c, modules/m_topic.c,
	  modules/m_trace.c, modules/m_unkline.c, modules/m_user.c,
	  modules/m_userhost.c, modules/m_users.c, modules/m_version.c,
	  modules/m_wallops.c, modules/m_who.c, modules/m_whois.c,
	  modules/m_whowas.c, src/m_error.c, src/modules.c: Got rid of the
	  insane list of MSG_* defines from msg.h

2001-01-04 18:51  toot

	* src/client.c: added s_user.h in cleint.c to kill the compile
	  warning

2001-01-04 18:32  davidt

	* modules/m_ison.c: Fix ison for lazylinks

2001-01-04 18:05  a1kmm

	* Hybrid-team: Added myself to the Hybrid-Team

2001-01-04 17:44  fl_

	* contrib/: Makefile.in, m_jupe.c:
	  - added the unfinished m_jupe.c to contrib/
	  - contrib/ stuff goes to path/modules, and isnt autoloaded

2001-01-04 17:35  davidt

	* modules/: m_ison.c, m_llnick.c: Fix ISON for lazylinks.  cosmetic
	  fix for LLNICK.

2001-01-04 17:33  fl_

	* configure, contrib/.depend, contrib/Makefile.in:
	  - gave contrib/ a makefile..

2001-01-04 16:55  davidt

	* modules/: m_llnick.c, core/m_nick.c: Another LazyLinks nick
	  collide fix, this time for new nicks...

2001-01-04 16:52  toot

	* contrib/m_clearchan.c: -pedantic fixed header in m_clearchan to
	  say contrib

2001-01-04 16:41  toot

	* contrib/m_clearchan.c, modules/Makefile.in,
	  modules/core/Makefile.in, modules/m_clearchan.c: moved clearchan
	  to contrib, and made it admin only

2001-01-04 16:11  davidt

	* include/client.h, modules/m_client.c, modules/m_llnick.c,
	  modules/m_nburst.c, modules/core/m_nick.c, src/client.c,
	  src/modules.c: Tidy up lazylink nickcollides partially..  we
	  still get a collision if a new user is already known by the hub...
	  (but it'll just collide off the new user, not the existing one)

2001-01-04 15:51  a1kmm

	* modules/core/m_nick.c, modules/m_stats.c, modules/m_svinfo.c,
	  modules/core/m_sjoin.c, src/s_user.c:
	  - Fixed more compile warnings.

2001-01-04 15:36  a1kmm

	* include/channel.h, include/hash.h, modules/m_gline.c,
	  modules/m_kline.c, modules/m_knock.c, modules/m_list.c,
	  src/client.c, src/event.c, src/hash.c, src/ircdauth.c,
	  src/list.c, src/modules.c, src/s_debug.c, src/s_serv.c,
	  src/s_stats.c, src/s_user.c, src/send.c:
	  - Fixing a whole lot of compile-warnings.

2001-01-04 15:27  toot

	* doc/server-version-info, include/config.h, include/config.h.dist,
	  include/handlers.h, include/msg.h, modules/core/m_part.c,
	  src/irc_string.c, src/s_debug.c: . corrected a couple of
	  comments/headers . added /part reasons to m_part.c.. only work if
	  the chan is -m (or you're opped) . put back some old /version
	  letters

2001-01-04 15:02  db

	* modules/m_gline.c, modules/m_nburst.c, modules/core/m_nick.c,
	  src/s_user.c:
	  - fixed too many arguments for format in m_gline.c
	  - fixed too few arguments for format in s_user.c and the conflict
	  - slight cleanup to m_nburst.c looks incomplete (David-T)

2001-01-04 14:47  db

	* include/s_user.h, modules/m_client.c, modules/m_nburst.c,
	  modules/core/m_nick.c, modules/m_user.c, src/s_user.c:
	  - split register_user() into register_local_user() and
	    register_remote_user() also split do_user() into do_local_user() and
	  do_remote_user()

	  - modified modules that used these functions

	  - resolved a silly conflict

	  - someone care to review this change?

2001-01-04 14:29  a1kmm

	* src/s_serv.c:
	  - Fixed CRYPT_LINK_PASSWORD to work again in check_server

2001-01-04 14:24  a1kmm

	* include/send.h:
	  - Use GNU format checking features if __GNUC__ is defined - helps us
	  find bugs in printf like send functions.

2001-01-04 14:12  a1kmm

	* modules/core/m_server.c, src/ircd.c, src/s_user.c:
	  - Re-added missing templates in m_server.c
	  - #ifdef out id stuff for now - it breaks non-openssl builds.

2001-01-04 13:59  a1kmm

	* modules/core/m_server.c:
	  - Okay, fixed the 'random' data bug - just a forgotten arg to
	  sendto_realops_flags.

2001-01-04 13:52  a1kmm

	* modules/: m_clearchan.c, core/m_kick.c:
	  - Changed CLEARCHAN to work with vchans.
	  - Fixed up server kicks to work better and not give away the server
	  doing it.
	  - Made CLEARCHAN make kicks come from a server.
	  - We now join the person doing a clearchan to the channel after
	    kicking everyone, set the TS down by one, and set the modes to
	  +ntsi.

2001-01-04 11:21  davidt

	* modules/: m_llnick.c, m_nburst.c: oops, forgot to cvs add this..

2001-01-04 11:10  davidt

	* include/handlers.h, include/s_gline.h, modules/Makefile.in,
	  modules/m_accept.c, modules/core/Makefile.in, modules/m_admin.c,
	  modules/m_away.c, modules/m_capab.c, modules/m_cburst.c,
	  modules/m_challenge.c, modules/m_cjoin.c, modules/m_client.c,
	  modules/m_close.c, modules/m_connect.c, modules/m_dmem.c,
	  modules/m_drop.c, modules/m_eob.c, modules/core/m_die.c,
	  modules/m_gline.c, modules/m_hash.c, modules/m_help.c,
	  modules/m_info.c, modules/m_invite.c, modules/m_ison.c,
	  modules/m_join.c, modules/core/m_kick.c, modules/m_kline.c,
	  modules/m_knock.c, modules/core/m_kill.c, modules/m_links.c,
	  modules/m_list.c, modules/m_lljoin.c, modules/m_locops.c,
	  modules/m_lusers.c, modules/m_motd.c, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/m_names.c, modules/m_oper.c,
	  modules/m_operwall.c, modules/core/m_nick.c, modules/m_pass.c,
	  modules/m_ping.c, modules/m_pong.c, modules/core/m_part.c,
	  modules/m_rehash.c, modules/m_restart.c, modules/core/m_quit.c,
	  modules/core/m_server.c, modules/m_set.c, modules/core/m_sjoin.c,
	  modules/core/m_squit.c, modules/m_stats.c, modules/m_svinfo.c,
	  modules/m_testline.c, modules/m_time.c, modules/m_topic.c,
	  modules/m_trace.c, modules/m_unkline.c, modules/m_user.c,
	  modules/m_userhost.c, modules/m_users.c, modules/m_version.c,
	  modules/m_wallops.c, modules/m_who.c, modules/m_whois.c,
	  modules/m_whowas.c, src/md5.c, src/modules.c, src/res.c: Mass
	  move of m_* prototypes from includes/handlers.h into the individual
	  m_*.c file.  There's no reason for them to be in a header file,
	  since they can't be used by anything other than the module.....

2001-01-04 09:53  adrian

	* TODO:

	  Tidy up my TODO entries a little more

2001-01-04 09:52  wcampbel

	* modules/m_stats.c: Cleaned up the logic of STATS p
	  1. SHIDE on, non oper - currently will only notify opers if either
	     stats_p_notice is on, or stats_notice is on, sends nothing back
	     to the user
	     COMMENTS PLEASE
	  2. SHIDE off, non oper - Act as before For opers...act as before

2001-01-04 09:49  adrian

	* src/parse.c:

	  We shouldn't just blindly return (0) if everything is ok.
	  handle_message() might have been telling us something, and in any
	  case, that is what CLIENT_EXITED / CLIENT_OK / CLIENT_PARSE_ERROR
	  (or whatever it is) was designed for ..

2001-01-04 07:23  ejb

	* include/md5.h, src/md5.c:
	  - oops

2001-01-04 07:19  ejb

	* modules/m_client.c:
	  - oops, forgot to commit this.

2001-01-04 07:19  ejb

	* include/client.h, src/client.c, src/s_serv.c, src/s_user.c:
	  - remove ID debug code, and fix a nasty bug.

2001-01-04 06:31  ejb

	* include/client.h, include/config.h, include/handlers.h,
	  include/hash.h, include/msg.h, include/s_serv.h,
	  include/s_user.h, modules/Makefile.in, modules/m_user.c,
	  modules/core/Makefile.in, modules/core/m_nick.c, src/Makefile.in,
	  src/client.c, src/hash.c, src/ircd.c, src/s_serv.c, src/s_user.c:
	  - commit initial user ID (TS4) code.
	    we support IDs, but a couple of things are missing, most notable
	    ID collisions.  we also don't actually do anything with the IDs
	  yet.

2001-01-04 03:51  a1kmm

	* include/s_serv.h, modules/core/m_server.c, src/fdlist.c,
	  src/ircd_parser.y, src/s_serv.c:
	  - Cleaned up m_server and the associated find_server, we now check
	  earlier for it.
	  - Fixed hostmasking.

2001-01-04 03:27  db

	* modules/Makefile.in, modules/m_clearchan.c,
	  modules/core/Makefile.in, src/ircd.c:
	  - added clearchan
	    The command will kick everyone out of a channel.
	    It should also lock the channel up...

2001-01-03 22:04  davidt

	* BUGS: Add note about 403 numerics to BUGS

2001-01-03 22:00  davidt

	* include/client.h, include/ircd.h, src/client.c, src/ircd.c,
	  src/parse.c: Fix problems found by adrian where we were
	  referencing free'd client data.

2001-01-03 21:25  db

	* src/s_user.c:
	  - return CLIENT_EXITED in all cases that a client is exited. things
	    are then rosy again for banned clients.
	    Next.

2001-01-03 21:03  db

	* src/: client.c, s_conf.c:
	  - ewwww there were two exit_client()'s on klined banned clients
	    moved up where it should have been done. STILL buggy... but
	    closer.

2001-01-03 20:18  ejb

	* include/modules.h, src/modules.c:
	  - made modules.c use dlink

2001-01-03 20:02  davidt

	* src/s_serv.c: Remove prefix from NICK message during connect
	  burst

2001-01-03 19:31  adrian

	* include/tools.h, src/client.c, src/tools.c:


	  * add mem_frob(ptr, len) which will frob a block of RAM with
	    0xdeadbeef.  Nice for debugging

	  * frob cptr memory once we've finished with it. This should help us
	    trap bugs where we are referencing cptr/localptr RAM after its been
	    freed, which is evil bad and wrong.

2001-01-03 19:30  adrian

	* src/packet.c:

	  Re-register IO interest if the client isn't CLIENT_EXITED, rather
	  than if its CLIENT_OK. We can get a client parse error which doesn't
	  mean we stop listening to the client.

2001-01-03 19:30  ejb

	* include/modules.h, src/modules.c:
	  - better linked list handling in modules.c

2001-01-03 18:46  davidt

	* RELNOTES, BUGS: Added some more info about problems with gettext.

2001-01-03 18:21  davidt

	* src/s_serv.c: Eeek, client_burst_if_needed should only check
	  capabilities of local connections

2001-01-03 18:09  davidt

	* modules/m_whois.c: Fix whois for LazyLinks

2001-01-03 17:51  adrian

	* src/: s_bsd.c, s_bsd_poll.c:

	  put the asserts back in. These catch real bugs in the code, and when
	  they get triggered they mean we need to fix something.

2001-01-03 17:47  adrian

	* src/s_auth.c:

	  #preprocessor directives should start at col 0, not be indented.

2001-01-03 17:21  davidt

	* modules/core/m_kill.c, modules/core/m_nick.c, modules/m_oper.c,
	  modules/m_operwall.c, modules/core/m_squit.c,
	  modules/m_wallops.c, src/ircdauth.c, src/s_serv.c, src/s_user.c,
	  src/send.c: Yet another cleanup of lazylink stuff.  Attempt to
	  introduce clients where appropriate, before sending things from
	  them...

2001-01-03 17:15  ejb

	* include/modules.h, src/modules.c:
	  - rewrote load_*_module to make it work.

2001-01-03 15:54  fl_

	* modules/m_whois.c:
	  - fixes for whois:
	  - all "whois nick" replies look the same, same for "whois nick nick"
	    regardless of where the target is

2001-01-03 15:43  db

	* src/: ircd_parser.y, s_user.c:
	  - ok, added sanity tests in the parser to not try to DupString NULL
	    strings it won't work properly but at least it won't core.
	  - NICK should not send a prefix, to be consistent with previous
	  versions

2001-01-03 12:59  toot

	* src/channel.c: set the vchan_id in a much more simplistic way me
	  so silly :P

2001-01-03 12:59  madmax

	* README.FIRST, RELNOTES, INSTALL: made the comment about the old
	  config not working more prominent too

2001-01-03 12:57  madmax

	* README.FIRST, RELNOTES, INSTALL: I've tried to highlight the fact
	  that you need to read INSTALL, and to ./configure --prefix as much
	  as humanly possible.  From the number of people the changes have
	  confused, i envision us being told by a lot of people 'it compiles
	  okay but wont run!'..

2001-01-03 10:34  madmax

	* README.FIRST, BUGS, README.small_nets, RELNOTES, TODO: I was
	  going to wait until we were ready to change the patch level.. but
	  thought i'd commit these now before they got lost.  Just updated the
	  files to reflect it being a beta release, and tidied stuff up a bit.

2001-01-03 10:12  madmax

	* RELNOTES: Forgot to commit this (reference to BUGS file)

2001-01-03 10:11  madmax

	* BUGS, README.FIRST: Added a list of known bugs for our beta
	  release.. (and references to the file)

2001-01-03 09:40  davidt

	* modules/m_join.c:
	  - Oops, fixed my last commit message in ChangeLog.
	  - Fixed m_join.c so it doesn't reveal who set the topic on +a
	  channels.

2001-01-03 09:35  davidt

	* modules/m_topic.c: m_join.c

2001-01-03 00:56  db

	* include/client.h:
	  - yet another obsolete prototype gone

2001-01-03 00:18  vx0

	* src/modules.c:
	  - modules.c:279 'char *err;' >-> 'const char *err;'

2001-01-02 23:59  spookey

	* src/s_serv.c:
	   - removes AUTOCONN output lines (ANNOYING)

2001-01-02 23:39  db

	* configure, include/setup.h.in:
	  - updated configure setup.h.in

2001-01-02 23:31  db

	* src/modules.c:
	  - committed cstone's contributed patch to fix modules under openbsd

2001-01-02 22:04  db

	* src/s_bsd.c:
	  - UNTESTED ignore fd < 0 instead of failing an assert *FOR NOW*
	    adrian, might want to look at this one.

2001-01-02 21:44  davidt

	* modules/m_names.c: minor patch to stop BitchX coring over an
	  extraneous space in /names output

2001-01-02 20:55  a1kmm

	* src/fdlist.c: Fixed a core causing bug in fdlist code.

2001-01-02 20:30  davidt

	* modules/core/m_nick.c: Fix kill on nickchange with lazylinks

2001-01-02 20:27  db

	* modules/core/m_server.c:
	  - backed out a changed until beta-2 , its broken hostmasking

2001-01-02 19:41  davidt

	* src/s_user.c: Add (#if 0'd out) code not to introduce new NICK's
	  to lazyleafs immediately.  This will also make debugging LazyLeafs
	  easier, since it shows up the bugs elsewhere faster, without lots of
	  squitting.  But after a beta.

2001-01-02 19:35  db

	* include/channel.h:
	  - upped channel clean time for non vchans to 30 minutes
	    I thought it was 30 before, it was only 15

2001-01-02 17:57  davidt

	* modules/core/m_sjoin.c: I'm stupid, lcptr vs cptr...

2001-01-02 17:40  davidt

	* modules/core/m_sjoin.c: *sigh*, fix sjoins _from_ lazylink leafs

2001-01-02 17:24  davidt

	* modules/core/m_sjoin.c: Make SJOIN burst nicks where
	  appropriate..

2001-01-02 17:01  davidt

	* src/modules.c: Fix modunload core bug..

2001-01-02 16:08  davidt

	* modules/core/m_sjoin.c: Another go at fixing netjoins on +a
	  channels... *sigh*

2001-01-02 15:10  wcampbel

	* doc/server-version-info, messages/custom.po: Updated some more
	  docs

2001-01-02 15:01  fl_

	* modules/core/m_sjoin.c:
	  - reapplied the fix that got removed *growl*

2001-01-02 14:03  davidt

	* modules/core/m_sjoin.c, src/channel.c:
	  - Fix SJOIN halfop handling for lazylinks..
	  - Fix clear_ban_lists to prevent spewing random memory at clients

2001-01-02 14:02  wcampbel

	* README.small_nets, RELNOTES, TODO, doc/CIDR.txt,
	  doc/technical/Persistent_Clients.txt, doc/example.conf,
	  doc/index.txt, doc/opers.txt: Updated a number of docs

2001-01-02 13:51  fl_

	* include/send.h, modules/core/m_sjoin.c:
	  - fixes for davidt's patch
	  - use hide_or_not instead of ALL_CHANOPS in another case

2001-01-02 13:08  davidt

	* src/send.c: Added back send_noncap_serv_butone

2001-01-02 12:07  davidt

	* modules/core/m_message.c: Don't ignore server notices in +g mode

2001-01-02 12:02  davidt

	* modules/core/m_sjoin.c: Send halfops as @ not % in SJOIN to a
	  non-CAP_HOPS server

2001-01-02 11:03  madmax

	* RELNOTES: Just some notes about it being an alpha release and
	  suchlike.

2001-01-02 11:02  madmax

	* include/patchlevel.h: Being pedantic - now reads
	  'hybrid-7(alpha)' (hopefully not for long?)

2001-01-02 11:01  madmax

	* Hybrid-team, README.FIRST: Tidied up a bit, pointed out its an
	  alpha release.

2001-01-02 10:23  davidt

	* modules/m_list.c: Fix /list #channame

2001-01-02 05:06  a1kmm

	* modules/core/m_server.c: Fixed up m_server a little to prevent
	  the kiddies from killing recently established servers by dormant
	  unregistered connections.

2001-01-02 03:28  a1kmm

	* src/channel.c: Added a little extra paranoia to fix_key_old

2001-01-02 03:03  a1kmm

	* tools/convertconf.c: Fixed convertconf not to core when not all
	  fields are present.

2001-01-02 00:35  db

	* modules/m_userhost.c:
	  - ircsprintf() returns the length of the string it formats,
	    I forgot. This means don't have to use an unnecessary strlen()

2001-01-02 00:30  davidt

	* modules/m_cburst.c, modules/m_join.c, src/messages.tab,
	  src/vchannel.c:
	  - Add back (fixed) logic to m_burst.c (otherwise LL cjoin breaks)
	  - Fix some more cases in m_join.c that reveal the vchan's true
	  name..
	  - Fixed the comment in messages.tab for ERR_UNAVAILRESOURCE
	  - Fix cjoin_channel to find a unique vchannel name, or return
	    ERR_UNAVAILRESOURCE

2001-01-02 00:17  db

	* modules/m_cburst.c:
	  - removed some faulty logic in m_cburst.c, this cored us
	    when the nick wasnt' present..

2001-01-01 23:55  db

	* modules/m_userhost.c:
	  - our new parse.c splits everything up thats separated by a space
	    unlike the old parse.c which stopped parsing into separate parv[]
	    after maxargs?
	  - this will handle the RFC just fine, even epic works. Takes up to
	    5 nicks as per the RFC

2001-01-01 23:38  a1kmm

	* include/modules.h, modules/m_links.c: Fixed links so that when
	  SHIDE=0 it works as before.

2001-01-01 23:29  davidt

	* modules/m_lljoin.c: Refix the core bug so it catches both
	  possible problems, Doh.

2001-01-01 23:22  davidt

	* modules/m_lljoin.c: Fix possible core bug in lljoin...

2001-01-01 23:17  davidt

	* modules/m_join.c: removed test for length of string (which is
	  checked in build_channel_list) against address of pointer.. oops?

2001-01-01 23:10  wcampbel

	* include/config.h: gline.log.<date> should be in LOGPATH, not
	  ETCPATH

2001-01-01 23:08  a1kmm

	* src/: ircd_parser.y, modules.c: Don't reload modules if they are
	  already loaded and we see a module= in the config file.

2001-01-01 23:06  davidt

	* modules/: m_challenge.c, m_join.c: Fix join 0 on vchans, and fix
	  that stupid compiler warning for m_challenge.c

2001-01-01 22:41  db

	* modules/m_join.c:
	  - parv[1] might be longer than max channel len if two channel names
	    are catenated. better to check in build_channel_names

2001-01-01 22:29  bysin

	* modules/m_join.c: Why didnt anyone make sure parv[1] was >
	  CHANNELLEN, i had a fun time buffer overflowing that.

2001-01-01 22:17  ejb

	* src/s_serv.c:
	  - fix s_serv.c

2001-01-01 22:09  davidt

	* src/s_serv.c: Remove extra variable i forgot about

2001-01-01 22:08  db

	* modules/core/m_sjoin.c:
	  - ignore bogus TS from servers. pure and simple. TS0 is broken
	    It =will= desync for a while. *TOUGH*

2001-01-01 21:57  ejb

	* doc/example.conf:
	  - DONT put all modules in example.conf, they are loaded on startup
	  anyway.

2001-01-01 21:54  davidt

	* src/vchannel.c: *Sigh*. sorry. I missed a space. :(

2001-01-01 21:49  davidt

	* src/vchannel.c: Display <secret> for +s vchans in the vchan list.

2001-01-01 21:10  a1kmm

	* modules/core/m_nick.c: better check realname too while we are at
	  it...

2001-01-01 21:07  a1kmm

	* modules/core/m_nick.c: Added a sanity test of user and hostname
	  length from other servers.

2001-01-01 20:57  wcampbel

	* modules/m_info.c: Added some more conf variables to INFO

2001-01-01 20:33  davidt

	* src/channel.c: Fix a buffer overflow in send_mode_list

2001-01-01 20:22  fl_

	* modules/m_join.c:
	  - sending "JOIN #channel" on its own would core the uplink: fixed

2001-01-01 20:14  a1kmm

	* modules/m_whois.c: okay, now the cvs 'conflict' over m_whois.c
	  should be completely resolved and madmax's comment out version
	  should stay...

2001-01-01 20:09  a1kmm

	* doc/example.conf, modules/m_whois.c: Added module list to
	  example.conf

2001-01-01 19:52  wcampbel

	* doc/example.conf: Cleaned up the example.conf a little

2001-01-01 19:44  davidt

	* modules/core/m_sjoin.c: Prevent non-human 'things' being sjoined
	  to channels....

2001-01-01 19:35  davidt

	* modules/m_join.c: Don't allow servers to JOIN channels, eugh

2001-01-01 19:32  davidt

	* src/s_serv.c: Eliminate race condition from s_serv.c, where we
	  could add a server to serv_list (for SJOINS, etc) without first
	  bursting it)

2001-01-01 19:25  fl_

	* modules/m_users.c, src/s_user.c:
	  - dont show how many local users we have if shide is on
	    instead make the local user reply the same as the global one

2001-01-01 18:41  db

	* modules/core/m_server.c:
	  - setting autoconnall to 0, should not affect the ability of others
	    to connect to your server, or you to connect outgoing. If we want
	    the capability of disabling connections to the server, there
	    should be another set flags. Its a misnomer to double use
	  autoconnall for that.

2001-01-01 18:27  davidt

	* doc/example.conf, doc/whats-new.txt, include/s_conf.h,
	  modules/m_cjoin.c, modules/m_info.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/modules.c: Add message_locale to
	  doc/example.conf Add vchans_oper_only to doc/example.conf,
	  doc/whats-new.txt and actually add the code to do it.  Fix modload,
	  et all to send error messages if used by non ircops (instead of just
	  silently ignoring the command)

2001-01-01 18:15  madmax

	* modules/m_whois.c: The last patch broke /whois (You could only
	  whois people on the same server if your uplink didnt forward the
	  numerics - not something we want..) Just commented out A1kmm's code.
	  We can come back to this once we've cut a beta

2001-01-01 17:57  toot

	* src/parse.c: 'already registered' should be a numeric, not a
	  notice

2001-01-01 17:28  davidt

	* modules/m_cjoin.c: Oops.  cjoin should also work on non-lazylinks
	  now :)

2001-01-01 17:07  db

	* modules/m_capab.c:
	  - ignore capab sent from remote server

2001-01-01 16:52  davidt

	* modules/m_cburst.c: Missed a change to cburst..

2001-01-01 16:50  davidt

	* include/vchannel.h, modules/m_cburst.c, modules/m_cjoin.c,
	  modules/m_join.c, modules/m_lljoin.c, src/channel.c, src/send.c,
	  src/vchannel.c: Massive attempt to cleanup vchans, and some
	  problems with vchan+LL.
	  - change cjoin on LL to ask the hub
	  - change cburst to support cjoin as well as join (minor change)
	  - change lljoin to support cjoin
	  - change lljoin to support joining vchans
	  - fix opsyncing to use the correct channame in vchans
	  - various other things I've forgotten

2001-01-01 16:43  a1kmm

	* modules/m_whois.c: Fixed whois to always route.  Now show idle
	  times even when SHIDE=1.

2001-01-01 16:22  vx0

	* Hybrid-team:

	  Updated contributor names list

2001-01-01 16:11  a1kmm

	* include/client.h, modules/m_away.c:
	  - Away is now better flood controlled.

2001-01-01 16:08  fl_

	* src/channel.c:
	  - it should compile now..

2001-01-01 16:01  fl_

	* src/channel.c:
	  - dont sent people a +e/+I list when they get opped in a +a chan

2001-01-01 16:00  bysin

	* Hybrid-team: Added me cause I'm lame.

2001-01-01 15:49  db

	* include/s_serv.h, src/ircd.c:
	  - delay initial startup of try_connections() to forestall nick
	    collides because of servers that haven't noticed the server restart.

2001-01-01 15:45  bysin

	* modules/m_userhost.c: Oops, fixed buffer overflow again.

2001-01-01 15:39  bysin

	* modules/m_userhost.c: I fixed a buffer overflow in this.  Right
	  before its gunna be released.  I hope this works.

2001-01-01 13:57  db

	* Hybrid-team:
	  - added isomer and riedel

2001-01-01 12:53  madmax

	* TODO: Gave myself a TODO

2001-01-01 12:23  davidt

	* modules/core/m_mode.c: Fix mode on vchans...

2001-01-01 11:49  davidt

	* modules/core/m_part.c: Fix vchan part to work properly with
	  LazyLinks too... (oops)

2001-01-01 11:48  davidt

	* modules/core/m_part.c: Fix vchan part to work properly

2001-01-01 11:29  davidt

	* src/match.c: stop collapse() coring on a null pattern

2001-01-01 11:15  toot

	* src/parse.c: only hide remote numeric origins if shide is on

2001-01-01 08:59  toot

	* modules/m_join.c, src/channel.c: . finally, you can join +k
	  vchans :) . fixed /mode #chan giving weird replies . removed some
	  old commented code in channel.c

2001-01-01 02:06  db

	* doc/technical/Persistent_Clients.txt:
	  - just stuck an early draft of this into cvs

2001-01-01 00:09  wcampbel

	* modules/Makefile.in, modules/core/Makefile.in, src/Makefile.in:
	  make depend needs to have the CFLAGS in addition to -MM.  This is
	  for making sure that the error messages associated with gcc not
	  being able to find /usr/local/include/libintl.h don't crop up.

2001-01-01 00:01  wcampbel

	* TODO: Updated my part of the TODO list

2000-12-31 23:47  wcampbel

	* modules/core/m_part.c, src/match.c:
	  1. Added A1kmm's match.c patch (to fix gecos blocks)
	  2. Fix compiler error in m_part.c (chname -> name)

2000-12-31 21:08  davidt

	* modules/core/m_part.c: Uhmm.. or should part be the top chan name
	  between servers? argh. see bug #15

2000-12-31 20:53  davidt

	* modules/core/m_part.c: parting a vchan should send vchan->chname
	  to remote servers....

2000-12-31 20:48  toot

	* modules/m_whois.c: fixed some formatting in m_whois

2000-12-31 20:41  toot

	* modules/m_whois.c: it didn't :P char *_version = "$Revision: 1.35
	  $"; looks a bit poo

2000-12-31 20:37  toot

	* modules/m_whois.c: checking that Revision CVS tag works okay for
	  module version numbers

2000-12-31 19:38  spookey

	* include/: config.h, config.h.dist:
	   - #define CONNECTTIMEOUT  15      /* Recommended value: 30 */

2000-12-31 18:56  toot

	* include/channel.h, modules/m_names.c, src/channel.c: stopped
	  /names showing member lists in a +s channel from outside and made it
	  skip +i people in -s chans from outside

2000-12-31 18:37  wcampbel

	* doc/whats-new.txt: ANONOPS -> AOPS

2000-12-31 18:22  davidt

	* src/rsa.c: Add missing prototypes to stop gcc moaning.

2000-12-31 18:17  db

	* Hybrid-team:
	  - added spookey to Hybrid-team.

2000-12-31 18:06  davidt

	* modules/core/m_message.c, src/send.c: Fixes to allow @#chan and
	  +#chan to work correctly.

2000-12-31 17:53  db

	* include/s_serv.h, src/channel.c, src/s_serv.c:
	  - really ANONOPS is way longer than any other capability we have
	    lets shorten it to AOPS ok?

2000-12-31 17:39  db

	* src/channel.c:
	  - optimized can_join a bit
	    No need to generate an expensive to generate string twice, so
	    added check_banned as a helper function for is_banned that way can
	    share the strings from can_join
	  - make_nick_user_host was being called, then strcpy'ed. dumb. why
	    not tell it where to generate the string in the first place? and
	    remove a dumb strcpy?

2000-12-31 16:53  spookey

	* modules/core/m_message.c:
	   - fixes flood control... >= not >

2000-12-31 15:07  db

	* TODO:
	  - updated TODO

2000-12-31 14:16  wcampbel

	* doc/whats-new.txt: Document ANONOPS CAPAB

2000-12-31 14:08  wcampbel

	* doc/example.conf: Document links_delay

2000-12-31 12:20  wcampbel

	* modules/m_rehash.c: Added Riedel's REHASH CHANNELS patch

2000-12-31 11:40  lusky

	* src/ircd_parser.y:
	  - david (accidentally?) moved the %type's back to the top, they've
	    got to be below the %tokens.

2000-12-31 11:10  toot

	* modules/m_cjoin.c, modules/m_connect.c, modules/m_invite.c,
	  modules/m_join.c, modules/m_kline.c, modules/core/m_kick.c,
	  modules/core/m_kill.c, modules/m_locops.c, modules/m_oper.c,
	  modules/core/m_nick.c, modules/m_operwall.c, modules/m_pass.c,
	  modules/core/m_part.c, modules/core/m_squit.c,
	  modules/m_unkline.c, modules/m_user.c, modules/m_wallops.c,
	  src/parse.c: . changed most remaining param counts so that
	  parse() checks them . servers don't send USER any more do they? -
	    removed some checks which were only used for that anyway..  .
	  removed a few more redundant checks, which parse() takes care of .
	  show "*" inplace of Nick for unregged users with no nick

2000-12-31 09:47  spookey

	* configure, src/Makefile.in:
	   - minor cleaups

2000-12-31 09:39  davidt

	* src/: channel.c, ircd_parser.y: Attempt to fix various issues
	  with channel modes.. although there are still a few bugs left :/

2000-12-31 04:06  toot

	* modules/m_list.c, src/channel.c, src/vchannel.c: . fixed a
	  possible overflow in m_list with persistant vchans . moved the
	    vchan_id setting into remove_user_from_chan so the user is still in
	  a dlist_list :P

2000-12-31 03:37  db

	* include/config.h.dist, src/ircd_parser.y:
	  - hard to find typo in ircd_parser.y yyval instead of yylval
	    caused it to core parsing message_local="string";

2000-12-31 02:44  db

	* include/s_conf.h, src/ircd_parser.y, src/oldparse.c,
	  src/s_conf.c:
	  - this is some very old fugly hacked code we had in hybrid-6 to
	    allow multiple Q lined nicks ... never mind it was a hack, its
	    gone.

	  - also moved the %type block back in ircd_parser.y until debugged
	    the set locale code.

2000-12-31 01:03  db

	* modules/m_stats.c:
	  - fixed logic in m_stats.c pertaining to o_lines_oper_only

2000-12-31 00:23  db

	* modules/m_invite.c, src/res.c:
	  - added check for unknown type in proc_answer in res.c
	    only rudimentary logging added for now.
	  - check for enough parameters in m_invite.c core bad, not enough
	  parms good.

2000-12-30 20:27  fl_

	* src/channel.c:
	  - reverted back to old behaviour of only chanops seeing +e/+I

2000-12-30 18:25  lusky

	* doc/Makefile.in, include/Makefile.in, messages/Makefile.in,
	  src/Makefile.in, src/ircdauth.c, src/match.c, tools/Makefile.in,
	  tools/viconf.c:
	  - more solaris fixes, should now build and install cleanly

2000-12-30 18:22  db

	* src/parse.c:
	  - *red face* backed out a change I thought about making but forgot
	    to remove a ')'

2000-12-30 18:10  db

	* include/ircd_defs.h, src/parse.c, src/s_bsd_poll.c:
	  - quick hack for now (adrian, forgive me, for I have sinned)

	      /* XXX NOT the right "solution" */ #if 0
	      assert(fd >= 0); #endif
	      if(fd < 0)
	        return;

2000-12-30 18:07  davidt

	* src/channel.c: Only resync the channel if required..

2000-12-30 17:25  davidt

	* include/s_serv.h, src/channel.c, src/s_serv.c, src/send.c:
	  - Create a new capability: CAP_ANONOPS for servers that support +a
	  - Fix +a so it's only sent to servers supporting it
	  - Fix +a so that nonops still see modes they should, but as server
	  modes.
	  - Fix sendto_channel_local to send NONOPS messages to voiced users
	  too.

2000-12-30 16:46  lusky

	* configure, include/setup.h.in, src/irc_string.c, src/linebuf.c:
	  - check for strings.h for bzero() on solaris

2000-12-30 15:22  lusky

	* configure, doc/Makefile.in, src/Makefile.in, tools/Makefile.in:
	  - have autoconf detect whether -export-dynamic is needed for ld

2000-12-30 14:54  db

	* src/ircd_parser.y:
	  - I hate broken tree's resolved a conflict.. weird conflict too
	    looked identical the two sections

2000-12-30 14:47  lusky

	* src/: ircd_parser.y, parse.c:
	  - solaris yacc is picky picky picky
	  - replace strsep() with strtoken()

2000-12-30 14:44  lusky

	* modules/m_set.c:
	  - oops, forgot an arg to sprintf

2000-12-30 13:28  lusky

	* modules/m_set.c:
	  - missed another setenv()

2000-12-30 13:19  lusky

	* src/: ircd.c, ircd_parser.y:
	  - eradicated setenv(), it's not portable.  specifically sol2.6
	    doesn't have it.

2000-12-30 10:12  fl_

	* modules/m_kline.c:
	  - Fix for IP klines
	  - We now check to see if remote klines exist locally, before
	  applying them

2000-12-30 09:42  db

	* src/ircd_parser.y:
	  - removed ';' that were in the wrong spot, these caused bison and
	    solaris yacc to have a fit.

2000-12-30 09:14  db

	* src/vchannel.c:
	  - chptr->vchan_id will never be a NULL pointer so the test wasn't
	    doing anything at all. Its declared as
	    char            vchan_id[NICKLEN*2];   /* use this for empty
	    vchans */ not a char *; One could do if[chptr->vchan_id[0]) but
	    then once set vchan_id[0] would never be null either.

2000-12-30 07:34  toot

	* src/vchannel.c: added a paranoid check in pick_vchan_id

2000-12-30 04:52  lusky

	* src/: fileio.c, linebuf.c, send.c:
	  - use errno.h instead of sys/errno.h.  freebsd and redhat don't
	    care, but solaris does.

2000-12-30 04:32  toot

	* src/channel.c: moved the code that set vchan_id up

2000-12-30 04:28  lusky

	* src/: ircdauth.c, res.c, s_auth.c, s_bsd.c:
	  - more compile warning fixes.  mmmm, socklen_t.  compiles on
	    redhat6.1 now without warnings (if you fix the broken
	    /usr/include/bits/socket.h by hand).

2000-12-30 03:17  lusky

	* modules/: m_kline.c, core/m_server.c, m_stats.c, m_testline.c,
	  core/m_sjoin.c, m_unkline.c, m_version.c, m_who.c:
	  - more compile warning fixes, /modules compiles cleanly on
	  freebsd3.4 now

2000-12-30 02:30  lusky

	* configure, include/handlers.h, include/s_gline.h,
	  modules/Makefile.in, modules/m_challenge.c,
	  modules/core/Makefile.in, modules/m_help.c, modules/m_info.c,
	  modules/m_join.c, modules/m_links.c, modules/m_lljoin.c,
	  modules/core/m_message.c, modules/m_names.c,
	  modules/core/m_server.c:
	  - more cleanups
	  - fixes /usr/local/include/rsa.h snafu from last commit

2000-12-30 02:11  db

	* include/config.h, include/s_conf.h, modules/m_info.c,
	  modules/m_links.c, modules/core/m_server.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c:
	  - committing madmax's links patch before it gets lost

2000-12-30 01:47  lusky

	* configure, include/parse.h, src/ircd.c, src/numeric.c,
	  src/parse.c, src/send.c, src/whowas.c:
	  - more cleanups, /src now compiles without warnings on fbsd3.4

2000-12-30 01:03  lusky

	* include/modules.h, include/packet.h, include/s_auth.h,
	  include/s_bsd.h, include/s_conf.h, include/s_user.h,
	  src/channel.c, src/listener.c, src/memdebug.c, src/modules.c,
	  src/mtrie_conf.c, src/oldparse.c, src/packet.c, src/res.c,
	  src/rsa.c, src/s_auth.c, src/s_bsd.c, src/s_conf.c,
	  src/s_debug.c, src/s_misc.c, src/s_serv.c, src/s_user.c: more
	  massive cleanups of compiler warnings

2000-12-29 23:36  lusky

	* include/blalloc.h, include/hash.h, include/irc_string.h,
	  include/ircdauth.h, include/list.h, include/listener.h,
	  include/modules.h, include/s_serv.h, src/hash.c,
	  src/irc_string.c, src/linebuf.c: started cleanup of compiler
	  warnings

2000-12-29 22:53  lusky

	* configure:
	  - hack to make the developer CFLAGS the default.  You can still set
	    CFLAGS in your environment before running configure if you want to
	  override them.

2000-12-29 22:40  lusky

	* TODO: added my IM pipedream to TODO

2000-12-29 21:28  davidt

	* modules/core/m_message.c: oops.  Stay compatable with
	  ircd-hybrid-6...

2000-12-29 21:20  davidt

	* TODO, modules/core/m_message.c, src/send.c: Fix $$/$# -- still
	  problems with LL, just like everything else..  I'll look into that
	  [again] later..

2000-12-29 21:07  lusky

	* Makefile.in, configure:
	  - don't recurse into messages if we don't have gettext

2000-12-29 21:01  wcampbel

	* INSTALL: Document problem with old openssl installed in
	  /usr/local/lib failing to link the RSA stuff used in Hybrid

2000-12-29 20:52  davidt

	* messages/Makefile.in: Ignore errors installing message files..
	  hrm.. maybe leaving the .mo in the repo wasn't such a bad idea..
	  *sigh*

2000-12-29 20:12  lusky

	* TODO: updated TODO

2000-12-29 19:52  lusky

	* Makefile.in, configure, include/config.h, include/config.h.dist,
	  include/m_info.h, include/setup.h.in, messages/Makefile.in,
	  messages/custom.mo:
	  - added rm config.cache to make autoconf
	  - fixed configure to find gettext() in /usr/local/lib/libintl.a
	  - kludge in config.h so HAVE_GETTEXT follows HAVE_LIBINTL
	  - custom.mo shouldn't be in the respository
	  - removed HAVE_GETTEXT from m_info, USE_GETTEXT is what we care
	  about

2000-12-29 19:21  davidt

	* modules/: m_kline.c, core/m_mode.c: Stop LL leafs replying to
	  MODEs from servers with another MODE..  this should never happen,
	  but it is currently (see bug #7 on hybzilla).

2000-12-29 18:59  fl_

	* include/send.h, src/channel.c, src/send.c:
	  - removed the sendto_match_noncap_servs(), as its now redundant
	  - if a user sets mode +h nick, and hes on a server that doesnt
	    support halfops, he would be opped.  we still pass the +h as far as
	    possible, but do nothing to that user

2000-12-29 18:23  wcampbel

	* messages/custom.po, src/messages.tab: "Permission Denied-" ->
	  "Permission Denied -" This has been driving me crazy

2000-12-29 18:19  wcampbel

	* doc/operguide.txt: Put in Riedel's revised operguide.txt, thanks
	  a lot!

2000-12-29 16:55  wcampbel

	* doc/example.conf, src/ircd_parser.y:
	  1. Added links_notice to example.conf
	  2. Corrected Riedel's nick in ChangeLog
	  3. Fixed some general {} settings in ircd_parser.y (stats_p_notice,
	  glines)

2000-12-29 16:26  wcampbel

	* doc/technical/send.txt: Minor correction to send.txt

2000-12-29 15:01  fl_

	* TODO, doc/technical/send.txt, include/send.h, src/channel.c,
	  src/send.c:

	  - Added sendto_match_noncap_servs to send.c, and documented it
	  - Send mode #channel +h nick as +h via sendto_match_cap_servs, and
	    as +o via sendto_match_noncap_servs, thus keeping the channel synced
	  - Updated my todo

2000-12-29 15:00  db

	* modules/core/m_sjoin.c:
	  - fixed bug in m_sjoin.c that cored server. Non local servers being
	    introduced via sjoin and given by sptr, do not have a LocalUser
	    part hence, this field is NULL and will core if you try to
	    refernce the caps field using IS_CAP()

2000-12-29 12:39  fl_

	* src/channel.c:

	  - fixed a bug I made which caused a -o nick when they werent being
	  deopped

2000-12-29 12:23  fl_

	* TODO:

	  - gave myself a todo list..

2000-12-29 11:43  fl_

	* src/channel.c:

	  - +e/+I modes can now only be seen by chanops

2000-12-29 11:33  davidt

	* configure, src/Makefile.in, tools/Makefile.in: Fix gettext() for
	  FreeBSD (LDFLAGS="-L/usr/local/lib" ./configure).  Anyone with
	  autoconf knowledge know how to make it check /usr/local/lib
	  automagically?

2000-12-29 09:08  madmax

	* modules/: core/m_server.c, m_links.c: Links are now stored in the
	  file in a format resembling normal links output ie "servername
	  uplink(me.name) :hops(1) info" This makes it look a bit prettier in
	  mirc etc ;) Also it now outputs me.name in the links list (again for
	  consistency).

2000-12-29 05:34  toot

	* src/channel.c: flame's right.. there's no need to send +e/+I when
	  you get opped in a +a chan.

2000-12-29 04:54  toot

	* modules/m_version.c, src/channel.c: . hide H in version with
	  hide_server . use MAXMODEPARAMS rather than 4 in the +a sync stuff

2000-12-29 03:36  db

	* include/motd.h, modules/core/m_server.c:
	  - increased MessageFileLine length this should be malloced ;-/
	  - added server info to user seen /links

2000-12-29 01:57  db

	* src/s_conf.c:
	  - fixed another bug in s_conf.c
	    recheck_class() had the bad side effect of moving opers from oper
	    class to their old class on a /rehash... It also had the side
	    effect of dropping already made connections.. not cool Its not
	    necessary to recheck classes as it happens... fixed.

2000-12-29 00:46  db

	* include/config.h, include/ircd.h, include/motd.h,
	  include/s_conf.h, modules/m_links.c, modules/core/m_server.c,
	  src/ircd.c, src/motd.c:
	  - ok. this is the first cut at building an user readable /links
	    from doing our own /links and storing in a file for off line use.

2000-12-28 23:38  fl_

	* src/channel.c:

	  1. Added error message if user is unopped, and does a /mode #chan +e
	  2. +b/+d modes are no longer shown to be removed/placed when a user
	     is deopped/opped in a +a channel, they can see the lists anyway so
	     they dont need us to keep them in sync..
	  3. If you -h'd someone on a +a channel, they didnt see the -h: fixed
	  4. If the channel is +a, /mode #chan +d wont tell you who set the
	     ban if youre unopped, same as +b

	  I wanted to remove the +e/+I mode from the sync too.. need to wait
	  to talk to david first tho. :)

2000-12-28 23:19  wcampbel

	* TODO, include/m_info.h:
	  1. Updated my TODO list
	  2. Update INFO to show HAVE_GETTEXT and SELECT_TYPE

2000-12-28 22:02  wcampbel

	* doc/: index.txt, server-version-info: Update of a couple
	  documents

2000-12-28 21:25  fl_

	* modules/m_kline.c:
	  - fixes for servermasks in remote klines that include the local
	  server

2000-12-28 20:20  fl_

	* doc/kline.txt:

	  Added more documentation to doc/kline.txt

2000-12-28 20:19  davidt

	* modules/m_kline.c: && should be ||..

2000-12-28 19:56  wcampbel

	* doc/opers.txt: Forgot to document it in opers.txt...where's your
	  bloody mind today Hwy?!

2000-12-28 19:55  davidt

	* src/channel.c: .collapse the signs for chanop-only modes..

2000-12-28 19:50  wcampbel

	* doc/example.conf, include/s_conf.h, modules/m_stats.c,
	  src/ircd_lexer.l, src/ircd_parser.y: Added o_lines_oper_only
	  option to the configuration file

2000-12-28 19:47  davidt

	* src/channel.c: oops, got -/+ back to front

2000-12-28 19:37  davidt

	* include/channel.h, modules/core/m_mode.c, modules/core/m_sjoin.c,
	  src/channel.c: Try to keep +a channels synced up with the
	  clients.  When a channel goes +a, tell everyone that the channel has
	  been massdeoped When it goes -a, tell everyone that the ops have
	  been mass oped..  When an individual user is opped/deoped, tell only
	  them.

2000-12-28 18:29  db

	* modules/m_version.c:
	  - local array shoud be static. bad Diane bad bad bad

2000-12-28 18:27  db

	* modules/m_version.c:
	  - ummm unitialized pointers should not be strcatted... bad bad bad
	    bad coder...

2000-12-28 18:23  spookey

	* src/modules.c:
	   - Adds string lookup capability to modlist (QUOTE MODLIST [STRING])

2000-12-28 17:28  bill

	* src/channel.c:

	  - fixed mode bug (thank you, Diane)
	  - I hear that a new messages/custom.mo wouldn't hurt :)

2000-12-28 17:19  davidt

	* include/channel.h, include/m_info.h, modules/core/m_mode.c,
	  modules/core/m_sjoin.c, src/channel.c: Attempt to sync the client
	  up when it gets given ops on a +a channel..

2000-12-28 17:17  davidt

	* src/send.c: Only hubs don't send info... leafs always send..

2000-12-28 16:58  adrian

	* TODO:


	  * Check to make sure a SIGHUP actually causes a rehash. The last
	    time I tried it, the server stayed running, but the ircd stopped
	  listening on ports.

2000-12-28 16:57  adrian

	* doc/technical/whats-new-code.txt:

	  Add my stuff to the code whats-new file. Can everyone add their own?

2000-12-28 16:43  adrian

	* README.FIRST, doc/index.txt:

	  add a documentation index.txt file in doc/ so we can at least
	  attempt to show people what we have avaliable. Perhaps it should be
	  called README, I dunno.

2000-12-28 16:35  adrian

	* doc/whats-new.txt:


	  * fix typo
	  * add 'active' because stats f displays active fd's, not all of
	  them.

2000-12-28 15:56  bill

	* src/channel.c:

	  - working on that MODE problem between servers still

2000-12-28 15:56  ejb

	* include/s_conf.h, modules/m_links.c, src/ircd_lexer.l,
	  src/ircd_parser.y:
	  - add links_notice to config.

2000-12-28 15:26  toot

	* include/config.h, include/config.h.dist, include/m_info.h,
	  modules/m_info.c, src/client.c: . started adding the ircd.conf
	    options to /info (same order as in example.conf)  got as far as
	  max_nick_changes.  . put back a "Your are Dlined" notice that had
	  run off . removed a couple of unused settings

2000-12-28 14:22  bill

	* src/channel.c:

	  - added hyb7 +h modes to hyb6 +o modes

2000-12-28 14:12  toot

	* doc/server-version-info, include/m_info.h, messages/custom.po,
	  modules/m_version.c, src/messages.tab, src/s_debug.c: show a
	  couple of ircd.conf options in the /version line G(glines) and
	  H(hub) are there.. with room for more ;)

2000-12-28 14:09  davidt

	* doc/example.conf: Add nick_changes=yes; to example.conf

2000-12-28 13:00  davidt

	* src/s_user.c: Add missing ()'s so /lusers only hides the info for
	  NON-opers

2000-12-28 12:47  bill

	* modules/: m_join.c, m_lljoin.c, core/m_sjoin.c:

	  - added hyb6 compatibility checks for halfops (best solution is to
	  tell remote s  ervers that they're regular ops)
	  - updated dependancy file accordingly

2000-12-28 12:28  davidt

	* modules/m_set.c, src/s_serv.c: It would also core sending the
	  failure message.. bleh.

2000-12-28 12:17  davidt

	* src/s_serv.c: /set autoconn with no params would core the server.

2000-12-28 12:03  bill

	* modules/m_whois.c:

	  - fixed typo

2000-12-28 11:52  toot

	* src/event.c: cleaned up /stats e.. tab symbols just don't work
	  with most irc clients

2000-12-28 11:17  toot

	* modules/m_whois.c: . check /set, rather than ircd.conf option for
	  hide_server in m_whois

2000-12-28 10:00  db

	* modules/m_topic.c:
	  - oops. I broke remote topic

2000-12-28 01:55  lusky

	* configure, include/setup.h.in, src/modules.c: removed a bunch of
	  unneeded junk from configure script fix for missing RTLD_NOW on
	  openbsd

2000-12-28 00:42  lusky

	* Hybrid-team, src/version.c.SH: fixed some typos in ChangeLog
	     (yes, you can edit ChangeLog even though it's automatically
	  updated).  Major cleanup to Hybrid-team version.c.SH now reads
	  ../Hybrid-team removed configure from Makefile.in and added new make
	  autoconf option

2000-12-28 00:18  lusky

	* Makefile.in, configure, include/s_bsd.h, include/setup.h.in:
	  fixed scoklen_t check

2000-12-27 23:54  wcampbel

	* INSTALL, include/m_info.h:
	  1. Document some of the configure options (kqueue!!!)
	  2. Bring INFO up to date (show if OPENSSL is enabled or not,
	     STATS_NOTICE no longer compiled in, so don't show it)

2000-12-27 23:13  wcampbel

	* Hybrid-team, TODO, src/version.c.SH:
	  1. Updated my part of the TODO list
	  2. Synchronized Hybrid-team and version.c.SH (einride in one, flame
	     in the other, and Wohali's email address changed)

2000-12-27 21:27  ejb

	* Makefile.in, TODO, modules/m_restart.c:
	  - make ocnifugre should run conifgure as well as building it
	  - make /restart require server name

2000-12-27 21:15  davidt

	* modules/core/m_sjoin.c: Oops, do not use sendto_ll_.. for sjoin

2000-12-27 20:51  davidt

	* modules/core/m_sjoin.c: I remember fixing this... wtf

2000-12-27 20:29  ejb

	* TODO:
	  - update my todo list

2000-12-27 20:09  davidt

	* src/client.c: oops, I'm stupid.  this _does_ work.

2000-12-27 20:06  ejb

	* contrib/README:
	  - add readme for cintrib

2000-12-27 19:56  davidt

	* src/: client.c, parse.c: Fix rather confusing message to opers
	  when a server sends a numeric directed at a server.  Fix
	  exit_one_client so that we take LLs into account when a client
	  quits.

2000-12-27 19:40  davidt

	* modules/: m_gline.c, m_ping.c: Fix ping to prevent servers
	  throwing 402 nosuchserver numerics at each other

2000-12-27 19:39  db

	* modules/m_kline.c:
	  - committed flames m_kline.c fix

2000-12-27 19:18  db

	* modules/m_stats.c:
	  - fixed bug stumbled across by mariab, how did this one get missed?

2000-12-27 18:52  ejb

	* configure:
	  - check for socklen_t

2000-12-27 18:45  ejb

	* Makefile.in:
	  - readd include/ to Makefile
	  - make configure be rebuilt automatically when needed.

2000-12-27 18:41  wcampbel

	* doc/operguide.txt: Added Reidel's operguide.txt (Currently for
	  Hyb5/6, in progress for Hyb7)

2000-12-27 18:40  ejb

	* include/Makefile.in:
	  - oops, forgot to add this.

2000-12-27 18:40  db

	* src/restart.c:
	  - fixed the cold restart for now, really should have a warm restart
	  as well

2000-12-27 17:24  db

	* Makefile.in:
	  - removed include from Makefile.in for now

2000-12-27 16:37  ejb

	* Makefile.in, configure:
	  - install headers into ircd/include
	  - check for socklen_t (check doesnt work too well now, will fix
	  later)

2000-12-27 16:19  davidt

	* modules/core/m_message.c: Allow remote servers to send notices

2000-12-27 15:30  davidt

	* modules/m_set.c: quick patch to make yes/on == 1 and no/off == 0.

2000-12-27 15:30  wcampbel

	* modules/: m_connect.c, core/m_squit.c: Committed flame's remote
	  connect WALLOPS fixes

2000-12-27 14:27  db

	* modules/m_operwall.c:
	  - committed flames operwall changes

2000-12-27 14:08  davidt

	* src/send.c: Oops, fix for my last commit

2000-12-27 13:53  davidt

	* modules/m_invite.c, modules/m_lljoin.c, modules/m_topic.c,
	  modules/core/m_sjoin.c, src/channel.c, src/s_serv.c,
	  src/s_user.c, src/send.c: Massive bunch of fixes for LazyLinks.
	  INVITE now works if a hub is trying to relay an INVITE to a LL leaf
	  which doesn't know about the channel yet.  TOPIC now works if a user
	  on a LL leaf tries to get the topic for a channel the leaf doesn't
	  know about Hubs now only send MODE changes to LL leafs that know
	  about the user coredump in LLJOIN fixed..  some other misc stuff
	  too...

2000-12-27 12:15  db

	* modules/m_unkline.c:
	  - wrong parmcount, cores each of unkline, undline, ungline

2000-12-27 12:05  db

	* modules/m_kline.c:
	  - use the parameter block, don't core on 0 parameters for dline

2000-12-27 11:50  davidt

	* src/modules.c: Fixed the off-by-one error in the paramcount

2000-12-27 11:49  davidt

	* modules/m_set.c: Added back /quote set msglocale, which vanished
	  mysteriously when the new table-based SET code was comitted.
	  Reworked the argument handling for the SET handlers in the process,
	  handlers can now take: char; char, int; or int; arguments.

2000-12-27 11:15  db

	* include/client.h, src/s_user.c:
	  - must use ClearOper() macro to deoper, otherwise handler is still
	    set to oper handler. ooops

2000-12-27 10:34  wcampbel

	* doc/opers.txt: DNS and HTM no longer exist, document CJOIN in
	  opers.txt

2000-12-27 10:26  wcampbel

	* doc/example.conf: Removed references to the old conf format
	  removed

2000-12-27 08:24  davidt

	* Makefile.in, messages/Makefile.in, messages/custom.po: Fix up
	  messages/ to work with the new install stuff

2000-12-27 07:14  db

	* modules/core/m_kick.c:
	  - notify target if source is a half-op and target is an op

2000-12-27 06:43  db

	* modules/m_topic.c:
	  - topic change from server should appear to come from local server
	    always.

2000-12-27 06:05  db

	* modules/core/m_server.c:
	  - pathological case would cause a core. If someone fed back the
	    same server as the server as "me" it would core since there would
	    be no ->from... This bug looks like it would be in hybrid-5,
	    hybrid-6 and all 2.8 derivitatives

2000-12-26 23:20  wcampbel

	* doc/example.conf: Document MD5 oper password support

2000-12-26 21:31  db

	* src/: ircd_parser.y, s_conf.c:
	  - if test on name not className caused spoofs to lose their classes

2000-12-26 21:08  db

	* src/ircd_parser.y:
	  - missing DupString() on cconf classname

2000-12-26 20:28  bill

	* doc/example.conf, modules/m_topic.c:

	  - fixed typos

2000-12-26 18:54  db

	* modules/core/m_nick.c:
	  - fixed bug in m_nick, leafs always should send their nick changes
	    since a leaf always introduces all of its clients to their uplink
	    but hubs should continue to watch they do not send nick changes
	    for clients that have not been introduced yet to leafs.

2000-12-26 17:18  db

	* modules/: m_accept.c, m_knock.c, m_topic.c, m_who.c,
	  core/m_mode.c:
	  - number of wrong counts in the parmcount table.. caused these to
	    core parc inludes the source as well as arguments

2000-12-26 14:17  db

	* modules/m_lljoin.c, modules/m_topic.c, src/modules.c,
	  src/parse.c, src/s_serv.c:
	  - lljoin was checking for arg count, when thats no longer necessary
	    given the new parser

	  - parser got the parc count off by one when checking for vality, off
	    by one error.. also cleaned up formatting

	  - modules.c two functions were referring to basename() which had
	    been changed to irc_basename()

	  - s_serv.c was sending topic to servers that didn't see that server
	    on channel, changed interface so s_serv.c bursts topic info to
	    lazyleaf as well as setting topic

	  - changed m_topic.c to allow servers to set topic and topic info

2000-12-26 10:55  db

	* modules/core/m_nick.c, src/s_serv.c:
	  - don't burst the TOPIC in s_serv.c until there is a ms_topic()
	    handler the server isn't on channel so the leaf will send back an
	    not on channel numeric to the server!

	  - cleaned up setting of fd_note in m_nick()... in both cases it
	    is known the nick is local, as non local nicks are handled in
	    separate function.

2000-12-26 10:07  db

	* modules/m_list.c:
	  - fix core in m_list.c if /list of non-existent channel is done.
	  oops

2000-12-26 00:14  spookey

	* src/modules.c:
	   - moved basename() to irc_basename() -- compatability issue with
	   old glibc systems (string.h used to declare basename())

2000-12-25 17:05  ejb

	* modules/m_knock.c:
	  - fix knock paramcount
	  - make knock use +p to stop it, not +s

2000-12-25 16:40  wcampbel

	* doc/: example.conf, modes.txt:
	  1. Noted that auth blocks with redirection MUST have a class
	  2. is- says anonops is hideops

2000-12-25 14:50  db

	* src/ircd_parser.y:
	  - I'm not sure how this ever worked before..
	    yylval.string should be DupString'ed in MOST cases before adding
	    to conf link list

	    UNTESTED folks, sorry have to do the Christmas day family visiting
	    thing NOW

2000-12-25 14:02  ejb

	* modules/m_whois.c:
	  - allow remote whois.

2000-12-25 13:52  toot

	* modules/: m_time.c, m_who.c: replaced some
	  ConfigFileEntry.hide_server with GlobalSetOptions.hide_server

2000-12-25 13:32  ejb

	* messages/Makefile.in, src/Makefile.in, src/parse.c,
	  tools/Makefile.in:
	  - split out some of parse() into a couple of new functions,
	    handle_command() and string_to_array().

2000-12-25 13:22  toot

	* modules/m_stats.c, src/s_gline.c: . don't want it to say its
	  listing pending_glines if there aren't any . param counts should al
	  be correct now

2000-12-25 12:59  toot

	* include/s_gline.h, modules/m_gline.c, modules/m_kline.c,
	  modules/m_stats.c, modules/m_who.c, modules/m_whois.c,
	  modules/m_whowas.c: . fixed soem paramcounts in modules . make
	  GLINE_CLEANUP_TIME a bit more frequent

2000-12-25 12:27  wcampbel

	* doc/whats-new.txt: Document HUB CAPAB

2000-12-25 11:36  wcampbel

	* doc/whats-new.txt: Document ISUPPORT

2000-12-25 11:35  db

	* include/s_serv.h, src/s_serv.c:
	  - send on HUB capability if configured as HUB

2000-12-25 11:19  wcampbel

	* Hybrid-team, TODO, doc/modes.txt, doc/whats-new.txt:
	  1. Updated my TODO list
	  2. Updated whats-new.txt a little
	  3. Put a missing space in flame's name
	  4. Added a summary of the user and channel modes

2000-12-25 11:09  db

	* modules/m_motd.c:
	  - I'm convinced. Lets allow remote motd in non shide mode at least
	    Its a module, so it can all be changed on the fly anyway.

2000-12-25 11:04  db

	* modules/m_lljoin.c:
	  - sending channel_member_names() to a server is not useful, sending
	    it to the client that just joined, might be.

2000-12-25 10:59  toot

	* include/s_gline.h, modules/m_gline.c, modules/core/m_nick.c,
	  src/s_gline.c: . made glines and pending_glines into dlink_lists
	  . couple of minor cleanups/cosmetic changes to m_nick

2000-12-25 02:03  db

	* include/handlers.h, modules/m_motd.c:
	  - motd of non local servers should not be shown to users

2000-12-25 01:32  db

	* modules/m_whois.c, src/parse.c:
	  - was missing nick in do_numeric in parse.c ... 401 was not
	    (no such nick) was not being seen properly by client on LL server.

2000-12-25 00:54  db

	* src/parse.c:
	  - ummmm parse isnt' handed a null terminated line, its handed the
	    end of of the buffer as well as the start. The end of the buffer if
	    its rfc compliant, will be '\r' '\n' but no terminating '\0'
	    so, take bufend look one back that should be a '\n', then blast it
	    then look to see if there is a '\r' before it, if so blast it as
	    well then thats it... end is now the valid end of the buffer

2000-12-25 00:06  db

	* modules/core/m_nick.c, src/parse.c:
	  - numeric sent to server should be announced what it is ...
	  - nick change while not on channel would not be propogated to a LL
	    server causing those mysterious nick collides. oops.

2000-12-24 23:39  db

	* modules/m_rehash.c:
	  - extra '\n' in log() not needed

2000-12-24 23:31  wcampbel

	* doc/: example.conf, simple.conf:
	  1. Forgot to change the formatting in oper_only_umodes
	  2. Add 'rej' '+r' to oper_only_umodes
	  3. Created a new simple.conf

	  --snip-- # NOTE TO DEVELOPERS:  Do we set defaults for the variables
	  in the general #                      block?  If so, then I can
	  leave out most of the things #                      in here and make
	  it simpler to configure.  If not, #                      please let
	  me know so I can document things clearly --end--

2000-12-24 23:05  db

	* src/parse.c:
	  - bufend was already there, so use it...

2000-12-24 22:18  wcampbel

	* doc/example.conf: Add a little more documentation to is-'s
	  oper_only_umodes

2000-12-24 20:29  db

	* src/parse.c:
	  - removed unneeded match()
	    and removed quite obsolete comments...
	    *sigh* This isn't an historical paper folks, those belong in
	    museums not a modern ircd.

2000-12-24 20:16  toot

	* messages/custom.po, modules/m_stats.c, src/messages.tab,
	  src/s_user.c: reworded total recieved connections message.  and
	  fixed it in /stats u

2000-12-24 20:04  toot

	* include/s_conf.h, modules/m_kline.c, src/s_conf.c: fixed bug that
	  made the date appear twice when klines where written

2000-12-24 18:59  adrian

	* doc/technical/network.txt:

	  I hate my own grammar.

2000-12-24 18:27  toot

	* include/s_conf.h, modules/m_unkline.c, src/s_conf.c: SOD IT!!
	  made tklines into a dlink_list

2000-12-24 18:02  adrian

	* src/s_bsd_poll.c:

	  Explain what we're not doing with the poll fd lists ..  Yes, I'll
	  get there after some more feedback.. :-)

2000-12-24 17:58  adrian

	* src/s_bsd_select.c:

	  Stick in an #error in the code - I still haven't finished the poll()
	  code, so I haven't rewritten the select code ..

2000-12-24 17:45  db

	* src/ircd.c:
	  - removed lame test that was restarting irc.mcs.net for no reason..
	    under heavy ddos the server was being lagged enough to restart..
	    No real need for this test.

2000-12-24 17:44  db

	* src/ircd.c:
	  - remove last remnant of evil #ifdef CHROOT

2000-12-24 17:40  adrian

	* src/ircd.c:

	  Change some of the comments which aren't applicable now that the
	  old-school io loop is gone.

2000-12-24 17:39  adrian

	* include/s_serv.h, src/ircd.c, src/s_serv.c:


	  * move try_connections() into an event, where it should have been a
	    long time ago. Its called every TRY_CONNECTIONS_TIME seconds, which
	    right now is defined as 60 seconds

	  * Make most of ioloop() redundant. MMmmmm.. ioloop() looks sexy-slim
	  now..

2000-12-24 15:27  toot

	* include/supported.h, src/s_conf.c: . tkline expiry kept
	  crashing.. redid it so it won't . added VCHANS to 005 numeric

2000-12-24 13:43  db

	* include/config.h, include/config.h.dist, modules/core/m_mode.c,
	  src/ircd.c, src/ircd_lexer.l, src/ircd_parser.y, src/parse.c:
	  - tidied up isomer's parse.c mods... Then noted that someone was
	    sending a numeric to "me" which led to...
	  - fixing who sends the MODE message in m_mode, it should be
	    sptr->name not me.name
	  - Then noted a conflict in LOGPATH, which I resolved by changing
	    LOGPATH in ircd_parser.y ircd_lexer.l to T_LOGPATH
	  - removed with extreme prejudice all UID/GID CHROOT crap. my
	    goodness efnet servers are dedicated now, and if you really insist,
	    set up a jail or something.

2000-12-24 10:59  wcampbel

	* INSTALL, doc/example.conf: Revised a couple documents

2000-12-24 09:49  adrian

	* include/config.h:

	  Create a LOGPATH which contains the logfile directory, and then
	  stick ircd.log in there instead of ETCPATH.

	  What *really* should happen is that these paths and filenames should
	  be defined in the configuration file, but... :-)

2000-12-24 02:19  isomer

	* src/parse.c:
	  * rewrote do_numeric(), it nolonger accepts multiple targets (can't
	  happen) and hopefully has bugs removed. on the other hand tho, it's
	  only been tested in that it compiles...

2000-12-24 00:29  ejb

	* include/handlers.h, modules/m_accept.c, modules/m_version.c,
	  src/modules.c:
	  - fixed bug whereby a module was not actually dlclose()d in
	    unload_one_module, hence trying to reload a module would actually
	  reload the old one
	  - fixed paramcount in accept
	  - added mo_version to version_msgtab

2000-12-24 00:20  isomer

	* modules/m_version.c: Changed the way mo_version works with
	  respect to hunt_server

2000-12-24 00:05  isomer

	* modules/m_version.c: oops! forgot about opers!

2000-12-23 23:42  isomer

	* include/supported.h, modules/m_version.c, src/ircd.c,
	  src/s_user.c:
	  * added 'show_isupport' and added to m_version (local only).

2000-12-23 23:39  ejb

	* TODO:
	  - update my TODO list

2000-12-23 23:31  ejb

	* src/: ircd_parser.y, s_conf.c:
	  - finally fix the annoying parse error bug in ircd_parser.y

2000-12-23 23:29  wcampbel

	* doc/Makefile.in, tools/Makefile.in:
	  1. Updated .depend's
	  2. Added blank depend rules in doc, gnats, and tools Makefile.in's

2000-12-23 22:55  ejb

	* include/supported.h, src/ircd.c, src/s_user.c:
	  - make ISUPPORT numeric support max_targets dynamically
	  - cleaned up gnats/Makefile.in a bit.

2000-12-23 22:37  ejb

	* modules/m_unkline.c, src/channel.c:
	  - some more paramcount fixes
	  - make +h's propagate (oops)

2000-12-23 22:26  ejb

	* src/parse.c:
	  - cleanup and fix of parse.c, should fix a couple of bugs.

2000-12-23 22:06  ejb

	* doc/example.conf, include/config.h, src/s_conf.c:
	  - documented max_targets, and made it default to 4.

2000-12-23 22:01  ejb

	* include/s_conf.h, include/supported.h, modules/core/m_message.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/parse.c:
	  - fix for another parse.c bug
	  - make max_targets an ircd.conf options

2000-12-23 21:21  isomer

	* include/supported.h: Doh! forgott supported.h (sorry toot!)

2000-12-23 21:15  isomer

	* src/: ircd.c, messages.tab, s_user.c: added 005 ISUPPORT support.

2000-12-23 21:00  ejb

	* src/parse.c:
	  - added explanatory comment in parse()

2000-12-23 20:57  ejb

	* src/parse.c:
	  - finally fix the broken longarg handling in parse.c

2000-12-23 20:43  ejb

	* include/s_conf.h, src/ircd_parser.y:
	  - fixed fname_* (oops, hi diane)

2000-12-23 20:36  ejb

	* doc/example.conf, include/modules.h, src/ircd_lexer.l,
	  src/ircd_parser.y, src/modules.c:
	  - support paths for module loading.

2000-12-23 20:09  wcampbel

	* doc/whats-new.txt: Document CAP_HOPS

2000-12-23 20:07  ejb

	* modules/m_userhost.c:
	  - fix m_userhost paramcount

2000-12-23 20:04  ejb

	* Hybrid-team:
	  - added flame to Hybrid-team.

2000-12-23 19:41  ejb

	* messages/custom.po, src/messages.tab:
	  - readd 3rd argument to MYINFO, added it in custom.po as well this
	  time.

2000-12-23 19:39  wcampbel

	* Hybrid-team: might as well add myself too...

2000-12-23 19:37  ejb

	* src/channel.c:
	  - use CAP_HOPS for half-ops

2000-12-23 19:28  madmax

	* modules/core/m_sjoin.c, src/channel.c: All server modes now show
	  as coming from the current server.  This is now whether you are
	  shiding or not - CS has always done it that way apparently, so
	  nothing should break.

2000-12-23 19:10  ejb

	* include/s_serv.h, src/s_serv.c:
	  - add cap_hops, doesn't do anything yet.

2000-12-23 19:04  ejb

	* doc/example.conf, include/config.h, include/s_conf.h,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_user.c:
	  - move oper_only_umodes into ircd.conf.

2000-12-23 18:55  toot

	* include/: config.h, config.h.dist: disable SYSLOG by default
	  updated .depends

2000-12-23 18:45  toot

	* modules/core/m_kill.c: made local kills look like global kills to
	  users (flame) -- they were already suposed to.. but wern't quite
	  right :)

2000-12-23 18:28  joant

	* Hybrid-team: Updating my email address

2000-12-23 18:12  ejb

	* modules/m_ison.c, src/modules.c:
	  - fix a couple of paracounts.

2000-12-23 18:09  toot

	* src/messages.tab: MYINFO had gone a bit weird.. synced it with
	  custom.po's

2000-12-23 18:00  madmax

	* Hybrid-team: Hopefully i'll justify my entry soon ;)

2000-12-23 17:30  spookey

	* tools/convertconf.c: removes extra tab craziness, it drove me
	  INSANE... =P

2000-12-23 17:12  ejb

	* src/parse.c:
	  - fix off-by-one error in parse.c

2000-12-23 17:12  toot

	* include/s_conf.h, modules/m_unkline.c, src/ircd.c, src/s_conf.c:
	  made tkline expiry into an event, and fixed some bugs with
	  temp-klines..  there's still more bugs with them though

2000-12-23 17:11  madmax

	* modules/m_locops.c: Fixes for operwall/locops (flame)

2000-12-23 16:55  ejb

	* src/parse.c:
	  - fix a stupid core in parse.c.

2000-12-23 16:47  ejb

	* src/parse.c:
	  - slightly neater fix for ISON, still has a bug:
	    ISON a b :is-
	    will still return is- is NOT on because of the :, which
	    is blindly copied to the output .. can fix this if its a problem,
	    is it likely to be ?

2000-12-23 15:57  ejb

	* modules/m_ison.c, modules/core/m_sjoin.c, src/parse.c:
	  - slightly ugly fix to ISON problem committed.  someone might want
	    to take a look at the code in parse.c..

2000-12-23 13:55  ejb

	* doc/whats-new.txt:
	  - noted in whats-news.txt that the old ocnfig format is no longer
	    supported.

2000-12-23 13:53  madmax

	* modules/m_whois.c: Opers can now see idle times and servernames
	  in whois when shide is on

2000-12-23 13:38  toot

	* modules/m_kline.c: fixed my screw up with temp-klines

2000-12-23 13:13  ejb

	* modules/: m_gline.c, m_kline.c:
	  - applied flame's gline/kline diffs.

2000-12-23 13:07  toot

	* src/: channel.c, vchannel.c: empty (ie, persistant) vchans use
	  the last person in the channel as the ID, prefixed with an extra !
	  ..  so we get #test has 2 possible virtual channels available #test
	  !toot !!toot_

2000-12-23 12:50  ejb

	* include/config.h, src/s_user.c:
	  - add OPER_ONLY_UMODES, umodes which only opers can set.

2000-12-23 12:39  wcampbel

	* doc/opers.txt, modules/m_stats.c:
	  1. Make STATS for non-opers consistent...if it's an oper only STATS
	     request, then always show ERR_NOPRIVILEGES.
	  2. Allow STATS x, does the same as X, no reason why it shouldn't
	  3. I forgot a couple STATS in the opers.txt documentation

2000-12-23 12:20  wcampbel

	* README.FIRST, TODO, doc/whats-new.txt:
	  1. Add the broken $$target and $#target to the TODO list
	  2. Channel Mode +z became +a, update whats-new.txt
	  3. Brought README.FIRST up to date

2000-12-23 12:02  ejb

	* TODO, doc/example.conf, include/config.h, include/s_conf.h,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_log.c:
	  - move fname_* into ircd.conf.
	  - added fname_foperlog, not used yet.

2000-12-23 11:37  madmax

	* src/client.c: Changed split reason when hidden to : "<servername>
	  net.split"

2000-12-23 09:19  db

	* modules/m_links.c, src/s_user.c:
	  - show a fake name in the second field on links, this makes scripts
	    and bx work better
	  - when deopering remove admin flag (madmax pointed this one out)

2000-12-23 08:29  toot

	* doc/opers.txt, modules/m_kline.c, modules/core/m_server.c,
	  modules/m_svinfo.c, modules/core/m_squit.c, src/client.c,
	  src/irc_string.c, src/s_bsd.c, src/s_serv.c: . added
	  undline/ungline to opers.txt . log temp klines, and check for
	  redundancy too . fixed some weird stuff with tkline_time, it's
	  always in minutes..  . added a bit more logging for server
	  disconnections . always show the full quit reason in +c . check "if
	  ((x))" in MyFree

2000-12-23 05:32  adrian

	* TODO:

	  Update the TODO file with the current state of affairs.

2000-12-23 05:29  adrian

	* doc/Makefile.in, messages/Makefile.in:

	  Fix 'make distclean' targets in various directories to actually

	  * not error out when someone types 'make distclean'
	  * delete Makefile

2000-12-23 03:13  db

	* doc/kline.txt:
	  - added a rough document outlining how remote klines work
	    for oper and server protocol.
	    I know Walter or Joan can do better, but I think its better than
	    nothing no?

2000-12-23 02:51  db

	* src/client.c:
	  - re-added "Ping timeout: nnn seconds" to time out code.

2000-12-23 02:28  db

	* modules/core/m_message.c:
	  - client that is notice'ed should not reply with an away.. noticed
	  by Rodder

2000-12-23 02:18  db

	* modules/core/m_sjoin.c:
	  - fixed stupid bug in m_sjoin.c, lost a sendto_local_channel in the
	    rewrite, which meant no MODE's were being sent... I "fixed" it
	    previously in the wrong way, which resulted in weird five mode ops
	  etc.

2000-12-23 00:05  toot

	* doc/example.conf, include/s_conf.h, messages/custom.po,
	  modules/m_oper.c, modules/core/m_sjoin.c, src/channel.c,
	  src/messages.tab, tools/Makefile.in: . removed that pointless
	  s_conf.h log . changed +z to +a.. it's anonymous ops ;) . "is now an
	  operator.." notice doesn't need to show if they are global/local now
	  . slight fix to example.conf

2000-12-22 22:32  db

	* doc/: example.conf.trillian, example_old.conf, simple.conf:
	  - moved obsolete conf file examples into old
	    purely for historical reasons

2000-12-22 21:42  db

	* modules/m_oper.c, src/s_conf.c:
	  - simplified conf handling for yacc

2000-12-22 20:42  db

	* include/client.h, modules/m_cjoin.c, modules/m_gline.c,
	  modules/m_info.c, modules/m_join.c, modules/m_links.c,
	  modules/m_lljoin.c, modules/core/m_kill.c, modules/m_locops.c,
	  modules/m_lusers.c, modules/core/m_message.c, modules/m_motd.c,
	  modules/m_oper.c, modules/core/m_mode.c, modules/core/m_nick.c,
	  modules/m_operwall.c, modules/m_restart.c, modules/m_stats.c,
	  modules/m_time.c, modules/m_trace.c, modules/m_userhost.c,
	  modules/m_version.c, modules/m_who.c, modules/m_whois.c,
	  modules/m_whowas.c, src/client.c, src/mtrie_conf.c, src/packet.c,
	  src/parse.c, src/s_conf.c, src/s_misc.c, src/s_user.c:
	  - converted all use of IsGlobalOper and IsLocalOper to IsOper
	    there is no local oper now

2000-12-22 20:11  db

	* include/config.h, modules/m_connect.c, modules/m_oper.c,
	  modules/core/m_kill.c, modules/core/m_squit.c, src/s_conf.c,
	  src/s_user.c:
	  - removing local oper references, removing bloat...

2000-12-22 18:22  db

	* include/s_conf.h, src/oldparse.c, src/s_conf.c:
	  - Ok, ALL the old support for old style confs is gone now, except
	    for K/D lines That means IF YOU HAVEN'T CONVERTED FORMAT YET, DO IT
	    NOW, OR IT WILL NOT RUN. capiche?
	    I'll be able to simplify the parser in a bit a little more.

2000-12-22 17:59  db

	* include/s_conf.h, src/s_conf.c, src/s_serv.c:
	  - ok. attach_cn_lines() was just plain wrong.
	    The code was matching on hostname(ip) instead of servername
	    One needs to look up by servername, then check if the hostname/ip
	    matches..  This explains why I had problem with multi servers on
	    same host but different names.

	    I think I got this right... but I am NOT sure if it works for
	    hostmasked servers properly. that has to be verified asap. Might
	    need a match() in the code..

2000-12-22 16:04  wcampbel

	* modules/m_oper.c, tools/Makefile.in, tools/README,
	  tools/md5mkpasswd.c:
	  1. Cleaned up a comment and trailing blank lines from m_oper.c
	  2. Added an md5 based mkpasswd.c, which works on FreeBSD 3.x/4.x and
	     Linux glibc.  Known NOT to work on Solaris 2.6 and Cygwin.

2000-12-22 12:01  wcampbel

	* doc/example.conf, doc/opers.txt, modules/m_rehash.c,
	  modules/m_stats.c:
	  1. Added an example of user and host in the shared section
	  2. Updated opers.txt some more
	  3. Added OMOTD to the REHASH help message
	  4. STATS P shouldn't show to non-opers

2000-12-22 11:32  db

	* src/s_log.c:
	  - tiny bug fix for logging

2000-12-22 11:12  db

	* include/msg.h, modules/m_accept.c, modules/m_admin.c,
	  modules/m_away.c, modules/m_capab.c, modules/m_cburst.c,
	  modules/m_challenge.c, modules/m_cjoin.c, modules/m_close.c,
	  modules/m_connect.c, modules/m_dmem.c, modules/m_drop.c,
	  modules/m_eob.c, modules/m_error.c, modules/core/m_die.c,
	  modules/m_gline.c, modules/m_hash.c, modules/m_help.c,
	  modules/m_info.c, modules/m_invite.c, modules/m_ison.c,
	  modules/m_join.c, modules/core/m_kick.c, modules/m_kline.c,
	  modules/core/m_kill.c, modules/m_knock.c, modules/m_links.c,
	  modules/m_list.c, modules/m_lljoin.c, modules/m_locops.c,
	  modules/m_lusers.c, modules/m_motd.c, modules/m_names.c,
	  modules/core/m_message.c, modules/core/m_mode.c,
	  modules/m_oper.c, modules/m_operwall.c, modules/core/m_nick.c,
	  modules/m_pass.c, modules/m_ping.c, modules/m_pong.c,
	  modules/core/m_part.c, modules/m_rehash.c, modules/m_restart.c,
	  modules/core/m_quit.c, modules/m_set.c, modules/core/m_server.c,
	  modules/core/m_sjoin.c, modules/core/m_squit.c,
	  modules/m_stats.c, modules/m_svinfo.c, modules/m_testline.c,
	  modules/m_time.c, modules/m_topic.c, modules/m_trace.c,
	  modules/m_unkline.c, modules/m_user.c, modules/m_userhost.c,
	  modules/m_users.c, modules/m_version.c, modules/m_wallops.c,
	  modules/m_who.c, modules/m_whois.c, modules/m_whowas.c,
	  src/modules.c:
	  - massive addition to add extra parameter to struct Message
	    this will enable us to have the parser handle parameter counts
	    properly in all cases before it even gets to the module it is
	    calling.

2000-12-22 10:51  db

	* modules/m_kline.c, modules/m_set.c, src/class.c, src/list.c,
	  src/s_bsd.c, src/s_conf.c, src/s_log.c, src/s_serv.c:
	  - use irccmp() not match in m_kline for "ON" parser duh
	  - use irccmp() not strncasecmp in m_set.c
	  - slight fix for stupid memory leak in class.c found by einride
	  - use POSIX non blocking now all the time in s_bsd.c
	  - added log entries for bad parse in s_conf.c
	  - cleaned up more comment blocks

2000-12-22 10:49  wcampbel

	* src/ircd_parser.y:
	  1. Don't invalidate entire blocks just because they have an error
	  2. Fixed SMALL bug with oper_admin

2000-12-22 10:29  wcampbel

	* doc/whats-new.txt: Document directed K-lines

2000-12-22 03:43  db

	* modules/m_kline.c:
	  - fixed logging botch for tklines

2000-12-22 03:11  db

	* doc/whats-new.txt, doc/technical/send.txt, modules/m_kline.c,
	  src/s_conf.c, src/send.c:
	  - modifed m_kline to add directed klines

	    All the following should work

	  kline directed at a specific server
	    /quote kline user@host ON server :reason
	    /quote kline [time] user@host on server :reason

	  kline directed at all servers
	    /quote kline user@host on * :reason
	    /quote kline [time] user@host on * :reason

	  original normal local klines

	    /quote kline user@host :reason
	    /quote kline [time] user@host :reason

2000-12-21 23:09  ejb

	* doc/example.conf, include/config.h, include/m_info.h,
	  include/s_conf.h, src/class.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c:
	  - moved maximum_links to ircd.conf

2000-12-21 22:47  ejb

	* include/config.h, src/match.c:
	  - RFC1035_ANAL is always defined now.

2000-12-21 22:02  db

	* modules/m_stats.c:
	  - stats v should not be shown to users
	  - neither should stats h

2000-12-21 21:43  wcampbel

	* tools/: convertconf.c, ircd.conf.new: Brought convertconf up to
	  date.  It now produces a valid -7 conf.  Anyone mind if I add some
	  more test lines to the test ircd.conf in tools?

2000-12-21 21:38  db

	* modules/m_stats.c:
	  - non opers should not be able to do /stats ?

2000-12-21 21:19  db

	* src/: ircd_lexer.l, ircd_parser.y, oldparse.c, s_conf.c:
	  - removed local opers, its obsolete with oper flags besides
	    users can probe which server an oper is on...

2000-12-21 20:57  wcampbel

	* doc/: example.conf, whats-new.txt: Removed global from
	  example.conf as local opers no longer exist.  Added a "What's New"
	   document giving a brief overview of the new Hybrid featues.

2000-12-21 17:11  wcampbel

	* doc/opers.txt: Add some of the new oper commands to opers.txt

2000-12-21 16:34  wcampbel

	* doc/example.conf: Document Diane's new Redirect options

2000-12-21 15:48  db

	* tools/: convertconf.c, ircd.conf.new:
	  - removed allow_bots from convertconf.c
	  - removed example of allow_bots ircd.conf.new

2000-12-21 15:33  wcampbel

	* doc/example.conf: Documented all currently working options

2000-12-21 15:05  db

	* include/class.h, include/numeric.h, include/s_conf.h,
	  src/ircd_lexer.l, src/ircd_parser.y, src/messages.tab,
	  src/s_conf.c:
	  - added redirserv redirport to auth {} block
	    I've been wanting this one a long time, finally epic supports it.
	    yay.

2000-12-21 11:00  db

	* src/: event.c, linebuf.c, s_auth.c:
	  - some casts to keep the compiler whining down

2000-12-21 09:19  db

	* src/blalloc.c:
	  - updated blalloc.c from einride

2000-12-21 09:16  adrian

	* include/ircd_defs.h, src/packet.c:

	  XXX UNTESTED UNTESTED UNTESTED UNTESTED

	  (Go a broken CVS tree. :-)

	  * change HANDLED_OK to CLIENT_OK. God knows why the two return
	    values from parse_client_queued() (at least from ircd_defs.h) turned
	    out to be CLIENT_EXITED or HANDLED_OK. Lets hear three cheers for
	  great coding!

	  * Changed parsed_client_queued() to return CLIENT_OK if everythign
	    went well (it was returning a numerical value..)

	  * Actually listen to the return values of parse_client_queued() in
	    determining whether to schedule antoher comm_setselect() or
	    reregister the client in the flush list.

	  A bug was found where a fd was being thrown onto the flush list in
	  flood_recalc() which would then trigger an assertion. This won't
	  call comm_setflush() if the client has just exited.

	  What *should* happen in comm_checktimeouts() is there should be an
	  assertion that the fd is open (flags.open) before calling the
	  handler..  just to be anal.

2000-12-21 09:15  db

	* modules/m_dmem.c:
	  - missing m_dmem.c file from einride

2000-12-21 09:03  db

	* src/memdebug.c:
	  - missing memdebug.c from einride

2000-12-21 08:58  db

	* include/memdebug.h:
	  - added missing memdebug.h passed on by einride

2000-12-21 08:39  db

	* include/channel.h, include/handlers.h, include/irc_string.h,
	  include/ircd_defs.h, include/modules.h, include/msg.h,
	  modules/Makefile.in, modules/m_challenge.c, modules/m_whois.c,
	  modules/core/Makefile.in, modules/m_whowas.c, src/Makefile.in,
	  src/blalloc.c, src/channel.c, src/class.c, src/client.c,
	  src/dline_conf.c, src/event.c, src/fdlist.c, src/fileio.c,
	  src/hash.c, src/irc_string.c, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/ircd_signal.c, src/ircdauth.c,
	  src/linebuf.c, src/list.c, src/listener.c, src/m_error.c,
	  src/match.c, src/modules.c, src/motd.c, src/mtrie_conf.c,
	  src/numeric.c, src/oldparse.c, src/packet.c, src/parse.c,
	  src/res.c, src/restart.c, src/rsa.c, src/s_auth.c, src/s_bsd.c,
	  src/s_bsd_kqueue.c, src/s_bsd_poll.c, src/s_bsd_select.c,
	  src/s_conf.c, src/s_debug.c, src/s_gline.c, src/s_log.c,
	  src/s_misc.c, src/s_serv.c, src/s_stats.c, src/s_user.c,
	  src/scache.c, src/send.c, src/sprintf_irc.c, src/tools.c,
	  src/vchannel.c, src/whowas.c:
	  - added einride's memory debugging

2000-12-21 01:14  db

	* modules/core/m_sjoin.c:
	  - the modes not propagating on sjoin was my fault.
	    channel_modes() set the +ntz in modebuf, which I then promptly
	    walked over... one has to leave those modes in then add the +o and
	    +v

2000-12-20 23:48  db

	* include/channel.h, modules/m_cburst.c, src/channel.c:
	  - cleanups

2000-12-20 23:44  ejb

	* include/channel.h, modules/core/m_sjoin.c:
	  - some more +z stuff.

2000-12-20 22:46  db

	* modules/m_set.c, src/channel.c, src/client.c:
	  - removed prototype for quote_setchide
	  - cleaned up formatting in channel.c

2000-12-20 22:21  ryan

	* modules/m_lljoin.c: !ptr && ptr->bleah? wtf?.. don't think so..
	  try || :)

2000-12-20 22:18  ejb

	* modules/core/m_sjoin.c:
	  - fixed m_sjoin() for +Z

2000-12-20 21:43  wcampbel

	* TODO: Added a couple things to the bottom

2000-12-20 21:35  ejb

	* modules/core/m_sjoin.c:
	  - make ms_sjoin notice +z

2000-12-20 21:33  ryan

	* src/s_log.c: write_log now is sure that logfile is not NULL and
	  that the buffer isn't overflowed (sprintf -> snprintf)

2000-12-20 21:31  db

	* modules/m_gline.c, src/client.c:
	  - added sendto_realops on gline (flame)
	  - capitalized "ping timeout" to "Ping timeout"

2000-12-20 21:26  ejb

	* include/ircd.h, modules/m_lljoin.c, modules/m_names.c,
	  modules/core/m_kick.c, modules/m_set.c, modules/m_topic.c,
	  modules/m_who.c, modules/core/m_sjoin.c, modules/m_whois.c:
	   -made +z work properly

2000-12-20 21:14  ejb

	* src/ircd_lexer.l:
	  - fixed ircd_lexer (oops)

2000-12-20 21:05  ejb

	* include/s_conf.h, src/ircd_parser.y, src/s_conf.c:
	  - removed hide_chanops from config since its not used anymore.

2000-12-20 20:27  ejb

	* include/channel.h, src/channel.c, src/messages.tab:
	  - added umode +z, hides ops on channel (replaces hide_chanops=yes)
	  - changed format of 004 numeric

2000-12-20 20:11  wcampbel

	* doc/example.conf: example.conf is now correct for the current
	  state of the parser.  All that is needed now is more documentation
	  on the options

2000-12-20 19:59  db

	* modules/m_gline.c, src/ircd_parser.y:
	  - patched m_gline.c from fl_
	  - patched ircd_parser from Walter Campbell

2000-12-20 19:43  ejb

	* README.FIRST:
	  - added note about using `send-pr' to report bugs
	  - added note that cygwin is no longer support.

2000-12-20 19:16  ejb

	* Makefile.in, configure: added GNATS support for ircd.  currently
	  using a gnats db hosted on leguin.org.uk, can be changed if needed.

2000-12-20 18:24  db

	* modules/m_accept.c:
	  - added notification to target when put on and taken off accept list

2000-12-20 17:35  db

	* INSTALL, doc/CIDR.txt, modules/m_wallops.c:
	  - fixed wallops so it doesn't add the "WALLOPS" message, uneeded.
	  - updated INSTALL and CIDR docs from Walter Campbell

2000-12-20 17:19  db

	* modules/m_wallops.c:
	  - fixed stupid in m_wallops.c it was not showing oper wallops but
	    was showing server wallops

2000-12-20 17:00  db

	* doc/LazyLinks.as.implemented.txt, include/s_conf.h,
	  modules/m_kline.c, modules/core/m_nick.c, src/ircd_parser.y,
	  src/s_conf.c, src/s_user.c:
	  - shared {} can now have user/host for user@host of oper allowed
	    to place a remote kline from server given by name.

	  - updated the lazy link docs a bit, its badly written, fix.

2000-12-20 13:35  db

	* modules/m_topic.c:
	  - I hate furry logic when I'm tired.

2000-12-20 13:29  db

	* modules/m_topic.c, src/ircd_lexer.l, src/ircd_parser.y:
	  - TOPIC_UH is =gone= but was still in parser/lexer and m_topic.c
	    removed. Also added code to hide the always present topic u@h
	    if chide is on.

2000-12-20 13:02  db

	* tools/convertconf.c:
	  - I had interchanged name/host oops

2000-12-20 11:26  cosine

	* src/ircdauth.c: connect timeout problem fixed

2000-12-20 03:10  db

	* src/ircd_lexer.l, src/ircd_parser.y, src/oldparse.c,
	  tools/convertconf.c:
	  - fixed convertconf to bring it in line with current conf file
	    format it does a reasonable first pass job, though you still might
	    need to tweak..

	  - We were missing "shared" keyword in new conf file. This is vaguely
	    worded to allow us to support "shared klines" "shared locops" etc.
	    should we choose to do so... If I had time, I would extend it to
	    allow specification of remote user@host as well... and whether it
	    applies to klines/locops/unkline etc. shared resources...

	  - provided I hear back from adrian after a successful conversion of
	    his conf file, I'm going to nuke most of the gook in oldparser.c
	    so it only deals with 'D' and 'K' lines.. I'll likely rename it as
	    well kdparser.c maybe..

	  - parse.c has a bug. but its late for me, I'll look at it after some
	    sleep maybe is- and I can look at it together. The problem is
	  simple...

	  ISON nick1 nick2 nick3...... nick20

	  all nicks at 15 to 20 should go into the last parv[] not be
	  truncated... at a space. Otherwise we break ISON for sure, and
	  likely other things...

	  - Adrian can you move logs into /logs from /etc ? pretty please? ;)

2000-12-20 00:59  db

	* modules/core/m_nick.c:
	  - don't send on a nick change if the nick hasnt' been seen on a lazy
	    link server...

2000-12-19 22:43  db

	* modules/m_invite.c, src/client.c:
	  - fixed double free in invites
	  - fixed prefix botch in m_invite() using sendto_anywhere()
	    but adding a prefix myself. oops. sendto_anywhere does its own
	    prefixes.

2000-12-19 21:39  db

	* doc/example.conf, include/ircdauth.h, include/s_serv.h,
	  include/send.h, modules/m_away.c, modules/m_join.c,
	  modules/core/m_nick.c, src/client.c, src/ircdauth.c,
	  src/s_serv.c, src/s_user.c, src/send.c:
	  - cosine...
	  	/* XXX THIS IS A STATIC */ #if 0
	    comm_connect_callback(fd, COMM_OK); #endif

	  in ircdauth.c

	    It won't compile like that

	  - This looks like it works finally .... lazylinks

	  - removed no longer used option in example.conf

2000-12-19 16:11  cosine

	* src/ircdauth.c: iauth is now working again

2000-12-19 14:47  db

	* modules/m_away.c, modules/m_join.c, modules/core/m_sjoin.c,
	  src/channel.c, src/s_conf.c, src/s_user.c, src/send.c:
	  - lazylinks final form. New nicks introduced after the burst, are
	    simply passed on. The reason is simple. SJOIN would have to be
	    modifed to pass new nicks onto ll servers, and its a pita. SJOIN
	    needs more rewriting before I attempt that. ugh. So for now, any new
	    nicks that join the network, get propogated to the LL leaf as
	    normal. The hub does not burst nicks at all, it bursts channel back
	    ON request of a cburst from the ll server, as it does so, it SJOIN's
	    the nicks needed as well as SJOINing the channels requested. Nicks
	    that are on the server but not sjoin'ed to a channel, will be
	    propogated to the LL leaf when they join a channel, not before. i.e.
	    if you are nick A on hub HUBA you will not be nick propogated to the
	    leaf until you join a channel, or you /quit and rejoin the network.
	    Simple? Capiche?

2000-12-19 13:04  ejb

	* include/numeric.h, modules/core/m_quit.c, src/messages.tab,
	  src/modules.c:
	  - made modlist return a numeric
	  - put ms_quit back in (oops).

2000-12-19 12:46  ejb

	* include/s_conf.h, modules/core/m_quit.c, src/ircd_lexer.l,
	  src/ircd_parser.y:
	  - added client_exit:
	     *** Signoff: foo (Client Exit: foo)
	  - removed ms_quit.

2000-12-19 05:14  db

	* include/s_serv.h, src/channel.c, src/s_serv.c:
	  - removed goto in channel.c dealing with invex

2000-12-19 04:46  db

	* include/send.h, modules/m_away.c, modules/m_join.c, src/s_serv.c,
	  src/s_user.c, src/send.c:
	  - This completes most of the full LL nick implementation...
	    nicks unknown to a leaf LL must not have information sent to that
	    LL only when introduced i.e. when they JOIN a channel or are
	    /whois'ed /who'ed etc. are burst onto the LL leaf.
	    a /msg to a nick that only exists on the hub will fail ATM since
	    m_message.c is not set up to burst the target nick onto the LL
	    leaf.  However, doing a /whois of the target first, will make the
	    nick available. It will be simple to finish this part.. But after I
	    get some sleep.

2000-12-19 01:27  db

	* modules/m_cburst.c:
	  - show the name of the server sending a CBURST if its not LL

2000-12-19 01:23  db

	* include/send.h, modules/core/m_nick.c, src/send.c:
	  - nick LL are almost there...
	    Now, nick changes for nicks that the hub does not know about on a
	    leaf ll server are not sent on to that leaf.
	    This still means a /msg nick where nick is not known yet
	    will fail, but a /whois will "burst" that nick onto the ll
	    server...  So, privmsg/notify should do a nick burst... ditto on
	    ison Basically what now happens is, the ll server begins to become
	    "aware" of nicks it needs to know about, just not all of them unless
	    it asks the uplink...

2000-12-19 00:38  ejb

	* src/channel.c:
	  - make invex code actually work.

2000-12-18 23:39  db

	* include/s_serv.h, modules/m_cburst.c, modules/m_invite.c,
	  modules/m_who.c, modules/m_whois.c, src/s_serv.c:
	  - modifed lazylinks partially, to not send a full nick burst..
	    still some work to do on this..
	  - added client_burst_if_needed() ... it checks to see if the given
	    server pointer is a server, is a lazylink, and if it does not
	    know about that given client, it bursts the nick.
	  - A nick that is not known on a leaf, will be nick collided ! if it
	    changes nick. Thats next folks.. removing the sending of nick
	    changes to leafs that don't know about that nick.

2000-12-18 23:21  ejb

	* include/client.h, modules/m_oper.c, modules/m_whois.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/s_user.c:
	  - remove whois_notice stupidity
	  - +a umode is now set automatically for admin=yes; opers, and cannot
	  be changed.

2000-12-18 17:55  db

	* include/client.h, include/ircd.h, include/s_serv.h,
	  modules/m_cburst.c, src/client.c, src/ircd.c, src/s_serv.c:
	  - ok. redid the way the bitmaps were cleared for lazylinks.
	    the old code walked all the global channels, clearing the
	    lazyLinkChannelExists bitmap of the leaf servers bit.. Now the
	    code keeps track of which channels/clients have these bits set,
	    and only walks those lists when a lazy link server quits.
	    This adds new lists to ircd.c, new bitmap to client struct, new
	    call in m_cburst.c .. client.c modded to call
	    remove_lazyLink_flags() new code added in s_serv.c to add
	    remove_lazylink_flags() and to add add_lazylinkchannel() and
	  add_lazylinkclient() functions to s_serv.c

2000-12-18 16:43  bill

	* modules/m_gline.c, src/s_conf.c:

	  - removed compile-time warnings caused by fbputs()

2000-12-18 01:17  db

	* modules/m_gline.c, modules/m_whois.c, src/s_conf.c, src/s_serv.c:
	  - still more cleanups
	  - removed superflous sjoin code, it was already done by
	    send_channel_modes duh.

2000-12-18 00:48  bill

	* modules/m_gline.c:

	  - forgot to remove a conflict

2000-12-18 00:42  bill

	* include/fileio.h, include/s_conf.h, modules/m_gline.c,
	  src/fileio.c, src/hash.c, src/ircd.c, src/res.c, src/s_conf.c,
	  src/s_log.c:

	  - changed all file_open() and file_close() calls to fbopen() and
	  fbclose()
	  - changed all write()s to fbputs()s
	  - updated dependancy file
	  - added strerror() msgs to failed file i/o logs/server notices
	  - moved FBFILE struct from fileio.c to fileio.h

2000-12-17 23:29  db

	* include/fileio.h, modules/m_gline.c, src/fileio.c, src/s_conf.c:
	  - rewrote m_gline.c to use fbopen and friends consistently
	    removed "safe_write()" entirely. BLOAT

2000-12-17 22:59  db

	* Makefile.in, include/channel.h, include/client.h,
	  include/handlers.h, include/modules.h, include/parse.h,
	  include/s_gline.h, include/s_serv.h, modules/m_accept.c,
	  modules/m_admin.c, modules/m_away.c, modules/m_capab.c,
	  modules/m_cburst.c, modules/m_challenge.c, modules/m_cjoin.c,
	  modules/m_close.c, modules/m_connect.c, modules/core/m_die.c,
	  modules/m_drop.c, modules/m_eob.c, modules/m_error.c,
	  modules/m_gline.c, modules/m_help.c, modules/m_info.c,
	  modules/m_invite.c, modules/m_ison.c, modules/m_join.c,
	  modules/core/m_kick.c, modules/core/m_kill.c, modules/m_kline.c,
	  modules/m_knock.c, modules/m_links.c, modules/m_list.c,
	  modules/m_lljoin.c, modules/m_locops.c, modules/m_lusers.c,
	  modules/m_motd.c, modules/core/m_message.c,
	  modules/core/m_mode.c, modules/m_names.c, modules/m_oper.c,
	  modules/core/m_nick.c, modules/m_operwall.c, modules/m_pass.c,
	  modules/m_ping.c, modules/core/m_part.c, modules/m_pong.c,
	  modules/m_rehash.c, modules/m_restart.c, modules/core/m_quit.c,
	  modules/m_set.c, modules/core/m_server.c, modules/core/m_sjoin.c,
	  modules/m_stats.c, modules/m_svinfo.c, modules/core/m_squit.c,
	  modules/m_testline.c, modules/m_time.c, modules/m_topic.c,
	  modules/m_trace.c, modules/m_unkline.c, modules/m_user.c,
	  modules/m_userhost.c, modules/m_users.c, modules/m_version.c,
	  modules/m_wallops.c, modules/m_who.c, modules/m_whois.c,
	  modules/m_whowas.c, src/channel.c, src/dline_conf.c,
	  src/fileio.c, src/hash.c, src/modules.c, src/parse.c,
	  src/s_gline.c, src/scache.c:
	  - massive change but its really quite simple..
	    mod_add_cmd was taking two params, when only one was really
	    necessary.  first was command name, second was the Message entry..
	    the command is available from msg->cmd, so why duplicate it? lead to
	    errors ditto on mod_del_cmd()
	    sooooo all modules had to be rewritten for this new world order...

	  - Also cleaned up a lot of missing definitions for functions..

2000-12-17 20:43  db

	* include/s_serv.h, modules/m_join.c, modules/m_list.c,
	  modules/m_lljoin.c, modules/core/m_mode.c, modules/m_whois.c,
	  src/channel.c, src/client.c, src/s_serv.c:
	  - added global uplink cptr valid for leafs ONLY

2000-12-17 17:45  db

	* src/: s_bsd.c, s_bsd_kqueue.c, s_bsd_poll.c, s_bsd_select.c,
	  s_conf.c, s_serv.c:
	  - added vhost support, should work now
	    in doing, removed an extern not needed any more in s_bsd_kqueue.c
	    s_bsd_poll.c and s_bsd_select.c... thats when I noticed... local[]

	  - first crack at cleaning up s_bsd_select.c so it will compile. I
	    just removed local[] from it for now, the rest is adrian's
	    MUAHHAHAHH! It still won't compile, but ... its a start

2000-12-17 16:27  bill

	* Hybrid-team, src/version.c.SH:

	  - added _k9_ (jeremy, wowsers.) to credits as a contributer

2000-12-17 16:18  db

	* include/channel.h, include/client.h, src/channel.c, src/client.c,
	  src/dline_conf.c, src/fileio.c, src/version.c.SH:
	  - I ran it through lint, discovered a pile of unused variables
	    unused parameters. Removed... and made a function static in
	  channel.c
	  - added einride and hwy to credits, give them some vanity.
	  - fileio.c had an obvious bug, but we never used fbgetc() so it
	    didn't matter. pro is going to look at the ircu version, to see if
	    we can fold that one back in without issues.

2000-12-17 15:36  db

	* src/: client.c, s_serv.c, version.c.SH:
	  - removed the two pass exit procedure in check_klines check_pings
	    it was =only= done in the first place to get around the local[]
	    re-arrangement nonsense in the original code. This is long gone..

2000-12-17 09:10  db

	* include/s_gline.h, modules/m_cburst.c, modules/m_gline.c,
	  modules/m_join.c, src/ircd.c, src/s_conf.c, src/s_gline.c:
	  - moved gline expiration to be an event started from ircd.c at
	    startup right now its run every half hour. That should be
	  sufficient.

	  - also cleanedup s_gline.c s_gline.h m_gline.c while at it. Removed
	    unnecessary and obsolete extern definitions. Made a couple of
	    functions static. Found a duplicate definition for glines in
	  s_conf.c!

	  - Fixed LazyLink join to a non existing channel on the hub. The
	    hub has to actually create the channel but not SJOIN it to
	    anything.  Then the hub can mark this channel as a lazy link
	    channel with the leaf being "interested" in knowing about the
	    channel. The timestamp should be set to the highest possible time,
	    so its always overruled. It also should be expired if necessary.i.e.
	    lazy link server dies after doing cburst request but before received
	    LLJOIN.  Removed the useless lazylink references in m_join.c duh.

2000-12-16 21:56  db

	* modules/: m_cburst.c, m_join.c, m_lljoin.c:
	  - fixed join 0 grrrr
	  - m_lljoin should give member names when joining
	  - lazy links flag should be set when joining

2000-12-16 19:14  db

	* include/channel.h, modules/m_join.c, modules/m_lljoin.c,
	  modules/m_oper.c, src/channel.c, src/s_conf.c, src/s_user.c:
	  - lazy link lljoin was relying on can_join which needed to be moved
	    into channel.c from m_join.c
	  - applied einrides conf changes, which will remove the original I
	    line conf from an oper replacing it with the new one.

2000-12-16 17:48  db

	* modules/m_cburst.c, modules/m_lljoin.c, src/s_serv.c, src/send.c:
	  - ok did some more clean up on LazyLinks connect works fine more or
	    less The nicks are SJOIN'ed one nick at a time to the leaf, That
	    should be fixed.
	  - new channel creation has a glitch somewhere, the LLJOIn isn't
	    being seen by the client, and it has to do a double join. hrmmmpf

2000-12-16 13:19  db

	* include/handlers.h, modules/m_list.c:
	  - remote lazy link /list was broken, missing ms_link in handler

2000-12-16 12:58  db

	* include/irc_string.h, src/irc_string.c, src/s_conf.c:
	          Included here is a patch which adds the function strip_tabs
	          to irc_string.c; the function converts all found tabs to
	          spaces, while copying the string.

	          The reason I wrote this is because in h7, when HUPd or
	          /REHASHd, the server will show opers any bad lines it
	          finds in ircd.conf.  Most of these lines start with tab,
	          so, displaying the actual tab character is irritating for
	          users who use something other than an ircii derivative.

	          It applies to ircd-hybrid-7-20001216-103810.tar.gz, which
	          adrian gave me this morning.  I tested it, and it's being
	          used on hybrid.best.net's test H7 server.

	          Another function which might be useful would be one which
	          squeezes excessive whitespace into just one space itself
	          (eg. tr/ / /s (or "     " --> " ")).

	  -- | Jeremy Chadwick
	  yoshi@parodius.com |

2000-12-16 12:46  db

	* include/ircd.h, include/s_serv.h, modules/m_cburst.c, src/ircd.c,
	  src/s_conf.c, src/s_serv.c:
	  - fixed lazy links. I was trying to use the extended "join new nick
	    to network" SJOIN instead of the simpler "join this nick to
	    channel" SJOIN oops. That would collide everyone. Sooo that
	    involved a pile of fixes and new functions to properly send SJOIN
	    channel. Might be able to simplify reduce recyle functions later...

	  - Oh documented a few more globals in ircd.c and ircd.h, also
	    removed a couple of references to no longer existing variables.. LRV
	  etc.

2000-12-16 03:48  adrian

	* doc/Makefile.in:

	  Add a blank line after the distclean: tag, so make knows its a blank
	  target.

2000-12-16 00:58  db

	* modules/core/m_mode.c:
	  - ask for MODE on channel if LL

2000-12-16 00:23  toot

	* modules/m_accept.c, modules/m_gline.c, modules/m_hash.c,
	  modules/m_ison.c, modules/m_kline.c, modules/m_knock.c,
	  modules/m_unkline.c, modules/m_userhost.c, src/modules.c,
	  src/s_user.c: . let opers see full /lusers report even if
	  server-hide is on . parse() can check the number of params for a lot
	  of m_commands

2000-12-15 23:42  db

	* modules/core/m_mode.c, src/channel.c, src/ircd_lexer.l,
	  src/ircd_parser.y:
	  - m_mode.c had some twisted logic. Corrected. *duh*
	  - did some variable renaming in channel.c chname instead of
	  "real_name"
	  - fixed two bugs pointed out and corrected with Walter Campbell in
	    I and D line handling. notably, the conf host string wasn't being
	    updated.

2000-12-15 20:55  db

	* src/ircd_parser.y:
	  - fix for gecos blocks submitted by Walter Campbell

2000-12-15 18:26  db

	* doc/example.conf, src/ircd_lexer.l, src/ircd_parser.y:
	  - added patch contributed by Walter Campbell, it adds connectfreq
	    to a class block. Note, it is a synonym for class_number_per_ip

2000-12-15 14:55  db

	* modules/m_help.c, modules/m_stats.c, src/parse.c, src/s_serv.c,
	  src/send.c:
	  - removed unused variables found with -Wunused
	  - removed an extra space in parse.c

2000-12-15 14:45  db

	* doc/Makefile.in:
	  - missing clean: target in Makefile.in for doc

2000-12-15 14:30  db

	* include/config.h, include/config.h.dist, src/ircd.c:
	  - added GLINE_PATH gline.log missing from config.h ircd.c

2000-12-15 14:01  db

	* modules/m_unkline.c:
	  - missing parc check in m_ungline

2000-12-15 13:11  db

	* INSTALL:
	  - committed Walter Campbells changes to INSTALL

2000-12-15 08:55  db

	* include/client.h, modules/m_connect.c, modules/m_svinfo.c,
	  src/s_conf.c, src/s_serv.c:
	  - a few changes to hide ip's of servers even from opers, given the
	    new world order *sigh* on EFnet...

2000-12-15 08:04  db

	* src/s_serv.c:
	  - tiny tweak to send_capabilities to clean it up

2000-12-15 03:10  db

	* modules/m_eob.c, modules/core/m_sjoin.c, src/s_serv.c:
	  - I didn't get it right.
	    So for now, just set the eob flag for later use.

2000-12-15 03:04  db

	* include/client.h, modules/m_eob.c, modules/core/m_sjoin.c,
	  src/s_serv.c:
	  - I think I got this right.
	    EOB message now sets flag in server struct saying its sent EOB,
	    if EOB is set in struct in sjoin, warning message is sent out
	    about HACK

2000-12-15 01:27  toot

	* modules/m_whowas.c: fixed some bent logic in whowas

2000-12-15 01:03  db

	* include/config.h, include/config.h.dist, include/m_info.h,
	  src/send.c:
	  - removed obsolete BUFFERPOOL from config.h and m_info.h

2000-12-15 00:09  toot

	* src/s_user.c: replaced some stuff that'd gone missing in
	  slow_lusers

2000-12-14 23:53  db

	* src/parse.c:
	  - redid parse.c do_numeric, thats where our remote stats bug was..
	    I was adding an extra ':' where I shouldn't have been. duh.

2000-12-14 22:59  db

	* modules/m_stats.c:
	  - don't count opers again in /stats L

2000-12-14 22:32  toot

	* doc/example.conf, include/client.h, include/config.h,
	  include/config.h.dist, include/s_conf.h, src/ircd_lexer.l,
	  src/ircd_parser.y, src/match.c, src/mtrie_conf.c, src/s_user.c: .
	  moved dots_in_ident to an ircd.conf option . removed some d_line
	  remains..

2000-12-14 21:28  db

	* include/handlers.h, include/msg.h, src/modules.c:
	  - added modlist admins can now list all loaded modules.

2000-12-14 19:46  spookey

	* modules/m_challenge.c: Minor _version misplacement.. (above the
	  #else ,  not below it =P)

2000-12-14 19:11  toot

	* doc/server-version-info, include/config.h, include/config.h.dist,
	  include/m_info.h, include/numeric.h, src/s_debug.c: ripped out
	  some more unused stuff

2000-12-14 18:06  db

	* modules/m_stats.c, src/s_gline.c:
	  - missing show_opers in m_stats.c found by Walter Campbell
	  - duplicate end of stats in gline pointed out by toot

2000-12-14 16:56  toot

	* include/config.h: undid accidental config.h change :P

2000-12-14 16:55  toot

	* doc/example.conf, include/config.h, include/s_conf.h,
	  src/ircd_lexer.l, src/ircd_parser.y: removed some unused things
	  (quiet_on_ban, and moderate_nick_change left overs)

2000-12-14 15:48  db

	* modules/m_stats.c:
	  - missing show_opers(sptr) in m_stats.c found by Walter Campbell

2000-12-14 14:59  db

	* include/s_conf.h, modules/m_gline.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/oldparse.c:
	  - removed a bunch of useless B line stuff
	  - put sanity test into m_gline.c so it wont' core on a NULL
	  glinefile

2000-12-14 13:11  db

	* src/ircd.c:
	  - YOU missed an #endif toot! ;)

2000-12-14 12:53  db

	* src/modules.c:
	  - trivial move of basename() to save a free() if not an admin

2000-12-14 12:38  toot

	* include/config.h, include/config.h.dist, src/ircd.c: cleaned some
	  PATH stuff a bit

2000-12-14 12:04  db

	* doc/technical/send.txt, include/config.h, include/s_serv.h,
	  modules/m_cburst.c, modules/m_kline.c, src/class.c,
	  src/ircd_lexer.l, src/s_serv.c:
	  - removed find_class(0) from m_kline.c was never used, no one ever
	    referred to the class on a kline, BLOAT gone.
	  - /rehash caused opering clients to core server, traced to an
	    incorrect find_class(0) 0 should return "default" class not 0. found
	  by einride.
	  - first fixes to lazy links, don't use , it nick collides everyone
	    still needs fixes

2000-12-13 23:53  db

	* modules/m_admin.c:
	  - HUB info does not belong in m_admin.c

2000-12-13 23:19  db

	* src/ircd_parser.y:
	  - fixed typo spotted by Walter Campbel in oper_admin

2000-12-13 22:34  db

	* src/ircd_parser.y:
	  - fixed small typo in the parser, spotted by Walter Campbell

2000-12-13 22:27  spookey

	* configure:

	    --disable-openssl enabled openssl... that didn't seem right..

2000-12-13 22:05  db

	* doc/technical/send.txt:
	  - tiny update to send.txt, sendto_common_channels

2000-12-13 18:41  db

	* src/send.c:
	  - Ok the mystery of the missing NICK has been solved. (hwy/toot?)
	    If you weren't on a channel and you did a nick change, you never
	    got a nick change from the server. oops.
	    Its poorly documented in the old sources... ick...
	    sendto_common_channel says its not supposed to send to the
	    originator, but yet it does ...  *sigh*

2000-12-13 18:20  db

	* include/msg.h, include/parse.h, modules/m_help.c,
	  modules/m_stats.c, src/parse.c:
	  - when msgtab went away, due to the hash table replacement,
	    m_stats.c, m_help.c had to be rewritten. I had to add a new
	    report command in parse. I stumbled across an apparent compiler
	    bug..  the hash table is defined to be 387 entries, but the report
	    function was walking in to the poll fd lists at 385... Something is
	    screwy here perhaps a rounding error? In any case, thats why the
	    weird +10 in parse.c msg_hash_table[MAX_MSG_HASH+10];

2000-12-13 17:26  db

	* include/parse.h, src/ircd.c, src/parse.c:
	  - ripped out the trie (tree parse) code that Roger wrote. Too hard
	    to debug for now. Replaced with a simplistic (very) hash table. The
	    hash function is =horrid= for now.

2000-12-13 16:04  adrian

	* src/linebuf.c:

	  How'd I forget to pre-initialise linebuf_initialised to 0? Its
	  implied due to it being a global variable, but _still_ ..

2000-12-13 14:58  db

	* doc/example.conf, modules/m_invite.c, src/s_gline.c:
	  - removed an obsolete line from the example.conf
	  - added s_gline.c that I forgot

2000-12-13 14:53  toot

	* configure, doc/Makefile, modules/Makefile.in,
	  modules/core/Makefile.in, src/Makefile.in: fixed some makefile
	  stuff

2000-12-13 11:08  db

	* include/m_gline.h, include/s_conf.h, include/s_gline.h,
	  modules/m_cburst.c, modules/m_challenge.c, modules/m_error.c,
	  modules/m_gline.c, modules/m_invite.c, modules/m_rehash.c,
	  modules/m_set.c, modules/m_stats.c, src/Makefile.in,
	  src/client.c, src/ircd.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/modules.c, src/s_conf.c:
	  - I had changed RTLD_LAZY to RTLD_NOW in modules.c thus insisting
	    on all names being resolved before loading. oops. should have done
	    this earlier. pile of undeffed at run time names, mostly typos;
	    but a few clear dependancies such as m_stats depending on stuff
	    loaded only by m_gline ... sooo moved much of that in s_gline.c
	    since s_conf.c is quite large enough thankyou.
	  - also redid m_invite.c so it will show the right channel name on an
	    invite to a vchan. removed the silly message to channel stuff on
	    invites, it was referring to a no longer defined function
	    anyway... BLOAT totally removed the need to be chanop before sending
	    an invite, hence modified the lexer/parser to remove that option
	    totally BLOAT removed the need to be +i before adding the invite
	    block. who cares.  BLOAT

2000-12-13 03:04  db

	* doc/example.conf:
	  - typo, it should be "server" not "servers" in class

2000-12-13 02:57  db

	* modules/core/m_sjoin.c, modules/m_stats.c, src/channel.c,
	  src/s_serv.c:
	  - halfops wasn't being propogated by sjoin, so added quick change
	    to pass the halfop along
	  - however... also added code to send halfops along as normal peons
	    for now they still will have their halfops respected on their
	    server, just no one else will notice. There should be a CAP_HALFOP
	  added...
	  - tidied up and added more comments to m_stats.c

2000-12-13 01:09  db

	* src/parse.c:
	  - urgh stupid typo sorry ! sorry sorry sorry!

2000-12-13 00:37  db

	* src/parse.c:
	  - msg_tree_root has to be zero'ed in clear_msg_tree() or it causes
	    odd problems esp. on redhat linux for some reason. NO idea why
	    but the stray pointers left in it caused it to core nicely.

2000-12-12 20:31  db

	* src/: client.c, s_serv.c: OH WHAT A BLASTED PITA
	  - Ok... a CONNECTING server must put the server its trying to
	    connect to on the serv_list because its going to blindly send its
	    server burst to its new uplink. But the server its connecting to is
	    not strictly a server yet until the handshake is over ... oy
	    SO, the connecting to server is put on the serv_list, so the
	    connect burst will go through, but it might not be a server yet if
	    the connection fails, so... I have to check on the server list as
	    well as the unregisterd list to pull it off (in
	  exit_client/client.c).. ugh ugh ugh...
	  - This breaks all the state information in ->state ugh.
	    A leaf server has a client (the one its connecting to) already in
	    its serv_list (remember?) sooo it can no longer simply check for a
	    non empty serv_list to allow a connection or not. NOOOO it now has
	    to make sure that server in that list is the same one its trying to
	    connect to.  (in serv_establish/s_serv.c) UGH UGH UGH

2000-12-12 18:07  adrian

	* include/config.h, modules/Makefile.in, modules/core/Makefile.in,
	  src/Makefile.in, tools/Makefile.in:

	  Do build magick in the binary. Now, --prefix="foo" is reflected in
	  DPATH and is also reflected in the various PATH's there are.

	  The handling of the ETCDIR stuff is ugly and warrants instant death
	  in my eyes, but it works and it doesn't cause me to retch when I
	  look at it so I guess it can stay there until Someone Else(tm) fixes
	  it.

	  Note that IRCD_PREFIX needs to be defined during the ircd and tools
	  build.  I *did* try doing the squid thing - take config.h, pass a
	  sed script over it to map DPATH to @prefix@, and do it that way, but
	  it might have made some people throw up.

	  This completes tonights set of work which I just shouldn't have
	  done.  Comments can be piped through cvs commit.

2000-12-12 16:46  adrian

	* Makefile.in, configure, opers.txt, doc/Makefile, doc/Makefile.in,
	  doc/ircd.motd, doc/kline.conf, doc/opers.txt, include/setup.h.in,
	  modules/Makefile.in, modules/core/Makefile.in, src/Makefile.in,
	  tools/Makefile.in, tools/install_ircd:

	  The very first step in sanifying the make and install process

	  * move opers.txt into doc like it bloody should have been
	  * make install work with each subdir's Makefile rules, rather than
	    install_ircd
	  * create placeholders (blank) for ircd.motd and kline.conf

	  Its all far too complex to explain. Suffice to say, its neater.
	  Binaries and some of the config files (not the kline, motd) are
	  renamed to .old as a backup.

	  Now, do the binary ..

2000-12-12 12:25  db

	* include/client.h, src/client.c, src/irc_string.c, src/ircdauth.c:
	  - folded in Walter Campbell's IPV6 patches

2000-12-12 11:36  db

	* modules/core/m_nick.c, modules/core/m_part.c,
	  modules/core/m_sjoin.c, src/s_serv.c:
	  - verified the generated prefixes on a number of files
	  - umm the big bug was in serv_connect_callback() the newly connected
	    =to= server was not being put on the serv_list... This mean that
	    SJOIN's were not being propogated to a =connected to= server since
	    the connectee had no idea it was supposed to.

	    This was sorta obvious when /stats v returned 0 servers, and the
	    serv_list was 0

2000-12-12 01:16  db

	* modules/m_stats.c, src/client.c:
	  - fixed stupid bug in m_stats.c, acptr wasn't being set...

2000-12-12 00:45  db

	* src/s_serv.c:
	  - oops. forgot to generate a prefix in sendnick_TS in s_serv.c

2000-12-12 00:11  db

	* src/client.c:
	  - don't core if a server is not found on the serv_list

2000-12-12 00:03  db

	* modules/m_trace.c:
	  - fixed m_trace.c so as to not use local[]

2000-12-11 23:43  db

	* modules/core/m_die.c:
	  - fixed m_die.c to not use local[]

2000-12-11 23:34  db

	* modules/m_close.c:
	  - not sure if I am closing all the fd's that should be closed here..
	    the original code refers to connecting servers as well as
	    unknown_clients perhaps connecting server fd's should be also
	  closed?

2000-12-11 23:29  db

	* modules/m_stats.c, src/client.c, src/s_serv.c:
	  - a client being made into a server, should be removed from the
	    unknown_list this was happening in the new server establish code...
	    This left an unknown client hanging around, not removed from
	    unknown_list because it was now a server, not an unknown client.

	  - local removal was missed in m_stats.c, this meant /stats didn't
	    work since it was never loaded. There are three other functions that
	    have to be fixed as well... m_trace.c, m_die.c, m_close.c

2000-12-11 22:18  db

	* src/client.c:
	  - tiny comment fix in check_pings

2000-12-11 21:40  db

	* src/s_bsd.c:
	  - how did THAT get back in. removed local[] again *sigh*

2000-12-11 21:32  db

	* modules/m_ison.c:
	  - simple re-work to m_ison.c, rfc1489 is ambigious about how this
	    should be handled...

	  The ISON command was implemented to provide  a  quick  and
	     efficient means  to get a response about whether a given nickname
	     was currently on IRC. ISON only takes one (1) parameter: a
	     space-separated list of nicks.  For  each  nickname in the list that
	     is present, the server adds that to its reply string.  Thus the
	     reply string may return empty (none  of  the given  nicks are
	     present), an exact copy of the parameter string (all of them
	     present) or as any other subset of the set of nicks  given  in  the
	     parameter.  The only limit on the number of nicks that may be
	     checked is that the combined length must not be too large as to
	     cause the server to chop it off so it fits in 512 characters.  ...
	     Examples:

	     ISON phone trillian WiZ jarlek Avalon Angel Monstah
	                                     ; Sample ISON request for 7
	                                     nicks.

	  ...
	    But the parser will break those up into parv[1] ......

	    And the parser only presently handles 8 .. so Monstah wouldn't be
	    parsed...  oops.

	    Mirc apparently sends them "ISON nick1 nick2 nick3"
	    But other clients must be sending them with a ':' to force parsing
	  of space separated nicks into one parv[1] (?)

	    It appears that thats how hybrid-5 expects it. It has to come in as
	  "ISON : nick1 nick2 nick3" to force "nick1 nick2 nick3" into parv[1]
	  !

	    In any case, this code =should= handle both interpretations.

2000-12-11 21:10  db

	* doc/technical/send.txt, src/s_bsd.c, src/s_serv.c:
	  - removed the last remnant of local[], was one hidden in s_serv.c
	    the definition for it was hiding in s_bsd.c

2000-12-11 19:28  db

	* doc/technical/send.txt, include/s_stats.h, modules/Makefile.in,
	  modules/m_stats.c, modules/core/Makefile.in, src/s_stats.c,
	  src/send.c:
	  - renamed send_channel_members to sendto_list_anywhere, to remain
	    consistent in send.c with sendto_list_local. This really means we
	    =could= set up the "GROUP" idea Roger postulated ages ago... Roger
	    suggested something like this "NGROUP foo" "GROUP foo
	    nick1,nick2,nick3" privmsg to foo, sends to nick1,nick2,nick3 ... I
	    suppose foo would have to have disambiguitating prefix like $ so one
	    could set up a group of users you wanted to talk to often..

	  - fixed s_stats.c to be consistent in only needing the client
	    pointer passed, not both a client pointer and a nick.

	  - reverted to old CC options in modules -g -O2 etc.

2000-12-11 18:47  db

	* src/: client.c, s_stats.c:
	  - removed some unused variables

2000-12-11 18:20  db

	* src/: client.c, s_user.c:
	  - unknown clients should be removed from the unknown_list on exit!
	    or you get duplicates on the unknown_list and neat things like
	    that.

2000-12-11 17:07  db

	* include/ircd.h, modules/m_ison.c, modules/core/m_nick.c,
	  src/client.c, src/ircd.c, src/s_auth.c, src/s_bsd.c,
	  src/s_serv.c, src/s_stats.c, src/s_user.c:
	  - this gets rid of local[]
	    unknown clients are now placed into unknown_list, moved to
	    serv_list (local servers only) and lclient_list (local client
	    list) as appropriate. check_pings now scans the lclient_list,
	    serv_list and then checks for unknown clients timing them out as
	    appropriate.  Now, the proper place to do PING checks is in s_bsd.c
	    in comm_checktimeouts() using a timeout_handler (as pointed out by
	    Adrian) ... Someone will have to check that unknown clients
	    are also on this list, and get rid of that fixed sized fd_table...

	  - Seems I screwed up the inter-server NICK prefix and message , this
	    caused all sorts of neat nick collides.

2000-12-11 16:02  davidt

	* messages/create_po, src/numeric.c: oops, didn't cvs add
	  create_po..

2000-12-11 16:00  davidt

	* include/: config.h, config.h.dist: attempted to tidy up config.h
	  slightly

2000-12-11 01:00  db

	* modules/m_gline.c, src/send.c:
	  - removed unused variable

2000-12-11 00:40  db

	* modules/: m_eob.c, core/m_squit.c:
	  - m_eob.c was not reporting length of burst like it should have been
	  - m_squit.c I forgot to send out WALLOPS when squit matched local
	    link NOT fully tested 'cause I need a remote server to split!

2000-12-10 23:54  db

	* modules/core/m_message.c:
	  - CAP_CHW works again between compatible CAP_CHW servers..
	    Thats the /quote privmsg @#channel :message
	    functionality borrowed from dalnet/ircnet?

	  Pending BUGS;
	    - /msg $#hostmask is still broken across servers
	    - /squit of a remote server appears to be broken

	  Pending re-work:
	    - check_pings()/check_kline() should be reworked so as not to use
	      a fixed size array...

2000-12-10 23:06  db

	* modules/core/m_nick.c:
	  - This fixes prefix on a nick change sent to local server.

2000-12-10 22:18  db

	* src/send.c:
	  - fixed length error in sendto_realops_flags

2000-12-10 21:50  db

	* doc/technical/send.txt, include/send.h, modules/m_connect.c,
	  modules/m_locops.c, modules/m_operwall.c, modules/m_wallops.c,
	  modules/core/m_squit.c, src/channel.c, src/send.c:
	  - re-wrote send_operwall, renamed as sendto_all_local_opers()
	    this necessitated changes to send.c send.h send.txt
	    m_connect.c m_locops.c m_operwall.c m_squit.c m_wallops.c
	  - cleaned up check_string() in ircd.c added more comments

2000-12-10 20:02  db

	* doc/technical/send.txt, src/ircd_parser.y:
	  - updated docs in send.txt
	  - fixed parser as per walter campbells patch

2000-12-10 18:58  db

	* opers.txt, include/client.h, modules/m_eob.c, modules/m_gline.c,
	  modules/m_stats.c, src/channel.c, src/client.c,
	  src/ircd_parser.y:
	  - cleaned up m_gline.c, STILL untested.
	  - removed unnecessary lines in ircd_parser.y due to removed botcheck
	  - only show stats 'G' to opers
	  - updated opers.txt, client.c to show leaving servers as well as
	    being introduced servers.
	  - cleanup_channels() wasn't being restarted when server was a hub,
	    it should be always run now, to expire persistent channels.

2000-12-10 16:49  db

	* src/send.c:
	  - missed a place where send_trim() should have been used

2000-12-10 16:36  db

	* doc/technical/send.txt, src/send.c:
	  - as promised, tidied up send.c added to send.txt document

2000-12-10 15:03  db

	* doc/technical/send.txt, modules/m_kline.c, modules/m_links.c,
	  modules/core/m_message.c, modules/m_names.c, modules/m_user.c,
	  modules/core/m_server.c, modules/core/m_sjoin.c, modules/m_who.c,
	  modules/m_whois.c, src/channel.c, src/class.c, src/client.c,
	  src/ircdauth.c, src/modules.c, src/packet.c, src/s_conf.c,
	  src/s_serv.c, src/s_user.c, src/send.c:
	  - went through and removed a bunch of unused variables
	  - fixed sendto_channel_butone, need to generate both local and
	    remote prefixes in this one. The function will need tidying up
	  later.
	  - updated send.txt to include info on prefixes.

2000-12-10 09:57  db

	* modules/core/m_message.c:
	  - Was missing proper prefix for normal privmsg to local channel

2000-12-10 03:40  db

	* include/oratime.h:
	  - removed last remnant of oratime

2000-12-10 03:37  db

	* doc/technical/send.txt:
	  - new text file describing the send.c re-work.

2000-12-10 03:01  db

	* include/send.h, modules/m_invite.c, modules/core/m_kill.c,
	  modules/core/m_message.c, src/parse.c, src/send.c:
	  - sendto_prefix_one is =gone=
	  - sendto_one should be used for local clients only, with prefix
	    pre-built at time of use.
	  - sendto_anywhere is a somewhat saner replacement for
	    sendto_prefix_one (I think) it should be used ONLY when target
	    client is unknown whether its local or remote, it will build the
	    appropriate prefix itself in that case. This makes it less efficient
	  than sendto_one..
	  - I kludged send_message_remote() for now... adrian you might want
	    to look at that... maybe we can get away with just always calling
	    send_message() or add a short common function or something...
	    send_message() should be for local clients (not servers(? only(?)
	    perhaps i.e. send_message_local() and send_message_remote()
	    sendto_one should be renamed sendto_local() (sendto_local_client)
	    sendto_remote (sendto_remote_client) sendto_anywhere() sends to
	    either...  Too tired right now..

	  BUGS pending...
	  1) the horrid /msg $#host.mask to clients on remote servers is
	     =broken= for now.  (it works locally)
	  2) sendto @# chanop style messages is =broken= to remote servers for
	  now.
	  3) Probably more *yawn*

2000-12-09 22:52  db

	* include/client.h, modules/m_cburst.c, modules/m_drop.c,
	  modules/m_eob.c, modules/m_error.c, modules/m_gline.c,
	  modules/m_kline.c, modules/core/m_kill.c, modules/m_lljoin.c,
	  modules/core/m_message.c, modules/core/m_nick.c,
	  modules/m_oper.c, modules/m_rehash.c, modules/core/m_server.c,
	  modules/m_set.c, modules/m_svinfo.c, modules/core/m_squit.c,
	  modules/m_unkline.c, modules/m_user.c, src/Makefile.in,
	  src/blalloc.c, src/channel.c, src/client.c, src/fileio.c,
	  src/ircd.c, src/ircd_parser.y, src/ircdauth.c, src/list.c,
	  src/listener.c, src/m_error.c, src/modules.c, src/mtrie_conf.c,
	  src/oratime.c, src/restart.c, src/s_auth.c, src/s_bsd.c,
	  src/s_conf.c, src/s_serv.c, src/s_user.c, src/s_zip.c,
	  src/send.c:
	  - rewrote sendto_realops in doing so I decided to combine
	    sendto_realops_flags and sendto_realops()... I could have macro'ed
	    sendto_realops() to call "sendto_realops_flags(FLAGS_ALL..." but
	    that level of obsfuscuation I don't like.. soooooo I converted all
	    sendto_realops to use sendto_realops_flags(FLAGS_ALL ... *fun*
	  - I removed two unused files for now, one to do with ZIPLINKS one
	    to do with timings.. it wasn't used, thats what CVS tree is for,
	    so there.

2000-12-09 21:09  db

	* include/send.h, modules/m_knock.c, modules/core/m_message.c,
	  src/client.c, src/send.c:
	  - removed little used function... will have to replace functionality
	    for remote send of KNOCK and msg @#channel code...

2000-12-09 20:32  db

	* include/send.h, modules/m_cjoin.c, modules/m_join.c,
	  modules/core/m_kick.c, modules/m_lljoin.c, modules/core/m_nick.c,
	  modules/core/m_part.c, modules/core/m_sjoin.c, modules/m_topic.c,
	  src/channel.c, src/client.c, src/send.c:
	  - I was using ->user instead of ->username in prefix. *DUH*
	  - removed pretty much identical function in send.c (MORE BLOAT
	    GONE!) using another function to do the same job. (sendto_list())

2000-12-09 18:24  db

	* include/send.h, modules/m_cjoin.c, modules/m_join.c,
	  modules/m_lljoin.c, modules/core/m_kick.c,
	  modules/core/m_sjoin.c, src/channel.c, src/send.c:
	  - ok. in the new world order... prefixes are generated at the top
	    level instead of being grunged out in send.c... This gets rid of
	    incredible idiotic connipations that were happening in send.c...
	    I've only done this for =LOCAL= sent to server messages so far,
	    hence ALL uses of sendto_channel_local you must work out your own
	    prefix. Its not hard, and is worth the bother. This modified a bunch
	  of modules.

	  - I have also preformatted the stupid string to be sent to each
	    client in sendto_channel_local AT the top instead of re-formatting
	    it each and every time a message is sent to a client. like *duh*

2000-12-09 14:32  db

	* modules/m_cjoin.c, modules/m_join.c, modules/m_topic.c,
	  modules/core/m_part.c, src/channel.c:
	  - quick fix to fix prefixes on LOCAL channels only...
	    prefix adding was =hidden= in underlying send.c functions.
	    NOT a good idea IMO.. this makes its harder to optimize code...
	    fughly anyway, I think I got the major prefixes fixed for now..

2000-12-09 13:36  db

	* modules/m_unkline.c:
	  - ummmm no check for parc in mo_undline leads to core if no args
	  given

2000-12-09 13:03  bill

	* modules/m_eob.c:

	  - added duration to EOB snotice

2000-12-09 12:55  db

	* include/client.h, include/send.h, src/s_serv.c, src/send.c:
	  - rationalized use of serial numbers for unique sending to client
	    this removes yet another array "sentalong" yay.
	    This also makes server_burst use the same serial # idea instead of
	    nickissent byte flag.
	  - I note that prefixes really should be sent for local channel
	    JOIN's ooops. sendto_prefix is =fugly= though. lemme think about it.
	    meanwhile, all JOIN's by remote clients look "weird" as they are
	    missing their user@host prefixes...

2000-12-09 12:31  bill

	* include/m_kline.h:

	  - changed NONWILDCHARS to 2

2000-12-09 03:20  db

	* include/: channel.h, client.h:
	  - tiny fixes to fix typo's

2000-12-09 03:15  db

	* include/client.h, src/client.c:
	  - removed redundant flag in client struct, if localClient is non
	    NULL then its a local Client. simple. no need for an extra
	  local_client int flag.
	  - removed bloat from client struct, no longer being used pointers
	  removed.

2000-12-09 03:01  db

	* include/send.h, modules/m_cjoin.c, modules/m_join.c,
	  modules/core/m_kick.c, modules/core/m_part.c,
	  modules/core/m_sjoin.c, modules/m_topic.c, src/channel.c,
	  src/send.c:
	  - renamed yet another poorly named function...
	    sendto_channel_remote makes more sense than sendto_match_serv
	    its sending stuff to a channel remotely folks *sheesH*

2000-12-09 02:04  db

	* include/send.h, modules/m_cjoin.c, modules/m_join.c,
	  modules/m_lljoin.c, modules/core/m_kick.c, modules/m_topic.c,
	  modules/core/m_part.c, modules/core/m_sjoin.c, src/channel.c,
	  src/send.c:
	  - removed unused extra parameter in sendto_channel_local
	    I think I got them, all ;) if not it will just core mysteriously..
	    ;)

2000-12-09 01:10  db

	* include/m_info.h, modules/m_locops.c, modules/m_unkline.c,
	  src/s_debug.c:
	  - removed obsolete #ifdef's in m_info.h
	  - removed obsolete comments in m_unkline.c
	  - removed SLAVE_SERVER junk fro m_locops.c
	  - removed obsolete #ifdef junk in s_debug.c

2000-12-09 00:59  db

	* include/m_info.h, include/send.h, modules/m_accept.c,
	  modules/m_admin.c, modules/m_away.c, modules/m_capab.c,
	  modules/m_cburst.c, modules/m_challenge.c, modules/m_cjoin.c,
	  modules/m_close.c, modules/m_connect.c, modules/m_drop.c,
	  modules/m_eob.c, modules/m_error.c, modules/core/m_die.c,
	  modules/m_gline.c, modules/m_hash.c, modules/m_help.c,
	  modules/m_info.c, modules/m_invite.c, modules/m_ison.c,
	  modules/m_join.c, modules/core/m_kick.c, modules/m_kline.c,
	  modules/core/m_kill.c, modules/m_knock.c, modules/m_links.c,
	  modules/m_list.c, modules/m_lljoin.c, modules/m_locops.c,
	  modules/m_lusers.c, modules/core/m_message.c, modules/m_motd.c,
	  modules/m_names.c, modules/core/m_mode.c, modules/core/m_nick.c,
	  modules/m_oper.c, modules/m_operwall.c, modules/m_pass.c,
	  modules/core/m_part.c, modules/m_ping.c, modules/m_pong.c,
	  modules/core/m_quit.c, modules/m_rehash.c, modules/m_restart.c,
	  modules/m_set.c, modules/core/m_server.c, modules/m_stats.c,
	  modules/m_svinfo.c, modules/core/m_sjoin.c,
	  modules/core/m_squit.c, modules/m_time.c, modules/m_topic.c,
	  modules/m_trace.c, modules/m_unkline.c, modules/m_user.c,
	  modules/m_userhost.c, modules/m_users.c, modules/m_version.c,
	  modules/m_wallops.c, modules/m_who.c, modules/m_whois.c,
	  modules/m_whowas.c, src/channel.c, src/send.c:
	  - renamed confusing sendto_channel_butserv to sendto_channel_local
	    it reflects better what the stupid function does
	  - changed all references to src/m_xxx.c file names in modules to
	    read modules/m_xxx.c
	  - removed yet another #ifdef this time one in m_info.h

2000-12-09 00:20  db

	* include/ircd.h, messages/custom.po, modules/core/m_sjoin.c,
	  src/messages.tab, src/s_user.c:
	  - added server greet message (# since restart)
	  - fixed stupid in m_sjoin, you can have more than 4 ops/nicks per
	  sjoin *oops*

2000-12-08 22:51  db

	* doc/example.conf, modules/m_who.c:
	  - m_who is less broken for single nick who, but it looks broken to
	    me still... checked on efnet, it looks broken.

2000-12-08 22:12  db

	* include/handlers.h, include/msg.h, modules/Makefile.in,
	  modules/m_admin.c, modules/core/Makefile.in, modules/m_eob.c,
	  src/s_serv.c:
	  - added m_eob to modules, this means changes to handlers.h, msg.h,
	  Makefile.in
	  - also had to modify s_serv.c to send EOB message
	  - fixed stupid typo in m_admin.c, it was claiming to be m_version.c

2000-12-08 21:12  db

	* modules/core/m_sjoin.c:
	  - sped up local op code...

2000-12-08 18:03  db

	* modules/core/m_nick.c, modules/core/m_sjoin.c, src/vchannel.c:
	  - sped up m_sjoin.c somewhat... also fixed a bug where the code
	    would relink the same vchan over and over again to the root. oops.
	    This resulted in 277 #ircd-coders !nympho !shig !shig !shig !shig
	    !shig !shig !shig !shig oops.
	    Still have to deal with empty vchans...

2000-12-08 14:30  db

	* modules/m_whois.c:
	  - removed unnecessary strcat in m_whois

2000-12-08 13:35  db

	* modules/m_topic.c:
	  - Show the top channel name on a subchannel

2000-12-08 12:49  db

	* modules/core/m_message.c:
	  - report throttling as top channel name if in vchan

2000-12-08 12:29  db

	* modules/core/m_mode.c:
	  - on /mode #channel show the root channel's TS if on a vchan

2000-12-08 12:19  db

	* modules/m_join.c:
	  - fixed remote join bug, it was joining the root channel instead of
	    the vchan on remote servers due to the wrong name being passed to
	  the SJOIN

2000-12-08 12:17  toot

	* doc/example.conf, src/ircd_lexer.l, src/ircd_parser.y: gline_file
	  isn't used anywhere.  and it was also the one making the '1 rule not
	  reduced' error :)

2000-12-08 12:06  db

	* modules/m_whois.c:
	  - hide idle time in whois if in server hide

2000-12-08 10:58  toot

	* include/config.h, include/config.h.dist, include/s_conf.h,
	  messages/custom.po, modules/m_set.c, modules/m_whois.c,
	  src/ircd.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/messages.tab, src/s_conf.c: . added 'h' to MYINFO mode list .
	  made network_name/desc an ircd.conf option.  . fixed the reading of
	  idletime, hide_chanops and hide_server from ircd.conf

2000-12-08 09:18  db

	* modules/: m_gline.c, m_unkline.c:
	  - UNGLINE was missing from init for m_unkline.c

2000-12-08 03:19  db

	* modules/: m_gline.c, m_kline.c:
	  - cleaned up m_gline.c module considerably, but still untested.
	    Need to enable it locally =AND= have three servers at least to
	    test properly with. It looks like it =should= work...

2000-12-08 02:30  db

	* modules/m_kline.c:
	  - missing ':' in sent KLINE would break up reason field in parser

2000-12-08 01:34  db

	* modules/core/m_sjoin.c, src/channel.c, src/packet.c:
	  - quick #ifdef of excess flood for tonight. its late
	  - redid send_modelist
	  - channels that exist for less than 30 minutes are not persistent
	  - redid m_sjoin

2000-12-07 23:34  adrian

	* include/linebuf.h, src/linebuf.c:


	  * add bufhead->numlines and linebuf_numlines() - this implements
	    line count tracking so you can see how many lines are being used
	    (complete/incomplete) in the linebuf. Now people can implement
	  linecount flooding.

	  * update bufhead->len correctly. It was being done in
	    linebuf_flush() but not linebuf_get() which meant that the recvq
	    would grow, and the flood protection (which used linebuf_line()
	    rather than linebuf_allocline() until about 5 minutes ago) would
	  eventually kick off a user.

	    Now the tracking is done in linebuf_done_line() where it should have
	    been all along. Honestly, the crack I must've been smoking then ..

2000-12-07 23:33  db

	* doc/example.conf:
	  - fixed example.conf connect example

2000-12-07 23:28  db

	* doc/example.conf, src/ircd_parser.y:
	  - removed botcheck which is obsolete, this gets rid of the one rule
	    never reduced error in the parser...
	  - updated the example.conf to include server links, important that..

2000-12-07 23:25  adrian

	* src/packet.c:

	  Use linebuf_alloclen() rather than linebuf_len() for flood tracking.
	  This should be done anyway, to stop people taking up inordinate
	  amounts of memory by flooding lines with only a few characters,
	  which can be just as annoying.

2000-12-07 23:01  db

	* src/: channel.c, s_user.c:
	  - non op trying to set a channel limit should get a not chanop
	  message

2000-12-07 22:38  db

	* modules/m_join.c, src/send.c:
	  - fixed two bugs. one bug in m_join.c prevented JOIN 0 from being
	    detected.
	  - second bug was one I introduced into send.c when I added lazylinks
	    I put a test for a NULL chptr into the wrong spot... This probably
	    affected other commands then just JOIN 0...

2000-12-07 16:43  db

	* include/ircd.h, modules/m_testline.c, modules/core/m_sjoin.c,
	  src/s_user.c:
	  - class is a string not an int now (testline)
	  - redid m_sjoin... erg we are going to have to do some serious
	    sanity checking on send.c sendto_channel_butserv tries to be
	    "helpful" and uses vsendto_prefix_one() which promptly tries to put
	    the proper prefix on the string. ugh. I already KNOW what prefix I
	    want I don't need this overhead. time to re-examine asap

2000-12-07 04:22  db

	* src/: channel.c, s_user.c:
	  - fixed stupid in channel.c with ban sending... used banptr forgot
	    the ->banstr oops.
	  - removed totally unused variable in s_user.c LastWallopsTime...
	    wallops is no longer paced. rah rah.

2000-12-07 04:09  db

	* include/s_serv.h, modules/m_gline.c, src/s_serv.c:
	  - first cut at cleaning up m_gline.c its still fugly... but cleaner
	  - added CAP_GLN for capable of gline servers. I didn't realize this
	    wasn't here before. ugh.

2000-12-07 03:40  db

	* modules/: m_stats.c, core/m_message.c:
	  - fixed m_stats.c so /stats E,F as non oper gives No permission
	  error

2000-12-07 03:18  db

	* modules/core/m_message.c:
	  - m_message.c would core if the channel was +m and you tried to
	    message it. duh

2000-12-07 02:52  db

	* modules/m_knock.c:
	  - missing parc test in m_knock.c caused it to core on knock with
	    no args. spotted by poptix...

2000-12-07 02:33  db

	* doc/example.conf:
	  - missed committing new conf file because I forgot to rename it from
	    ircd.conf to example.conf grrr

2000-12-07 02:21  db

	* modules/m_names.c, src/s_serv.c:
	  - Like a surgeon who leaves a scalpel inside a patient, I left some
	    debugging code inside m_names.c ... some extra sendto_realops...
	    *blush* at least the patient hasn't died ...

2000-12-07 01:23  db

	* doc/example_old.conf:
	  - added example of new style conf file (finally)
	  - renamed old ircd.conf example as ircd_old.conf

2000-12-07 01:02  db

	* modules/core/m_sjoin.c:
	  - fixed m_sjoin.c for vchans finally. They work just fine now.

2000-12-07 00:46  db

	* modules/core/m_sjoin.c, src/channel.c:
	  - fixed obvious bug in sjoin code for vchannels. its still broken
	    for remote joins, but getting there.
	  - allow halfops to +imtsp channels like full ops

2000-12-06 23:37  db

	* modules/m_kline.c, modules/m_userhost.c, src/s_conf.c:
	  - reverted previous m_kline.c change in favour of...
	  - letting s_conf.c figure out if the oper placing the kline is
	    remote oper or not, and logging it appropriately.

2000-12-06 22:22  db

	* modules/core/m_server.c:
	  - cleaned up m_server.c some more. ugh. it was horrid

2000-12-06 20:42  db

	* modules/m_accept.c, src/channel.c, src/vchannel.c:
	  - riedel's patch to keep from adding nicks twice to an accept list

2000-12-06 19:52  db

	* messages/custom.po, src/messages.tab, src/vchannel.c:
	  - redoing RPL_VCHANLIST so last %s is gone, since I'm building
	    up the channel sublist myself

2000-12-06 19:23  db

	* modules/m_accept.c:
	  - m_accept was using the wrong numeric for "no such nick"

2000-12-06 18:34  db

	* src/s_conf.c:
	  - ummm there is a bug where an struct Confitem aconf will have a
	    NULL c_class (pointer to class) this will core the server in
	    attach_iline this should be fixed, meanwhile... validate the pointer
	    is non NULL before trying to dereference it for now.

2000-12-06 17:40  db

	* modules/m_kline.c:
	  - transposed user/host in m_kline.c

2000-12-06 17:32  db

	* modules/m_capab.c:
	  - m_capab.c was missing an MFLG_UNREG hence was never being called
	    in some cases. oops

2000-12-06 16:54  db

	* modules/core/m_server.c:
	  - cleaned up m_server.c, removed some redundant code

2000-12-06 16:01  db

	* modules/m_capab.c, src/s_serv.c:
	  - "CAP_KLN" string was missing in s_serv.c

2000-12-06 15:04  db

	* include/handlers.h, include/s_serv.h, modules/m_capab.c,
	  modules/m_kline.c, src/client.c, src/ircd_parser.y, src/s_serv.c:
	  - added mr_capab to handlers.h
	  - changed m_capab to use mr_capab, remember capabilities are sent
	    while client is still unregistered
	  - fixed another parser bug pointed out by Walter Campbell
	  - added sanity test to del_all_accepts

2000-12-06 12:01  db

	* include/channel.h, modules/core/m_message.c, src/channel.c,
	  src/ircd_parser.y:
	  - reworked anti channel flooding to allow chanops/voice to flood
	    their own channel with impunity. This will allow them to at least
	    set +m if the channel really is flooded!
	  - fixed parser error spotted by Walter Campbel (Hwy101)

2000-12-06 04:49  db

	* include/client.h, src/client.c, src/packet.c, src/s_serv.c:
	  - on_accept_list can be on a remote client, having it on the
	    localClient part will lead to a core..
	  - hacked out a portion of adrian's flood control for now.. to get
	    the darn thing to do a server link. I'll look at it in the morning
	    when I am awake.

2000-12-05 22:28  db

	* TODO, include/client.h, src/client.c, src/ircd.c, src/oldparse.c,
	  src/s_conf.c:
	  - updated TODO
	  - c lines were blasted when ZIPLINKS were removed, put them back
	    as normal C lines for now
	  - up check ping event time to 30 seconds
	  - close fbfile after parsing in .include
	  - check for NULL find on strchr('\n') in initconf

2000-12-05 21:31  db

	* modules/core/m_message.c:
	  - moved check for flood attack on channel after check can_send

2000-12-05 21:20  db

	* include/channel.h, include/ircd.h, modules/m_admin.c,
	  modules/core/m_message.c, modules/m_set.c, src/ircd.c:
	  - ok, added channel throttling tested both channel throttling and
	    message throttling, both appear to work. Removed FLOODTIME, default
	    to always one second for now.

2000-12-05 16:31  db

	* modules/m_set.c:
	  - redid m_set.c precalculate newval etc.

2000-12-05 15:43  db

	* modules/m_admin.c, modules/m_set.c, src/linebuf.c:
	  - committed Jeremy Chadwicks (best.net) m_set table driven code
	  - sprinkled some asserts into linebuf.c
	  - fixed typo in m_admin.c

2000-12-05 12:41  db

	* include/s_conf.h, src/class.c, src/linebuf.c, src/s_conf.c:
	  - cleaned up class.c adding more comment blocks
	  - cleaned up s_conf.c to actually use nice defines instead of
	  cryptic #'s
	  - fixed typo in linebuf.c

2000-12-05 06:50  toot

	* configure: removed zlib from configure, and updated version
	  number

2000-12-05 02:26  db

	* opers.txt, include/client.h, include/config.h,
	  include/config.h.dist, include/ircd.h, include/packet.h,
	  messages/custom.po, modules/core/m_message.c, modules/m_set.c,
	  src/client.c, src/ircd.c, src/messages.tab, src/s_conf.c,
	  src/s_user.c:
	  - updated opers.txt for h7, its more or less right now
	  - added new 'u' flag for opers, show unauth clients on that flag
	    instead of 'c' flag
	  - moved 'u' flag to 'g' for CALLERID
	  - upped flooding parms slightly some more... still set too low I
	  think
	  - changed DRONE_FLOOD etc. to plain FLOOD... This is generic anti
	    flooding code for the =recipient=

2000-12-05 01:32  db

	* include/s_debug.h, include/s_misc.h, messages/custom.po,
	  modules/m_stats.c, src/messages.tab, src/s_debug.c, src/s_misc.c:
	  - cleaned up these functions, two arguments when 1 is quite enough
	    this makes them consistent with other functions that only pass
	    the struct Client *sptr. No need to also pass the nick.
	  - changed wording on vchan's at toyota's suggestion.

2000-12-05 00:45  db

	* include/client.h, modules/m_accept.c, modules/core/m_message.c,
	  src/client.c:
	  - added rest of accept code.
	    client puts themselves into +u mode, this disallows casual
	    messages to that client. The source gets a "am on server side
	    ignore" from the target, the target gets a message saying source has
	    messaged them, but paced to once a minute.
	    a client in +u mode (or any other mode actually) can add clients
	    it will accept messages from using /quote accept nick
	    delete them using /quote accept -nick (perhaps /quote delete nick
	    would make more sense?) a list with /quote accept *

2000-12-04 23:00  db

	* include/client.h, include/send.h, modules/m_kline.c,
	  src/client.c, src/send.c:
	  - found the cause of the blalloc bit already cleared error..
	    dlink_node was already been cleared in remove_user_from_channel
	    exit_one_client was trying to also free it.
	  - added sendto_cap_serv_butone for sending to capable servers
	    added rudimentary remote kline code to use this. NOT TESTED
	    until I get a remote server up.

2000-12-04 21:53  db

	* include/s_conf.h, modules/m_kline.c, src/s_conf.c:
	  - removed duplicate function from m_kline.c replaced with function
	    already in place but unused in s_conf.c duh. can we say BLOAT?

2000-12-04 21:24  db

	* include/client.h, include/m_info.h, src/packet.c:
	  - fixed bug in parse_client_queued to do with opered clients.
	    code was nver resetting lcptr->sent_parsed = 0 and actually_read =
	    0 so poor oper would no longer be listened to after a while...
	    Replaced goto with a if (!IsPrivileged... macro...
	  - removed last remnants of USER_UH defines ... GONE

2000-12-04 15:36  db

	* src/channel.c:
	  - don't devoice/voice if chanop

2000-12-04 14:52  db

	* src/channel.c:
	  - identity of who set a ban should be hidden in channel op hide mode

2000-12-04 14:32  db

	* src/vchannel.c:
	  - empty vchans shown on list have no clients to key off of,
	    return a timestamp for now. You can't join them still since
	    the join code doesnt' know anything about joining on a ts key.

2000-12-04 14:07  db

	* include/class.h, src/class.c:
	  - class.c get_client_class returns a string class name now
	    It was trying to use a struct ConfItem as a class pointer. oops.
	    As conf's now have a pointer to the class name anyway, its easier
	    to pull it from the conf anyway. If its NULL, return 'default'
	    string for now.

2000-12-04 13:30  db

	* modules/core/m_nick.c:
	  - lost a 433 (nickname in use error) somewhere in the way,
	    put it back in.. m_nick.c

2000-12-04 12:03  db

	* src/channel.c:
	  - had logic wrong in can_send

2000-12-04 11:53  db

	* include/client.h, include/packet.h, include/s_bsd.h,
	  src/client.c, src/packet.c, src/parse.c, src/s_auth.c: This is a
	  patch which implements client send flood protection.  This is the
	  type of flood where someone goes

	  /join #foo /exec -o cat bigfile.txt

	  and they quit with "Excess Flood"  .

	  Note that if a client floods, its allow_read value will decrease. If
	  they then stop flooding, their allow_read value will increase
	  regardless of whether there is any pending data .. this flushes the
	  output quicker if and only if they stop flooding.

	  I've managed to cause this thing to go tits up a few ways when
	  having a client flooding a channel and it gets killed:

	  * a blfree bitmap error. Diane, Can you please check out why ? :-)
	    I think this is related to your Slink death ..

	  * Hrm. the "client connecting" notification seems to panic if I'm an
	    oper and see someone connecting to my local server.

	  * various strange deaths in the parser.. this one confuses me

	  * If a client gets killed for flooding, sometimes you'll see one or
	    two lines *from* that client appear immediately after the exit. This
	    is most probably my problem and its going to be a queue flushing
	  issue ..

	  Can someone please tidy this up over the next week and commit it?
	  I'd like to have a hybrid-7 beta out, and i'm now going to be minus
	  some serious time until Christmas.

	  Thanks!

	  committed for now...

	  ----- Forwarded message from Adrian Chadd
	  <adrian@nympho.cacheboy.net> -----

2000-12-04 11:08  db

	* include/s_serv.h, modules/m_kline.c, modules/m_links.c,
	  modules/m_topic.c, modules/m_whois.c, modules/core/m_message.c,
	  src/channel.c, src/s_user.c:
	  - +m moderated channel logic was missing oops.
	  - removed count of servers in server hide mode in /lusers
	  - /links will show current server with hop count of 0, everyone else
	    with 1 in server hide mode to all but opers
	  - allow half ops to set topic
	  - removed zlib, better to use system installed lib

2000-12-04 03:41  db

	* include/config.h, include/config.h.dist, src/client.c,
	  src/s_conf.c, src/s_user.c:
	  - ripped out LIMIT_UH for now. BLOAT BLOAT BLOAT
	    in preparation for doing IP throttling ...
	  - ripped out #ifdef for invisible off or on, that should be in
	    conf anyway. ugh

2000-12-04 03:30  db

	* src/channel.c:
	  - redid clear_channel_list code to handle possible buffer overflows
	    limiting to 3 mode changes isn't sufficient *sigh*
	    I think I got this right, unable to test without another server to
	    link to and I'm too tired. ;)
	    N.B. this code is very similar to send_mode_list... perhaps can
	    combine the two functions. ...

2000-12-04 03:17  db

	* include/vchannel.h, modules/m_cjoin.c, modules/m_join.c,
	  modules/m_list.c, src/channel.c, src/vchannel.c:
	  - fixed vchan support, added new back pointer to channel struct
	    only set non NULL on sub vchans. This makes it easy ...
	  - Bugs, what happens when a vchan is peristently kept? There is no
	    longer an unique ID to use,since it has no users.

2000-12-04 01:46  db

	* src/channel.c:
	  - fixed stupid in channel.c where a non op could generate a mode -o
	    message on channel, but it didnt' do anything. Mis-placed if...

2000-12-04 01:35  db

	* include/channel.h, modules/m_names.c, modules/m_who.c,
	  modules/core/m_kick.c, modules/core/m_mode.c, modules/m_whois.c,
	  src/channel.c, src/s_conf.c:
	  - added half ops.. BitchX freaks with it, but epic is fine.
	    figures. anyway, we can #ifdef this out in production if we want.

2000-12-04 00:50  db

	* include/client.h, include/s_conf.h, modules/m_kline.c,
	  modules/m_stats.c, src/channel.c, src/ircdauth.c,
	  src/mtrie_conf.c, src/oldparse.c, src/s_conf.c, src/s_user.c:
	  - fixed m_kline.c code
	  - removed all traces of restricted I line code, thats better handled
	    using half ops anyway.
	  - removed horrible '|' oper only messages in mtrie_conf.c
	  - fixed /stats K in m_stats.c for opers
	  - redid send_mode_list in channel.c to account for possible buffer
	    overflow even with 3 bans per channel..

2000-12-03 22:52  db

	* include/channel.h, modules/m_names.c, src/channel.c:
	  - fixed bug in m_names.c removed redundant/duplicate code in
	    m_names.c which was already in channel.c

2000-12-03 20:18  db

	* include/tools.h, src/tools.c:
	  - removed DEBUG code from dlink

2000-12-03 18:11  db

	* include/channel.h, include/config.h, include/config.h.dist,
	  include/fileio.h, include/s_conf.h, include/send.h,
	  include/vchannel.h, modules/m_cjoin.c, modules/m_gline.c,
	  modules/m_join.c, modules/m_kline.c, modules/m_knock.c,
	  modules/m_list.c, modules/m_names.c, modules/core/m_sjoin.c,
	  src/channel.c, src/client.c, src/fileio.c, src/ircd.c,
	  src/packet.c, src/s_conf.c, src/s_serv.c, src/send.c,
	  src/vchannel.c:
	  - removed REJECT_HOLD that should be replaced with IP throttling
	  - moved safe_write into fileio.c for now, changed to use fbopen()
	    etc.  let caller close the FBFILE
	  - replaced vchan double link list in channel struct with dlink_list
	  - Still pending bugs in m_names.c, its displaying channels twice

2000-12-03 07:18  db

	* include/channel.h, include/ircd.h, include/tools.h,
	  modules/m_join.c, modules/m_list.c, modules/m_lljoin.c,
	  modules/m_oper.c, modules/core/m_mode.c, modules/core/m_server.c,
	  src/channel.c, src/client.c, src/ircd.c, src/ircdauth.c,
	  src/res.c, src/s_misc.c, src/s_serv.c, src/s_user.c, src/send.c,
	  src/tools.c:
	  - modified code to use dlink_node/dlink_list for oper_list serv_list
	    and lclient_list (local clients) this gets rid of my evil double
	    link list code mess, cleans up the code a lot more still..
	    I think we really need to have another global (sigh) for the
	    current uplink Client pointer for leafs...

2000-12-03 04:26  adrian

	* TODO:

	  Add a note about the new Slink replacement and how it needs to be
	  sped up.

2000-12-03 04:16  adrian

	* TODO:


	  * ziplinks is gone for the time being
	  * david-t tidied up calling fd_note() in the right places

2000-12-03 04:13  adrian

	* TODO:

	  Add my stuff

2000-12-03 03:44  db

	* tools/Makefile.in:
	  - removed zlib

2000-12-03 03:26  db

	* src/tools.c:
	  - simplified dlinkMoveList code

2000-12-03 03:15  db

	* modules/core/m_nick.c:
	  - cleaned up m_nick.c again. HEY! the docs in the comments are
	    wrong.  surprise surprise.

2000-12-03 02:41  db

	* modules/core/m_nick.c:
	  - oopsie in m_nick.c wrong order of things... gah this code is
	    still a mess ;-(

2000-12-03 02:34  db

	* modules/core/m_nick.c:
	  - cleaned up m_nick.c some more... removed obsolete checks
	    moved some tests where they make more sense for the new world
	    order

2000-12-03 00:48  db

	* modules/core/m_nick.c:
	  - tidied up m_nick.c more in modules
	    removed a nick <-> server test, replaced it with a simpler
	    strchr(nick,'.') test. nicks can NEVER have a dot in them, and
	    servers must ALWAYS have a dot in their name.
	  - cleaned up all functions in m_nick.c checking for specific
	    paramater counts as the protocol specifies..

2000-12-02 23:36  db

	* src/tools.c:
	  - fixed dlinkMoveList, there are three cases to contend with
	    1) empty from list 2) empty to list 3) move the spaghetti pointers
	    around

2000-12-02 19:05  db

	* include/ircd_defs.h, include/list.h, include/tools.h,
	  src/channel.c, src/client.c, src/list.c, src/s_conf.c,
	  src/sprintf_irc.c, src/tools.c:
	  - fixed DEBUG_BLOCK_ALLOCATOR for free_dlink_node case so it will
	    no longer core in sprintf.. all the free calls are "wrapped"
	    in ircd_def.h .. to include a file name and line number, without
	    free_dlink_node being wrapped, it tried to print a non-existent
	    filename oops

	  - I removed the "wrapped" free_link in ircd_def.h as well no longer
	    used.  which reminds me...

	  - LIMIT_UH code in the new world order is currently =broken= until
	    it understands how to properly use dlink_node etc. Someone else
	    bored and care to fix?

	  - Added reference counting to dlink_node =for now= *ICK* barf its an
	    #ifdef .. I don't want it going out into production like that
	    either adrian.  I'll remove before the beta cut.

2000-12-02 15:25  toot

	* modules/m_who.c: small bugfix in m_who

2000-12-02 14:55  toot

	* include/client.h, modules/m_cjoin.c, modules/m_join.c,
	  src/vchannel.c: made vchan_map in to a dlink_list, not tested
	  loads, but it seems to work

2000-12-02 11:42  db

	* include/tools.h, src/channel.c, src/tools.c:
	  - made list_length a generic function moved into tools.c
	    renamed as dlink_list_length()

2000-12-02 11:36  db

	* src/: channel.c, tools.c:
	  - add code to move a list from one to the other, this makes
	    de-opping an entire channel a simple job of moving lists over from
	    the chanop list to the peon list.

2000-12-02 10:19  db

	* include/tools.h, modules/core/m_sjoin.c, src/channel.c,
	  src/tools.c:
	  - real fix for channel.c change_channel_membrship
	  - fixed missing prototypes in tools.h that would have found previous
	  bug

2000-12-02 09:41  toot

	* modules/m_admin.c: typo in m_admin.. blah :)

2000-12-02 09:33  toot

	* include/handlers.h, modules/m_admin.c, modules/m_time.c: . let
	  unregistered clients use /admin, but non hunting . non-opers can do
	  /time locally.

2000-12-02 07:45  toot

	* modules/core/m_nick.c, src/numeric.c: fixed some compile
	  errors/typos

2000-12-02 02:41  db

	* src/: channel.c, s_serv.c:
	  - recoded send_members in channel.c so it actually works
	    its still a dogs breakfast... but =better=

2000-12-02 01:54  db

	* modules/core/m_nick.c, src/channel.c, src/s_serv.c, src/s_user.c,
	  src/tools.c:
	  - connect bursts are still broken, but it works enough to
	    be usable. More debugging to do.
	  - cleaned up m_nick.c a tiny bit more. what a steeeninkng mess

2000-12-02 00:03  db

	* src/: channel.c, tools.c:
	  - change_channel_membership was screwing up, since dlinkDelete does
	    not zero the dlink_list->head pointer in all cases. *sigh* dunno
	    what I did wrong. anyway, this hack fixes it for now.

2000-12-01 18:55  db

	* modules/: m_who.c, core/m_sjoin.c:
	  - fixed m_who.c
	  - optimized m_sjoin.c a bit

2000-12-01 17:45  db

	* modules/m_whois.c:
	  - fix to whois... this function needs review... it "feels" wrong...
	  sigh

2000-12-01 17:36  db

	* modules/m_names.c, src/channel.c:
	  - fixed m_names.c missing reply_to_send = 1

2000-12-01 17:24  db

	* include/config.h, src/ircdauth.c, src/oldparse.c:
	  - tidy up LITTLE_I_LINE code remove #ifdef's

2000-12-01 17:17  db

	* include/channel.h, include/client.h, include/config.h,
	  include/list.h, include/s_conf.h, include/send.h,
	  modules/m_cburst.c, modules/m_cjoin.c, modules/m_drop.c,
	  modules/m_gline.c, modules/m_info.c, modules/m_invite.c,
	  modules/m_join.c, modules/m_kline.c, modules/core/m_kick.c,
	  modules/m_knock.c, modules/m_list.c, modules/m_lljoin.c,
	  modules/core/m_message.c, modules/core/m_mode.c,
	  modules/m_motd.c, modules/m_names.c, modules/m_oper.c,
	  modules/core/m_nick.c, modules/core/m_part.c,
	  modules/core/m_server.c, modules/core/m_sjoin.c,
	  modules/m_topic.c, modules/m_unkline.c, modules/m_who.c,
	  modules/m_whois.c, src/blalloc.c, src/channel.c, src/class.c,
	  src/client.c, src/hash.c, src/irc_string.c, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/ircdauth.c, src/list.c,
	  src/motd.c, src/oldparse.c, src/packet.c, src/restart.c,
	  src/s_conf.c, src/s_debug.c, src/s_serv.c, src/s_user.c,
	  src/send.c, src/tools.c, src/vchannel.c:
	  - massive commit, this removes ALL SLink's ick
	    NOTE that not everything is working yet, notably server link..
	    but this doesn't core right away. ;) and appears to run.

2000-12-01 13:16  davidt

	* doc/technical/message-customisation.txt, include/config.h,
	  messages/Makefile.in, messages/custom.mo, messages/custom.po,
	  src/irc_string.c, src/numeric.c: fixed gettext support a bit, and
	  added some docs

2000-12-01 10:03  adrian

	* src/s_bsd.c:

	  aiee! clear the socket timeout *before* calling the timeout handler.
	  If we clear it after, we miss any timeouts set by the timeout
	  handler.  (think multiple-ping checks ..)

2000-12-01 10:01  adrian

	* include/fdlist.h, src/s_bsd.c:

	  add a flush list, which looks precisely like a socket timeout as it
	  is right now, but its designed to be used if we want to flush data
	  out at a certain time rather than immedidately.

	  Think "flood protection".

	  Note that this is implemented inside the comm_checktimeouts() loop.
	  This is done because we want to eventually only have exactly *one*
	  walk of the entire fd list/clients once a second, rather than
	  multiple.

2000-11-30 21:52  db

	* include/channel.h, modules/core/m_sjoin.c, src/channel.c:
	  - majorly reworked m_sjoin.c remove_our_ops and channel.c
	    send_mode_list because of the original RFC that started this
	    stupidity off, trying to do four modes at a time is risky due to
	    possible buffer overflow ;-( Taking the time to strlen() before
	    adding to output buffer seems CPU intensive to me. soooo back to 3
	    mode changes per. This should speed up sjoin's a lot now.

2000-11-30 21:02  db

	* src/channel.c:
	  - rewrote send_mode_list in channel.c The original was pathetic
	    strcat this strcpy that. UGH. This should run much faster.

2000-11-30 19:59  db

	* Makefile.in, include/config.h, modules/core/m_sjoin.c,
	  src/channel.c, src/numeric.c:
	  - fixed broken messages stuff for now I'll double check with David
	  tomorrow
	  - redid how m_sjoin.c did a remove ops

2000-11-30 18:20  davidt

	* modules/: Makefile.in, core/Makefile.in: m_error.so wasn't being
	  built.

2000-11-30 18:01  db

	* include/client.h, src/numeric.c:
	  - removed CUSTOM_ERR define no longer needed
	  - removed offsetof no longer needed

2000-11-30 17:47  davidt

	* Makefile.in, configure, include/config.h, include/config.h.dist,
	  include/m_info.h, include/s_conf.h, include/setup.h.in,
	  messages/Makefile.in, messages/custom.mo, messages/custom.po,
	  modules/m_set.c, src/ircd.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/messages.tab, src/messages_cust.tab, src/numeric.c,
	  src/s_conf.c, tools/install_ircd: Removed CUSTOM_ERR, and changed
	  it to use gettext(), which allows the message files to be changed at
	  run time, currently using /quote set MSGLOCALE ... ('custom' for the
	  custom messages, or anything else to use the standard ircd
	  messages).  Also, added general_message_locale to the new config
	  file.  If gettext() isn't available, it should just use the standard
	  ircd messages.

2000-11-30 15:51  db

	* modules/m_names.c:
	  - fixed core bug in m_names.c

2000-11-30 11:27  adrian

	* include/packet.h, include/s_bsd.h, src/packet.c, src/s_auth.c,
	  src/s_bsd.c, src/s_serv.c:

	  move read_packet() and parse_client_queued() into packet.c.  s_bsd.c
	  is meant to be a place where BSD socket type stuff happens, not
	  parsing client messages.

	  This is the precursor tidyup which will make implementing the recvq
	  flooding code talk..

2000-11-30 11:01  db

	* include/client.h, include/s_serv.h, modules/m_capab.c,
	  modules/m_cburst.c, modules/m_drop.c, modules/m_ison.c,
	  modules/m_join.c, modules/m_kline.c, modules/core/m_message.c,
	  modules/core/m_nick.c, modules/m_oper.c, modules/m_pass.c,
	  modules/core/m_part.c, modules/core/m_server.c,
	  modules/m_stats.c, modules/m_trace.c, modules/m_userhost.c,
	  src/blalloc.c, src/channel.c, src/class.c, src/client.c,
	  src/ircd.c, src/ircdauth.c, src/packet.c, src/parse.c,
	  src/s_auth.c, src/s_bsd.c, src/s_conf.c, src/s_debug.c,
	  src/s_log.c, src/s_misc.c, src/s_serv.c, src/s_stats.c,
	  src/s_user.c, src/send.c:
	  - removed the evil local struct Client hack and added a new
	    LocalUser "localClient" part. If non NULL, this client struct is a
	    local client..  I suppose we can now get rid of local_flag?

2000-11-30 05:28  adrian

	* include/client.h, src/packet.c:


	  * kill client[] buffer in the Client struct. We don't need this at
	    all with the advent of the linebuf
	  * Tidy up a couple of assert()s to be more tasteful to me
	  * note that the count; entry in the Client struct is now only used
	    to denote local/remote clients with some evil splitting of the
	    client struct and memory allocation. This is evil and should be
	    killed at someone's earliest convienence and replaced with a
	    LocalClient struct which attaches to the end of a struct Client ..

2000-11-30 05:20  adrian

	* src/linebuf.c:


	  * added an Id tag
	  * we needed to keep those bzero()'s. Hrm, I wonder why ...
	    What happened was that we'd have get a line in, and then
	    immediately flush some previously printed garbage. Weird.

2000-11-30 05:02  db

	* src/modules.c:
	  - similar bug to parse.c in modules.c when increasing moduletable

2000-11-30 04:53  db

	* include/s_conf.h, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/parse.c:
	  - added two new parms to parser hide_server hide_chanops yes or no
	  - added possible fix (untested by adrian?) to parse.

2000-11-30 04:04  adrian

	* src/linebuf.c:

	  We don't need to bzero, now that the memory routines return the
	  memory zero'ed for us ..

2000-11-30 03:59  db

	* src/: class.c, list.c, listener.c, res.c, s_conf.c:
	  - removed memset() 0 after MyMalloc its done already

2000-11-30 03:56  db

	* src/channel.c:
	  - no need to memset to zero in channel.c now either

2000-11-30 03:54  db

	* include/msg.h, include/parse.h, src/blalloc.c:
	  - MessageTree stuff should be in parse.h not msg.h
	  - Seeing as MyMalloc now zeros memory, no need to do it in blalloc

2000-11-30 03:52  adrian

	* src/irc_string.c:

	  bzero() the memory we get from malloc() before returning. This is a
	  good thing(tm), and it means we can possibly start removing
	  bzero/memset's from around the code.

2000-11-30 02:54  db

	* modules/: core/m_kick.c, m_links.c:
	  - fixed kick so nonops see user kicking themselves in chanop hide
	  mode
	  - don't show uplink on links and hopcount if in server hide mode

2000-11-30 02:38  db

	* include/ircd.h, include/send.h, modules/m_cjoin.c,
	  modules/m_join.c, modules/m_lljoin.c, modules/m_set.c,
	  modules/core/m_kick.c, modules/core/m_part.c, modules/m_topic.c,
	  modules/m_who.c, modules/core/m_sjoin.c, modules/m_whois.c,
	  src/channel.c, src/ircd.c, src/send.c:
	  - committed the chanop hiding code. wheeee
	    still needs testing

2000-11-30 00:43  db

	* src/client.c:
	  - server names should not be given in /squit messages if
	    server hide is turned on

2000-11-30 00:29  db

	* modules/m_names.c:
	  - squished bug in m_names.c which caused the module to suddenly
	    throw up when names without a paramter was given. I forgot
	    the case where a client had no channels it was on, trying to
	    indirect through a NULL struct Link is bad for the modules health.

2000-11-29 23:11  db

	* include/channel.h, modules/Makefile.in, modules/m_join.c,
	  modules/core/Makefile.in, modules/core/m_squit.c, src/channel.c,
	  src/s_log.c:
	  - fixed m_squit.c
	  - account for LazyLink's in channel.c destroy_channel()
	    can be used for both persistent channels and lazy links now
	    removing more BLOAT
	  - -O2 in Makefile.in for modules was doing weirdnesses, hard coded
	  to -g for now

2000-11-29 19:04  db

	* include/client.h, src/s_conf.c, src/s_user.c:
	  - fixed persistent channels
	  - fixed IsSetCallerId typo

2000-11-29 18:35  db

	* include/channel.h, include/s_serv.h, modules/m_join.c,
	  modules/m_list.c, modules/core/m_mode.c, src/blalloc.c,
	  src/channel.c, src/client.c, src/hash.c, src/ircd.c,
	  src/ircdauth.c, src/list.c, src/listener.c, src/motd.c,
	  src/mtrie_conf.c, src/numeric.c, src/oldparse.c, src/parse.c,
	  src/res.c, src/s_conf.c, src/s_serv.c, src/s_user.c, src/s_zip.c,
	  src/scache.c, src/send.c, src/whowas.c:
	  - pile of cleanups mostly in comments
	  - added persistent channels tentatively for now, finesse it later
	  - redid s_user.c code to clean that up

2000-11-29 16:18  db

	* include/s_log.h, src/client.c, src/s_log.c, src/s_user.c:
	  - renamed misnamed log_user_connect -> log_user_exit
	  - move X line check into separate function (LIKE IT SHOULD HAVE BEEN
	    ALL ALONG)

2000-11-29 16:00  db

	* include/s_conf.h, include/s_user.h, src/s_conf.c, src/s_user.c:
	  - reworked register_user
	    moved all check for conf/kline notification etc. back into
	    s_conf.c where I think maybe it belongs, in any case, this cleans
	    up register_user no more **char preason. *ugh*
	  - removed the kludge '|' handling in reasons. *ugh*

	    Who knows what evil lies in ircd code...

2000-11-29 13:51  db

	* include/s_log.h, include/s_user.h, modules/m_lusers.c,
	  src/ircdauth.c, src/s_user.c:
	  - redid luser code, removed cache, if this is still needed after all
	    the bug fixes done (!) then add an event to recalculate luser
	  counts.

	  - added user_welcome() function to s_user.c to start factoring this
	    up I hate monolithic functions...

	    What evil functions lurks in the heart of ircd?, the shad0w knows.

2000-11-29 13:16  db

	* include/s_log.h, modules/m_oper.c, src/client.c, src/s_log.c:
	  - cleaned up user and oper file logging. use fbopen etc.
	    use eventAdd to close user log for resync

2000-11-29 11:49  db

	* include/config.h, include/config.h.dist, src/client.c:
	  - removed more #define's
	  - cleaned up client.c/client.h some more

2000-11-29 02:57  db

	* include/client.h, include/handlers.h, include/msg.h,
	  include/s_conf.h, modules/Makefile.in, modules/m_accept.c,
	  modules/core/Makefile.in, modules/core/m_message.c,
	  modules/m_rehash.c, modules/m_user.c, src/client.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/linebuf.c, src/s_user.c:
	  - I removed isbot tests. those are quite obsolete and were BLOAT
	  - I added skeleton for server side ignore new user mode +u
	  - This adds a new command module "m_accept"
	    This code needs to be finished...
	  - removed rehash gline rehash tkline BLOAT
	  - tidied up linebuf.c to use \r and \n like K&R intended

2000-11-28 18:38  adrian

	* src/: s_auth.c, s_bsd_poll.c, send.c:

	  Revoke FDLIST_BUSYCLIENT for the time being - we need to sort out
	  how we place things in the fd lists, and we need to keep the flow of
	  FD events at a steady rate.

	  The trouble right now is that if we don't have any idle fd's being
	  triggered, we end up waiting an entire second for their IO to
	  complete. This is too long. :-)

2000-11-28 18:30  db

	* include/m_info.h:
	  - removed unused FLUD code

2000-11-28 18:20  db

	* include/channel.h, include/client.h, include/config.h,
	  include/config.h.dist, include/flud.h, include/ircd.h,
	  include/ircd_defs.h, include/list.h, include/s_stats.h,
	  modules/m_set.c, modules/core/m_message.c, src/Makefile.in,
	  src/channel.c, src/client.c, src/flud.c, src/ircd.c, src/list.c,
	  src/s_debug.c, src/s_stats.c, src/s_user.c:
	  - ripped out FLUD, right idea, wrong approach.

2000-11-28 13:57  db

	* modules/core/m_message.c: To quote RFC1459.txt

	  The NOTICE message is used similarly to PRIVMSG.  The difference
	     between NOTICE and PRIVMSG is that automatic replies must never
	     be sent in response to a NOTICE message.  This rule applies to
	     servers too - they must not send any error reply back to the client
	     on receipt of a notice.  The object of this rule is to avoid loops
	     between a client automatically sending something in response to
	     something it received.  This is typically used by automatons
	     (clients with either an AI or other interactive program
	     controlling their actions) which are always seen to be replying lest
	     they end up in a loop with another automaton.

	  NOTICE now no longer replies with "NO SUCH NICK" if a nick recipient
	  does not exist etc.

2000-11-28 03:44  db

	* modules/core/m_message.c:
	  - fixed m_message to work properly. i.e. oper $# messages work
	    NO_SUCH_NICK now work properly

2000-11-28 03:42  davidt

	* src/send.c: Fixed broken build

2000-11-28 02:33  db

	* src/send.c:
	  - removed another #ifdef

2000-11-28 01:21  db

	* src/modules.c:
	  - oopsies in modules.c should be max_mods not num_mods

2000-11-28 01:15  db

	* include/send.h, modules/m_knock.c, src/send.c:
	  - removed more bloat bloat bloat

2000-11-28 01:06  db

	* doc/server-version-info:
	  - synced up doc changes

2000-11-28 00:50  db

	* doc/CIDR.txt:
	  - synced in CIDR.txt doc from hybrid-6 tree
	    gah! I am looking forward to the death of the h6 tree. it sucks.

2000-11-27 23:42  db

	* src/modules.c:
	  - fixed reference to version in module, its a **char pointer.

2000-11-27 23:06  db

	* modules/: m_away.c, core/m_mode.c, m_whois.c:
	  - fixed a few typos

2000-11-27 22:53  bill

	* modules/: m_away.c, m_capab.c, m_cburst.c, m_challenge.c,
	  m_cjoin.c, m_close.c, m_connect.c, core/m_die.c, m_drop.c,
	  m_error.c, m_gline.c, m_hash.c, m_info.c, m_invite.c, m_ison.c,
	  m_join.c, core/m_kick.c, core/m_kill.c, m_kline.c, m_knock.c,
	  m_links.c, m_lljoin.c, m_locops.c, m_lusers.c, core/m_message.c,
	  core/m_mode.c, m_motd.c, m_names.c, core/m_nick.c, m_oper.c,
	  m_operwall.c, core/m_part.c, m_pass.c, m_ping.c, m_pong.c,
	  core/m_quit.c, m_rehash.c, m_restart.c, core/m_server.c, m_set.c,
	  core/m_sjoin.c, m_svinfo.c, m_testline.c, m_time.c,
	  core/m_squit.c, m_topic.c, m_trace.c, m_unkline.c, m_user.c,
	  m_userhost.c, m_users.c, m_version.c, m_wallops.c, m_who.c,
	  m_whois.c, m_whowas.c:

	   - added _moddeinit()

2000-11-27 19:08  db

	* src/modules.c:
	  - fixed modload/modunload yes. they work now

2000-11-27 18:58  db

	* modules/: m_help.c, m_list.c, m_stats.c, m_whois.c:
	  - added deinit

2000-11-27 18:38  db

	* include/parse.h, modules/m_admin.c, src/modules.c, src/parse.c:
	  - modunload now works. But all modules need to be updated to add a
	    deinit function *sigh* I did m_admin.c, 59 more to go

2000-11-27 16:38  db

	* src/: modules.c, parse.c:
	  - fixed parse.c and modules.c

2000-11-27 14:29  adrian

	* src/linebuf.c:

	  We should only allow a buffer to be obtained via linebuf_get() if it
	  is terminated!

2000-11-27 14:23  adrian

	* doc/technical/linebuf.txt:

	  Add initial documenation of the new linebuf code (god I love
	  documenting ..)

2000-11-27 13:50  db

	* include/handlers.h, include/msg.h, include/parse.h,
	  src/modules.c, src/oldparse.c, src/parse.c:
	  - interim check in, I hate checking in partially debugged code
	    but I have to do some real work for a bit,
	    /modunload cores ..

2000-11-27 03:47  db

	* include/client.h, include/modules.h, include/msg.h,
	  include/parse.h, modules/m_help.c, modules/m_stats.c, src/ircd.c,
	  src/ircd_parser.y, src/modules.c, src/parse.c:
	  - fixed modules code to use version string as well
	  - fixed parse to use prefix tree code
	  - modload modunload hooks in place, need admin flags
	  - fixed m_help to use original msgtab

2000-11-26 20:01  db

	* modules/m_whois.c:
	  - got tired of a compile warning

2000-11-26 19:23  db

	* modules/m_connect.c, modules/core/m_squit.c, src/linebuf.c:
	  - re-enabled send_operwall

2000-11-26 18:00  db

	* modules/m_whois.c:
	  - .depend included references to in6.h which ltnx didn't have oops.
	  - committed bysin's whois fix

2000-11-26 17:26  db

	* include/patchlevel.h:
	  - Seeing as there is next to nothing left of irc2.8 I'm removing
	    it from the patchlevel.

2000-11-26 16:17  adrian

	* include/linebuf.h, src/linebuf.c:

	  Hrm, return the number of lines parsed by linebuf_parse() - this'll
	  be used later on by some anti-flood code at a later date.

2000-11-26 14:42  adrian

	* include/dbuf.h, src/dbuf.c:

	  We don't need these. YAY.

2000-11-26 14:34  adrian

	* Makefile.in, include/client.h, include/linebuf.h,
	  include/packet.h, include/s_bsd.h, modules/core/m_message.c,
	  modules/m_stats.c, src/Makefile.in, src/ircd.c, src/linebuf.c,
	  src/packet.c, src/s_bsd.c, src/s_debug.c, src/s_misc.c,
	  src/s_user.c, src/send.c:

	  Adrian's totally massive evil dbuf die and linebuf code.

	  * dbuf.c and dbuf.h have gone. Byebye.
	  * some of the stuff in s_debug.c which reports dbuf stats has been
	    #if 0'ed for the time being
	  * linebuf flushing (ie write()ing to a socket) is now done through
	    linebuf_flush() which does the state keeping, saving a whole lot
	    of dbuf map/delete and tracking that existed before
	  * dopacket() was killed, since we now handle line-by-line parsing of
	    both server *and* client recvq buffers. dopacket() did some
	    CRLF-type splitting magic because a single buffer when doing
	    ZIPLINKS could possibly be more than on ircd line.
	  * deliver_it() was also killed, since we don't need that extra
	  complexity.
	  * A lot of linebuf fixes are brought in because well, we needed
	  them!

	  How the linebuf stuff is used (in a nutshell)

	  * linebuf_put() is called to put a complete line into a buffer. It
	    has to be a line.
	  * linebuf_parse() is called to put one or more lines into a buffer.
	    Incomplete lines and multiple lines are handled.
	  * When a line is terminated, it is appended with a CR/LF/NUL .

	    NOTE that the NUL isn't counted in the length!

	  Ok - this code is very very alpha. It works, and I can link to
	  another hybrid server. There are a lot of extras I have to add to
	  this code before it can be used in a public network, like:

	  * fixing flood protection to take into account alloclen rather than
	    len.  This is more relevant to memory usage
	  * fix the flood protection to only appear in one place (ie after
	    linebuf_parse() ) rather than the 10935083405 places it exists now
	  * I should add multiple-size support in the linebuf code, because we
	    might end up wanting to support > 512 line buffers for server
	  connections
	  * .. and yes, we should really test this to break it, to make sure I
	    haven't forgotten anything.

2000-11-26 13:37  bill

	* Makefile.in, include/send.h, modules/m_locops.c,
	  modules/m_operwall.c, modules/m_wallops.c, src/send.c:

	  va'ified send_operwall added zlib/ and iauth/ to SUBDIRS in Makefile

2000-11-26 13:33  db

	* modules/m_kline.c:
	  - fixed m_kline.c

2000-11-26 12:46  db

	* modules/core/m_squit.c, src/send.c:
	  - more cleanups

2000-11-25 22:35  db

	* include/s_conf.h, modules/m_connect.c, modules/m_operwall.c,
	  modules/m_wallops.c, modules/core/m_squit.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_user.c, src/send.c:
	  - tempoary check in (still works) of another massive cleanup...
	    more to come

2000-11-25 19:41  db

	* include/send.h, modules/m_error.c, modules/m_join.c,
	  modules/m_kline.c, modules/core/m_kick.c, modules/core/m_kill.c,
	  modules/m_oper.c, modules/core/m_message.c,
	  modules/core/m_nick.c, modules/m_rehash.c, modules/core/m_part.c,
	  modules/core/m_server.c, modules/core/m_squit.c,
	  modules/m_unkline.c, src/blalloc.c, src/channel.c, src/client.c,
	  src/flud.c, src/ircd.c, src/ircdauth.c, src/list.c,
	  src/m_error.c, src/modules.c, src/oratime.c, src/restart.c,
	  src/s_bsd.c, src/s_conf.c, src/s_serv.c, src/s_user.c,
	  src/send.c:
	  - more bloat removed.

2000-11-25 13:03  toot

	* modules/m_testline.c: don't need to check if they're an oper in
	  mo_testline

2000-11-25 12:53  ryan

	* include/: config.h, config.h.dist:

	  added RPATH for ircd.rsa (for oper keyfiles)

2000-11-25 12:40  toot

	* include/config.h, include/config.h.dist, include/m_info.h,
	  include/s_conf.h, modules/Makefile.in, modules/core/Makefile.in,
	  modules/m_testline.c, src/client.c, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c: . moved mo_testline into a
	  module . added idletime setting for use in ircd.conf

2000-11-24 18:45  bill

	* include/config.h:

	   - changed DPATH and the like from "/usr/ejb/ircd/" to
	     "/usr/local/ircd/" maybe ejb could just ln -sf /usr/ejb /usr/local?

2000-11-24 09:13  db

	* include/config.h, include/config.h.dist, include/ircd.h,
	  src/ircd.c:
	  - removed more unused junk

2000-11-24 04:08  db

	* modules/m_kline.c:
	  - clean up to this module

2000-11-24 03:27  db

	* modules/Makefile.in, modules/core/Makefile.in, modules/m_htm.c,
	  src/ircd.c, src/s_conf.c:
	  - more cleanups, removed m_htm.c

2000-11-24 03:02  db

	* include/handlers.h, modules/m_admin.c, modules/m_cburst.c,
	  modules/m_hash.c, modules/m_help.c, modules/core/m_die.c,
	  modules/m_info.c, modules/core/m_mode.c, src/channel.c:
	  - more cleanups

2000-11-23 19:17  db

	* modules/: m_challenge.c, m_cjoin.c, m_error.c, m_join.c,
	  m_kline.c, core/m_message.c, m_motd.c, core/m_mode.c,
	  core/m_nick.c, m_pass.c, m_ping.c, m_pong.c, m_rehash.c,
	  core/m_server.c, m_set.c, m_stats.c, core/m_squit.c, m_svinfo.c,
	  m_time.c, m_trace.c, m_user.c, m_users.c, m_wallops.c, m_whois.c:
	  - added version strings

2000-11-23 18:17  db

	* modules/: m_connect.c, m_drop.c, m_gline.c, m_knock.c, m_links.c,
	  m_list.c, core/m_kill.c, m_lljoin.c, m_locops.c, m_lusers.c,
	  m_names.c, m_oper.c, m_operwall.c, core/m_part.c, core/m_quit.c,
	  m_restart.c, m_topic.c, core/m_sjoin.c, m_unkline.c, m_version.c,
	  m_who.c, m_whowas.c:
	  - added version tags

2000-11-23 18:04  db

	* modules/: m_capab.c, m_cburst.c, m_close.c, m_htm.c, m_invite.c,
	  m_ison.c, core/m_die.c, m_userhost.c, core/m_kick.c:
	  - more versions

2000-11-23 17:58  db

	* modules/: m_admin.c, m_away.c, m_userhost.c:
	  - added version

2000-11-23 17:39  db

	* include/handlers.h, modules/m_drop.c, modules/m_hash.c,
	  modules/m_help.c, modules/m_info.c, modules/core/m_message.c,
	  modules/core/m_sjoin.c:
	  - more fixes

2000-11-23 17:21  db

	* modules/m_userhost.c, src/messages.tab, src/messages_cust.tab:
	  - fixed m_userhost

2000-11-21 16:31  adrian

	* src/Makefile.in, src/ircd.c, src/linebuf.c, include/linebuf.h:

	  Add in the beginnings of my new and hopefully improved dbuf
	  replacement.

	  The general idea here is that we *should* be pre-parsing buffers
	  into lines so we can later throw references around.

	  src/dbuf.c throws data into the dbuf and parses it when its coming
	  out.  This code parses data into lines when it comes in, so its
	  already in a per-line format (minus the trailing CRLFs) when we come
	  to parsing it.

	  Its building, but I haven't tested it yet. THAT is next.

2000-11-21 13:42  adrian

	* src/Makefile.in, src/tools.c, include/tools.h:

	  Actually create a tools module with stuff that is abused reguarly,
	  and rip some of squid's dlink-list management stuff.

	  I'll commit some code which uses them soon, so people have something
	  to work with.

	  This should remove a *lot* of ugliness/duplication in dlink list
	  management. :)

2000-11-21 00:03  db

	* include/config.h, include/handlers.h, include/ircd.h,
	  include/s_conf.h, include/s_serv.h, modules/Makefile.in,
	  modules/core/Makefile.in, modules/m_admin.c, modules/m_links.c,
	  modules/core/m_kill.c, modules/m_ltrace.c, modules/m_set.c,
	  modules/core/m_message.c, modules/m_stats.c, modules/m_time.c,
	  modules/m_trace.c, modules/m_userhost.c, modules/m_who.c,
	  modules/m_whois.c, modules/m_whowas.c, src/ircd.c, src/s_serv.c:
	  - general cleanups continue, just a few this time
	  - ltrace removed for now, it can go back in later

2000-11-19 10:43  davidt

	* modules/Makefile.in, modules/m_motd.c, modules/core/Makefile.in,
	  src/motd.c: modularised m_motd, so /MOTD works once again.
	  motd.c still contains various file reading/sending commands, which
	  are used elsewhere, although motd.c probably isn't the best name any
	  more.

2000-11-19 09:45  davidt

	* include/fdlist.h, src/fdlist.c, src/s_bsd_poll.c: fixes for poll.
	  It seems to work, although there's probably a bug lurking in there
	  somewhere...

2000-11-18 17:15  toot

	* src/channel.c: removed all those OLD_* defines in set_mode()

2000-11-18 15:22  toot

	* modules/m_ltrace.c, src/channel.c: End of /NAMES list was missing
	  in one place.  fixed compile warning in ltrace

2000-11-18 12:41  davidt

	* modules/core/: m_nick.c, m_part.c: fix for gcc warnings, and do a
	  fd_note on nickchanges.

2000-11-17 20:02  davidt

	* modules/: m_challenge.c, m_gline.c, m_ltrace.c:
	  - added missing _modinit function to m_gline.c
	  - removed #ifdef LTRACE from m_ltrace.c
	  - fixed m_challenge.c to make a non-broken module if we aren't using
	    OPENSSL

2000-11-17 13:02  toot

	* include/s_conf.h, modules/core/m_nick.c, src/channel.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/messages.tab,
	  src/messages_cust.tab: . made a separate ircd.conf setting to
	    block nickchanges when banned, and block them in +m chans too,
	  unless opped . fixed a typo i made in can_send() :P

2000-11-16 20:03  toot

	* src/channel.c: (quiet_on_ban stuff)
	    +o/+v should be able to speak even if banned
	    only check local connections, to save CPU, and avoid "desync"
	    messages on mixed nets take account of +e's

	  it's safe to send more than 3 +b/e/d/I modes on a netjoin, so use
	  upto MAXMODEPARAMS

2000-11-16 19:15  toot

	* include/handlers.h, modules/m_knock.c: removed mo_knock, m_knock
	  is fine for opers.

2000-11-16 18:51  toot

	* src/vchannel.c: use the topic setters nickname in the !list, if
	  available

2000-11-16 16:50  davidt

	* modules/core/m_message.c, modules/m_notice.c,
	  modules/m_privmsg.c, src/send.c:
	  - Fixed a small bug in m_message.c, where @@<chan>, @+<chan>,
	    +@<chan>, and ++<chan> would all be treated as +<chan>.  Now @@ and
	    ++ are treated as invalid, @+ and @+ are treated as +
	  - Made sendto_channel_type's check for MODE_VOICE before
	  MODE_CHANOP.
	  - m_notice.c and m_privmsg.c are obsolete (merged into m_message.c),
	    and weren't being built anyway.

2000-11-16 13:14  davidt

	* modules/: Makefile.in, core/Makefile.in:
	  - Figured out how to create a .so without the .tmp file..

	  this tree seems to compile/run correctly for me on Linux, hopefully
	  I didn't break anything elsewhere..

2000-11-16 12:52  davidt

	* modules/Makefile, modules/Makefile.in, modules/core/Makefile.in,
	  src/Makefile.in:
	  - modules/Makefile.in modified to work with gmake (like
	  src/Makefile.in)
	  - src/Makefile.in @DL_OPEN@ removed, since configure doesn't use
	    this any more.
	  - modules/Makefile in removed, since it should be generated by
	    configure like src/Makefile

2000-11-16 12:28  davidt

	* src/modules.c: Removed uneeded malloc in modules.c (and the
	  corresponding bogus free, which caused ircd to core when loading
	  modules)

2000-11-15 21:35  lusky

	* configure: backed down to previous configure script

2000-11-15 16:24  adrian

	* src/fdlist.c:

	  When a FD goes inactive, make sure its moved onto the NONE fdlist.

2000-11-15 02:51  db

	* include/s_conf.h, modules/m_rehash.c, src/s_conf.c:
	  - removed /rehash dump for one reason... and one reason only BLOAT

2000-11-15 00:34  db

	* modules/: m_whowas.c, core/m_message.c:
	  - oops. just noticed I forgot to cvs add these *sigh* sorry

2000-11-14 21:19  db

	* src/parse.c:
	  - small change to parse.c, this makes more sense to me
	  - added configure change suggested by David-T, this still needs to
	    be made into the configure script by someone who knows how to do
	    such things...

2000-11-14 03:08  db

	* include/whowas.h, src/whowas.c:
	  - seriously, why was this struct sitting around not doing anything
	    useful? was it to entertain me?

2000-11-14 02:40  db

	* TODO, include/handlers.h, include/whowas.h, src/whowas.c:
	  - m_whowas.c was missing from modules, 'cause it was hiding like a
	    bad little boy inside src/whowas.c... unfortuantely, m_whowas.c has
	    a dependancy on whowas.c ... carnal knowledge of the hash table etc.
	    but no worse then m_whois.c on client structs etc. blah. Anyway,
	    move stuff from whowas.c into m_whowas.c in modules..

	  - Added NOTICE fix up mention in TODO list

2000-11-14 01:32  db

	* include/m_privmsg.h, modules/Makefile, modules/Makefile.in,
	  modules/core/Makefile.in:
	  - A long time ago, in an ircd far far away, there was one a function
	    called m_message.c which did both m_privmsg and m_notice. When the
	    evil bleep bleep from another ircd universe invaded us, we split
	    that into m_privmsg.c and m_notice.c ... I really don't see the
	    point, they share too much functionality, they both do the same
	    thing blah blah blah.  Its really miserable fixing something in
	    m_privmsg.c only to duplicate the work in m_notice.c as well.

2000-11-13 17:16  db

	* modules/m_cburst.c:
	  - fixed mistake found by David-T an = should have been an |=

2000-11-13 14:04  db

	* modules/m_userhost.c:
	  - buffer size was incorrect and incorrectly commented

2000-11-13 11:34  db

	* include/client.h, src/s_conf.c:
	  - fix to s_conf.c *sigh*

2000-11-13 02:27  db

	* modules/m_who.c:
	  - use more common functions whenever possible. grrr

2000-11-13 01:08  db

	* include/channel.h, include/config.h, modules/m_list.c,
	  modules/core/m_sjoin.c, modules/m_whois.c, src/channel.c,
	  src/list.c:
	  - cleaned up m_whois.c a bit more
	  - moved find_user_link from list.c into channel.c thats the only
	    place it was being used anyway.
	  - removed no longer used #ifdef from config.h
	  - redid the semantics for channel_chanop_or_voice to work on channel
	    mode flags rather than Link

2000-11-11 16:59  db

	* modules/m_kline.c, src/s_conf.c:
	  - more cleanup on m_kline.c
	    with iauth, kline file locking etc. will be handled by iauthd
	    anyway..  We'll need a local link list of klines to place as they
	  are handed to iauthd eventually...

	  - fixed small bug in s_conf.c removed another #ifdef

2000-11-11 10:55  db

	* modules/: m_kline.c, m_list.c:
	  - more clean ups on m_kline.c, I'll make this sane yet!

2000-11-11 09:52  ejb

	* Makefile.in, include/client.h, modules/Makefile,
	  modules/Makefile.in, modules/m_list.c, modules/core/Makefile.in,
	  src/Makefile.in, src/channel.c, src/client.c, src/m_admin.c,
	  src/m_away.c, src/m_capab.c, src/m_cburst.c, src/m_challenge.c,
	  src/m_cjoin.c, src/m_close.c, src/m_connect.c, src/m_die.c,
	  src/m_drop.c, src/m_gline.c, src/m_hash.c, src/m_help.c,
	  src/m_htm.c, src/m_info.c, src/m_invite.c, src/m_ison.c,
	  src/m_join.c, src/m_kick.c, src/m_kill.c, src/m_kline.c,
	  src/m_knock.c, src/m_links.c, src/m_list.c, src/m_lljoin.c,
	  src/m_locops.c, src/m_ltrace.c, src/m_lusers.c, src/m_mode.c,
	  src/m_names.c, src/m_nick.c, src/m_notice.c, src/m_oper.c,
	  src/m_operwall.c, src/m_part.c, src/m_pass.c, src/m_ping.c,
	  src/m_pong.c, src/m_privmsg.c, src/m_quit.c, src/m_rehash.c,
	  src/m_restart.c, src/m_server.c, src/m_set.c, src/m_sjoin.c,
	  src/m_squit.c, src/m_stats.c, src/m_svinfo.c, src/m_time.c,
	  src/m_topic.c, src/m_trace.c, src/m_unkline.c, src/m_user.c,
	  src/m_userhost.c, src/m_users.c, src/m_version.c,
	  src/m_wallops.c, src/m_who.c, src/m_whois.c, src/packet.c,
	  src/parse.c, src/send.c:
	  - fix up Makefiles a bit so they actually work
	  - finally remove src/m_*.c
	  - remove /list sendq crud

2000-11-11 09:44  db

	* modules/m_kline.c:
	  - simplified mo_dline a bit

2000-11-11 09:37  db

	* modules/: m_kline.c, m_list.c:
	  - interim checkin of m_kline.c, first pass of clean up

2000-11-11 08:05  db

	* include/channel.h, modules/Makefile, modules/m_admin.c,
	  modules/m_list.c, src/channel.c, src/send.c:
	  - initial rewrite of m_list.c moved some code into channel.c for the
	    moment.  is- can do a better job on this later (HI!)

	  - m_admin now only available locally if unregistered (rodder's fix
	    in 6) this allows one to figure out just who the loser is thats
	    connecting to your server without having to register... yet gets rid
	    of the stupid nick collide "feature"

	  - modules/Makefile should really be generated from configure no? for
	    now I've modified modules/Makefile to generate m_list.so again since
	    I've moved some of the depedancies out of m_list.c
	    is- can figure out what to do with this later. (HI again!) at
	    least the code is sane now. (I've left code #if 0 out in m_list.c
	    so it can go back in later)

2000-11-10 04:14  db

	* modules/: Makefile.in, core/Makefile.in:
	  - added missing m_list.c in Makefile.in

2000-11-10 04:07  db

	* include/channel.h, include/m_invite.h, modules/m_cjoin.c,
	  modules/m_invite.c, modules/m_join.c, modules/m_names.c,
	  src/channel.c, src/m_cjoin.c, src/m_invite.c, src/m_join.c:
	  - channel specific stuff should stay in channel.c ya ya ya
	    anyway, m_join.so was having a nit pick fit over
	    names_on_this_channel() which of course, was way over in
	    m_names.so.... so I have renamed the function to
	    channel_member_names() and placed it into channel.c Ignore the mods
	  to src/m_join.c duh. everything m_* in src goes away...

	    Eventually in an universe far far away, channel becomes channel.so
	    which means, it will have to have a list of dependancies on it to
	    unload and reload or something, or maybe just unload all the m_
	    functions and reload autoload? Sometime in an alternate universe...

2000-11-10 03:14  db

	* src/parse.c:
	  - nasty DoS
	    if user enters long prefix, it puts the parser into an infinite
	    loop


	  :aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa bbwill hang the ircd

2000-11-09 18:18  ejb

	* modules/Makefile:

	  some fixes in makefile

2000-11-09 12:41  ejb

	* include/parse.h, src/ircd.c, src/parse.c: ok basic modules
	  support is almost complete now.  there's a strange bug where some
	  commands make it exit(1), when i've fixed that all we need is
	  m_modload, and module UNloading support ..

	  then maybe modularise more stuff, that's all for the future though.

2000-11-09 09:21  ejb

	* include/config.h, include/handlers.h, include/modules.h,
	  include/msg.h, include/parse.h, include/s_bsd.h,
	  modules/Makefile, modules/Makefile.in, modules/m_gline.c,
	  modules/core/Makefile.in, modules/core/m_nick.c, src/Makefile.in,
	  src/channel.c, src/ircd.c, src/m_error.c, src/m_list.c,
	  src/modules.c, src/parse.c, src/s_conf.c: modules appear to be
	  mostly working now, apart from a small problem with the mtree that
	  means it won't recognise any commands.  m_error and m_list are now
	  built as part of the core for now..  still no make install for
	  modules/

2000-11-09 08:58  db

	* modules/: m_notice.c, m_privmsg.c:
	  - only ctcp flud check if local client *oops* This was a side effect
	    of combinging ms_privmsg/ms_notice back into one...

2000-11-09 04:46  ejb

	* modules/: Makefile, m_drop.c, m_info.c, m_kline.c, core/m_die.c,
	  m_knock.c, m_lljoin.c, m_locops.c, m_ltrace.c, m_notice.c,
	  m_oper.c, core/m_nick.c, core/m_part.c, m_privmsg.c, m_stats.c,
	  m_unkline.c, m_userhost.c, m_users.c, m_version.c, m_wallops.c,
	  m_who.c: finished converting modules/*, just some work to do in
	  src/ to make it compile and stuff now.

2000-11-09 04:26  db

	* modules/m_close.c:
	  - remember, mo_close is only called if an oper, no need to double
	  check

2000-11-09 03:26  ejb

	* modules/: m_locops.c, m_ltrace.c, m_pass.c, m_ping.c,
	  core/m_part.c, m_pong.c, m_privmsg.c, m_rehash.c, core/m_quit.c,
	  m_restart.c, m_set.c, core/m_server.c, m_stats.c, m_svinfo.c,
	  core/m_sjoin.c, core/m_squit.c, m_time.c, m_topic.c, m_trace.c:
	  convert a few more m_functions, only 8 left to do now.  most of them
	  will compile, although a couple will not and src/ircd will still not
	  link.  as i said, will try to fix that tonight.

2000-11-08 18:57  ejb

	* configure, include/config.h, include/modules.h, include/msg.h,
	  include/parse.h, modules/Makefile, modules/Makefile.in,
	  modules/m_admin.c, modules/m_away.c, modules/core/Makefile.in,
	  modules/m_capab.c, modules/m_cburst.c, modules/m_challenge.c,
	  modules/m_cjoin.c, modules/m_close.c, modules/m_connect.c,
	  modules/m_drop.c, modules/core/m_die.c, modules/m_error.c,
	  modules/m_gline.c, modules/m_hash.c, modules/m_help.c,
	  modules/m_htm.c, modules/m_info.c, modules/m_invite.c,
	  modules/m_ison.c, modules/m_join.c, modules/m_kline.c,
	  modules/m_knock.c, modules/core/m_kick.c, modules/core/m_kill.c,
	  modules/m_links.c, modules/m_list.c, modules/m_lljoin.c,
	  modules/m_locops.c, modules/m_ltrace.c, modules/m_lusers.c,
	  modules/m_names.c, modules/core/m_mode.c, modules/m_notice.c,
	  modules/m_oper.c, modules/m_operwall.c, modules/core/m_nick.c,
	  modules/m_pass.c, modules/m_ping.c, modules/m_pong.c,
	  modules/core/m_part.c, modules/m_privmsg.c, modules/m_rehash.c,
	  modules/m_restart.c, modules/core/m_quit.c, modules/m_set.c,
	  modules/core/m_server.c, modules/core/m_sjoin.c,
	  modules/core/m_squit.c, modules/m_stats.c, modules/m_svinfo.c,
	  modules/m_time.c, modules/m_topic.c, modules/m_trace.c,
	  modules/m_unkline.c, modules/m_user.c, modules/m_userhost.c,
	  modules/m_users.c, modules/m_version.c, modules/m_wallops.c,
	  modules/m_who.c, modules/m_whois.c, src/Makefile.in, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/modules.c, src/parse.c:
	  Initial commit of loadable modules support.  right now we can load
	  modules, but not unload them.  support for adding commands via
	  modules is there, and about 50% of the m_*.c has been ported.
	  currently ircd will neither compile nor link properly, but i wanted
	  to commit this as soon as possible.. from now on if you modify m_*.c
	  please edit the version in modules/ rather than in src/, since
	  src/m_*.c will disappear soon.

	  i'll try to make another commit tomorrow that fixes compilation, and
	  allows ircd to be used ..

	  also we need a modules.txt that explains how to write modules.

	  so, if you need a working ircd now, sorry, you'll have to wait until
	  tomorrow :/

	  (btw if anyone feels like porting the rest of modules/m_*.c (i've
	  done up to m_operwall.c so far), just look at one of the existing
	  ones as an example, all you need is the struct Message and
	  _modinit() function).  as for global symbols defined in modules
	  (this is why ircd won't link right now), i have a solution to this
	  which i can hopefully also commit tomorrow.

2000-11-08 15:36  adrian

	* doc/technical/network.txt:


	  * Adding socket timeout information
	  * remove FD list code, since its in a seperate file
	  * cosmetic changes

2000-11-08 14:57  adrian

	* doc/technical/: fd-management.txt, file-management.txt,
	  network.txt:

	  Break out the documentation in network.txt into seperate files for
	  filedescriptor management and file management.

2000-11-08 14:55  adrian

	* src/fileio.c:

	  Enforce FD limits in file_open()

2000-11-08 14:54  adrian

	* doc/technical/network.txt:

	  Updates on the network code documentation. Add documentation for the
	  FD lists and FD management code.

2000-11-08 04:34  adrian

	* include/fdlist.h, include/s_bsd.h, src/fdlist.c, src/listener.c,
	  src/res.c, src/s_auth.c, src/s_bsd.c, src/s_bsd_kqueue.c,
	  src/s_bsd_poll.c, src/s_serv.c, src/send.c:

	  Initial non-optimised version of my fd list code.

	  The idea is that for the most part, we can detect busy and idle
	  clients at IO register time (and, at the outside, we can re-decide
	  when we get a ping back from a client..)

	  The FD list is passed through comm_setselect() as its second
	  argument.  There will be some weirdnesses where FDs shift lists
	  frequently, but I will play with this code soon.

	  Read include/fdlist.h for the list of FD lists.

2000-11-08 03:53  adrian

	* doc/technical/event.txt:

	  Added initial documentation for the event code.

2000-11-07 22:55  ryan

	* Hybrid-team:

	  added myself. oops :)

2000-11-07 13:56  db

	* src/: m_privmsg.c, m_unkline.c:
	  - in the new world order, if you reach a mo_ function you are an
	    oper No need to double check.

2000-11-07 13:10  adrian

	* doc/technical/network.txt:

	  A network code overview. Very brief (only comm_setselect() is
	  covered right now), but I'll be adding to it real soon.

2000-11-07 12:07  ejb

	* include/config.h.dist, include/handlers.h, include/m_gline.h,
	  include/msg.h, src/m_gline.c, src/m_unkline.c, src/parse.c: added
	  support for /undline and /ungline (ported from toot's patch to -6)

2000-11-07 10:32  ejb

	* src/m_away.c: we now propagate /away if the state is changing -
	  ie if they were away before and are marking unaway, or vise verse.

2000-11-07 03:56  db

	* include/m_privmsg.h, src/m_connect.c, src/m_notice.c,
	  src/m_privmsg.c:
	  - this should add back the lameo weird oper privmsg masks
	    but it doesn't work. No matter, debug tomorrow ;) it still
	    compiles

	    I'm going to "steal" the ircu new mask format for opers, its
	    saner...  I believe everything is prefixed with $ for special oper
	    thingies Isomer, care to help out on this one?

2000-11-07 00:49  db

	* src/m_ison.c:
	  - reworked ison slightly. *sigh* dunno what kind of drugs I was on

2000-11-07 00:30  db

	* include/m_privmsg.h, src/m_notice.c, src/m_privmsg.c:
	  - bah moved changes over to m_notice.c

2000-11-07 00:16  db

	* include/m_privmsg.h, src/m_privmsg.c:
	  - added back anti drone flood code. *sigh* Though I suspect this all
	    has to be modified in the grand scheme of things eventually...

	    Still have to re-add oper prefix privmsg support.

2000-11-06 23:12  db

	* include/m_privmsg.h, src/m_privmsg.c:
	  - slight tweak to m_privmsg code to allow sending of errors to
	  client

2000-11-06 22:51  db

	* include/handlers.h, include/m_privmsg.h, src/m_privmsg.c,
	  src/m_sjoin.c:
	  - rewrote m_privmsg.c more or less completely.
	    Still TODO re-add the additional privileged things opers get
	    copy this code in m_notice.c
	    TEST TEST TEST I think it works...

2000-11-06 17:24  db

	* include/client.h, src/m_cjoin.c, src/m_sjoin.c:
	  - split m_sjoin.c up a bit more, added vchan support for remote
	    clients I want to revisit this code. The problem is, remote servers
	    can have more allocated channels per user, and we have a fixed sized
	    vchan map ;-( So, whats fine locally may be too small for a remote
	    user. Perhaps the vchan map should be a link list? or we suffer with
	    scanning all vchans for remote clients?

	  - moved vchan map into all clients even remote, section. blech. read
	    comments above.

	  - cleaned up m_cjoin a bit

2000-11-06 17:23  adrian

	* src/s_bsd.c:

	  We don't need to flush a socket buffer when we've already done it.
	  REJECT_HOLD is fun code .. and yes, it was my screwup.

2000-11-06 17:15  adrian

	* Makefile.in, src/Makefile.in:

	  use autoconf'ed CFLAGS, rather than enforcing inheriting it from the
	  top level Makefile. This allows 'make' in src/ work *properly*.

2000-11-06 17:02  adrian

	* src/res.c:

	  Make sure we remove the query from the pending DNS requets when we
	  actually get the reply.

	  I forgot this line when I ripped out some of the remaining DNS cache
	  code :-)

2000-11-06 16:51  adrian

	* src/s_auth.c:

	  Only add a client to the AuthClientList if we're doing iauth.

2000-11-06 13:57  db

	* src/vchannel.c:
	  - don't list secret channels in vchan ! list

2000-11-06 13:11  db

	* src/: m_who.c, m_whois.c:
	  - cryptic code must die if(!--maxmatches) ...
	  - minor cleanups

2000-11-06 11:11  adrian

	* Makefile.in, configure, include/client.h, include/config.h,
	  include/config.h.dist, include/m_info.h, include/msg.h,
	  include/s_conf.h, include/s_serv.h, src/Makefile.in,
	  src/client.c, src/ircd.c, src/ircd_lexer.l, src/ircd_parser.y,
	  src/oldparse.c, src/packet.c, src/s_bsd.c, src/s_bsd_kqueue.c,
	  src/s_bsd_poll.c, src/s_bsd_select.c, src/s_conf.c, src/s_serv.c,
	  src/send.c:

	  I hate doing it, but here it is. One blind commit to rip out
	  ziplinks from hybrid-7, as they will be re-implemented later on as
	  an external process rather than be in the code.

	  the actual zip files haven't been removed, since I'm probably going
	  to reuse them very soon now.

	  This hasn't been tested. It compiles. I will do more testing this
	  evening, and probably do some much needed tidyups to the
	  client/server send and receive code.

2000-11-06 10:49  adrian

	* src/s_serv.c:

	  fd limit checking is done in comm_open() now, so remove a superflous
	  check.  This has the added advantage of killing an incorrect close()
	  which should have been an fd_close(), but it doesn't matter much now
	  ..

2000-11-06 10:40  db

	* include/handlers.h, src/channel.c, src/m_admin.c, src/m_away.c,
	  src/parse.c:
	  - reworked even more code
	    I removed remote m_away entirely for now
	  - fixed serious botch in channel.s with channel_mode

2000-11-06 09:58  adrian

	* src/Makefile.in:

	  Thanks to is- for pointing out the *correct* fix: default: <build
	  target> Reverted the previous patch, and set default:    all

2000-11-06 09:49  adrian

	* src/Makefile.in:

	  Rearrange the Makefile targets so 'make' in src does the right
	  thing(tm).

2000-11-06 08:48  adrian

	* include/res.h, include/s_conf.h, src/res.c, src/s_auth.c,
	  src/s_bsd.c, src/s_conf.c:

	  Finally kill the DNS cache code altogether from the API.
	  gethost_byname() and gethost_byaddr() now are void functions, rather
	  than struct DNSReply * functions. If we want to implement a DNS
	  cache, we can do it later with some callback trickery without having
	  to always check the result and do trickery in all the client code.
	  (Which makes things hard to follow :-)

	  The users of gethost_ were converted to assume the callback will be
	  made at some future time. Note that we can't simply call the
	  callback inside gethost_ because it'd break things. (What you'd do
	  is have a function called res_callbackhits() before comm_select() is
	  invoked to do the DNS callbacks for any cache hits..)

2000-11-06 03:40  db

	* include/channel.h, include/config.h, include/ircd_defs.h,
	  include/m_info.h, include/s_stats.h, src/s_debug.c,
	  src/s_stats.c:
	  - even more cleanups
	    removed a pile of unused #ifdef's lets move these into runtime
	    config or EVEN better loadable modules. (hint is- hint hint hint)

	    And oh yes, show oper passwords on failure wasn't is-'s fault. happy
	    now?

	    Ok, sjoin from remote server for a vchan is going to be interesting.
	  currently our vchan map is only kept for local clients. duh.
	  find_vchan() won't work on a remote client. duh. (vhan_map) The
	  question now is, do we extend vchan_map to remote clients as well
	  and fill in the map on sjoins? or figure out its a remote client and
	  walk the vchan link list instead for remote clients? *sigh* The map
	  is definitely faster for local clients, as it is filled in in m_join
	  and m_part etc....  Actually, the idea of caching them as found for
	  remote clients sounds like the best compromise...

2000-11-06 03:13  db

	* include/channel.h, src/channel.c, src/hash.c, src/m_mode.c,
	  src/m_sjoin.c:
	  - removed prototype that no longer existed
	  - fixed comment in hash.c
	  - reworked yet another inconsistent function

2000-11-06 01:56  db

	* include/channel.h, include/m_invite.h, src/channel.c,
	  src/client.c, src/list.c, src/m_cburst.c, src/m_cjoin.c,
	  src/m_invite.c, src/m_join.c, src/m_kick.c, src/m_knock.c,
	  src/m_nick.c, src/m_notice.c, src/m_part.c, src/m_privmsg.c,
	  src/m_sjoin.c, src/m_stats.c, src/m_topic.c, src/m_who.c,
	  src/m_whois.c, src/s_user.c:
	  - made some functions consistent in use... i.e. always start with
	  chptr
	  - removed some dead functions
	  - removed del_invite add_invite from channel.c moved to m_invite.c

	    I think I got this right. There were functions that had chptr first,
	  then others that had sptr first.. inconsistent...

	    Removed a few no longer used or defined functions. duh

2000-11-05 22:28  ryan

	* tools/rsa_respond/: Makefile, README, buffer.c, buffer.h,
	  rsa_respond.c:

	  Added $Id: fullhist.php,v 1.1 2005/11/03 18:52:18 adx Exp $ tags to rsa_respond (oops)

2000-11-05 20:33  ryan

	* tools/rsa_respond/: Makefile, README, buffer.c, buffer.h,
	  rsa_respond.c:

	  This is the example client implimentation of RSA authentication for
	  opers

2000-11-05 16:23  toot

	* include/channel.h, include/client.h, include/handlers.h,
	  src/m_knock.c, src/parse.c: David-T's patch that add vchan
	  support to KNOCK, and fixes the flood control

2000-11-05 13:56  db

	* include/s_conf.h, src/m_join.c:
	  - clean ups to m_join.c
	  - resolved conflict in s_conf.h

2000-11-05 11:33  adrian

	* Hybrid-team, src/s_auth.c, src/version.c.SH:

	  Tidyups of src/s_auth.c .

	  Submitted by: David Taylor <davidt@yadt.co.uk>

2000-11-05 10:51  adrian

	* include/s_conf.h:

	  Kill #ifdef IDLE_CHECK, since someone did it in mtrie.conf ..

2000-11-05 10:24  db

	* src/: channel.c, ircd.c, m_join.c, m_names.c, s_user.c:
	  - redid m_join.c its still evil, but not quite as bad

2000-11-05 03:15  db

	* include/channel.h, src/channel.c, src/m_sjoin.c, src/s_conf.c:
	  - removed a bunch of stuff. JUPE_CHANNEL is gone
	    Its really not needed with vchans
	  - removed more SPLIT_MODE cruft, also not needed

2000-11-05 02:51  db

	* include/s_conf.h, src/ircd_lexer.l, src/ircd_parser.y,
	  src/m_oper.c, src/mtrie_conf.c:
	  - fixed stupid in m_oper.c, it wouldn't have honoured O from other
	  servers..

	  - removed show oper password on fail... The reason is nasty.. When
	    Europeans got hackered recently, irc.hemmet etc.... The kiddies
	    were opered up with hacked O lines.. A few opers accidentally used
	    the O line passwords for other servers on the hacked server...
	    showing the kiddies their O line passwords for yet more servers...
	    This is a bad idea completely. *sigh* Yes, maybe it should be up to
	    the admins, but it is just a bad idea I think. Sorry is-

2000-11-05 02:27  db

	* src/: m_challenge.c, m_oper.c:
	  - redid m_oper.c to clean that up a bit
	  - changed the header in m_challenge.c from m_version.c to
	  m_challenge.c

2000-11-05 01:23  db

	* include/client.h, include/handlers.h, src/m_names.c,
	  src/m_part.c, src/m_who.c, src/m_whois.c, src/parse.c:
	  - slight cleanups to m_part.c
	  - added vchan support to m_whois.c m_who.c
	  - added fughly hack to parse... more than one unregistered message
	    results it no more unregistered messages...

2000-11-04 23:25  db

	* src/m_names.c:
	  - fixed botch I introduced with vchans, when I rewrote m_names.c

2000-11-04 23:07  db

	* src/m_who.c:
	  - fixed m_who.c to be completely vchan aware

2000-11-04 22:37  ryan

	* include/client.h, include/handlers.h, include/msg.h,
	  include/numeric.h, include/rsa.h, src/Makefile.in,
	  src/m_challenge.c, src/messages.tab, src/messages_cust.tab,
	  src/parse.c:

	  RSA implimented.  /quote CHALLENGE (with --enable-openssl) now we
	  just need some clever way to make /oper accept the response :)

2000-11-04 22:01  db

	* doc/vchans.txt, src/m_list.c:
	  - added vchans.txt doc

2000-11-04 21:31  db

	* src/m_oper.c:
	  - rewrite of m_oper.c to clean it up a tad

2000-11-04 20:53  db

	* include/handlers.h, src/m_nick.c, src/parse.c:
	  - cleaned up m_nick.c a bit. ms_nick still needs a lot more work
	    but at least its not doggie doo-doo any more. ms_nick is still too
	    long.  The fd_note function looks expensive to use in
	  production... adrian?

2000-11-04 20:28  ryan

	* src/: Makefile.in, rsa.c:

	  Added initial RSA support (challenge/response stuff) nothing is
	  actually built without specifying --enable-openssl (which results in
	  rsa.c compiling and the ircd being linked with -lcrypto)

2000-11-04 17:58  ryan

	* configure, src/Makefile.in:

	  Modified configure.in and regenerated ./configure, Modified
	  Makefile.in in preperation for optional openssl support (for RSA
	  authentication of opers)

2000-11-04 12:44  adrian

	* include/fdlist.h, src/fdlist.c, src/m_nick.c, src/m_stats.c,
	  src/res.c, src/s_serv.c:


	  * add fd_note() which changes the FD description
	  * add fd_dump() which dumps the current opened FD list to the given
	    client
	  * add /stats F / /stats f support from opers to dump the current
	    open sockets. This could do with more info being dumped, but its
	    fun for debugging right now.
	  * add Server: and Nick: in front of the server and nick connections
	    so /stats F looks useful
	  * .. and finally, use fd_note() in src/m_nick.c to set the nickname
	    description whenever the client sets its nick.

	  IsLocal() isn't functional. Grr.

2000-11-04 07:17  adrian

	* include/s_bsd.h, src/listener.c, src/s_bsd.c:


	  * set the socket to non-blocking in comm_open(), and fail the socket
	    creation if this fails. All network sockets should be non-blocking
	    in this ircd!

	  * add comm_accept() - a mirror of accept() but enforcing
	    non-blockingness and FD limits also

	  * modify listener.c to use comm_accept() instead of accept() and
	  fd_open() .

2000-11-04 00:39  db

	* src/: m_names.c, m_who.c, m_whois.c:
	  - some cleanups
	  - Still need to add back in lazy link support
	  - Still need to add back in vchan support

2000-11-03 17:35  adrian

	* src/s_bsd.c:

	  with REJECT_HOLD, we read() from the fd to flush the buffer, instead
	  of ignoring it. This is event-IO friendly, and it will stop
	  triggering unwanted read IO events.

2000-11-03 17:17  adrian

	* include/s_bsd.h, src/ircdauth.c, src/listener.c, src/res.c,
	  src/s_auth.c, src/s_bsd.c, src/s_serv.c:

	  Implementing comm_open(). This is designed to be a socket() and
	  fd_open() wrapper which limits the number of possible open FDs to
	  MASTER_MAX (for the time being - better suggestions please :)

	  So now, you should be either using file_open() / fbopen(), or
	  comm_open(), and *NOT* any other calls if you can avoid it.  I
	  haven't wrapped dup/dup2/pipe, since the ircd currently does not use
	  them.

2000-11-03 15:35  adrian

	* include/fdlist.h, include/s_bsd.h, src/fdlist.c, src/s_bsd.c:


	  * move highest_fd into fdlist.h and out of s_bsd.h for the time
	    being
	  * add a number_fd variable giving us the number of file descriptors
	    currently open. This will become useful for limiting socket
	    creation and so forth when we're trying to avoid over-flowing the
	    number of file descriptors open ..

2000-11-03 13:54  adrian

	* include/fdlist.h, src/client.c, src/fdlist.c, src/m_oper.c,
	  src/s_auth.c, src/s_bsd.c, src/s_serv.c, src/s_user.c:

	  Kill fdlist_add and fdlist_delete, since we're not using them
	  anymore.

2000-11-03 13:20  adrian

	* src/: s_bsd_kqueue.c, s_bsd_poll.c:

	  local[] is already defined in s_bsd.c, so there is no reason to have
	  it defined in the poll and kqueue modules.

2000-11-03 04:43  adrian

	* src/ircd.c:

	  Call init_netio() earlier than anything which could call
	  comm_setselect(). This is why the resolver wasn't working with
	  kqueue, because we didn't have the kqueue fd open at the time the
	  resolver fd was comm_setselect()ed .

2000-11-03 03:26  adrian

	* src/s_serv.c:

	  Tidy up the logging during a connection attempt - print a connect
	  message *before* calling serv_connect(), because it can generate an
	  error itself, sending the error to the client *before* sending the
	  activated line.  (This is a side-effect of callbacks, btw. We could
	  get around it, but this just seems clearer to me.)

2000-11-03 00:04  db

	* src/: m_names.c, s_debug.c:
	  - reworked m_names.c
	  - added fix by rodder from hybrid-6 for log botch

2000-11-02 17:07  adrian

	* configure, src/s_bsd_kqueue.c:

	  Add in the initial kqueue implementation. Note that DNS breaks under
	  anything before 4.1-REL because of a bug in kqueue() (if I remember
	  right).

	  This code is very simple, and has no debugging. I'll be (ab)using it
	  in about a week after I've tidied up some other bits of code, but I
	  thought I'd give you guys something to play with. :)

2000-11-02 16:46  adrian

	* src/s_serv.c:

	  tidy up the code in serv_connect(), which basically is some
	  formatting changes and a comment change to reflect a function name
	  change.

2000-11-02 16:37  adrian

	* src/s_serv.c:

	  when serv_connect_callback() isn't COMM_OK:

	  Log to opers the actual error, rather than it going as a wallop or
	  something. This makes it appear with the connect messages to opers,
	  which IMHO is where it *should* be going.

2000-11-02 16:31  adrian

	* src/s_bsd.c:

	  Fix the timeout code so its added when we do a non-DNS connect(),
	  and cleared when we call the callback so it doesn't trigger wrongly.

2000-11-02 14:42  bill

	* Makefile.in:

	  iauth/ was missed in SUBDIRS

2000-11-02 14:18  adrian

	* src/fdlist.c:

	  .. oops, forgot an #include for close() .

2000-11-02 14:05  adrian

	* include/send.h, src/s_bsd.c, src/send.c:


	  * convert send_queued_write() to a global so we can use it in other
	  places ..
	  * .. like close_connection(), to flush data before the socket closes

	  This now means peopl get their quit messages back before the FD
	  closes! :P

2000-11-02 13:30  adrian

	* src/fdlist.c:

	  fd_close() is meant to close() the fd, rather than squid's which
	  doesn't (this is because its got more sane file_open/close and
	  comm_open/close code ..)

	  This fixes the fd leak and non-closing fd problems.

2000-11-02 13:22  adrian

	* include/s_bsd.h, include/s_serv.h, src/ircd.c, src/m_connect.c,
	  src/s_bsd.c, src/s_bsd_poll.c, src/s_serv.c:

	  Initial change over of the server connect() code to use the new
	  world order(tm).

	  * Fix a couple of stupidities in my last commit of comm_strerror
	  * Strip the server connection stuff out of s_bsd.c and move it into
	    two functions in s_serv.c -
	    + serv_connect() - initiate a connection to a server (replacing
	      connect_server()
	    + serv_connect_callback() - completion from comm_connect_tcp()

	  Note that there doesn't seem to be checking to see if a /connect
	  server is actually in the process of being connect'ed. This should
	  happen!

	  The code works and connects to the server(s) on startup, but /squit
	  and /connect's fail. I've found that clients that /quit dont have
	  their sockets closed .. I have to figure that out, which might solve
	  this.

2000-11-02 10:09  toot

	* include/vchannel.h, src/m_list.c, src/vchannel.c: . fixed a
	  possible over flow when listing available vchans . have it show the
	  nickname of who's been there longest

2000-11-02 09:52  adrian

	* src/s_bsd.c, include/fdlist.h:

	  Add a routine to output string versions of the COMM_ status

2000-11-02 09:29  adrian

	* src/s_bsd.c:

	  oops, forgot to return; after the COMM_ERR_BIND, which meant it
	  still tried to connect..

2000-11-01 14:13  adrian

	* src/s_bsd.c:

	  .. and remember that a retried connect() can return EISCONN which
	  means the socket is already connect()ed, and its not actually an
	  error.

	  This makes the auth code work again. Yay. :)

2000-11-01 13:53  adrian

	* src/: s_auth.c, s_bsd.c, s_bsd_poll.c:

	  Converting the ident auth code over to use comm_connect_tcp().  Note
	  that this code doesn't entirely work yet, but it doesn't NOT work
	  (go on, parse that)

	  * rip the bind() / connect() code out of s_auth.c and use
	    comm_connect_tcp() instead

	  * change send_auth_query() into a CNCB - it is called once
	    comm_connect_tcp() completes in order, and handles errors from
	    it before attempting to write to the socket.

	  * fix comm_connect_tcp() to actually work ! :
	    + actually *remember* to record the port
	    + don't do DNS lookups on IPs when you want an IP, instead attempt
	      to convert it to a in_addr, and if it fails try to look it up with
	      gethost_byname()

	  * Remove all the auth descriptor stuff from send_message(), leaving
	    only server connect()s

2000-11-01 11:22  adrian

	* src/s_bsd.c, include/s_bsd.h:

	  Add a 'local' parameter to comm_connect_tcp() to specify what to
	  bind() to locally. Currently if NULL is passed no bind() is
	  performed, but later on this will change to bind() to the virtual
	  server IP if one is configured.

2000-11-01 10:53  adrian

	* include/s_auth.h, src/s_auth.c, src/s_bsd_poll.c:

	  Make the auth read is now done through comm_setselect(), rather than
	  through read_message(). This means that all read_message() does now
	  is handle completion of auth and server connect()s, which is next to
	  go.

2000-11-01 10:28  adrian

	* include/s_auth.h, src/s_auth.c:

	  tidy up the auth code to use the block allocator rather than
	  mymalloc/myfree

2000-11-01 10:19  adrian

	* include/fdlist.h, src/s_bsd.c:

	  more comm_connect() code. This again hasn't been tested.

	  * finished comm_connect_tryconnect() to do what it should
	  * deal with the DNS return
	  * add more COMM_ERRs, so that the code trying to connect can do
	    better debugging

2000-10-31 17:59  db

	* include/client.h, src/channel.c, src/client.c, src/hash.c,
	  src/m_admin.c, src/m_connect.c, src/m_die.c, src/m_gline.c,
	  src/m_hash.c, src/m_help.c, src/m_info.c, src/m_ison.c,
	  src/m_join.c, src/m_kill.c, src/m_kline.c, src/m_links.c,
	  src/m_list.c, src/m_lljoin.c, src/m_locops.c, src/m_ltrace.c,
	  src/m_lusers.c, src/m_nick.c, src/m_notice.c, src/m_oper.c,
	  src/m_operwall.c, src/m_privmsg.c, src/m_rehash.c,
	  src/m_restart.c, src/m_set.c, src/m_squit.c, src/m_stats.c,
	  src/m_trace.c, src/m_unkline.c, src/m_userhost.c,
	  src/m_version.c, src/m_wallops.c, src/m_who.c, src/m_whois.c,
	  src/motd.c, src/mtrie_conf.c, src/parse.c, src/s_bsd.c,
	  src/s_conf.c, src/s_misc.c, src/s_user.c, src/send.c,
	  src/whowas.c:
	  - If you are going to change macros to look "prettier" finish the
	    job *glares at bleep* We had macros that duplicated functionality
	    confusing at the least...

2000-10-31 17:41  adrian

	* include/fdlist.h, src/fdlist.c, src/s_bsd.c:

	  Add some more code to implement comm_connect_tcp(). Its not
	  functional yet, but its getting there.

2000-10-31 17:20  db

	* src/m_whois.c:
	  - preliminary cleanup of m_whois.c
	    I messed up previous commit. YES I tested, but missed the
	    duplicate in the scroll. *grr* fixed.

2000-10-31 17:12  db

	* src/: m_part.c, m_whois.c:
	  - slight cleanup to m_part.c
	  - major cleanup to m_whois.c

2000-10-31 14:58  adrian

	* src/res.c:

	  Remove the unneeded nextdnscheck variable, as we've turned it into a
	  periodic event now.

2000-10-31 09:27  adrian

	* src/s_bsd_poll.c:

	  A temporary hack to make sure we're reading data once a server
	  connection has completed. It will go away when I finish this
	  replacement comm_connect_tcp() code.

	  Server connections *should* work now. They seem to work for me :)

2000-10-31 09:21  adrian

	* src/: fdlist.c, ircd.c:

	  Whatever the crack was that convinced me calling eventAdd() from
	  somewhere *before* eventInit() was called, never ever come close to
	  me again.

2000-10-31 08:21  adrian

	* include/fdlist.h, include/s_bsd.h, src/fdlist.c, src/s_bsd.c:

	  Initial timeout fd stuff. There is no code that uses it yet, but its
	  there and running for when I (am about to) do.

	  The idea is that you register a callback to be called after a given
	  time period has elapsed. This is good for things like checking ping
	  returns, where you set the timeout period on the fd to be 2*ping,
	  and when you get a PONG you reset the timeout period. If the socket
	  ever times out, you get a ping timeout.

	  Its also going to be used for the up-coming non-blocking connect()
	  code, where a socket timeout kicks in to prevent a connect() taking
	  too long to run.

	  Once check_pings() has been split up, this and the poll/select/etc
	  loop should be the only two places that walking the entire
	  fd_table[] array is allowed.

2000-10-31 06:20  adrian

	* src/s_auth.c:

	  We should be registering a COMM_SELECT_READ, not WRITE.  The only
	  reason this was working was because the socket was ready for writing
	  also at the correct time it was ready for reading ..  uhm, sad. :-)

2000-10-30 18:18  db

	* src/: m_stats.c, m_user.c:
	  - more mods to clean up m_stats.c
	  - slight cleanup in m_user.c

2000-10-30 18:11  adrian

	* src/s_bsd.c:

	  Eek, don't re-register a read if cptr->fd == -1, ie she's shutting
	  down.

2000-10-30 18:03  adrian

	* include/m_info.h, src/fdlist.c, src/ircd.c:


	  * kill the priority code
	  * kill the burst mode code (there are still bits and pieces of the
	    variables somewhere still.. :)
	  * call read_message() with a delay of 0, and call comm_select() with
	    delay rather than 1. This makes the ircd snappier again ..

2000-10-30 17:43  adrian

	* src/s_bsd_poll.c:

	  kill npollfds and use highest_fd in its place, which is just as
	  good.

2000-10-30 17:32  adrian

	* include/s_bsd.h, src/s_auth.c, src/s_bsd.c, src/s_bsd_poll.c:

	  Optimise the read code. When a connection graduates from the auth
	  state and is upgraded to a client, its added via comm_setselect() to
	  start reading data.

	  * read_packet() has been turned into a PF, so it can be called when
	    a FD is ready for reading.

	  * read_packet() has been stripped quite a bit - we *assume* that
	    there will be data returned from the read. If not, thats a socket
	  error

	  * error handling has been moved into read_packet() instead of its
	    return value

	  * note that the data is put into the dbuf as fast as possible,
	    rather than being evil and waiting. I'll fix the DoSability of this
	    code at a later date, and without ignoring reads. :-P

2000-10-30 03:44  adrian

	* include/s_bsd.h, include/send.h, src/s_bsd.c, src/s_bsd_poll.c,
	  src/send.c:

	  Big big write optimisation, taking client and server writes into the
	  new network loop:

	  * flush_sendq_except() is gone. This was called when data was
	    added to a dbuf and a new one needed allocating, probably to
	    increase network throughput and decrease dbuf usage. It should
	    not be needed now.

	  * send_queued() has been turned into send_queued_write() which is
	    an IO callback now.

	  * send_message() will now *always* schedule a COMM_SELECT_WRITE
	    regardless of how small the sendq is. This should up the
	    network throughput and reduce the CPU a little.

	  * send_queued_write() should be rescheduling a COMM_SELECT_WRITE
	    if the dbuf chain hasn't been drained fully. I'm still
	    researching this to make sure the variable 'more' is set in
	    the right places.

	  * fd shutdown code in s_bsd.c called send_queued() to flush dbufs
	    before killing the FD. This obviously can't be done now.
	    As noted in a comment, when close handlers are implemented
	    correctly, the dbuf will be flushed (or attempted to) before
	    the FD closes totally, so we just ignore it here for now.

	  * Make the old-style poll code not register and check write
	    events for FDs that need data written. So now, the only
	    thing that can trigger a client/server FD write in the old-style
	    poll code is the completion of a connect(). All server/client
	    FD writes are done through comm_select() in the new world order.

	  send_message() could probably attempt to call send_queued_write()
	  rather than waiting for the fd to be ready for writing, but this is
	  an optimisation for another time. (And easy too, since the original
	  code for send_message() called send_queued() anyway, so there
	  shouldn't be any problems there .. :)

2000-10-30 03:37  db

	* src/m_stats.c:
	  - added tiny stats parse function (damn you Isomer!)

2000-10-30 03:22  db

	* include/event.h, include/scache.h, src/event.c, src/m_stats.c,
	  src/scache.c:
	  - more cleanups to m_stats.c code
	    both handlers call do_normal_stats
	    oper handler calls do_priv_stats normal handler calls
	    do_non_priv_stats This should make it way easier to assign
	  appropriate privs

2000-10-30 02:32  db

	* include/event.h, include/handlers.h, include/msg.h, src/event.c,
	  src/m_stats.c, src/parse.c:
	  - moved events reporting from /quote events to /stats E
	    I think it belongs there since /stats z is memory report
	    I'd eventually like to have oper only /stats such as
	    /stats events, /stats memory , /stats memory klines
	    This could lend itself well to gersh's new malloc memory reporting
	    code...

2000-10-30 02:17  db

	* src/m_stats.c:
	  - reworked m_stats.c some more. no need for valid_stats flag. ick

2000-10-30 01:47  db

	* src/m_stats.c:
	  - cleaned up m_stats.c just a little
	    I like Isomers idea of renaming things a bit more, but this is
	    a start...

2000-10-29 23:56  db

	* include/s_bsd.h, include/s_conf.h, src/s_bsd.c, src/s_conf.c:
	  - finally moved check_client from s_bsd.c, where it really never
	    seemed to me to belong, moved into s_conf.c

2000-10-29 21:09  db

	* tools/viconf.c:
	  - viconf.c modified to match hybrid-6 patch, added vimotd check

2000-10-29 19:56  lusky

	* src/m_userhost.c: fix for mIRC NAT+spoofedI DCC send problem
	  (userhost now returns sockhost for acptr==sptr).

2000-10-29 17:42  db

	* src/m_sjoin.c:
	  - m_sjoin.c is still a mess, but starting to split it up into
	    manageable pieces.

2000-10-29 16:01  adrian

	* include/send.h, src/dbuf.c, src/ircd.c, src/ircd_signal.c,
	  src/m_die.c, src/restart.c, src/s_bsd.c, src/send.c:

	  Kill the flush_*() routines in send.c, since they add an extra level
	  of complexity and hackiness to where the code *should* be tidy (and
	  well, I'm going to tidy).

	  The closing-ircd-flush will be fixed once close handlers are
	  implemented.  They will be soon.

2000-10-28 18:44  adrian

	* src/send.c:

	  Attempt to indent send_message() because I am about to start hacking
	  on this code, and this indenting wasn't helping..

2000-10-28 18:13  adrian

	* src/event.c:

	  Neatening up the formatting a little bit. There's no concept of
	  'valid callback' here in this codebase.

2000-10-28 17:31  db

	* src/s_serv.c:
	  - typo in s_serv.c in vchan handling
	    oopsies

2000-10-28 17:18  db

	* src/m_sjoin.c:
	  - most of the work is done in m_sjoin, it =should= send the mode
	    join messages etc. to the right vchan names now.

2000-10-28 16:54  db

	* src/m_sjoin.c:
	  - ok, did preliminary mods on sjoin to support vchans.
	    This function is a pile of festering pus..
	    Anyway, it should more or less work but its untested. Still to be
	    done is the mods to the sendto_channel etc. so they all send the
	    right join messages to the vchans as appropriate.

2000-10-28 16:21  db

	* src/s_serv.c:
	  - rewrote burst code, added new function to do the actual burst.
	    'bout time.  rewrote the burst code to send vchans as sub chans of
	    top level channels.  Next need to redo SJOIN to paste 'em back into
	  sub vchans from burst

2000-10-28 13:54  db

	* include/event.h, include/handlers.h, include/msg.h, src/event.c,
	  src/parse.c:
	  - adds /quote events which will list the event queue
	    I'd rather add a generic "debug" function later on i.e. something
	    like "/quote debug events" "/quote debug memory" etc. etc. but
	    this will do for now...

2000-10-28 13:27  adrian

	* include/client.h, include/ircd.h, src/client.c, src/ircd.c:

	  move check_pings() into an event, and tidy up a random comment.
	  check_pings() is now called once a second to make sure we catch all
	  pings that should be pong'ed, since nextping isn't reset anywhere in
	  the code anymore. This isn't entirely optimal, but it will do until
	  I've tidied up the rest of the network code. When this is done, I'll
	  optimise check_pings() so it doesn't have to do so much work to
	  decide whether a client/server should have responded.

2000-10-27 22:29  toot

	* include/numeric.h, include/vchannel.h, src/m_join.c,
	  src/messages.tab, src/messages_cust.tab, src/s_bsd_poll.c,
	  src/vchannel.c: made vchan notices into numeric replies.  276-278
	  don't seem to be used for anything in any ircd i checked, so went
	  for them

2000-10-26 17:07  adrian

	* src/s_bsd.c:

	  Add an explanation to errno ..

2000-10-26 15:37  db

	* src/m_kline.c:
	  - check_klines() has to be called after placing tklines as well

2000-10-26 13:35  adrian

	* include/channel.h, src/channel.c, src/ircd.c:

	  Tidy up Dianora's event-ing of the channel_cleanup() code:

	  * change the declaration of channel_cleanup() so it matches the EVH
	    function prototype

	  * Change the call to eventAdd() to not need the typecast to EVH ..
	  * .. to pass NULL instead of 0 ..
	  * .. and split across two lines so the line isn't > 80 characters

2000-10-26 11:04  db

	* src/: listener.c, m_gline.c, s_bsd.c, s_conf.c, s_serv.c,
	  s_user.c:
	  - removed checkpings to localize it in ircd.c only

2000-10-26 10:40  db

	* include/: config.h, config.h.dist:
	  - messed up 4am commit. Here is the changes to config.h

2000-10-26 03:57  db

	* src/: channel.c, client.c, ircdauth.c, list.c, m_kline.c,
	  m_notice.c, m_pong.c, s_conf.c, s_debug.c, s_serv.c:
	  - cleaned up kline code in client.c
	  - missing check_klines in m_kline.c

2000-10-25 19:57  db

	* include/client.h, src/client.c, src/ircd.c, src/m_kline.c:
	  - split check_pings into two (like it should have been all along)
	    check_pings checks for ping timeouts
	    check_kline checks for klines
	    both call common exit routine
	    m_kline has to call check_kline after placing a kline. It would be
	    better if it was put on the nice event queue incase a tcm or oper
	    places several klines in a row. But then, opers freak when a kline
	    doesn't happen instantly.

2000-10-25 19:20  adrian

	* include/res.h, src/res.c:

	  ResolverFileDescriptor isn't a global FD anymore, so don't declare
	  it as one.

2000-10-25 19:18  adrian

	* include/s_auth.h, src/ircd.c, src/s_auth.c:

	  Convert the auth timeout checking to be once a second. I can't see
	  this sucking too badly because timeout_auth_queries_event() doesn't
	  walk the entire fd array - instead it walks AuthPollList.

2000-10-25 18:20  db

	* src/: channel.c, event.c, ircd.c:
	  - added evenAdd for cleanup_channels

2000-10-25 17:04  adrian

	* src/: fdlist.c, s_bsd.c:

	  tidy up the highest_fd handling. Now, the handling is done through
	  fd_open() / fd_close(), reducing the number of places tracking is
	  done.

2000-10-25 13:19  db

	* src/: m_names.c, m_privmsg.c:
	  - why I deleted that crucial code I don't know
	    anyway, privmsgs to channels now works again.

2000-10-25 06:00  adrian

	* include/listener.h, src/listener.c, src/s_bsd_poll.c:

	  Move the listener code to use comm_setselect().

	  * accept_connection() has changed to become a PF function for use
	    with comm_setselect()
	  * When a listener is created, comm_setselect() is called to make
	    the initial IO on the FD work
	  * reworked read_message() in s_bsd_poll.c to deal with no listen
	  sockets

	  All read_message() does now (!) is handle auth and client/server
	  sockets.  Here's an excerpt from the code explaining the major real
	  change that happened:

	     * Since we're going to rip this code out anyway, the current "hack"
	     * will suffice to keep things going. The only two things this
	     loop
	  * services now is the auth and client/server fds (resolver and
	     * listener FDs are done through the new-style interface) . So,
	     * we loop again through the poll_fdarray[] array from scratch
	     again
	  * and fd's that are not -1 are ready for us to do read-type events
	     * with. The pollfd_array[i].fd = -1; in the auth fd loop stops us
	     * from looking at the auth fds as client/server fds which would
	     be
	  * a Bad Thing(tm) right now. :-)    -- adrian

	  * We have to recheck the incoming connection code to ratelimit the
	    number of incoming connections/sec to stop connection flooders. Uhm,
	    there was some code in read_message() from comstud to do this, I'll
	    move it out into accept_connection() once read_message() has gone
	  away.

2000-10-25 03:36  adrian

	* src/s_bsd.c:

	  Just set the nonblocking flag when we set a socket non-blocking ..

2000-10-25 03:07  adrian

	* src/s_bsd_poll.c:

	  Use the pre-munged poll flags for network IO, rather than creating
	  our own set of POLL* flags.

2000-10-25 02:06  db

	* include/config.h, include/ircd.h, src/flud.c, src/m_join.c,
	  src/m_set.c:
	  - removed NO_JOIN_ON_SPLIT
	  - cleaned up m_join.c a bit
	  - removed a pile of uneeded #ifdef's

2000-10-24 20:04  adrian

	* include/res.h, src/client.c, src/ircd.c, src/res.c, src/s_bsd.c,
	  src/s_bsd_poll.c:

	  Commit the tidyup of the resolver network code (notice I said
	  *network* :) -->

	  * move init_resolver() to a more useful init place and out of
	  init_netio()
	  * make the DNS timeout checking an event which is triggered once a
	    second.  I figure that when I rewrite the event system soon to work
	    on milliseconds rather than seconds we might revisit this, but doing
	    it once a second actually might be better. Dunno yet..
	  * add comm_setselect() calls in the resolver init and just after the
	    recvfrom() to re-register interest in IO.
	  * remove the evilness in read_message() which does the IO on
	    ResolverFileDescriptor, making resolver IO happen through the new
	    network IO system

	  Notes:

	  * I have *NO* idea how the DNS write flushing works just yet, I
	    guess I'm about to find out.

	  * The resolver might take a little longer - this is simply the
	    by-product of shoehorning in the comm_select() call (if there is no
	    other pending IO, read_message() can delay for a bit, since the
	    resolver fd isn't covered there.) Once read_message() disappears, so
	    will the delays.  (or I might just fix it somehow..)

2000-10-24 19:53  adrian

	* src/ircd.c:

	  Remember to initialise the event subsystem early so we can use it.

2000-10-24 19:42  adrian

	* src/s_bsd_poll.c:

	  Arrays start at 0, not 1 in C. When we find out the lowest numbered
	  fd, we need to make sure npollfds is one more than that value,
	  otherwise the last filedescriptor won't get polled.

2000-10-24 14:47  adrian

	* include/fdlist.h, include/fileio.h, include/s_bsd.h,
	  src/client.c, src/fdlist.c, src/fileio.c, src/hash.c, src/ircd.c,
	  src/ircdauth.c, src/listener.c, src/m_close.c, src/m_connect.c,
	  src/m_die.c, src/m_gline.c, src/m_kline.c, src/m_oper.c,
	  src/m_set.c, src/m_stats.c, src/m_trace.c, src/motd.c, src/res.c,
	  src/restart.c, src/s_auth.c, src/s_bsd.c, src/s_bsd_poll.c,
	  src/s_bsd_select.c, src/s_conf.c, src/s_debug.c, src/s_log.c,
	  src/s_misc.c, src/s_stats.c, src/s_zip.c, src/send.c:

	  Commit the fd state tidyup and new IO loop code.

	  * I've killed GlobalFDList and replaced it with an array of fd
	    structs.
	  (fde_t). This has the fd state (opened, closed, pending io requests,
	    type, description, etc).
	  * I've added fd state tracking stuff (fd_open / fd_close).
	  * I've added file fd state tracking stuff (file_open / file_close)
	  * I've tidied up logfile permissions in a place or two

	  There's a little weirdness - if you want to include s_bsd.h, you
	  need to include fdlist.h as well. This will go away eventually ..

2000-10-23 22:41  ryan

	* src/m_invite.c:

	  changed around order things are done to prevent non-base channel
	  pointer from being used where base channel pointer should be

2000-10-23 14:44  db

	* src/: m_cjoin.c, m_join.c, m_sjoin.c, s_bsd_select.c:
	  - modified cjoin to use the ##channel_name as given in original spec
	    this should help us slightly in m_sjoin.c
	  - started cleaning up m_sjoin.c
	  - duplicated voodoo code into mo_join.. in m_join.c
	    handlers still need a lot of cleanup due to the duplicated code...

2000-10-23 12:42  toot

	* src/channel.c: fixed channel.c/remove_empty_channels() so it
	  compiled with PRESERVE_CHANNELS #defined

2000-10-23 11:10  adrian

	* include/event.h, src/Makefile.in, src/event.c, src/ircd.c:

	  Added a port of squid's event system. This is a very simple
	  mechanism to schedule events to happen in some given time period.
	  The main function you'll be using is:

	  eventAdd(const char *text, EVH *func, void *data, time_t when, int
	  weight)

	  where when is the number of seconds you want to have the event run
	  (so if you want it running a second from now, you'd set when to be
	  1.)

	  Read event.c for a more precise description.

	  What has changed:

	  * changed this over to use the Block allocator rather than squid's
	  mempools
	  * disabled debug reporting until I figure out a nice way (ie how the
	    rest of the ircd does it) of doing this
	  * made the time offsets integer, rather than double like they are in
	  squid
	  * the logic in io_loop() has been changed to allow this to slide in.

	  Note that eventAddIsh()'s logic on random offsets might be a bit ..
	  off.  I'll come back to this once I've tidied up bits of the code.

	  I will also be tidying up io_loop() now an event scheduling
	  mechanism exists, making it much, much less twisted. So any breaks
	  there will
	  (hopefully) be temporary.

2000-10-23 08:37  adrian

	* configure, include/s_bsd.h, include/setup.h.in, src/Makefile.in,
	  src/ircd.c, src/s_bsd.c, src/s_bsd_poll.c, src/s_bsd_select.c:





	  first split of the network code into per-commloop modules. The
	  autoconf magic came from the squid commloops work by Adrian Chadd
	  (me) and Benno Rice (benno@holocaine.net).

	  the poll and select specific stuff was moved into s_bsd_poll.c and
	  s_bsd_select.c . The chosen file is done through some autoconf magic
	  and variable substitution in src/Makefile.in. I haven't changed any
	  code itself, simply un-staticized things and shifted things into
	  seperate files. This is done to preserve some form of CVS sanity.

	  A noteable here is that I"ve moved the FD_SETSIZE detection for
	  select() into s_bsd_select.c rather than ircd.c, since this is a
	  more logical place to check (and die) if FD_SETSIZE <
	  MAXCONNECTIONS.

	  The autoconf configuration is done using the following options to
	  configure:

	  --enable-poll / --disable-poll : Enable or disable the use of poll()
	  --enable-select / --disable-select : ENable or disable the use of
	  select()

	  Note that the current autoconf magic checks if poll() exists - since
	  we aren't using USE_POLL now, we define
	  ac_cv_func_poll/select/whatever and this is used further into the
	  autoconf magic to decide the substitutions to do.

2000-10-23 08:07  adrian

	* Hybrid-team, src/version.c.SH:


	  * add myself as a core member. Uh, thanks again Diane
	  * add Toby to Hybrid-team, because he wasn't there

2000-10-23 02:16  db

	* src/channel.c:
	  - oopsies in fix_key

2000-10-22 19:59  db

	* include/vchannel.h, src/m_join.c, src/vchannel.c:
	  - committed desrt's patches to add magic voodoo to invite on vchan
	    /invite to vchan puts you on right vchan without the !nick key
	    being needed.

2000-10-22 19:09  toot

	* src/version.c.SH: fixed spelling of my name in version.c.SH :)

2000-10-22 18:36  db

	* src/: m_invite.c, version.c.SH:
	  - added patches for invite by  Ryan Lortie
	  <desertangel@mindless.com> (desrt)
	  - updated contributors/core group

2000-10-22 13:20  db

	* include/channel.h, src/m_cjoin.c, src/m_join.c:
	  - removed chan_id
	  - Can't reject long channels for interoperability reasons

2000-10-22 12:36  toot

	* src/: m_cjoin.c, m_join.c: bysin's patch to check for a overly
	  long channel name in /join too.  or you could end up with a channel
	  you couldn't /cjoin..

2000-10-22 01:33  db

	* src/channel.c:
	  - ok, sub1_from_channel went through all the work to figure out if
	    the root channel could be removed if a sub channel was removed, only
	    it uh forgot to make sure it was empty first. (oh oh) This meant
	    that the root channel also got removed from the hash when a client
	    left the sub chan. oops

2000-10-21 22:28  db

	* include/config.h, src/m_cjoin.c, src/m_list.c:
	  - applied bysin's two patches

2000-10-21 21:47  toot

	* src/: channel.c, m_topic.c: free topic_info when the channel's
	  deleted

2000-10-21 19:00  toot

	* src/channel.c: . renamed free_bans_exceptions_denies to
	    free_channel_masks, and had it free invite exceptions too.  .
	  remove_empty_channels() wasn't freeing +d (or +I)

2000-10-21 13:27  bill

	* include/config.h:

	  /usr/local/ircd/ IS the default, not /usr/ejb/whatever

2000-10-21 13:10  lusky

	* include/config.h: put DPATH and SPATH back to defaults

2000-10-21 12:55  bill

	* include/config.h, src/channel.c, src/m_mode.c:

	  fixed bug in MODE (MODE #non-existant-chan caused segfault) made
	  attempted JOIN to a juped channel specify between user or oper

2000-10-21 03:15  lusky

	* include/ircd.h, src/m_info.c, src/m_kick.c, src/m_stats.c,
	  src/s_user.c, src/version.c.SH: fix for duplicate 401's for kick
	  #validchan invalnick ServerStats->is_ref is incremented twice on an
	    X-line which is set to 1 (jdc) STATS P notifications were not sent
	  to opers (jdc) stats l/L target to FLAGS_SPY (if STATS_NOTICE) (jdc)
	  uname info only displayed to opers If X-line port field is 2, reject
	    client but do not send a notification to opers STATS y/Y now
	  oper-only did NOT add any of the other conf line display
	    restrictions, I think we should integrate control of those on a
	    per-line basis in the new conf format.

2000-10-20 11:29  toot

	* src/: m_notice.c, m_privmsg.c, parse.c: msg nick with no text
	  made it core..  privmsg/notice give different errors depending what
	  args are missing, so they check it instead of parse()

2000-10-19 16:09  toot

	* src/m_list.c: /list #channel was showing the wrong key :P

2000-10-19 13:06  toot

	* src/m_list.c: cleaned m_list slightly..

2000-10-19 12:20  toot

	* src/: m_join.c, m_list.c: . /join just skips over a subchan
	  you're already in, instead of giving an error.  . /list shows vchans
	  as #chan<!key> if there's subchans for it..

2000-10-19 09:28  db

	* src/res.c:
	  - removed the dns cache built into res.c
	  - will have to fill out cres_mem with something more appropriate

2000-10-19 00:40  lusky

	* src/res.c: dns cache entries were never fully expiring, stayed in
	  the hashtable forever

2000-10-18 22:21  db

	* src/: m_privmsg.c, m_who.c:
	  - fixed core with who of client not on a channel. ooops
	  - fixed mo_privmsg
	  - fixed @# style channel messages

2000-10-17 02:37  lusky

	* src/: m_server.c, m_svinfo.c, s_auth.c, s_bsd.c, s_serv.c: fixed
	  a bug tickled by sending a bogus SERVER command from hacked server
	  auditted leakage of IP address from get_client_name calls

2000-10-16 22:53  db

	* src/: m_privmsg.c, m_topic.c:
	  - prelim changes for m_topic

2000-10-16 19:17  toot

	* src/channel.c: now it will remove the basechan when there's no
	  vchans left under it

2000-10-16 18:54  toot

	* include/vchannel.h, src/channel.c, src/m_join.c, src/vchannel.c:
	  . this should remove the basechan after deleting its last vchan, but
	  didn't . don't bother to show possible vchans if they're already
	    in one of them.  . there's one case where the root is empty, and
	    there's only one vchan.. just have them join that vchan.  . displays
	  the last nick to join each vchannel for now, and won't show empty
	  vchans

2000-10-16 13:02  toot

	* src/vchannel.c: map_vchan checks root channel too

2000-10-16 12:23  db

	* include/vchannel.h, src/m_whois.c, src/vchannel.c:
	  - semi fixed whois

2000-10-16 12:10  toot

	* include/vchannel.h, src/m_join.c, src/m_notice.c,
	  src/m_privmsg.c, src/vchannel.c: . don't allow JOIN to a 'real'
	  subchan name . some extra brackets in privmsg/notice to kill a
	  compile warning . mpw JOIN #chan !nick will work on any nick in the
	    channel, just need to update show_vchans

2000-10-16 10:36  db

	* src/m_who.c:
	  - global who should work when its a wild card mask

2000-10-16 09:53  db

	* src/m_who.c:
	  - fixed bug in m_who

2000-10-16 09:12  db

	* src/m_notice.c:
	  - added prelim vchan support to notice as well
	  - still have to do @# type of vchan

2000-10-16 02:44  db

	* src/: m_kick.c, m_privmsg.c, vchannel.c:
	  - fixed stupid bug with vchan == chptr i.e. top level chptr == vchan
	    that would result in it never being removed, since vchan == chptr
	    (top chan) would never result in a match ... this led to rework of
	  privmsg to channel

	  - kick appears to work now on vchan

2000-10-15 23:05  db

	* src/: m_part.c, m_who.c:
	  - m_who.c what a MESS

2000-10-15 16:59  db

	* include/channel.h, src/channel.c, src/m_mode.c:
	  - the m_mode changes needed
	    this allows you to mode +o etc. on sub chans. wheeeeeee

2000-10-15 14:17  db

	* src/m_names.c:
	  - m_names now recognizes vchan names

2000-10-15 13:51  db

	* include/channel.h, src/m_cjoin.c, src/m_join.c, src/m_names.c:
	  - slightly rewrote m_names. its still a stinking mess but getting
	  there
	  - added function call to make vchan names listing easier

2000-10-15 09:42  toot

	* src/: m_join.c, vchannel.c: some more fixes to join/cjoin

2000-10-14 19:07  toot

	* src/m_join.c: another fix to m_names call in m*_join

2000-10-14 18:42  toot

	* src/: channel.c, m_join.c: . move add_vchan_to_client lower down,
	  incase of bans etc in m_join . hopefully m_names works now after
	  /join #chan !id . put a del_vchan_from_client in
	  remove_user_from_channel

2000-10-14 18:07  db

	* include/vchannel.h, src/m_join.c, src/m_privmsg.c,
	  src/vchannel.c:
	  - fixed bug in add_vchan_to_client_cache, reversed two args while at
	  it
	  - made m_privmsg message right channel
	  - m_join also has to update cache

2000-10-14 17:10  db

	* include/vchannel.h, src/m_cjoin.c, src/m_names.c, src/vchannel.c:
	  - added code to remove chan from client cache, not used yet
	  - added checks to ensure client doesn't join twice a subchan, not
	  tested yet
	  - corrected conflict introduced by me
	  - added another macro for top level vchan detect

2000-10-14 16:54  toot

	* opers.txt, include/numeric.h, src/m_whois.c, src/messages.tab,
	  src/messages_cust.tab, src/s_user.c: . fixed typo in s_user.c .
	  made RPL_WHOISADMIN numeric consistent with dalnet . changed a
	  ->flags pointer that should have been ->umodes in m_whois

2000-10-14 13:20  toot

	* src/m_names.c: forgot to change that parv to parc>2

2000-10-14 13:15  toot

	* src/: m_cjoin.c, m_join.c, m_names.c, vchannel.c: . don't allow
	  CJOIN to a non-base channel . don't list sub-channels if they try to
	    /join a sub-channel's 'long' name . added an extra arg to m_names so
	    it works after a CJOIN (there might be a better way to do this)

2000-10-14 10:26  db

	* include/vchannel.h, src/m_join.c, src/vchannel.c:
	  - moved show_vchans and find_vchan into vchannel.c

2000-10-14 10:20  db

	* include/client.h, include/vchannel.h, src/Makefile.in,
	  src/m_cjoin.c, src/vchannel.c:
	  - mod Makefile.in to  add new vchannel.c
	  - added new vchannel.c for vchan support
	  - added new vchannel.h for vchan support
	  - added vchan cache call in m_cjoin.c

2000-10-14 09:22  db

	* src/m_cjoin.c:
	  - m_names() after cjoin (toot)

2000-10-14 09:04  db

	* src/m_cjoin.c:
	  - fixed cjoin so you actually look like you are joining the subchan
	  now

2000-10-13 20:45  db

	* src/messages_cust.tab:
	  - numeric 247 (uptime) got trashed in table. (HOW?) would cause
	    server to core on /stats u

2000-10-13 14:50  db

	* src/channel.c:
	  - cleaner sub1 fix for vchans

2000-10-13 11:07  bill

	* src/m_mode.c:

	  Added null chptr checking to set_channel_modes()

2000-10-12 14:41  db

	* src/channel.c:
	  - fixed bug in sub1_from_channel for vchans

2000-10-12 13:40  db

	* include/channel.h, src/channel.c, src/m_cjoin.c, src/m_join.c,
	  src/version.c.SH:
	  - folded in work toot (Toby Verrall) to7@antipope.fsnet.co.uk
	    did for first rough proof of concept vchans. We'll have to go in
	    and #ifdef these later.

2000-10-11 23:29  lusky

	* src/: channel.c, mtrie_conf.c: fix for *@*.foo.com I:lines being
	  broken by a user@host.foo.com I:lines change chptr->vchans to
	    chptr->vchan_flag in channel.c to get this tree to compile.  not
	  sure if this is correct.

2000-10-06 13:29  db

	* include/channel.h, src/m_cjoin.c: Make virtual channels doubly
	  linked.

2000-10-06 01:01  lusky

	* configure, src/Makefile.in: updated autoconf and Makefile.in to
	  support flex when available

2000-10-06 00:29  lusky

	* include/defs.h: deleted ChangeLog.old and include/defs.h

2000-10-06 00:26  lusky

	* Hybrid-team, LICENSE, Makefile.in, configure, doc/Makefile,
	  doc/example.conf, doc/mtrie.txt, doc/server-version-info,
	  doc/simple.conf, include/channel.h, include/config.h,
	  include/config.h.dist, include/dline_conf.h, include/flud.h,
	  include/irc_string.h, include/res.h, include/restart.h,
	  include/s_misc.h, include/setup.h.in, include/sprintf_irc.h,
	  include/whowas.h, src/Makefile.in, src/channel.c, src/fileio.c,
	  src/m_cjoin.c, src/m_list.c, src/m_ltrace.c, src/m_nick.c,
	  src/m_user.c, src/match.c, src/s_debug.c, src/s_user.c,
	  src/s_zip.c, src/send.c, src/version.c.SH, tools/Makefile.in,
	  tools/README, tools/ircd_start.c, tools/klineParse.c: updated
	  Makefile.in's to support parallel make ala -6 fixed up cjoin a
	  little so it would compile synced up changes from -6rc4 to
	   -6rc5(20001005_3): added CVS Id tags to numerous files
	   brought Hybrid-team and version.c.SH
	   deleted ChangeLog.old and include/defs.h
	   Fixed misnamed va var in sendto_realops()
	   changed ltrace to be consistant with trace for non-opers
	   mode channel +e now returns an error to non-chanops
	   unauth connection notices now include servername/port (jdc)
	   changed "juping locally" to "locally juping" (gp)
	   typo in stats z display (gp)
	   typo in channel jupe oper notice (db)
	   new config.h option ALLOW_DOT_IN_IDENT

2000-10-03 14:14  db

	* include/channel.h, include/handlers.h, include/msg.h,
	  src/channel.c, src/m_cjoin.c, src/parse.c:
	  - initial changes to add cjoin for vchan support

2000-09-30 11:41  db

	* include/channel.h, include/s_serv.h, src/s_serv.c:
	  - started adding VCHAN code. I

2000-09-29 13:16  ejb

	* INSTALL, README.FIRST, opers.txt, include/client.h,
	  include/config.h, include/irc_string.h, include/m_gline.h,
	  include/msg.h, include/s_bsd.h, include/s_conf.h,
	  include/setup.h.in, src/Makefile.in, src/channel.c, src/client.c,
	  src/irc_string.c, src/ircd.c, src/m_die.c, src/m_gline.c,
	  src/m_join.c, src/m_kline.c, src/m_links.c, src/m_names.c,
	  src/m_nick.c, src/m_notice.c, src/m_oper.c, src/m_privmsg.c,
	  src/m_rehash.c, src/m_restart.c, src/m_server.c, src/m_sjoin.c,
	  src/m_stats.c, src/m_unkline.c, src/m_whois.c, src/messages.tab,
	  src/messages_cust.tab, src/mtrie_conf.c, src/parse.c, src/res.c,
	  src/s_bsd.c, src/s_conf.c, src/s_log.c, src/s_serv.c,
	  src/s_user.c, src/send.c, tools/Makefile.in, tools/install_ircd:
	  merged toot's patch to resync with -6rc4

2000-09-26 10:09  ejb

	* include/channel.h, include/numeric.h, include/s_serv.h,
	  src/channel.c, src/messages.tab, src/messages_cust.tab,
	  src/s_serv.c, src/version.c.SH:
	  - added myself to core team list in version.c.SH
	  - added ircnet's +I invite exceptions
	  - remove {add,del}_*id(), replaced with a single function
	    add_id and del_id, removes code duplication.
	  - added seperate error_sents for +I and +d in channel.c.
	  - removed some false BAN_INFO ifdefs

2000-09-07 17:35  ejb

	* include/client.h, include/config.h, include/irc_string.h,
	  src/channel.c, src/client.c, src/irc_string.c, src/listener.c,
	  src/s_conf.c: initial stab at IPv6 .. it doesn't compile with
	  IPV6 defined yet..

2000-08-13 18:34  ejb

	* include/channel.h, include/client.h, include/config.h,
	  include/handlers.h, include/ircd_handler.h, include/m_gline.h,
	  include/m_info.h, include/msg.h, include/numeric.h,
	  include/s_conf.h, src/client.c, src/ircd.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/m_cburst.c, src/m_gline.c, src/m_htm.c,
	  src/m_invite.c, src/m_join.c, src/m_knock.c, src/m_mode.c,
	  src/m_notice.c, src/m_part.c, src/m_privmsg.c, src/m_quit.c,
	  src/m_rehash.c, src/m_stats.c, src/m_topic.c, src/m_whois.c,
	  src/messages.tab, src/messages_cust.tab, src/oldparse.c,
	  src/parse.c, src/s_bsd.c, src/s_conf.c, src/s_debug.c,
	  src/s_misc.c, src/s_user.c: Large commit, folding in a number of
	  changes i made over the weekend.
	  - add n!u@h for topic_info ala ircnet.
	  - stats p notice.
	  - removed some old non-TS cruft.
	  - unreg users can't send version.
	  - added +a umode, shows oper is admin in whois
	    if they are 'admin=yes'.
	  - users can see the topic of a -s channel they aren't
	    on (but can't set it even if it is -t, to prevent
	    topic floods *sigh*)
	  - many changes in parse.c .. fixed a few bugs, rewrote
	    the argument parser code, added support for catching
	    users passing not enough parms before the m_ function
	    is even called.
	  - you can now set in ircd.conf whether channels have to
	    be +i for an invite to work.
	  - added a numeric (504) for sending to users trying to
	    invite remote users to +i channels.
	  - started changing m_* functions to not check parc anymore,
	    in most cases parse() has already handled this.
	  - move glines from config.h to ircd.conf plus a lot of other stuff i
	  probably forgot.

2000-07-31 09:22  db

	* include/client.h, include/config.h, include/msg.h, src/m_oper.c,
	  src/parse.c, src/s_serv.c, src/s_zip.c, src/version.c.SH:
	  - Added Pie-Man changes, added him to list of contributors

2000-07-24 20:04  db

	* include/client.h, include/config.h, src/ircd_parser.y,
	  src/m_nick.c, src/parse.c, src/s_conf.c:
	  - commiting in changes made by pie-man (ins oper)

2000-07-19 22:42  db

	* include/handlers.h, include/m_commands.h, include/msg.h,
	  src/Makefile.in, src/irc_string.c, src/ircd.c, src/m_admin.c,
	  src/m_away.c, src/m_capab.c, src/m_cburst.c, src/m_close.c,
	  src/m_connect.c, src/m_die.c, src/m_drop.c, src/m_error.c,
	  src/m_gline.c, src/m_hash.c, src/m_help.c, src/m_htm.c,
	  src/m_info.c, src/m_invite.c, src/m_ison.c, src/m_join.c,
	  src/m_kick.c, src/m_kill.c, src/m_kline.c, src/m_knock.c,
	  src/m_links.c, src/m_list.c, src/m_lljoin.c, src/m_locops.c,
	  src/m_ltrace.c, src/m_lusers.c, src/m_mode.c, src/m_names.c,
	  src/m_nick.c, src/m_notice.c, src/m_oper.c, src/m_operwall.c,
	  src/m_part.c, src/m_pass.c, src/m_ping.c, src/m_pong.c,
	  src/m_privmsg.c, src/m_quit.c, src/m_rehash.c, src/m_restart.c,
	  src/m_server.c, src/m_set.c, src/m_sjoin.c, src/m_squit.c,
	  src/m_stats.c, src/m_svinfo.c, src/m_time.c, src/m_topic.c,
	  src/m_trace.c, src/m_unkline.c, src/m_user.c, src/m_userhost.c,
	  src/m_users.c, src/m_version.c, src/m_wallops.c, src/m_who.c,
	  src/m_whois.c, src/parse.c, src/s_conf.c, src/s_user.c,
	  src/send.c:
	  - redid to use handlers. untested, but it copmiles at least

2000-05-25 17:24  wnder

	* src/send.c: a strncpy --> strncpy_irc fix for a potential
	  dereference of bad ptr in vsendto_prefix_one (db)

2000-05-16 23:54  wnder

	* src/send.c:
	   Fix for % in user's ident bug

2000-04-07 08:39  db

	* src/send.c:
	  - unused variable never caught, uneeded va_end caused solaris
	    compiler to not compile

2000-04-05 18:12  db

	* include/blalloc.h, src/blalloc.c, src/client.c, src/m_stats.c,
	  src/s_debug.c:
	  - committing some quick hacks for verifying block allocator
	    is not leaking.
	    These should be #ifdef'ed perhaps in future.
	    when an oper does /stats $
	    four files will be written to DPATH
	    which will contain hex values of allocated memory for each client

	    local_block_allocator_client_list.txt from block allocator
	    local_client_list.txt                 from link list

	    remote_block_allocator_client_list.txt from block allocator
	    remote_client_list.txt                 from link list

	    code external to the ircd is needed to verify consistency

2000-04-04 21:02  db

	* src/ircd_parser.y:
	  - clean ups to parser

2000-04-04 10:05  db

	* src/: ircd_lexer.l, ircd_parser.y:
	  - fixed memory leak in parser code. strdup in lexer never freed
	    found by Krome from ircnet

2000-04-02 23:37  db

	* include/ircd.h, src/ircd.c:
	  - MAX_SETBACK_TIME added

2000-04-02 23:33  db

	* src/ircd_lexer.l, src/ircd_parser.y, src/s_conf.c,
	  tools/convertconf.c:
	  - more cleanups to parser
	  - make sure 'O' is converted to global=yes in convertconf

2000-04-02 22:00  db

	* src/Makefile.in, src/ircd_parser.y, src/s_conf.c,
	  tools/convertconf.c:
	  - clean: in Makefile remove .c files for parser
	  - cleaned up serverinfo code
	  - make sure network order not host order for local ip

2000-04-02 13:42  db

	* include/config.h, include/config.h.dist, include/m_info.h,
	  src/s_conf.c:
	  - further cleanups to remove #ifdef's

2000-04-02 13:20  db

	* src/: ircd_lexer.l, ircd_parser.y:
	  - removed last remnant of cidr_ban (sorry is)

2000-04-02 12:56  db

	* src/send.c:
	  - broke ZIP_LINKS forgot to remove all #ifdef's on SENDQ_ALWAYS
	    "is" and "Perly" found it

2000-04-02 11:54  db

	* src/res.c:
	  - changed comment in res.c also trimmed if down to match undernet's

2000-04-02 11:46  db

	* include/: client.h, config.h, config.h.dist, ircd_defs.h:
	  - changed CONFIG_H_LEVEL_6 to CONFIG_H_LEVEL_7
	  - updated config.h.dist to match config.h

2000-04-02 11:19  db

	* src/channel.c:
	  - Pointed out by "is" with non standard p vs. s this else if is
	    wrong "is" <ejb@debian.org>

2000-04-02 09:02  db

	* src/s_serv.c:
	  - This bug caused only the first connection in a class to be tried
	    i.e. if you had several C: lines in one =class= only the first
	    C: line was ever used. This is code that was #ifdef'd out from
	    original hybrid-5

2000-04-01 16:14  db

	* include/ircd.h, src/channel.c, src/client.c, src/flud.c,
	  src/ircd.c, src/m_htm.c, src/m_join.c, src/m_ltrace.c,
	  src/m_notice.c, src/m_part.c, src/m_privmsg.c, src/m_set.c,
	  src/m_trace.c, src/s_conf.c, src/s_user.c:
	  - removal of #define kludge for GlobalSetOptions

2000-03-30 21:38  db

	* include/client.h, include/config.h, include/irc_string.h,
	  include/m_commands.h, include/m_info.h, include/msg.h,
	  include/numeric.h, include/s_conf.h, include/s_user.h,
	  src/Makefile.in, src/channel.c, src/client.c, src/ircd.c,
	  src/ircd_lexer.l, src/ircd_parser.y, src/ircdauth.c,
	  src/m_admin.c, src/m_help.c, src/m_info.c, src/m_kline.c,
	  src/m_knock.c, src/m_links.c, src/m_list.c, src/m_lusers.c,
	  src/m_nick.c, src/m_oper.c, src/m_server.c, src/m_stats.c,
	  src/m_svinfo.c, src/m_trace.c, src/m_user.c, src/m_wallops.c,
	  src/m_whois.c, src/match.c, src/messages.tab,
	  src/messages_cust.tab, src/motd.c, src/mtrie_conf.c,
	  src/s_conf.c, src/s_user.c, src/whowas.c:
	  - large resync , folding in a number of changes contributed by is
	    This moves some config.h items into the conf file

2000-03-19 03:07  lusky

	* Hybrid-team: Changed my email address, this is a test commit
	  (jrl)

2000-02-09 07:03  db

	* include/m_info.h, src/ircd_lexer.l, src/ircd_parser.y,
	  src/m_topic.c, src/messages.tab, src/messages_cust.tab:
	  - fixed goof with removing of an #ifdef for TOPIC_INFO
	    patch done by is-

2000-02-01 22:44  db

	* tools/: convertconf.c, ircd.conf.new:
	  - synced up convertconf to current parser format

2000-02-01 21:57  tomh

	* src/s_bsd.c:

	  Fix UMR picked up by purify: ****  Purify instrumented ircd (pid
	  11725)  **** UMR: Uninitialized memory read (15 times):
	    * This is occurring while in:
	          read_message   [s_bsd.c:909]
	          main           [ircd.c:688]
	          _start         [crt1.o]
	    * Reading 4 bytes from 0xefffe5ac on the stack.
	    * Address 0xefffe5ac is local variable "poll_fds" in function
	    read_message.

2000-02-01 20:41  db

	* src/: ircd_parser.y, m_nick.c, s_conf.c:
	  - converted separate user/host forms to user="user@host.part"; forms
	    it looks nicer, and easier for admins to work with I think. Plus
	    recommended by the #coder-com crew. ok.
	  - fixed stupid in initconf where it missed # commented out lines and
	    tried to parse old format as new...
	  - folded in the old -5 nick collide code already folded into the -6
	    tree.  its #ifdef'ed for future fixes...

2000-01-31 23:30  db

	* include/s_conf.h, src/ircd_parser.y:
	  - improvements to connect section. allow multiple hub_masks etc.

2000-01-24 23:02  db

	* src/: ircd_lexer.l, ircd_parser.y:
	  - first work on logging section,
	    logging level can be set from new conf file format now.

2000-01-24 17:59  db

	* tools/: convertconf.c, ircd.conf.new:
	  - updated convertconf

2000-01-24 17:22  db

	* include/client.h, include/config.h, include/config.h.dist,
	  include/m_info.h, include/s_zip.h, src/client.c, src/ircd.c,
	  src/ircd_parser.y, src/packet.c, src/s_bsd.c, src/s_debug.c,
	  src/s_serv.c, src/s_stats.c, src/s_zip.c, src/send.c,
	  tools/Makefile.in:
	  - removed #ifdef for ZIP_LINKS
	    I hate #ifdef's

2000-01-23 21:47  db

	* include/fileio.h, src/fileio.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/s_conf.c:
	  - added fbunputc mimics unputc (Sorry Tom)
	  - single conf file, is either old style or new style determined
	    at initconf time (Again, sorry Tom)
	    Could have done it simpler, but this is safer for now...

2000-01-23 16:02  db

	* include/common.h, src/ircd_lexer.l, src/ircd_parser.y,
	  src/m_gline.c, src/m_kline.c, src/numeric.c, src/s_conf.c,
	  src/s_user.c, src/send.c:
	  - cleaned up some "bare" 512 defines. added new IRCD_BUFSIZE define
	  - added better error recovery to parser,
	  - added better error reporting.
	  - tentative new conf format mostly finished, will "warp" it a bit
	    more to match Kev's proposed format as possible, given undernet
	    vs.  efnet differences..
	  - need to handle ircd.conf form as the new format as default,
	    and fall back to old format as needed. i.e. kludge code still to
	    be removed in source...

2000-01-22 23:53  db

	* include/s_conf.h, src/class.c, src/ircd_lexer.l,
	  src/ircd_parser.y, src/mtrie_conf.c, src/s_conf.c:
	  - more cleanup on new conf file parser..
	    using "auth" instead of "client" as per Kev's document..

2000-01-21 23:53  db

	* src/: ircd_lexer.l, ircd_parser.y, s_conf.c:
	  - preliminary serverinfo section done

2000-01-20 23:21  db

	* include/s_conf.h, src/ircd_parser.y, src/s_conf.c:
	  - CONNECT in new parser works, needs full testing

2000-01-17 21:12  db

	* src/: ircd_parser.y, oldparse.c, s_conf.c:
	  - added a few more sections

2000-01-17 17:41  db

	* src/ircd_parser.y:
	  - Added quarantine

2000-01-17 17:35  db

	* src/: class.c, ircd_parser.y, s_conf.c:
	  - continuing with new parser code... listen/operator tested

2000-01-16 22:21  db

	* include/class.h, include/config.h, include/config.h.dist,
	  include/m_commands.h, include/msg.h, include/numeric.h,
	  include/s_conf.h, src/Makefile.in, src/class.c, src/dline_conf.c,
	  src/m_trace.c, src/messages.tab, src/messages_cust.tab,
	  src/mtrie_conf.c, src/oldparse.c, src/s_conf.c, src/s_user.c:
	  - bunch of changes in order to have class names not numbers. *sigh*
	    I toyed with the idea of keeping class #'s and having class_names
	    to class #' mapping somewhere, but thats just getting silly..
	    sooo....  Here we are...

2000-01-16 17:49  db

	* include/class.h, include/list.h, src/class.c, src/list.c:
	  - make_class should return a 0'ed class to be safe

2000-01-16 17:27  db

	* include/class.h:
	  - prelim. change before I start on class names

2000-01-16 17:24  db

	* src/: ircd_lexer.l, ircd_parser.y:
	  - oper section complete except for class operations..

2000-01-16 17:16  db

	* include/s_conf.h, src/ircd_lexer.l, src/ircd_parser.y,
	  src/s_conf.c:
	  - checkpoint with operator section mostly working...
	    class code has to be rewritten still

2000-01-16 11:20  db

	* src/Makefile.in:
	  - oops. I changed Makefile rather than Makefile.in

2000-01-16 11:19  db

	* src/: ircd_lexer.l, ircd_parser.y, s_conf.c:
	  - copyright touch ups
	  - missing -ll in Makefile

2000-01-15 23:46  db

	* src/: ircd_lexer.l, ircd_parser.y:
	  - The lex/yacc files...

2000-01-15 23:35  db

	* include/s_conf.h, src/Makefile.in, src/s_conf.c:
	  - first very rough working lex/yacc under ircd-hybrid..
	    parser doesn't actually do anything.... yet...
	    Tom, we could use a fileio pushback, to push back a line thats
	    "not for us"

2000-01-15 17:46  db

	* include/s_conf.h, src/oldparse.c, src/s_conf.c:
	  - more cleanups to parse code

2000-01-13 20:17  db

	* src/oldparse.c:
	  - someone forgot to add a file. wonder who

2000-01-13 20:16  db

	* include/s_conf.h, src/Makefile.in, src/s_conf.c, src/send.c:
	  - externalized the old parser, unfortunately, this means a lot
	    more of the s_conf interface is visible ;-(, can do better in the
	    future...  This is in preparation for new parser inclusion.
	    This will (ick) allow us to use both old conf files and new format
	    conf files for backwards compatibility. (I'm not terribly happy
	    about this, but...  Hi Tom!)

2000-01-12 22:02  db

	* src/s_conf.c, tools/convertconf.c, tools/ircd.conf.new:
	  - returned to ';' at end of each section, this is actually easier to
	    recover from errors; just scan for ';'
	  - updated convertconf to produce test file
	  - added IP token to lexer and to client section

2000-01-11 23:05  db

	* tools/: convertconf.c, ircd.conf, ircd.conf.new:
	  - added DENY

2000-01-11 22:56  db

	* tools/: convertconf.c, ircd.conf, ircd.conf.new:
	  - more work on yacc/lex parser
	    added "kill" open to discussion, but efnet has "K" and "D" lines

2000-01-11 22:39  db

	* tools/: convertconf.c, ircd.conf, ircd.conf.new:
	  - changes to bring it into line with Kev's sample conf just a tiny
	  bit
	  - removed that dumb ';' at end of sections

2000-01-11 22:09  db

	* tools/: convertconf.c, ircd.conf.new:
	  - oops port in connect was quoted

2000-01-11 22:08  db

	* tools/: convertconf.c, ircd.conf, ircd.conf.new:
	  - more tiny tweaks

2000-01-11 21:34  db

	* tools/: convertconf.c, ircd.conf.new:
	  - tweaks to new conf format

2000-01-11 20:31  db

	* tools/: convertconf.c, ircd.conf, ircd.conf.new:
	  - sample ircd.conf and its converted ircd.conf.new

2000-01-11 17:55  db

	* tools/convertconf.c:
	  - Now pretty much handles a "normal" conf file.. output is
	    a "new" style conf format file, with details still to be hashed
	    out.  Do we want to handle multiple C/N's ? multiple H lines?
	    *sigh* yes Thats next, but not yet.

2000-01-10 23:02  db

	* tools/convertconf.c:
	  - tiny tweak much more to do

2000-01-10 22:08  db

	* tools/convertconf.c:
	  - Nearly done. TODO Finish off I lines (I line prefixes)
	    HUB or LEAF control set in old M line

2000-01-10 19:17  db

	* tools/: Makefile.in, convertconf.c:
	  - updated Makefile, fleshed out convertconf more

2000-01-10 18:20  db

	* src/s_conf.c:
	  - small cleanup to s_conf.c before the bigger one

2000-01-09 22:21  wnder

	* doc/technical/iauth.txt: woopsies

2000-01-09 22:19  wnder

	* doc/technical/iauth.txt: Added documentation of the iauth
	  protocol

2000-01-09 22:08  db

	* tools/convertconf.c:
	  - bit more fleshing out of convertconf.c

2000-01-09 21:41  db

	* tools/convertconf.c:
	  - first rough outline of conversion program to convert old style
	    to new style conf file format. No Makefile, incomplete still.

2000-01-09 17:44  db

	* src/: m_notice.c, m_privmsg.c:
	  - more cleanups, made consistent... no need for
	    MSG_PRIVMSG/MSG_NOTICE other m_ files don't do that

2000-01-09 17:39  db

	* src/: m_notice.c, m_privmsg.c:
	  - cleanups

2000-01-09 17:18  db

	* src/: m_mode.c, m_notice.c, m_privmsg.c:
	  - m_mode bursts/looks for channel mode on uplink in LazyLinks code

2000-01-09 15:17  db

	* src/: m_notice.c, m_privmsg.c:
	  - removed uneeded #include

2000-01-09 14:55  db

	* src/m_message.c:
	  - forgot to remove now unused m_message.c

2000-01-09 14:54  db

	* include/m_commands.h, include/msg.h, src/Makefile.in,
	  src/m_notice.c, src/m_privmsg.c:
	  - split m_privmsg and m_notice into two files. My rationale for
	    doing this is: slightly faster, no more if(notice) in code,
	    m_privmsg/m_notice rarely change anyway.

2000-01-09 14:28  db

	* src/s_conf.c:
	  - as fbgets is re-entrant, redid .include code. Much nicer

2000-01-08 23:52  db

	* include/config.h, src/ircd.c, src/m_list.c, src/s_serv.c:
	  - LazyLinks /list on leaf is sent to its uplink now
	  - still bug to track down with leaf connected to hub, hub joins net
	    leaf does not see channel bursts properly

2000-01-08 12:26  db

	* src/m_nick.c:
	  - still slowly working in LazyLinks version 2 code. nick collides
	    have to be handled by the LazyLinks uplink, for now sending back
	    KILL's (which were removed!) as needed...

2000-01-08 12:22  wnder

	* src/m_message.c: fixed missing #include "s_conf.h"

2000-01-07 23:25  db

	* src/send.c:
	  - sticky / key

2000-01-07 23:22  db

	* src/send.c:
	  - don't core if chptr == NULL in sendto_match_servs()
	    shouldn't normally ever happen, but does in LL

2000-01-07 22:17  db

	* include/s_serv.h, src/client.c, src/m_cburst.c, src/m_nick.c,
	  src/s_serv.c:
	  - closer version of LazyLinks version 2

2000-01-07 20:59  db

	* include/s_user.h, src/Makefile.in, src/m_message.c, src/m_nick.c,
	  src/m_user.c, src/s_serv.c, src/s_user.c:
	  - split out m_user.c m_nick.c, modified s_user.c s_user.h
	    Makefile.in LazyLinks is in unworkable state in this version.

2000-01-06 21:54  db

	* src/s_conf.c:
	  - fixed bug introduced in ReplaceQuotes, '\#' was not handled
	  correctly.

2000-01-05 23:37  db

	* include/m_commands.h:
	  - all over the place

2000-01-05 23:35  db

	* include/m_info.h:
	  - yet another hidden HUB in .h

2000-01-05 23:34  db

	* include/msg.h:
	  - removed more pesky #ifdef HUB hidden in .h files

2000-01-05 23:32  db

	* src/: ircd.c, s_conf.c, s_serv.c:
	  - always initialize serverMask

2000-01-05 22:31  db

	* src/: m_admin.c, s_conf.c:
	  - HUB removed, server determines if its HUB or LEAF by looking
	    at (Now unused) port line in M line. If its a 1, its a HUB, if
	    its missing or anything else, its a LEAF.
	    Can be queried from /admin
	    Yes, its a hack for now.

2000-01-05 22:19  db

	* include/channel.h, include/client.h, include/config.h,
	  include/config.h.dist, include/s_conf.h, include/s_serv.h,
	  src/channel.c, src/ircd.c, src/m_cburst.c, src/m_drop.c,
	  src/m_join.c, src/m_kline.c, src/m_lljoin.c, src/m_locops.c,
	  src/s_debug.c, src/s_serv.c, src/send.c:
	  - removed HUB from config.h etc. now in a config entry

2000-01-05 21:36  db

	* src/: channel.c, irc_string.c, s_user.c:
	  - allow single dot in user names to allow for "first.last" user name
	  style

2000-01-05 21:14  db

	* src/: m_cburst.c, m_drop.c:
	  - removed unneeded include

2000-01-05 21:10  db

	* src/m_lljoin.c:
	  - oops. missed comment in m_lljoin.c

2000-01-05 21:08  db

	* src/: m_drop.c, m_lljoin.c:
	  - oops. removed comments belonging to channel.c only

2000-01-05 21:05  db

	* src/: m_cburst.c, m_drop.c, m_lljoin.c:
	  - committing the split out m_cburst.c m_drop.c m_lljoin.c

2000-01-05 21:04  db

	* src/: Makefile.in, channel.c:
	  - split out m_drop.c m_cburst.c m_lljoin.c

2000-01-05 20:31  db

	* src/s_conf.c:
	  - further cleanups to s_conf.c

2000-01-05 20:21  db

	* src/s_conf.c:
	  - Further cleanups to s_conf.c

2000-01-05 18:49  db

	* src/s_conf.c:
	  - fixed missing Y line detection code which got broken in clean up

2000-01-05 17:57  db

	* include/channel.h, src/dbuf.c:
	  - cleanups to dbuf code. Try to flush connections if dbuf list is
	    empty then try to allocate.
	  - tiny start on new channel hierarchy scheme.

2000-01-04 17:04  db

	* src/s_conf.c:
	  - fixed DEBUG error in s_conf.c

2000-01-04 15:00  db

	* include/dbuf.h, src/dbuf.c, src/s_debug.c:
	  - also report how many malloc()'ed dbufs there were max

2000-01-04 14:17  db

	* doc/LazyLinks.as.implemented.txt, src/channel.c, src/m_join.c:
	  - changed slightly wording in LazyLinks As Implemented doc
	  - removed more DEBUGLL debug cruft
	  - simplified m_join CBURST call

2000-01-04 12:52  db

	* doc/LazyLinks.as.implemented.txt, src/channel.c:
	  - added "Lazy Links As Implemented in Hybrid" doc

2000-01-04 10:56  db

	* include/channel.h, include/client.h, include/config.h,
	  include/config.h.dist, include/list.h, include/m_info.h,
	  src/channel.c, src/m_sjoin.c, src/s_debug.c, src/s_user.c:
	  - removed more #ifdef's removed BAN_INFO BAN_UH

2000-01-03 23:44  db

	* include/config.h, include/config.h.dist, include/dbuf.h,
	  include/send.h, src/channel.c, src/dbuf.c, src/s_debug.c,
	  src/send.c:
	  - mods to try to flush connections if dbufs are used up

2000-01-03 20:02  db

	* src/channel.c:
	  - it all works now (LL). channel cleanup etc.

2000-01-03 19:37  db

	* src/: channel.c, client.c:
	  - this version doesn't core as often. *sigh*
	    cleanup channels code needs to be gone over again, its stable
	    without.
	  - removed some cruft and useless comments from client.c

2000-01-03 11:45  db

	* include/numeric.h:
	  - *sigh* code got lost in the shuffle
	    fix stats c so n lines show as n not N
	    fix spacing on 333 numeric to match others

2000-01-03 11:18  db

	* include/numeric.h:
	  - removed last vestige of TOPIC_WHO define

2000-01-03 11:16  db

	* src/ircd.c:
	  - fixed a typo in ircd.c

2000-01-03 02:13  db

	* include/channel.h, include/s_serv.h, src/channel.c, src/ircd.c,
	  src/s_serv.c:
	  - Folded in Perly's cleanup channel code. The idea is to remove
	    channels from the lazylinks leaf server if no local members are on
	    them and they haven't been used by anyone locally in a "while"
	    where "while" is set in s_serv.h CLEANUP_CHANNELS_TIME seconds.
	    I've redone the destroy channel code. It should work, but its
	    untested.  CLEANUP_CHANNELS_TIME is set way low still for
	    debugging, its currently 30 seconds. In production it could range
	    from 15 to 60 minutes I'd guess.

2000-01-02 21:03  db

	* src/channel.c:
	  - key handling was broken in m_cburst

2000-01-02 20:52  db

	* src/channel.c:
	  - oops got an if backwards key when NULL cores it

2000-01-02 19:44  db

	* src/s_serv.c:
	  - try to negotiate a non LL connect if serverMask's get all used up
	  - report all serverMask's used up. That will mean a recode ;-)

2000-01-02 19:33  db

	* src/: channel.c, m_join.c, s_serv.c:
	  - fixed a bug in m_join.c
	  - cleaned up LL channel key handling
	  - don't assign serverMask's to non LL servers

2000-01-02 17:35  db

	* doc/LazyLinks.txt, src/s_serv.c:
	  - added LazyLinks.txt document outlining original Lazy Links
	    protocol its been modified for -7
	  - ensure serverMask of 0 just causes restoreUnusedServerMask to
	  return

2000-01-02 17:11  db

	* include/m_commands.h, include/msg.h, src/channel.c, src/client.c,
	  src/m_join.c, src/m_part.c, src/parse.c, src/s_serv.c:
	  - First working Lazy Links implementation
	    still needs debugging/testing etc.

2000-01-02 09:32  db

	* src/m_userhost.c:
	  - bug reported by Colten Edwards in m_userhost.c

2000-01-02 02:44  db

	* src/m_sjoin.c:
	  - oops bogus code in m_sjoin.c

2000-01-02 02:42  db

	* src/: channel.c, m_sjoin.c, s_serv.c:
	  - few tidy ups in prelim LL code

2000-01-02 01:47  db

	* include/m_commands.h, include/msg.h, src/channel.c:
	  - implemented DROP, not tested, not used yet.

2000-01-02 00:34  db

	* include/channel.h, include/client.h, include/config.h,
	  include/config.h.dist, include/m_commands.h, include/msg.h,
	  include/s_conf.h, include/s_serv.h, src/channel.c, src/client.c,
	  src/ircd.c, src/m_capab.c, src/m_join.c, src/m_topic.c,
	  src/m_whois.c, src/s_bsd.c, src/s_conf.c, src/s_serv.c,
	  src/send.c:
	  - Preliminary rough cut at Lazy Links, still a lot of mopping up to
	    do 'n' in c/n's means try lazy link, 'N' means do normal.

2000-01-01 09:33  db

	* include/config.h, include/config.h.dist, src/class.c,
	  src/client.c, src/hash.c, src/m_error.c, src/m_pong.c,
	  src/parse.c, src/res.c, src/s_bsd.c, src/s_conf.c, src/s_serv.c,
	  src/send.c:
	  - Cleanups to allow DEBUGMODE to compile

2000-01-01 09:08  db

	* src/s_conf.c:
	  - cleanup of LITTLE_I_LINES #ifdef

2000-01-01 01:45  db

	* src/s_conf.c:
	  - renamed channel to GLobalChannelList in jupe channel code

2000-01-01 01:35  db

	* src/: m_stats.c, s_conf.c:
	  - more cleanup of s_conf.c

2000-01-01 01:22  db

	* src/s_conf.c:
	  - Preliminary cleanups on s_conf.c

1999-12-31 20:01  db

	* src/s_conf.c:
	  - missing NULL assignment would cause double free's and eventual
	    core on malformed U: lines.

1999-12-30 23:47  wnder

	* src/: ircd.c, s_bsd.c: more iauth fixups - this should finish it!

1999-12-30 23:37  wnder

	* src/Makefile.in, src/ircdauth.c, include/s_auth.h: IAuth fixups

1999-12-30 23:12  wnder

	* src/: s_auth.c, s_bsd.c, ircd.c, s_user.c: IAuth fixups

1999-12-30 22:50  db

	* src/channel.c:
	  - oopsies in opcount code spotted by Perly.. flag has to be used
	    before set...

1999-12-30 22:24  db

	* include/ircd.h, src/client.c, src/ircd.c, src/send.c:
	  - more missed updates local_cptr_list -> LocalClientList

1999-12-30 21:12  db

	* src/: m_sjoin.c, s_bsd.c:
	  - missed a opcount-- in m_sjoin.c
	  - missed an #endif for IAUTH

1999-12-30 19:23  db

	* include/channel.h, include/m_commands.h, include/msg.h,
	  src/channel.c, src/m_join.c, src/m_sjoin.c:
	  - Added chanop counter to Channel struct, keep track of current op
	    count use instead of that nasty loop in SJOIN code

1999-12-30 17:32  db

	* src/: res.c, s_auth.c, s_bsd.c, s_user.c:
	  - folding back in USE_IAUTH code

1999-12-30 15:52  db

	* src/: s_conf.c, s_debug.c:
	  - completion of mop up of resync with -6 tree. Compiles again

1999-12-30 15:50  db

	* src/list.c:
	  - mop up of resync of -7 with -6

1999-12-30 15:47  db

	* include/class.h:
	  - mop up -7 tree resync with -6

1999-12-30 15:35  db

	* include/blalloc.h, include/channel.h, include/class.h,
	  include/client.h, include/common.h, include/config.h,
	  include/config.h.dist, include/dbuf.h, include/defs.h,
	  include/dline_conf.h, include/fdlist.h, include/fileio.h,
	  include/flud.h, include/hash.h, include/irc_string.h,
	  include/ircd.h, include/ircd_defs.h, include/ircd_signal.h,
	  include/list.h, include/listener.h, include/m_commands.h,
	  include/m_gline.h, include/m_info.h, include/m_kline.h,
	  include/motd.h, include/msg.h, include/mtrie_conf.h,
	  include/numeric.h, include/oratime.h, include/packet.h,
	  include/parse.h, include/patchlevel.h, include/res.h,
	  include/restart.h, include/s_auth.h, include/s_bsd.h,
	  include/s_conf.h, include/s_debug.h, include/s_log.h,
	  include/s_misc.h, include/s_serv.h, include/s_stats.h,
	  include/s_user.h, include/s_zip.h, include/scache.h,
	  include/send.h, include/setup.h.in, include/sprintf_irc.h,
	  include/whowas.h, src/Makefile.in, src/blalloc.c, src/channel.c,
	  src/class.c, src/client.c, src/dbuf.c, src/dline_conf.c,
	  src/fdlist.c, src/fileio.c, src/flud.c, src/hash.c,
	  src/irc_string.c, src/ircd.c, src/ircd_signal.c, src/list.c,
	  src/listener.c, src/m_admin.c, src/m_away.c, src/m_capab.c,
	  src/m_close.c, src/m_connect.c, src/m_die.c, src/m_error.c,
	  src/m_gline.c, src/m_help.c, src/m_htm.c, src/m_info.c,
	  src/m_invite.c, src/m_ison.c, src/m_join.c, src/m_kick.c,
	  src/m_kill.c, src/m_kline.c, src/m_knock.c, src/m_links.c,
	  src/m_list.c, src/m_locops.c, src/m_ltrace.c, src/m_lusers.c,
	  src/m_message.c, src/m_mode.c, src/m_names.c, src/m_oper.c,
	  src/m_operwall.c, src/m_part.c, src/m_pass.c, src/m_ping.c,
	  src/m_pong.c, src/m_quit.c, src/m_rehash.c, src/m_restart.c,
	  src/m_server.c, src/m_set.c, src/m_sjoin.c, src/m_squit.c,
	  src/m_stats.c, src/m_svinfo.c, src/m_time.c, src/m_topic.c,
	  src/m_trace.c, src/m_unkline.c, src/m_userhost.c, src/m_users.c,
	  src/m_version.c, src/m_wallops.c, src/m_who.c, src/m_whois.c,
	  src/match.c, src/messages.tab, src/messages_cust.tab, src/motd.c,
	  src/mtrie_conf.c, src/numeric.c, src/oratime.c, src/packet.c,
	  src/parse.c, src/res.c, src/restart.c, src/s_auth.c, src/s_bsd.c,
	  src/s_conf.c, src/s_debug.c, src/s_log.c, src/s_misc.c,
	  src/s_serv.c, src/s_stats.c, src/s_user.c, src/s_zip.c,
	  src/scache.c, src/send.c, src/sprintf_irc.c, src/version.c.SH,
	  src/whowas.c: resync with current ircd-hybrid-6 tree

1999-12-17 22:35  db

	* src/: m_kline.c, res.c:
	  1) folded in d line fix from -6
	  2) folded in res.c core bug fix from -6

1999-11-09 23:23  db

	* include/send.h, src/channel.c, src/m_invite.c, src/m_knock.c,
	  src/m_message.c, src/m_userhost.c, src/send.c:
	  - changes to sendto_one_type to not send @# style of message to non
	    CHW servers
	  - m_userhost old behaviour restored, but rewritten. Need to support
	    up to 5 userhost requests, this fixes ircle clients which depend
	    on this behaviour.

1999-10-22 20:49  db

	* src/channel.c:
	  - disallow -ve limit on mode #channel +l

1999-10-17 14:40  db

	* src/dline_conf.c:
	  - missing mask check in IP kline code. no idea why.

1999-10-17 14:38  db

	* include/msg.h, src/client.c:
	  - removed (+) cruft as this was a Tanerism

1999-10-14 02:27  tomh

	* src/s_bsd.c: Removed CONNECTFAST garbage, it was causing
	  production boxes to load up on SYNs on the primary port and killing
	  poll performance.

1999-10-14 02:18  lusky

	* src/: m_ison.c, s_bsd.c: fixed m_ison to put trailing space on
	  303 responses CONNECTFAST is always defined for USE_POLL now, was
	    causing very poor accept performance on heavily loaded non-Solaris
	  machines using poll()

1999-10-14 02:12  tomh

	* include/setup.h.in: put USE_POLL back in setup.h.in, removed
	  stuff that wasn't needed

1999-10-14 00:02  lusky

	* include/config.h.dist: syncd config.h.dist to config.h

1999-10-14 00:00  wnder

	* include/ircdauth.h: missing macros

1999-10-13 22:49  lusky

	* opers.txt: updated opers.txt to include set log

1999-10-13 22:16  db

	* src/s_log.c:
	  - fixed misnomer

1999-10-13 22:01  db

	* src/s_log.c:
	  - corrected table in s_log.c for log level to string

1999-10-13 21:50  db

	* include/s_log.h, src/m_set.c, src/s_log.c:
	  - added strings to m_set LOG

1999-10-13 20:35  db

	* src/mtrie_conf.c, tools/fixklines.c:
	  - botched wild card matching fixed

1999-10-11 11:09  db

	* src/send.c:
	    It turns out, that cptr->fd is <0 in some cases when its being
	    used, just as Q described. I was confused at first, because it
	  sounded like he was saying cptr was =freed= then being used. It
	  appears its still a valid pointer, but its fd has been closed...

	    The ideal solution would be to make sure the cptr is removed from
	    the channel link list before the code even gets to
	  sendto_common_channels()

	    In any case, using an fd < 0 in this section is a BAD THING

1999-10-09 23:15  db

	* src/s_user.c:
	  - better fix for umode code

1999-09-25 12:53  db

	* src/s_user.c:
	  - simpler mode letter to bit mask table lookup, safer

1999-09-25 00:55  db

	* src/s_conf.c:
	  - yet another ->name instead of ->user this one in report_tklines

1999-09-24 19:23  db

	* src/s_user.c:
	  - This patch corrects a case where a normal user can oper
	  themselves. oops.
	  - It also corrects a possible core due to a bogus H or L line.
	  (neph)

1999-09-12 10:59  wnder

	* src/: ircdauth.c, s_bsd.c, s_user.c: IAuth updates:
	   * bug fix in iauth connection code
	   * register_user() has been replaced with:
	     GreetUser()            - for local clients
	     register_remote_user() - for remote clients
	     (all under #ifdef USE_IAUTH)

1999-09-11 22:01  tomh

	* src/send.c: add fd check to other #ifdef SENDQALWAYS

1999-09-11 00:54  tomh

	* src/send.c: types cleanup NOTE: the interface in s_zip.c is a
	  little borked, the length field should not be used to convey error
	  results

1999-09-11 00:38  tomh

	* include/s_conf.h, src/s_auth.c, src/s_bsd.c, src/s_conf.c: type
	  cleanups, remove bogus casts

1999-09-11 00:01  tomh

	* src/res.c, include/res.h: type cleanups

1999-09-10 22:59  tomh

	* src/s_bsd.c: change poll.h to sys/poll.h

1999-09-10 14:06  wnder

	* src/: ircdauth.c, s_bsd.c, s_user.c: IAuth changes:
	   * fully functional and tested: K, I, Q lines (D and G to come)
	   * non-blocking connect to IAuth server
	   * _every_ change i made is under #define USE_IAUTH

1999-09-10 02:51  tomh

	* src/parse.c: ewps make sentinel char* instead of void*

1999-09-10 02:47  tomh

	* src/parse.c: change (void*)1 to valid sentinel pointer

1999-09-10 02:34  tomh

	* src/parse.c: type fixes

1999-09-10 02:27  tomh

	* include/msg.h, src/irc_string.c, src/m_oper.c, src/m_sjoin.c:
	  cleanups

1999-09-10 02:08  tomh

	* src/: client.c, m_oper.c: missing header

1999-09-10 01:58  tomh

	* src/class.c: change return type for get_sendq, remove redundant
	  casts

1999-09-10 01:55  tomh

	* include/class.h: change return type for get_sendq

1999-09-10 01:48  tomh

	* src/m_oper.c: remove (char*)NULL casts, pointless

1999-09-10 01:45  tomh

	* src/m_oper.c: remove non-ansi prototype for crypt

1999-09-10 01:42  tomh

	* src/listener.c: change int to size_t in accept_connection

1999-09-10 01:38  tomh

	* include/channel.h: non-ansi prototype for sync_channels

1999-09-10 01:32  tomh

	* src/dline_conf.c: remove redundant initializer

1999-09-10 01:31  tomh

	* src/dline_conf.c: cleanup types, bug fix

1999-09-10 01:14  tomh

	* src/dbuf.c: replaced wrong type

1999-09-10 01:12  tomh

	* src/channel.c: remove misplaced cast

1999-09-10 01:04  tomh

	* src/: channel.c, class.c, client.c, list.c, s_conf.c: remove
	  inappropriate casts in MyFree, rename class c_class

1999-09-10 01:02  lusky

	* src/: m_kill.c, m_links.c: killpath fixes (jl) check for client
	  instead of connect in m_links

1999-09-10 00:57  tomh

	* src/channel.c: missing include

1999-09-10 00:55  tomh

	* src/blalloc.c: more type fixups

1999-09-10 00:52  tomh

	* src/packet.c: fix bug in dopacket return values

1999-09-09 23:53  tomh

	* src/blalloc.c: incorrect type usage

1999-09-09 23:40  tomh

	* include/: config.h, config.h.dist: removed non-ansi prototypes
	  for flud code from we need to review this sort of thing better, sigh

1999-09-09 22:15  tomh

	* src/client.c: add missing header

1999-09-09 09:58  wnder

	* Makefile.in: everything seems to be working again - just took out
	  iauth/ from Makefile

1999-09-09 09:40  wnder

	* include/s_auth.h: more #ifdef USE_IAUTH stuff

1999-09-09 09:38  wnder

	* src/: ircd.c, s_auth.c, s_bsd.c, s_user.c: Ok, sorry for the
	  broken compile - I put all the iauth code in the ircd tree under
	  #ifdef USE_IAUTH so hopefully nothing else will be affected until
	  it's good and ready - i'll do a checkout after this to make sure
	  everything's fine.

1999-09-08 23:22  lusky

	* src/: m_userhost.c, messages.tab, messages_cust.tab: fixes to
	  userhost, changed to -5 style

1999-09-08 15:23  wnder

	* src/: ircdauth.c, s_auth.c, s_bsd.c, s_user.c: IAuth changes:
	   * put dns and ident back into s_auth.c
	   * added kline check to iauth

1999-09-08 02:30  tomh

	* src/: client.c, dbuf.c, s_bsd.c, send.c: move dbuf cleanup to
	  free_client, fix send.c bug

1999-09-07 22:22  lusky

	* src/: channel.c, m_kill.c: killpath is now opers only +k/-k
	  compatiblity issues Makefile distclean cleanup for iauth

1999-09-07 02:53  tomh

	* src/packet.c: little logic fix

1999-09-07 02:20  tomh

	* src/dbuf.c: little logic tweaks

1999-09-07 00:43  tomh

	* include/packet.h, src/packet.c, src/s_bsd.c: read dbufs right
	  into client buffer

1999-09-06 19:11  db

	* src/channel.c:
	  - -k should remove key only if matching key or its a *
	    thats a bug.

1999-09-04 18:55  tomh

	* src/dbuf.c: change (start < end && IsEol(*start)) to (start <
	  end)

1999-09-03 21:16  tomh

	* src/dbuf.c: bug fix

1999-09-03 01:05  tomh

	* include/dbuf.h, include/packet.h, include/s_bsd.h, src/dbuf.c,
	  src/packet.c, src/s_bsd.c, src/s_debug.c, src/send.c: rewrite
	  dbuf.c

1999-09-02 23:10  wnder

	* src/ircdauth.c: test

1999-09-02 22:21  wnder

	* src/s_bsd.c: oops

1999-09-02 22:17  wnder

	* src/: Makefile.in, ircd.c, s_auth.c, s_bsd.c: ircd needs these
	  changes to work with iauth - as of right now, ircd attempts a
	  connection to 127.0.0.1 port 4444 where it expects the IAuth server
	  to be - you just need to run -7/iauth/source/iauth first so it
	  listens on 4444. In the future, the iauth host/port will be
	  dynamically configurable.

1999-09-02 22:12  wnder

	* src/ircdauth.c, include/ircdauth.h: ident support

1999-09-02 20:54  lusky

	* src/m_kline.c: added check for '#' in username and hostname of
	  /quote kline

1999-09-01 21:23  wnder

	* include/ircdauth.h: goes with ircdauth.c

1999-09-01 21:21  wnder

	* src/ircdauth.c: ircd module to allow communication with iauth

1999-09-01 21:11  wnder

	* configure: more iauth stuff

1999-09-01 21:10  wnder

	* Makefile.in: Changes to accomodate iauth

1999-09-01 01:09  tomh

	* include/client.h, include/dbuf.h, src/dbuf.c, src/s_debug.c:
	  cleanup dbuf interface, code will follow

1999-09-01 00:27  tomh

	* include/irc_string.h, include/ircd_defs.h, include/s_user.h,
	  src/Makefile.in, src/m_nick.c, src/m_user.c, src/s_user.c: break
	  out m_nick

1999-09-01 00:07  tomh

	* include/ircd_defs.h: Changed MyFree to automatically set the
	  pointer to zero after freeing it.  #define MyFree(x) do { if ((x)) {
	  free((x)); (x) = 0; } while (0) The assignment is cheap, and it
	  should eliminate double free issues.

1999-08-31 23:47  tomh

	* include/client.h, include/s_user.h, src/Makefile.in, src/ircd.c,
	  src/m_oper.c, src/s_user.c, src/send.c: break out m_user

1999-08-31 23:23  tomh

	* Makefile.in: use development CFLAGS, change for release

1999-08-31 15:57  wnder

	* include/send.h: standard gnu copyright

1999-08-31 15:43  wnder

	* src/match.c, include/irc_string.h: New macro: IsEol() which looks
	  for \r or \n characters

1999-08-31 00:34  db

	* src/s_conf.c:
	  - left over aconf->user gets freed twice, causing some malloc
	    packages to leave their lunch all over the disk.... NULL things
	    after every free silly... -db

1999-08-30 22:20  lusky

	* src/s_user.c: jk's umode +O fix

1999-08-26 23:36  lusky

	* include/config.h, include/config.h.dist, src/m_message.c: turned
	  on ANTI_DRONE_FLOOD by default sync'd config.h.dist include class.h
	  in m_message.c

1999-08-25 23:36  lusky

	* Hybrid-team, INSTALL, LICENSE, Makefile.in, README.FIRST,
	  README.small_nets, configure, opers.txt, doc/example.conf,
	  doc/simple.conf, include/channel.h, include/defs.h,
	  include/dline_conf.h, include/flud.h, include/patchlevel.h,
	  include/restart.h, include/s_misc.h, include/setup.h.in,
	  include/sprintf_irc.h, src/fileio.c, src/version.c.SH,
	  tools/Makefile.in, tools/README, tools/install_ircd,
	  tools/ircd_start.c, tools/klineParse.c: cleaned up
	  tools/Makefile.in added CVS Id tags to a many files

1999-08-25 23:13  db

	* src/s_conf.c:
	  - Don't be lazy *BAD* Diane, BAD BAD BAD

1999-08-25 22:58  db

	* src/: m_kill.c, motd.c, s_conf.c:
	  - fixed stupid in s_conf.c
	  - reconciled -7 with -6 tree

1999-08-22 02:33  tomh

	* include/hash.h: removed unused struct member

1999-08-22 02:30  tomh

	* include/client.h, include/hash.h, src/Makefile.in, src/hash.c,
	  src/m_hash.c, src/m_oper.c: break out m_hash from hash.c

1999-08-20 22:52  tomh

	* include/client.h, include/ircd.h, src/client.c, src/ircd.c,
	  src/m_ltrace.c, src/m_trace.c, src/s_user.c, src/send.c: client
	  struct rearangements

1999-08-20 01:21  tomh

	* include/channel.h, src/channel.c: fixups for missing stuff when
	  disabled features are turned on

1999-08-20 01:06  tomh

	* include/channel.h, src/channel.c, src/hash.c, src/m_names.c,
	  src/s_debug.c, src/s_serv.c: rename channel to GlobalChannelList

1999-08-20 00:46  tomh

	* src/m_join.c: little cleanups

1999-08-20 00:38  tomh

	* include/channel.h, src/Makefile.in, src/channel.c,
	  src/m_invite.c, src/m_kick.c, src/m_knock.c, src/m_list.c,
	  src/m_names.c, src/m_part.c, src/m_sjoin.c, src/m_topic.c: broke
	  out the rest of the commands from channel.c

1999-08-19 23:27  khuon

	* src/m_join.c: Added the missing include for common.h

1999-08-19 20:12  db

	* src/s_conf.c:
	  - cosmetic change, U lines without a password appear with * instead
	  of <NULL>

1999-08-19 03:08  tomh

	* src/: Makefile.in, channel.c, m_join.c: split out m_join.c

1999-08-19 03:06  tomh

	* include/: channel.h, msg.h: add new m_command (m_join), sort msg
	  strings

1999-08-19 02:25  tomh

	* src/: res.c, s_serv.c: call release_client_dns_reply for servers
	  too

1999-08-18 20:19  db

	* src/: s_conf.c, send.c:
	  - fixes for U and X lines

1999-08-18 18:59  db

	* src/: m_kill.c, m_kline.c, send.c:
	  - fixed compile errors with SLAVE_SERVERS
	  - fixed coring problem with SLAVE_SERVERS

1999-08-18 00:24  lusky

	* src/: client.c, s_conf.c: fixed LIMIT_UH and IDLE_CHECK which
	  were using old structs

1999-08-17 21:26  db

	* src/m_kill.c:
	  - Hide path on kill from "victim"
	  - Hide path on kill from oper to non opers

1999-08-17 01:46  tomh

	* src/res.c: bug fix for reverse dns mismatch

1999-08-17 00:17  tomh

	* src/res.c: clean up dn_expand result checks

1999-08-16 23:51  lusky

	* src/s_user.c: removed redundant "New highest connections" server
	  notice

1999-08-16 19:34  tomh

	* src/res.c: bullet proof resolver against bogus replies

1999-08-15 21:33  tomh

	* include/listener.h, src/ircd.c, src/listener.c, src/res.c,
	  src/s_debug.c: more fixes for memory counting

1999-08-15 14:38  tomh

	* src/: s_auth.c, s_debug.c, s_serv.c: fixup cryptic message,
	  remove XxxAccess

1999-08-15 14:37  tomh

	* include/client.h: removed FLAGS_CHKACCESS

1999-08-15 14:16  tomh

	* src/: client.c, s_debug.c: more memory count bug fixes, fix
	  SYSLOG_USERS bug

1999-08-15 06:44  tomh

	* src/: blalloc.c, channel.c, client.c, dbuf.c, list.c, res.c,
	  s_bsd.c, s_conf.c, s_debug.c, scache.c: cleanup memory counting
	  code, still more to do

1999-08-15 06:41  tomh

	* include/: blalloc.h, client.h, dbuf.h, list.h, s_bsd.h, s_conf.h,
	  scache.h: cleanup memory counting code

1999-08-14 02:46  tomh

	* src/s_bsd.c: remove redundant check

1999-08-13 23:49  tomh

	* src/packet.c: count fix

1999-08-12 23:55  tomh

	* src/: s_conf.c, s_serv.c: hash function fix

1999-08-11 23:59  lusky

	* src/: listener.c, m_rehash.c, m_svinfo.c, s_user.c: throttle
	  accept errors in listener.c oper motd rehash bug fix from perly
	  ensure that SERVER must come before SVINFO (jl) neglected to
	  detach_conf for umode -o (jl)

1999-08-11 21:30  tomh

	* src/send.c: fake direction bug fix

1999-08-11 00:59  tomh

	* src/s_bsd.c: removed unneeded include

1999-08-10 19:13  lusky

	* src/channel.c, tools/fixklines.c, tools/mkpasswd.c: fixed bug
	  with NO_JOIN_ON_SPLIT on a coldstart added include for stdlib.h to
	  mkpasswd.c moved rcs Id into comments in fixklines.c

1999-08-10 18:14  db

	* src/: messages.tab, messages_cust.tab:
	  - %lu screws up idle times as seen by a lot of scripts, notably
	  bitchx *sigh*

1999-08-10 07:26  db

	* src/m_whois.c:
	  - FLAGS_SPY was being checked against old flags, its now umodes
	  *sigh*

1999-08-09 19:01  db

	* src/: m_operwall.c, m_wallops.c, messages.tab:
	  - missed the user mode +b for bots
	  - applied neph's operwall/wallops pacing patch

1999-08-09 18:15  db

	* src/: m_kline.c, m_locops.c, messages.tab, messages_cust.tab,
	  send.c:
	  - fixes to allow SLAVE_SERVER to work
	  - RPL_MYINFO should report the user modes and channel modes
	    available we've added +x user mode and +d channel mode

1999-08-09 08:01  db

	* src/m_locops.c:
	  - missing #include breaks SLAVE_SERVERS

1999-08-06 13:59  sean

	* src/m_unkline.c: Diane's freaky patch

1999-08-06 00:09  db

	* src/s_conf.c:
	  - fixed rehash dump, would core on bad admin line

1999-08-05 23:17  db

	* src/s_user.c:
	  - user_mode allowed decrement of oper count even if client was not
	  opered to begin with

1999-08-05 22:43  db

	* include/client.h, src/s_user.c:
	  - botch in client.h, umodes were moved to umodes in client, forgot
	    to redefine the macros for SetInvisible etc. this broke remote
	    setting of +i on clients. major bug.

1999-08-05 17:44  db

	* src/messages.tab:
	  - bug in stats Q line found by Dustin Marquess (Jailbird)

1999-08-05 00:07  tomh

	* src/s_user.c: fix luser count bug

1999-08-04 23:40  db

	* src/m_unkline.c:
	  - fixed broken m_unkline.c it would unkline everything. duh

1999-08-04 21:01  db

	* src/dline_conf.c:
	  - fixes IP Klines not showing host

1999-08-04 00:45  db

	* include/s_log.h, src/m_set.c, src/s_conf.c, src/s_log.c:
	  - updated .depend
	  - added m_set for LOG

1999-08-03 18:49  db

	* src/channel.c:
	  - oops. USE_ALLOW_OP was never defined. use NO_CHANOPS_WHEN_SPLIT
	    instead This one has to go into the -6 tree before release as well.

1999-08-03 02:18  tomh

	* src/m_kill.c: missed a log thing in m_kill somehow

1999-08-02 21:47  tomh

	* src/version.c.SH: missed one

1999-08-02 21:41  tomh

	* src/: class.c, client.c, dbuf.c, dline_conf.c, flud.c, hash.c,
	  ircd.c, list.c, listener.c, m_gline.c, m_info.c, m_kline.c,
	  m_server.c, m_unkline.c, m_who.c, m_whois.c, mtrie_conf.c,
	  packet.c, parse.c: remove struct.h includes, new .depend

1999-08-02 21:16  tomh

	* include/client.h: removed unused data member from client struct

1999-08-02 21:14  tomh

	* src/: client.c, s_conf.c: changed 2 headed function calls,
	  removed unused data member in client struct

1999-08-02 19:36  db

	* src/: messages.tab, messages_cust.tab:
	  - goofed the 216 reply

1999-08-02 14:16  db

	* src/mtrie_conf.c:
	  - bug in mtrie_conf.c causing ~ klines not to work

1999-08-02 12:38  db

	* src/s_conf.c:
	  - major bug in s_conf.c to do with reading of kline.conf

	   CVS:

	  ----------------------------------------------------------------------

1999-08-02 07:46  db

	* include/list.h, include/struct.h, src/channel.c, src/class.c,
	  src/client.c, src/dline_conf.c, src/ircd.c, src/list.c,
	  src/m_gline.c, src/m_info.c, src/m_kline.c, src/m_oper.c,
	  src/m_unkline.c, src/m_who.c, src/m_whois.c, src/mtrie_conf.c,
	  src/packet.c, src/parse.c, src/res.c, src/restart.c,
	  src/s_auth.c, src/s_bsd.c, src/s_conf.c, src/s_debug.c,
	  src/s_misc.c, src/s_serv.c, src/s_user.c, src/s_zip.c,
	  src/scache.c, src/send.c, src/whowas.c:
	  - removed struct.h

1999-08-02 02:49  lusky

	* Hybrid-team, include/patchlevel.h, src/ircd.c: testing to see
	  that the serial number isn't jumping

1999-08-02 02:36  lusky

	* Hybrid-team, include/patchlevel.h: more ChangeLog testing.
	  should be live now

1999-08-02 02:25  lusky

	* Hybrid-team, include/patchlevel.h: played with formatting to test
	  ChangeLog script it's not in place yet, still testing

1999-08-02 00:27  tomh

	* include/client.h, include/config.h, include/m_info.h,
	  include/s_zip.h, src/client.c, src/ircd.c, src/packet.c,
	  src/s_bsd.c, src/s_debug.c, src/s_serv.c, src/s_zip.c,
	  src/send.c: turn on ZIP_LINKS permanently

1999-08-02 00:01  tomh

	* src/s_conf.c: bug fix

1999-08-01 22:34  tomh

	* configure: removed signal check from autoconf, we only support
	  POSIX signals

1999-08-01 22:07  tomh

	* src/s_serv.c: add missing definition for INADDR_NONE

1999-08-01 17:25  lusky

	* src/ircd.c: added a c/r to test committing

1999-08-01 17:24  lusky

	* include/patchlevel.h: looks good, have at it

1999-08-01 17:19  lusky

	* Hybrid-team, INSTALL, LICENSE, Makefile.in, README.FIRST,
	  README.small_nets, TODO, configure, opers.txt, doc/Makefile,
	  doc/Tao-of-IRC.940110, doc/blalloc.txt, doc/example.conf,
	  doc/example.conf.trillian, doc/mtrie.txt, doc/opermyth.txt,
	  doc/server-version-info, doc/simple.conf,
	  doc/technical/README.TSora, doc/technical/rfc1459.txt,
	  include/blalloc.h, include/channel.h, include/class.h,
	  include/client.h, include/common.h, include/config.h,
	  include/config.h.dist, include/dbuf.h, include/defs.h,
	  include/dline_conf.h, include/fdlist.h, include/fileio.h,
	  include/flud.h, include/hash.h, include/irc_string.h,
	  include/ircd.h, include/ircd_defs.h, include/ircd_signal.h,
	  include/list.h, include/listener.h, include/m_commands.h,
	  include/m_gline.h, include/m_info.h, include/m_kline.h,
	  include/motd.h, include/msg.h, include/mtrie_conf.h,
	  include/numeric.h, include/oratime.h, include/packet.h,
	  include/parse.h, include/patchlevel.h, include/res.h,
	  include/restart.h, include/s_auth.h, include/s_bsd.h,
	  include/s_conf.h, include/s_debug.h, include/s_log.h,
	  include/s_misc.h, include/s_serv.h, include/s_stats.h,
	  include/s_user.h, include/s_zip.h, include/scache.h,
	  include/send.h, include/setup.h.in, include/sprintf_irc.h,
	  include/struct.h, include/whowas.h, src/Makefile.in,
	  src/blalloc.c, src/channel.c, src/class.c, src/client.c,
	  src/dbuf.c, src/dline_conf.c, src/fdlist.c, src/fileio.c,
	  src/flud.c, src/hash.c, src/irc_string.c, src/ircd.c,
	  src/ircd_signal.c, src/list.c, src/listener.c, src/m_admin.c,
	  src/m_away.c, src/m_capab.c, src/m_close.c, src/m_connect.c,
	  src/m_die.c, src/m_error.c, src/m_gline.c, src/m_help.c,
	  src/m_htm.c, src/m_info.c, src/m_ison.c, src/m_kill.c,
	  src/m_kline.c, src/m_links.c, src/m_locops.c, src/m_ltrace.c,
	  src/m_lusers.c, src/m_message.c, src/m_mode.c, src/m_oper.c,
	  src/m_operwall.c, src/m_pass.c, src/m_ping.c, src/m_pong.c,
	  src/m_quit.c, src/m_rehash.c, src/m_restart.c, src/m_server.c,
	  src/m_set.c, src/m_squit.c, src/m_stats.c, src/m_svinfo.c,
	  src/m_time.c, src/m_trace.c, src/m_unkline.c, src/m_userhost.c,
	  src/m_users.c, src/m_version.c, src/m_wallops.c, src/m_who.c,
	  src/m_whois.c, src/match.c, src/messages.tab,
	  src/messages_cust.tab, src/motd.c, src/mtrie_conf.c,
	  src/numeric.c, src/oratime.c, src/packet.c, src/parse.c,
	  src/res.c, src/restart.c, src/s_auth.c, src/s_bsd.c,
	  src/s_conf.c, src/s_debug.c, src/s_log.c, src/s_misc.c,
	  src/s_serv.c, src/s_stats.c, src/s_user.c, src/s_zip.c,
	  src/scache.c, src/send.c, src/sprintf_irc.c, src/version.c.SH,
	  src/whowas.c, tools/Makefile.in, tools/README, tools/fixklines.c,
	  tools/install_ircd, tools/ircd_start.c, tools/klineParse.c,
	  tools/mkconf, tools/mkpasswd.c, tools/start_ircd.c,
	  tools/untabify, tools/viconf.c: Initial revision


version hybrid-6-current 26-Jun-1999 through 01-Aug-1999

1999/08/01 (tomh) - typos 
1999/08/01 (tomh) - setup_signals just before init_sys 
1999/08/01 (tomh) - remove uneeded checks in configure.in 
1999/08/01 (tomh) - move dbuf_init after init_sys 
1999/08/01 (tomh) - more getopt notes 
1999/08/01 (tomh) - more cleanups 
1999/08/01 (tomh) - misc cleanups 
1999/08/01 (tomh) - minor cleanups 
1999/08/01 (tomh) - log message cleanups 
1999/08/01 (tomh) - log m_dies 
1999/08/01 (tomh) - include getopt.h to avoid declaring extern. hopefully this should work - everywhere. Solaris has getopt. 
1999/08/01 (tomh) - cleanup startup code 
1999/08/01 (tomh) - bug fix to make -h work 
1999/08/01 (tomh) - bug fix 
1999/08/01 (tomh) - ackvi s_bsd.c bug fix 
1999/08/01 (lusky) - added missing define for INADDR_NONE 
1999/08/01 (db) - removed Makefile defines that aren't ready 
1999/08/01 (db) - oops misplaced parens 
1999/08/01 (db) - fixed compile error, getopt needs optarg declared extern. -   We should verify interface of getopt on other OS's notably solaris 
1999/07/31 (tomh) - split m_mode 
1999/07/31 (tomh) - sketch log interface 
1999/07/31 (tomh) - restart instead of exit on clock fail 
1999/07/31 (tomh) - new s_log, nothing there yet but soon 
1999/07/31 (tomh) - move sbrk memory stuff to ircd.c 
1999/07/31 (tomh) - move sbrk code to ircd.c 
1999/07/31 (tomh) - log code 
1999/07/31 (tomh) - header shuffle 
1999/07/31 (tomh) - header cleanups 
1999/07/31 (tomh) - bug fix 
1999/07/31 (tomh) - added include 
1999/07/31 (db) - server should not fork() if -s is used, it makes it very hard to debug 
1999/07/31 (db) - resolved cvs checkin conflict in s_user.c oops. removed m_kill which -   is now in m_kill.c 
1999/07/31 (db) - removed global kills of nick collides, let each server handle it itself 
1999/07/31 (db) - moved m_message/m_notice/m_private into m_message.c - moved more stuff from struct.h to m_message.c - rebuilt .depend 
1999/07/31 (db) - moved m_kill out of s_user.c 
1999/07/31 (db) - moved m_ison out of s_user.c - cleaned up m_ison - fixed botch in parse.c 
1999/07/31 (db) - moved MATCH defines from m_message.c into send.h, they are needed in send.c 
1999/07/31 (db) - m_userhost.c was so broken, rewritten ... it looks like it -   was recursively modified after the fact, with the original code left -   in taking up space.. in any case, it now only handles one target. 
1999/07/31 (db) - forgot to commit, sorry Tom 
1999/07/31 (db) - bug fixing. this is good. redid ip I lines, not using seans' version -   of add_ip_Iline yet. not until its thoroughly tested. SO, #if 0 out -   in dline_conf.c 
1999/07/30 (wnder) - cleanup, fixed a potential problem with the reason field 
1999/07/30 (tomh) - readd dns search, see if this fixes vhost probs 
1999/07/30 (tomh) - new m_command files 
1999/07/30 (tomh) - new files, header cleanups 
1999/07/30 (tomh) - moved stats stuff to stats module 
1999/07/30 (tomh) - moved stats stuff to separate module 
1999/07/30 (tomh) - more header cleanups 
1999/07/30 (tomh) - definitions for get_client_name 
1999/07/30 (db) - split userhost out of s_user.c, its soooo broken, but committed for now 
1999/07/30 (db) - split m_quit.c out - corrected m_set.c for NO_JOIN_ON_SPLIT cases 
1999/07/30 (db) - removed usrip - moved pieces of m_user.c into m_away.c, m_ison.c, m_oper.c m_ping.c m_pong.c 
1999/07/30 (db) - oops. fixed header on flud.c - send floodbot notices to +b not +r 
1999/07/30 (db) - oops 
1999/07/30 (db) - moved m_whois.c 
1999/07/30 (db) - moved m_who to m_who.c 
1999/07/30 (db) - moved ban struct from struct.h to channel.h 
1999/07/30 (db) - moved FLUD code from s_user.c into flud.c/flud.h 
1999/07/30 (db) - added proper header on flud.h 
1999/07/29 (tomh) - new m_commands 
1999/07/29 (tomh) - new .depend 
1999/07/29 (tomh) - fix connect to hubs?? 
1999/07/29 (tomh) - ewps missed one 
1999/07/29 (tomh) - conf_counter bug fix 
1999/07/29 (sean) - wow, needed that fix in more than one place. 
1999/07/29 (sean) - hopefully fixed that coredump problem.. - I think there was an if() outside of the -   for(cptr2 = serv_cptr_list; cptr2; cptr2 = cptr2->next_server_client) - loop referencing acptr. - someone verify that the logic makes sense there. 
1999/07/29 (sean) - fixed logic in m_trace to determine if we show someone's IP or not. 
1999/07/29 (sean) 
1999/07/29 (db) - removed UTMP and COMMA, no one was using them 
1999/07/29 (db) - fixed parse bug I introduced. *sigh* 
1999/07/28 (tomh) - update C/N line documentation 
1999/07/28 (tomh) - remove bsd.h, move deliver_it protoype to s_bsd.h 
1999/07/28 (tomh) - rearrangements 
1999/07/28 (tomh) - new files 
1999/07/28 (tomh) - new file, rearrangements 
1999/07/28 (tomh) - new .depend 
1999/07/28 (tomh) - move deliver_it to s_bsd.c, remove bsd.c, support.c 
1999/07/28 (tomh) - messages cleanup 
1999/07/28 (tomh) - little cleanups 
1999/07/28 (tomh) - fix compile warning 
1999/07/28 (tomh) - Move programming error checks to asserts. Just return the string for release. 
1999/07/28 (tomh) - Finish net cleanup of connects (mostly). - NOTE: Please check this carefully to make sure it still works right. - The original code was entirely too twisted to be sure I got everything right. 
1999/07/28 (tomh) - Finish cleanup of net connect code. - NOTE: Please check this carefully to make sure everything still works correctly. - The original code was entirely too twisted to be sure I've gotten everthing - right. Please read the new notes in the example.conf file for conf line rules. 
1999/07/28 (db) - removed find_channel() in channel.c, use hash_find_channel. -   gosh. hash code hasn't been experimental in years. 
1999/07/28 (db) - moved prototype into list.h from channel.c 
1999/07/27 (wnder) - Channel ban memory usage was being way undercalculated for stats Z - - never took the length of the banmask into account. 
1999/07/27 (tomh) - move try_connections to s_serv.c 
1999/07/27 (tomh) - more connect cleanups 
1999/07/27 (tomh) - more cleanups of connect 
1999/07/27 (tomh) - cleanup connect stuff, comments 
1999/07/27 (db) - set num_bed = 0 when all bans/exceptions/denies are cleared out 
1999/07/27 (db) - removed USE_FD_ALLOC - fixed typo 
1999/07/27 (db) - redid escape code, hmmm why do we need this? :-) 
1999/07/27 (db) - missing colon in an H line =really= shouldn't core the server. - bad Diane. bad bad bad. no cookie for you. 
1999/07/27 (db) - many changes to account for denies - integrated deny code in with already present ban/exception code - added function to free all bed's - forgot to subtract one from bed_count when removing a +e due to kick - quietly ignore error in removing empty channels 
1999/07/27 (db) - don't forget to decrement num_bed when deleting ban entries. -   Bad Sean. bad bad bad. no cookies for you, straight to bed! 
1999/07/26 (tomh) - new functions for s_conf cleaning up connect 
1999/07/26 (tomh) - new file new .depend 
1999/07/26 (tomh) - cleanup some conf stuff dealing with connects 
1999/07/26 (sean) - priorities were a bit twisted in is_banned() 
1999/07/26 (sean) - fixed weirdness with +d.. once servers are all updated, can remove the hack perhaps?.  did the same thing as +e does (mbuf_new, pbuf_new  --> mbuf_newer, pbuf_newer) 
1999/07/26 (db) - use prototype already present in s_misc.h 
1999/07/25 (tomh) - update .depend 
1999/07/25 (tomh) - untangle m_commands 
1999/07/25 (tomh) - new file m_pass start untangling m_server 
1999/07/25 (tomh) - more header cleanups 
1999/07/25 (tomh) - bit of header cleanups 
1999/07/25 (tomh) - bit of header cleanup 
1999/07/25 (sean) - not needed 
1999/07/25 (sean) - fixed an oversight. 
1999/07/25 (sean) - changed +d behaviour to something more feasible... matches bans on user's gecos field.. like Xlines for a channel. 
1999/07/25 (db) - test of parse.c changes 
1999/07/25 (db) - some parse cleanups 
1999/07/25 (db) - moved whowas definitions from struct.h into whowas.h - optimized and verified parse.c changes - attempted correction on I line botch - updated .depend JIC 
1999/07/25 (db) - moved gline defs from struct.h to m_gline.h 
1999/07/25 (db) - moved aConfItem defs from struct.h to s_conf.h 
1999/07/25 (db) - interim commit of parse.c cleanups, more to come 
1999/07/25 (db) - fixed parse code 
1999/07/25 (db) - added ORATIMING to parsetest 
1999/07/24 (wnder) - removed obsolete #ifdef for NO_LOCAL_KLINE 
1999/07/24 (wnder) - removed #ifdef for obsolete R_LINES (CONF_RESTRICT as well). 
1999/07/24 (tomh) - put sbrk back in, fixup includes to get tree to build 
1999/07/24 (tomh) - new .depend just in case 
1999/07/24 (tomh) - cleanup fdlist code a bit 
1999/07/24 (tomh) - cleanup fdlist code 
1999/07/24 (tomh) - cleanup debug a little 
1999/07/24 (tomh) - cleanup compile warning: parse.c:183: warning: numeric might be used uninitialized in this function 
1999/07/24 (tomh) - cleanup IsMe in poll/select loops 
1999/07/24 (tomh) - changed timeofday and NOW to CurrentTime 
1999/07/24 (tomh) - attempt to fix memory usage reporting for sbrk calls, still needs work?? 
1999/07/24 (tomh) - added missing # 
1999/07/24 (sean) - partially trust remote servers.. allow them to set more than 25 bans, dont let local clients exceed the limit. - don't check regex validity if introduced by another server, only check up on users 
1999/07/24 (sean) - made +d insensitive... (case insensitive, not cold-hearted) 
1999/07/24 (sean) - alrighty what did I do? - undid the "trusting" or servers in add_banid/add_exceptionid since this causes duplicate bans on channels after a split+rejoin - finished add_denyid. this is case sensitive. - modified is_banned() to check for +d stuff as well.. precedence is now +b, +d, +e (+e overrides +b and +d). - added num_bed to channel structure to track total number of bans+exceptions+denies on the channel instead of counting each time 
1999/07/24 (sean) - added num_bed to structure to count total bans/exceptions/denies 
1999/07/24 (sean) 
1999/07/24 (db) - simple optimization in numeric handling 
1999/07/24 (db) - further simplification 
1999/07/23 (wnder) - m_info.c is much much cleaner now. added m_info.h dependency to .depend. 
1999/07/23 (wnder) - branches:  1.1.2; - file m_info.h was initially added on branch 1.27. 
1999/07/23 (wnder) - Totally redid m_info.c - all the ugly #ifdef stuff removed. m_info.h - now contains an array with all the information. 
1999/07/23 (wnder) - Sean's info wasn't lined up with the rest of us :-) 
1999/07/23 (wnder) -  Rewrote m_info.c - got rid of all the ugly #ifdef stuff. m_info.h - is much cleaner. 
1999/07/23 (tomh) - trivial dependency tweaks 
1999/07/23 (tomh) - remove unneeded include, update .depend 
1999/07/23 (tomh) - remove sbrk, replace with get_maxrss 
1999/07/23 (tomh) - include channel.h first 
1999/07/23 (tomh) - cleanup signals, remove unused header 
1999/07/23 (tomh) - cleanup signal code 
1999/07/23 (tomh) - analyze and fixup dependencies 
1999/07/23 (sean) - new capab DE (channel mode +d : CAP_DE) 
1999/07/23 (sean) - modularized regular expresison handling.. more on this later 
1999/07/23 (sean) - further modified to enable +d.  still no regex checking as of yet. - only pass +d modes on to capable servers. 
1999/07/23 (sean) - channel +d work. 
1999/07/23 (sean) - added channel mode +d (straight copy of +b code) - no parsing yet in is_banned().. coming soon. - (this is the regular expression deny mode by the way) - I'm possibly going to do mode +a to perform the same function as +e does to +b. 
1999/07/23 (db) - yet more cleanups in the wonderful world of includes 
1999/07/23 (db) - use definitions in channel.h 
1999/07/23 (db) - the wicked witch is dead. h.h is no more - removed s_numeric.c its silly to put a small function like that into one file -   and its only used in parse.c 
1999/07/23 (db) - more include fun 
1999/07/23 (db) - more include file fixes 
1999/07/23 (db) - more include cleanups 
1999/07/23 (db) - last bit of fixes 
1999/07/23 (db) - include file fixes 
1999/07/23 (db) - fixed headers here 
1999/07/23 (db) - couple more include fixes 
1999/07/23 (db) - cleaned up missing includes defines in NO_JOIN_ON_SPLIT 
1999/07/23 (db) - channel.c needs config.h - moved externs from s_user.c into channel.h - made whowas variable static 
1999/07/23 (db) - There is no more  RFC1035_ANAL 
1999/07/22 (tomh) - work on socket code 
1999/07/22 (tomh) - rename FLUSH_BUFFER to CLIENT_EXITED 
1999/07/22 (tomh) - removed redundant check 
1999/07/22 (tomh) - cleanup socket code 
1999/07/22 (tomh) - cleanup compile warnings 
1999/07/22 (tomh) - bug fix 
1999/07/22 (tomh) - added username hostname attributes 
1999/07/22 (tomh) - added new attributes for username and hostname checks and rewrote check - functions. - NOTE: please check the policy for user chars in match.c, I was a bit more - restrictive than the original code, it allowed "#%&'()+/ in usernames - the table does not. If you don't want this, just add USER_C to those entries. 
1999/07/22 (tomh) - add missing include for list.h 
1999/07/22 (tomh) - add SideWnders configuration changes 
1999/07/22 (db) - trust what servers throw at us when bans/exceptions are added to channels 
1999/07/22 (db) - s_rehash should always be defined no? - instead of calling is_chan_op() has_voice() separately, return both found -   bits at once using user_channel_mode(), this is a slight win -   for  m_whois(), set_mode() 
1999/07/22 (db) - oops forgot s_misc.h parse.h - other cleanups 
1999/07/22 (db) - moving globals from inside the .c into the .h 
1999/07/22 (db) - moved channel definitions from struct.h to channel.h 
1999/07/22 (db) - moved a pile of defs from h.h into ircd.h s_bsd.h channel.h s_misc.h 
1999/07/22 (db) - just about done 
1999/07/22 (db) - even more cleanups and move of stuff from h.h 
1999/07/22 (db) - built m_gline.h, scache.h , moved more stuff from h.h - 	1.27: 1.1.0.2 
1999/07/22 (db) - built m_gline.h, scache.h , moved more stuff from h.h 
1999/07/22 (db) - added user_channel_mode, lookup the users mode once instead -   of several times 
1999/07/21 (tomh) - untabify headers 
1999/07/21 (tomh) - untabified code 
1999/07/21 (tomh) - little perl thing to untabify code 
1999/07/21 (sean) - removed oper notification messages for blocking list... if this is ever suspected to be abusable, we can add the notifications again.. for now, I dont see the point. 
1999/07/21 (sean) - provisions for blocking list w/ resume 
1999/07/21 (sean) - lock out all other commands while /list is blocked. 
1999/07/21 (sean) - blocking list code 
1999/07/21 (db) - you guessed it, more cleanups. removed undefined function that had -   a prototype in h.h cool 
1999/07/21 (db) - yet more h.h cleanups, the nightmare that never ends 
1999/07/21 (db) - yet more cleanups of h.h, removed a completely undefined reference yum. 
1999/07/21 (db) - updated .depend 
1999/07/21 (db) - untabified send.c for sean (Hi Sean!) 
1999/07/21 (db) - this animal is dying, (h.h) 
1999/07/21 (db) - removed bad_tld completely, reworked m_gline.c m_kline.c (sidewnder) 
1999/07/21 (db) - oops 
1999/07/21 (db) - more prototype and header fixing, added s_user.h 
1999/07/21 (db) - more h.h pruning 
1999/07/21 (db) - more cleanups 
1999/07/21 (db) - made a function static, removed from h.h 
1999/07/21 (db) - found missing entry in ChatAttr table '`' 
1999/07/21 (db) - cleaned up auto conn freq code 
1999/07/21 (db) - check for minimum connect frequency if < 300 default to 300 - if not valid_hostname give user the sockhost as their hostname, whine -   gently to the user. 
1999/07/21 (db) - added sidewnders m_kline.c changes for wild card prevention 
1999/07/21 (db) - added a very primitive program for checking CharAttr table 
1999/07/21 (db) - I'm beginning to hate this file 
1999/07/20 (tomh) - rewrote clean_channelname, rename check_channel_name 
1999/07/20 (tomh) - new char macros 
1999/07/20 (tomh) - new char attrs 
1999/07/20 (tomh) - more cleanups 
1999/07/20 (tomh) - cleanup socket code 
1999/07/20 (tomh) - cleanup IsAscii 
1999/07/20 (tomh) - cleanup 
1999/07/20 (sean) - working on /list 
1999/07/20 (sean) - who calls me "good" anymore? 
1999/07/20 (sean) - learning how to read... 
1999/07/20 (sean) - hash_get_channel_block() added so that we can get our fingers into the tables from outside of hash.c 
1999/07/20 (sean) - hash_get_channel_block() 
1999/07/20 (sean) - fixed sign issues 
1999/07/20 (sean) - fixed diane's fixes.  Do we ever try to make before we commit ;) 
1999/07/20 (sean) - added fields listprogress and listprogress2, and FLAGS2_SENDQ_POP.  This /list bitch shall yield to me!!! I swear it! 
1999/07/20 (db) - use valid channel char macros 
1999/07/20 (db) - oops should have been sptr not cptr 
1999/07/20 (db) - moved oper flags back into umodes - added prelim reporting of server joins to network 
1999/07/20 (db) - moved getfield from parse.c to s_conf.c which is the only place its used - removed duplicate prototype from h.h , it was in dline_conf.h already - send.c needs s_zip.h included to know about ziplinks 
1999/07/20 (db) - more removal of stuff from h.h 
1999/07/20 (db) - more moving of stuff from h.h, added s_zip.h 
1999/07/20 (db) - more cleanups from h.h 
1999/07/20 (db) - more cleanups 
1999/07/20 (db) - drone flooders should also be under flags +b BOTS 
1999/07/20 (db) - added user mode +b, opers have been asking for this, so they -   don't need to watch rejected clients just to see bots, FLUDBOTS too 
1999/07/20 (db) - added umode +x for watching eXternal server introductions 
1999/07/19 (tomh) - fixed off by one in CharAttrs 
1999/07/19 (tomh) - fix errno stuff 
1999/07/19 (tomh) - changed prototype for _getlong 
1999/07/19 (tomh) - added _getshort and _getlong protos 
1999/07/19 (tomh) - add res_ourserver from bind 8.3 for systems without it (bind 4.x) 
1999/07/19 (tomh) - ack solaris fix for FIONBIO which should be removed anyway 
1999/07/19 (tomh) - Work on char attributes for nick names, changed isvalid macro - Const correctness changes - Fixed file close bug on successful read - Header cleanups - Checked all usage of sprintf_irc for correctness, added terms where needed 
1999/07/19 (tomh) - Work on char attributes for nick names, changed isvalid macro - Const correctness changes - Fixed file close bug on successful read - Header cleanups - Checked all strncpy_irc usage added terminations where needed 
1999/07/19 (tomh) 
1999/07/19 (db) - removed MyFludConnect, it can be safely replaced with MyConnect 
1999/07/19 (db) - local oper deopering should be removed from oper link lists, and fdlist - adjust Count.oper when deopering 
1999/07/19 (db) - interim checkpoint - rewritten pieces of u_mode handling, because oper flags are no -   longer in the same flags as the settable flags, special case code -   will have to be added to send those modes on to the next server. -   Thats next. 
1999/07/19 (db) - first working code with new umodes 
1999/07/19 (db) - cool. remote opers are flagged using lower case o, not upper case 
1999/07/19 (db) - bitmask clash in client.h meant everyone was oper fun. - adding remote oper mode code 
1999/07/19 (db) - added obvious speed up test in m_mode 
1999/07/18 (tomh) - remove strncpyzt and cleanups 
1999/07/18 (tomh) - new reference file 
1999/07/18 (tomh) - header cleanups 
1999/07/18 (tomh) - fixed broken poll code 
1999/07/18 (tomh) - cleanup compile warnings 
1999/07/18 (tomh) - changed strncpy to strncpy_irc 
1999/07/18 (tomh) - added new tests 
1999/07/18 (tomh) - added me and Neph (only got his nick sorry) 
1999/07/18 (tomh) - add new file 
1999/07/18 (db) - yet more include file cleanups 
1999/07/18 (db) - yet more header cleanups 
1999/07/18 (db) - yet more h.h cleanups - removed duplicate prototype from h.h for off_history() - moved initwhowas() into whowas.h - added #include "whowas.h" to s_user.c client.c ircd.c 
1999/07/18 (db) - updated the Hybrid-team file. blah. I'm not a writer. 
1999/07/18 (db) - removed last vestiges of references to sys.h in tools dir - gave up. its now ircd-hybrid-6-current for a while, rely on serno.h for now 
1999/07/18 (db) - removed 0xDF hack replaced with tolower() macro - removed <string.h> include added irc_string.h include 
1999/07/18 (db) - re-arranged oper_flags, they now have their own int to play in 
1999/07/18 (db) - prettied up shows_ports - fixes in s_err.h s_err.c for those dumb client writers 
1999/07/18 (db) - moved restart code from ircd.c to restart.c (neph) 
1999/07/18 (db) - more header cleanups 
1999/07/18 (db) - more cleanups. show_servers only used by s_serv.c moved from s_misc.c -   to s_serv.c 
1999/07/18 (db) - more cleanups on h.h, - removed functions not even defined anymore, such as find_service... - moved channel definitons into channel.h where they belong 
1999/07/18 (db) - major changes to get rid of sendto_realops_lev - still bug in m_umode code oops. 
1999/07/18 (db) - interim checkpoint - sendto_ops_lev is gone now, replaced with sendto_ops_flags - still bug to fix, clients can set themselves +os . oops. 
1999/07/18 (db) - forgot listener name on stats P , oops 
1999/07/18 (db) - fixed missing whowas.h include in channel.c - added sendto_ops_flags sendto_realops_flags in preparation for -   removal of sendto_ops_lev and sendto_realops_lev. I've been meaning -   to do this one for ages. 
1999/07/18 (db) - fixed missing irccmp in s_serv.c - m_umode is still in a mess, but handles properly oper flags -   +s +w +k etc. does not understand local/remote Oper or +i yet 
1999/07/18 (db) - as pointed out by bleep, strncasecmp, strcasecmp aren't portable. -   changed all cases to use irccmp or ircncmp 
1999/07/18 (db) - added neph|l|m and bleep to version.c.SH and Hybrid-Team 
1999/07/18 (db) - added /stats P, I hate making it case sensitive, but its the logical place. -   deal. - hacked a prototype problem for now. *cough* in channel.h 
1999/07/18 (db) - a few more header cleanups - motd.c included channel.h, no need 
1999/07/17 (tomh) - remove conf from listeners 
1999/07/17 (tomh) - cleanup osdep stuff 
1999/07/17 (tomh) - build error fixes 
1999/07/17 (db) - viconf.c was broken for viklines form, copied most of the lockfile -   code from m_kline.c 
1999/07/17 (db) - unopered client doing stats o cored server. ooops. 
1999/07/17 (db) - rodder's fix + mine for get_client_name 
1999/07/17 (db) - removing sys.h and testing as I go.. hi ho... 
1999/07/17 (db) - removed sbrk() in ircd.c and s_debug.c -   still needs cleanup 
1999/07/17 (db) - removed now unused sys.h 
1999/07/17 (db) - remoeved a few obsolete Debug's 
1999/07/17 (db) - reconciled config.h.dist with config.h 
1999/07/17 (db) - passwd is a pointer to a "" not NULL when there is no passwd 
1999/07/17 (db) - oops missed dline_conf.c for removing sys.h 
1999/07/17 (db) - my bad. - fixed prototype in s_conf.h - fixed typo of password for passwd in s_conf.c 
1999/07/17 (db) - moved write_pidfile from s_bsd.c to ircd.c where it belongs - made it static.. These people were on crack. - removed a bunch of redundant defines in config.h/config.h.dist reconciled -   names in ircd.c to use only one #define not two - ditto with viconf.c which needs more work still 
1999/07/17 (db) - moved show_opers from s_misc.c to s_serv.c which is the only place it -   was being referenced from in the first place. duh. 
1999/07/17 (db) - more include fixes 
1999/07/17 (db) - merge collision, put back new P line handling 
1999/07/17 (db) - interim commit/checkpoint - cleaning up includes for dbuf - redid memory reporting slightly, still more to do - added new function to count memory usage in blalloc.c, not used yet! 
1999/07/17 (db) - forgot to add m_kline.h 
1999/07/17 (db) - fixed prototype for safe_write() 
1999/07/17 (db) - fixed const char * problem in m_unkline.c 
1999/07/17 (db) - fixed #includes 
1999/07/17 (db) - corrected type casting problems, mainly const char * - moved prototype for safe_write into s_conf.h 
1999/07/17 (db) - corrected const char 
1999/07/17 (db) - committed sidewnders changes to kline file handling -   we'll have to clean this up - committed listener P line change code in s_conf.c 
1999/07/17 (db) - added more memory count debug info to s_debug.c - removed some unused variables in viconf.c 
1999/07/17 (db) - added code to s_debug to report memory used by remote/local clients - ditto to client.c 
1999/07/17 (db) - added FLUD memory reporting - properly #ifdef'ed FLUD in list.c 
1999/07/16 (tomh) - yet another 
1999/07/16 (tomh) - unlink/relink P:line in rehash 
1999/07/16 (tomh) - undo change to Makefile.in 
1999/07/16 (tomh) - new test file 
1999/07/16 (tomh) - feh, removed extra -DNDEBUG 
1999/07/16 (tomh) - bah, C++ comments 
1999/07/16 (db) - rename some function names to make function clearer - moved prototypes into headers - made some functions static - added some needed comments 
1999/07/16 (db) - removed #ifdef HAVE_GET_RUSAGE, it still needs to be removed from configure - removed some debug counters that weren't terribly useful - always enabled stats r even without DEBUGMODE - moved prototype for send_usage() into s_debug.h 
1999/07/16 (db) - optimized get_conf_name - replaced char * with const char * for filename 
1999/07/16 (db) - more cleanups - removed unused function in FLUD code 
1999/07/16 (db) - how did this not get committed? Anyway, do not look at the class -   for a P line, do not add it to the conf item 
1999/07/16 (db) - fix for /stats H, its been broken for some time apparently ;-( - removed some old comments - changed a function to a static 
1999/07/16 (db) - even more cleanups. moved prototype from h.h to s_conf.h 
1999/07/16 (db) - cleaned up dline_conf.h, s_conf.c was not using prototypes from header 
1999/07/16 (db) - 1024 should be PATH_MAX , 1024 is a remnant of the original mess in m_kline 
1999/07/15 (tomh) - removed extra free_class in free_conf 
1999/07/15 (tomh) - bug fix 
1999/07/15 (tomh) - add listener code, cleanup of other stuff 
1999/07/15 (db) - use %d in "was connected for %d seconds" strings etc. instead of %lu 
1999/07/15 (db) - redid m_kline, moved conf file writing from m_kline into s_conf.c -   thus "hiding" the details of where the kline gets written.. -   Temporarily removed Shadowfax's LOCKFILE code until this settles down. 
1999/07/15 (db) - freeing local instead of remote 
1999/07/15 (db) - fixed core bug in m_kline.c, probably should add extra sanity test there -   REDUNDANT_KLINES was using aconf->name instead of aconf->user - cleaning up conf file generation etc. 
1999/07/15 (db) - don't delete .depend file on distclean 
1999/07/15 (db) - committed changes for SideWnder - removed older varargs check 
1999/07/15 (db) - added conf_connect_allowed() 
1999/07/15 (db) - #include <string.h> needed for memset() 
1999/07/14 (db) - rewrote send.c to use undernet sprintf_irc, - redid any %ld as %lu to take advantage of new sprintf_irc code - yes, I know it needs a prototype 
1999/07/14 (db) - oopsies... thought I had removed ircsprintf.c/ircsprintf.o 
1999/07/14 (db) - added header file for sprintf_irc 
1999/07/13 (tomh) - new file work in progress, cleanup s_bsd a little 
1999/07/13 (tomh) - cleanup error handling in s_bsd, work on listener in progress 
1999/07/13 (tomh) - cleaned up DEBUGMODE for hash_find_server 
1999/07/13 (tomh) - GPL + copyright for fileio.h 
1999/07/13 (db) - removed ircsprintf() - added undernet's sprintf_irc, renamed entry point to ircsprintf() - modified sprintf() to use ircsprintf() where possible 
1999/07/13 (db) - oops. had a missing continue in sprintf_irc.c 
1999/07/13 (db) - couple of cleanups, removed BOOT_QUICK BOOT_OPER, moved -   send() definitions from struct.h to send.h 
1999/07/13 (db) - cleaned up conf file handling, handled by read_conf_files() 
1999/07/13 (db) - bug in opers@server code fixed 
1999/07/12 (tomh) - removed log file as a client, BOOT_INETD BOOT_AUTODIE, cleanup rcs tags 
1999/07/12 (tomh) - removed log as client, BOOT_INETD, BOOT_AUTODIE, cleanup rcs tags 
1999/07/12 (tomh) - couldn't resist, more hash cleanups 
1999/07/12 (tomh) - cleanup hash code 
1999/07/12 (tomh) - clean up hash code 
1999/07/12 (tomh) - ackls I'm done now, I promise ;-) 
1999/07/12 (db) - unfortunately, EFnet still likes hostmasked servers... and this particular -   ugly mess of code is somewhat necessary to handle hostmasking. ick. -   Perhaps, it could be rewritten to be less offensive, but for now... 
1999/07/12 (db) - remoed unused variable - moved isbot to local part of client 
1999/07/12 (db) - only do bot checks on locally connecting clients 
1999/07/11 (tomh) - sockhost cleanup and a lot of other stuff 
1999/07/11 (tomh) - removed flush_cache, it was wrong and not needed 
1999/07/11 (tomh) - removed flush_cache 
1999/07/11 (tomh) - new file 
1999/07/11 (tomh) - included config.h here 
1999/07/11 (tomh) - fixed wrong name 
1999/07/11 (tomh) - fixed hostname copy bug 
1999/07/11 (tomh) - client.c 
1999/07/11 (tomh) - cleanup 
1999/07/11 (tomh) - changed depend target in makefile, minor bug fix in motd.c 
1999/07/11 (tomh) - changed .depend include, added prebuilt dependency file 
1999/07/11 (tomh) - bug fix 
1999/07/11 (tomh) - added assert.h 
1999/07/11 (tomh) - add release_client_dns_reply 
1999/07/11 (tomh) - HARD_FD_LIMIT? 
1999/07/11 (db) - redid motd handling completely. most of the motd handling is now -   done in motd.c -   motd handling includes, motd, oper motd, help file 
1999/07/11 (db) - redid BOTCHECK for new dns/auth any botcheck based on user given -   hostname has to be done in m_user and stored for later checking -   after user@host and I line lookup is done. 
1999/07/11 (db) - minor changes in motd code 
1999/07/11 (db) - fixed botch with SHORT_MOTD - fixed some spelling mistakes in comments in send.c tsk tsk 
1999/07/11 (db) - corrected BOTCHECK code - corrected FLAGS2_OPER_FLAGS 
1999/07/11 (db) - [11-Jul:15:24 Bleep] it's downright dangerous and wrong -   agreed ;-) 
1999/07/10 (tomh) - new test file 
1999/07/10 (tomh) - fixed username bug for servers 
1999/07/10 (tomh) - cleanup 
1999/07/10 (tomh) - Moved user.username and user.host to client struct. Chances are that this - change has introduced a few problems, it seems to work here, but needs to - be fully verified. 
1999/07/10 (tomh) - Changed unsigned long to unsigned int in client struct for rollups. See the - comment and associated test file in test for my rationale. The code that - calculates traffic density needs to be gone over and cleaned up, perhaps the - calculations should use another set of variables for this. I don't know if - using the client rollups is entirely suitable for the purpose, perhaps a - refreshed average (a vector of the last 5) would be better. 
1999/07/10 (db) - some tiny cleanups in ircd.c 
1999/07/10 (db) - fix for identd 
1999/07/09 (tomh) - fixed performance bug in cache expire 
1999/07/09 (tomh) - Changed resolver code to use reference counting instead of blind hostent - removal. This will ensure that if a client resolved we will always get - it's hostent. Currently we are saving the hostent for the life of the client, - but it can be released once the access checks are finished so the resolver - cache stays reasonably sized. 
1999/07/09 (db) - receiveK etc. have to be at least a long in client.h - ircd.c changes to fix HTM 
1999/07/08 (tomh) - removed pyr 
1999/07/08 (tomh) - removed cdefs.h remnant from old resolver code 
1999/07/08 (tomh) - new files 
1999/07/08 (tomh) - moved client dns/ip check to s_auth.c, fixed broken ip check code in s_bsd.c 
1999/07/08 (tomh) - minor optimization for match 
1999/07/08 (tomh) - fixup double defines 
1999/07/08 (tomh) - constify send, cleanup more dependencies 
1999/07/08 (tomh) - constify send 
1999/07/08 (tomh) - changed ts_val to time_t, looks like a duck - quacks like a duck... 
1999/07/08 (tomh) - chage ts_val to time_t 
1999/07/08 (db) - stop at first @ seen in username, it might be an email address -   but ircd only needs the username 
1999/07/08 (db) - sidewnder fix for install_ircd for use with new configure - added windewnder's mkconf script 
1999/07/08 (db) - removed unused tables in match.c =no one= was using these. I remember -   pulling these before, they must have come back in through chip's match.c ? - removed unused #ifdef in send.c 
1999/07/08 (db) - removed USE_VARARGS (Sidewnder) 
1999/07/08 (db) - put me out to pasture. tables are used. duh. backed out last change 
1999/07/08 (db) - one more change to autoconf for Sidewnder 
1999/07/08 (db) - neph's patch for [O] [o] and oper privs 
1999/07/08 (db) - loads of changes to add function prototypes for send.c functions -   all these files now include "send.h" 
1999/07/08 (db) - fixed goof in s_conf.h 
1999/07/08 (db) - fixed botch in s_user.c missing } - fixed compile whine in hash.c - adding send.h file (for Sidewnder) - adding modified send.c (for Sidewnder) - removed function prototypes for send-* from h.h (for Sidewnder) - multiple 'c' files will need addition of send.h to stop compile whining.. -   coming.... - commit stamp, automatically updated 
1999/07/08 (db) - fixed botch in s_user.c missing } - fixed compile whine in hash.c - adding send.h file (for Sidewnder) - adding modified send.c (for Sidewnder) - removed function prototypes for send-* from h.h (for Sidewnder) - multiple 'c' files will need addition of send.h to stop compile whining.. -   coming.... 
1999/07/08 (db) - cosmetic changes only 
1999/07/08 (db) - corrected some missing const 
1999/07/08 (db) - changes to centralize config.h ircd config files to one struct 
1999/07/08 (db) - blew away another lame #define in config.h - removed lame #ifdef correspoding to define in config.h removed 
1999/07/07 (tomh) - renamed get_sockhost to set_client_sockhost 
1999/07/07 (tomh) - little fixups 
1999/07/07 (tomh) - cleanup of sendheader code and macros for GotId NeedId 
1999/07/07 (tomh) - cleanup of sendheader code 
1999/07/07 (db) - rewrote how ident was parsed. 
1999/07/07 (db) - removed last remnant of old configure files 
1999/07/07 (db) - removed MIN/MAX replaced with IRCD_MIN IRCD_MAX 
1999/07/07 (db) - last of Sidewnders autoconf changes 
1999/07/07 (db) - fixed two problems with auth code in s_bsd.c fd == -1 cores server - added /msg opers@server.name for messaging all opers at once -   needs better formatting. Perhaps should be restricted to opers only? 
1999/07/07 (db) - committed Sidewnders new autoconf changes 
1999/07/07 (db) - commited fixes for neph's stats p change to show O or o 
1999/07/07 (db) - allow /msg opers@server syntax only to global opers - fixed minor bug in s_auth.c 
1999/07/07 (db) - added a missing autoconf file 
1999/07/06 (tomh) - updated comments 
1999/07/06 (tomh) - changed auth code to use new AuthRequest 
1999/07/06 (db) - trimmed int to unsigned char in fdlist.h 
1999/07/05 (db) - use GetPrintableaConfItem() 
1999/07/05 (db) - updated example.conf with new oper flags H/D 
1999/07/05 (db) - memmove isn't even =used= in mtrie_conf.c anymore 
1999/07/05 (db) - fixed msg.h to account for no more OPER_REHASH etc. - no more ANTI_IP_SPOOF removed obsolete #ifdef's 
1999/07/05 (db) - converted bcopy to memcpy 
1999/07/05 (db) - backed out premature channel.c change 
1999/07/04 (tomh) - more cleanup, only call delete_resolver_queries when there are outstanding requests 
1999/07/04 (db) - rudimentary error checking in s_conf.c, flag non 0 classes that -   default to class 0 
1999/07/04 (db) - fixed stupid typos in s_conf.c 
1999/07/04 (db) - added D and R flags in oper flags of port of O line, for /rehash and /die -   /restart is considered a form of /die and needs same privs 
1999/07/03 (tomh) - rework res.c, implement resolver callbacks, change hostent generation code, cleanup of other code that uses the resolver 
1999/07/03 (tomh) - removed netdb.h include 
1999/07/03 (tomh) - removed chkconf target 
1999/07/03 (tomh) - more dependency hacks 
1999/07/03 (tomh) - commit merge, must have missed this last night 
1999/07/03 (tomh) - cleanup some globals, header dependencies 
1999/07/03 (tomh) - cleanup dependencies 
1999/07/03 (tomh) - clean up class macros, includes 
1999/07/03 (tomh) - added -DNDEBUG to release CFLAGS 
1999/07/03 (tomh) - a bit more dependency cleanup 
1999/07/03 (db) - removed unnecessary ASYNC' defines in struct.h 
1999/07/03 (db) - fixes to res.h for bsd 
1999/07/03 (db) - as pointed out by neph, in check_fdlists, IsOper(cptr) should be IsAnOper(cptr) - local opers would never go on busycli_fdlist 
1999/07/02 (db) - m_admin was broken (sidewnder) 
1999/07/02 (db) - found bug in TS 0 detect code in channel.c duh 
1999/07/01 (db) - removed chkconf from tools, moved most of its functionality into -   s_conf.c of ircd itself. chkconf.c was always out of date anyway. 
1999/07/01 (db) - removed ANTI_SPAMBOT_EXTRA too much CPU for too many false positives 
1999/07/01 (db) - more removal of globals, this time in m_htm 
1999/07/01 (db) - combined all the split options into NEED_SPLITCODE in config.h 
1999/07/01 (db) - bunch of changes to get rid of global m_set options, and put them -   all into one structure. I've been meaning to do this for months. - rewrote how fdlist's work, still needs more testing, but appears -   to be major win in CPU. Consider building up the FD_SET for -   default_fdlist and simply using that FD_SET in select() (similar for POLL) -   then the select() loop becomes a memcpy() of default_fdlist FD_SET -   this would also imply dns/ident fd's enter and leave the default_fdlist - removed the dup2 loop that was being used to "keep local[] filled at bottom" -   I thought I removed this already. dup in a loop is going to be an -   expensive sys call, I don't think its worth the bother, especially on -   a bigger server. 
1999/06/30 (db) - removed unnecessary include of fdlist.h in m_gline.c m_kline.c - removed global definition of add_gline() in h.h 
1999/06/29 (tomh) - cleaned up attach_iline a bit 
1999/06/29 (db) - finished slowaris's mods, removing obsolete bot checks, cleaned up a lot - re-arranged order of privmsg testing, slightly optimized for channel -   check with first char &# this will favour channel privmsgs over client 
1999/06/29 (db) - check for valid alphanum as first char of username 
1999/06/29 (db) - botrject only needs one argument now. functionality of gcos botcheck -   can mostly be done in X lines anyway. "X:/msg*hello:eggdrop" 
1999/06/28 (db) - Removed some obsolete bot checking - Moved privmsg to check channel first then nicks, since most privmsgs -   are to channels. - done by rjp (Slowaris) 
1999/06/28 (db) - Found serious stupid bug in m_gline.c - Encapsulated as much as possible of gline code into one file 
1999/06/27 (tomh) - removed sock.h from dependency list 
1999/06/27 (tomh) - removed empty unused header 
1999/06/27 (tomh) - remove sock.h (unused) 
1999/06/27 (db) - removed obsolete comment 
1999/06/27 (db) - redid m_set parser with code from slowaris rjp@wpmedia.com 
1999/06/27 (db) - redid how klines/glines were done - cleaned up yet again, s_user.c 
1999/06/27 (db) - patchlevel needed upping - redid s_user etc. some more to handle bans better, and REJECT_HOLD 
1999/06/27 (db) - bleah forgot to increment a counter 
1999/06/27 (db) - Quick fix for rehash conf file dumping to take account new aconf format 
1999/06/26 (tomh) - cleanup includes for resolver 
1999/06/26 (tomh) - clean up dependencies, clean up resolver (initial) 
1999/06/26 (db) - removed yet more "noise" from config.h made some defines always on - cleaned up register_user some more 
1999/06/26 (db) - removed more "noise" from config.h - removed IDENTD_COMPLAIN completely, as same functionality can be -   done with I line flags now - simplified rights test in m_kline() - ensure local ops don't get the priv flags in port field they shouldn't 
1999/06/26 (db) - oops. 
1999/06/26 (db) - more cleanups in ... you got it s_user.c - removed some dead defines in config.h - added max reject held client counters - make sure numeric.h has definitions for now removed defines 
1999/06/26 (db) - found one aconf->name instead of aconf->user in m_kline.c this broke klines - testline was reporting ->name instead of user for K lines 
1999/06/26 (db) - Yet more s_user.c cleanup blech. will it ever end? 
1999/06/26 (db) - Still more cleanups to s_user.c register_user() getting there... 
1999/06/26 (db) - Even more clean up in s_user.c register_user 
1999/06/26 (db) - Added two missing includes to make it compile. 

version hybrid-6-b87 26-Jun-1999
* enough changes to merit a patchlevel update
* rewrote s_user.c register_user
* removed a ton of useless defines, made them default
-Dianora
	
version hybrid-6-b86 2[2-5]-Jun-1999
* never released	
-Dianora
	
version hybrid-6-b85 21-Jun-1999
* worked on serial number some more..
* fixed a few compile warnings related to the s_serv.c split
-Rodder
* Massive changes to conf formatting, preformatted user@host entries
* fixed Q lines to allow multiple user@host separated by ,
* removed obsolete resolver code
* removed obsolete options in config.h
* split s_serv.c into several smaller pieces
-Dianora

version hybrid-6-b84 14-Jun-1999
* removed more dead code for now (R lines)
* redid Q lines to allow user@host exceptions
-Dianora
	
version hybrid-6-b83 12-Jun-1999
* removed TIMED_KLINES entirely
* fixed stupid in s_conf.c
-Dianora
* Don't send 479 errors for SJOIN to bogus channel
-Rodder

version hybrid-6-b82 12-Jun-1999
* added more rudimentary block allocator debugging	
-Rodder

-Dianora	
version hybrid-6-b81
* only show hacked ops if from this server to an opless channel
* added PACE_WALLOPS wallops is not a substitute for a channel
-Dianora

version hybrid-6-b80
* fixed "cannot join" numerics to display full error messages
* fixed ERR_BANLISTFULL to include channel name and banid
* reject non-RFC channel names from clients and servers instead
  of truncating (new numeric 479 coordinated with the other major nets)
-Rodder

version hybrid-6-b79
* fixed compile problems if SPLIT_PONG was undefined
* more cleanup
* moved TIMED_K's to broken section of conf
-Rodder

version hybrid-6-b78   2-Jun-1999
* renamed mycmp() to irccmp() and myncmp() to ircncmp()
-Rodder

version hybrid-6-b77   2-Jun-1999
* more minor cleanup
-Rodder
* duh. just realized that hostip is now obsolete because of the way
  IP klines are being done. removing it saves 15 bytes per local client.
-Dianora

version hybrid-6-b76   28-May-1999
* make sure mtrie returned aconf is a CONF_KILL in s_serv.c
* take care of ~*@some.host.at.tld case
-Dianora

version hybrid-6-b75   26-May-1999
* '*' is not a legal IP. corrected is_address code.
* corrected possible buffer overflows in m_knock, m_invite
* server auto sets +nt on new channels.
* was never setting ip/ip_mask on m_kline ip klines, so
  ip /quote kline klines needed rehash to take effect.
-Dianora

version hybrid-6-b74   19-May-1999
* backed out incorrect change in dline_conf.c
* Corrected sendto_ops in send.c that was recursive in sendq errors,
  this one could have restarted server in infinite loop. (Raistlin Mejere)
* Using variant of soleil's is_address() code
* Fixed handling of kline/dline in s_serv.c s_bsd.c s_conf.c 
-Dianora

version hybrid-6-b73   15-May-1999
* attempt to workaround 64bit Solaris gcc-2.8.1 bug
* more compile cleanup for obscure config options
-Rodder

version hybrid-6-b72   15-May-1999
* don't allow SJOIN to & local channels.	
* restored hybrid-5 m_names code	
* Fixed send.c to be rfc compliant. 
* kick of client who joined through a ban due to a +e, has +e removed by server
* misplaced returns in mtrie_conf.c fixed.	
-Dianora

version hybrid-6-b71   12-May-1999
* corrected mtrie_conf.c problems
* added stats o flags
-Dianora

version hybrid-6-b68   10-May-1999
* corrected a few missing tests in mtrie_conf.c
-Dianora

version hybrid-6-b68   8-May-1999
* more cleanup
* RedHat 6.0 / glibc fixes
* Y2K fixes.  All dates that were YYMMDD are now YYYYMMDD.  Affects
  SEPARATE_QUOTE_KLINES_BY_DATE and GLINE code.
* SEPARATE_QUOTE_KLINES_BY_DATE wouldn't compile
-Rodder

version hybrid-6-b67   9-May-1999
* fixed broken LIMIT_UH code
-Dianora

version hybrid-6-b66   8-May-1999
* Added TESTLINE looks for given user@host,ip returns info
  on any found I line or K line for that user.
* found and fixed major IP kline bug. 
* O lines can have an optional flags field, to set default oper flags	
-Dianora

version hybrid-6-b65   8-May-1999
* changed ANTI_DRONE_FLOOD and JUPE_CHANNEL to undeffed by default
* servers and opers can no longer trip the drone detection
-Rodder

version hybrid-6-b64   8-May-1999
* code clean-up...
-Rodder

version hybrid-6-b63   6-May-1999
* SPY_LEVEL notices for clients attempting to join juped channel
* sendto_realop notices when mode +/-j #channel is used
-Dianora

version hybrid-6-b62   4-May-1999
* Added ANTI_DRONE_FLOOD code	
* Added Channel jupe code, Q line of form Q:\#channel:reason
  jupes that channel locally only on this server.
* '|' character in kline reason stops everything afterwards from being seen
  by non opers.
-Dianora

version hybrid-6-b61   2-May-1999
* fixed major bug in mtrie code. I lines would be treated as K lines
  in some cases. 2-May-1999
-Dianora

version hybrid-6-b60   29-Apr-1999
* if server split time is 0, i.e. split code is disabled, dont'
  put the server into split mode, this can leave 0 member channels
  lying around after a split.
* recoded NO_JOIN_ON_SPLIT, all cleaned up.	 
-Dianora

version hybrid-6-b59   17-Apr-1999
* missing ac2ptr_is_NULL check in m_ltrace
-Rodder
* if client is being spoofed in I line, don't show real IP to non opers
  in trace or stats L
* consistently use 127.0.0.1 for spoofed/oper ip's	
-Dianora

version hybrid-6-b58   17-Apr-1999
* SOLARIS7 64bit USERS: this code appears to tickle a bug in gcc and egcs
  ONLY on 64-bit Solaris7.  You must compile on a 32bit kernel, then you
  can run the ircd binary on 32bit or 64bit.  Or reinstall your ircd
  machine as 32bit.  Or buy SunPro C.
* Created NO_JOIN_ON_SPLIT_SIMPLE.  Totally disables the JOIN command
  for non-opers while split.  Doesn't care if the channel existed "before"
  or not.
* server notices are sent to +s clients when entering or leaving "split-mode"
-Rodder

version hybrid-6-b57   28-Mar-1999
* integrated ChangeLog with README.hybrid
* updated Hybrid-team and version.c.SH to reflect the current core team
* updated INSTALL file to match current install_ircd script
* updated all Makefiles with new makedepend info    
* massive cleaning of the doc subdir
* changed defaults in config.h for public consumption
* install_ircd now installs viconf and mkpasswd
* added a couple of ifdefs to help compile under cygwin32b20.1
* added simple.conf to doc directory
* fixed rcs_version string in mtrie_conf.c and s_debug.c
* added SPLIT_PONG...  sends a PING at the end of m_server_estab(),
  checks for PONG from a server before resetting server_was_split.
* commented out malloc-2.6.1 in Makefile.in.  There is a doublefree
  somewhere, which most system mallocs can handle, but this one can't.
* updated m_info in s_serv.c to include all the new defines in config.h
-Rodder
* fixed mtrie_conf.c kline code
-Dianora

version hybrid-6-b54   23-Mar-1999
* rewrote kline code (mtrie_conf.c), no more reverse, its faster now
  and ... works
* no more arbritray spoofs. too many complaints, it spoofs as 
  oper.server.name now
-Dianora

version hybrid-6-b54   19-Mar-1999
* fixed SLAVE_SERVERS in LOCOPS
-Dianora

version hybrid-6-b53   17-Mar-1999
* fixed misplaced #ifdef's and } causing undef'ed ANTI_SPAMBOT_EXTRA to fail
in s_serv.c s_user.c
-Dianora
* optimization in can_send() in channel.c
-orabidoo


version hybrid-6-b52   15-Mar-1999
* userlength oopsies with usernames
* added fix by comstud to s_misc.c remove_dependents() unnecessary WALLOPS
-comstud/orabidoo
* fixed mtrie_conf.c bugs
* added ip to /trace (help with virtual host cloners)
-Dianora

version hybrid-6-b51   11-Mar-1999
* added WHOIS_WAIT to info output 
-Rodder
* was using idented username instead of ~ name for unidented clients
  caused weird bug. s_conf.c attach_Iline()
* clients with > I line were still being limited by client per IP limits.
* had BUFSIZ instead of BUFSIZE in strncpy() in s_serv.c broke m_unkline
* fixed "Bad Nick" problem. was harmless but stupid. users who used
  a nick beginning with '~' would trigger this one. Had Q line code in
  slightly wrong place. s_user.c m_nick()
* fixed truncation for username, affects k-lines both unidented, idented.
  s_user.c register_user()
* Added sendto_realops notification of spoofed IP's. should be SYSLOG
  or logged, for proper backtracking if necessary IMO
* fixed CLUSTER code, still needs thorough testing. s_serv.c send.c
-Dianora

version hybrid-6-b50   24-Feb-1999
* report_specials was showing aconf->host not aconf->user
* return ERR_TOOMANYTARGETS if privmsg is used with multiple targets
-Dianora

version hybrid-6-b49   19-Feb-1999
* botch with POLL code fixed, forgot to test it on solaris after
  adding back fdlist code *sigh* 
-Dianora

version hybrid-6-b48   19-Feb-1999
* allow all opers to see stats c IP's
* added two more examples to Q lines, crush and cwush
* added fix from syrk (Christophe Kalt) in res.c
-Dianora

version hybrid-6-b47
* oops I don't know what happened to this one, but irc.colorado.edu
is running this one oops.

version hybrid-6-b46   15-Feb-1999
* put fdlist code back in. Ok, I goofed. mea culpa.
* #ifdef USE_SYSLOG missing in ircd.c
* Ultrix'ed the Makefile.in as per Ian
-Dianora

version hybrid-6-b46   15-Feb-1999
* FAST_FD_ISSET was causing the high CPU, *sigh* ok ripped out for now
* Fixed buffer overflow problem in m_unkline() s_serv.c, if a long long
  kline was in the kline.conf file, it cored the server. (reported by Phisher)
-Dianora

version hybrid-6-b45    9-Feb-1999
* may as well use the same numeric for not being able to join a channel
  as ircnet uses changes to channel.c, s_err.c, s_err.h, numeric.h
* added small net user count to split end detection
* removed lame sleep()
* try non blocking reads of all connected servers, local opers
 then read_message()
-Dianora

version hybrid-6-b44    2-Feb-1999
* remove trailing white space on H/L lines (just for Gersh)
* (s_bsd.c) fixed a botch with rr = 0 causing bizarre behaviour under solaris
  (ping time outs etc.) due to a mis-cut and paste from the select code
* (s_bsd.c) redid read_packet() to use msg_ready again
* (s_bsd.c) removed unnecessary default_read_set default_write_set, that was a
  remnant from a failed experiment with pre-set up fd set's, it was
  just slowing down the code for no reason.
* (s_misc.c) redid get_client_name() slightly to be consistent,
  idented names should not have ~ non-idented names should have ~
  lets not be inconsistent with (+) prefixes for idented names
-Dianora
* changed example.conf to remind people to have their virtual address in
  the M: line for outbound connects
* fixed the STATS_NOTICE invalid directive.  made it #define by default.
-FlashMan
* channel has to be +ip to show invite notices "p is for paranoid
  and thats good enough for me" too many complaints. I think this
  is a reasonable way of doing it for now.
* s_bsd.c moved some code around in in connect_inet() to remove
  a redundant if(specific_virtual_host). Also moved the error check
  on socket open logically where it should be.
* fixed the USE_FAST_FD_ISSET botch I introduced, corrected an unforseen
  error thats been there for a while.
* added a little more useful information in the bug report in blalloc.c
  I added a report of what size of block is being freed.
* I added a horrible kludge to ircd.c/struct.h to bit mark clients
  that have already been exited. It appears that somehow, the same
  client is being examined twice and exited twice =occasionally=
  Because of the block allocator, its safe to check the bit after free
  *kludge* I really didn't want to admit I coded that.
* Don't allow non local opers to see spoofed I lines. 
-Dianora

version hybrid-6-b43    24-Jan-1999
* reworked io_loop dropping CPU load significantly, this is still something 
  that needs to be looked at.
* allow stats p even if LTRACE is defined, its habit for users even if
  it is redundant.
* I liked WINTRHAWK RPL_TRACESERVER report, so thats now the default.
* Added a test in DEBUGMODE to ensure fd == 2 was never read. This
  won't happen with select() read, but can if read_messages is
  called directly. Might as well be paranoid about it now. This one
  caused ircd to abort when compiled with DEBUGMODE in b42
-Dianora

version hybrid-6-b42    24-Jan-1999
* removed [IP] being sent in CONNECT in connect burst
* removed [IP] if seen in m_links from prying eyes of users
-Dianora

version hybrid-6-b41    23-Jan-1999
* removed USERNAMES_IN_TRACE default is always on now
* get_client_name() will default to sptr->username if sptr->user->username
  is null
* made config.h/config.h.dist consistent again, went back to stock defaults
-Dianora

version hybrid-6-b40    21-Jan-1999
* redid m_invite for better sanity testing, you can no longer
  invite users to a non-existent channel for example.
* Don't send SJOIN's for zero length MODE_SPLIT channels (Mortiis)
* redid m_sjoin for MODE_SPLIT channels treat it as a brand new channel
* fixed broken NO_JOIN_ON_SPLIT to only care about channels that had
  existed before a split

-Dianora

version hybrid-6-b39    20-Jan-1999
* sanity test m_gline parc argument count, older hybrid-5 servers
  with buggy GLINE can core new hybrid-6 correct GLINE code 
* Forward the GLINE even if GLINE is not defined on this server.
  No point having GLINE for opers on a HUB for example, and servers
  that wish to opt out of others placing GLINE's can still relay it.
* keep a link list of 0 member channels created on a split
  if PRESERVE_CHANNEL_ON_SPLIT or NO_JOIN_ON_SPLIT is defined
  remove all 0 member channels when split heals
  redid NO_JOIN_ON_SPLIT to only care about channels that once existed.

-Dianora

version hybrid-6-b38    20-Jan-1999

* bumped version up to b38
* fixed bugs with "reason" code in ircd.c
* duplicated config.h to config.h.dist
* fixed bug in ircd.c with SEND_FAKE_KILL_TO_CLIENT
  if IDLE_CHECK not defined
* Added new defines to m_info() in s_serv.c
* Started adding code to deal with user@IP I lines to s_conf.c

-Dianora

============================================================================
|        Mon Jan 18 00:13:39 PST 1999	Jake Khuon <khuon@GCtr.Net>        |
============================================================================

* b37mod1

[1] Added the following options:

	IDLE_IGNORE
		When used in conjunction with IDLE_CHECK will prevent the
	        server from idle'ing clients connected from the listed IP#s. 
	        This should probably be moved into a conf file entry at
	        some point in the future.
	
	SEND_FAKE_KILL_TO_CLIENT
		Make the client think it's being KILL'ed.  This was
		originally intended to prevent clients from reconnecting to
		the server after being dropped for idleness.  It can
		probably be used for other events too.  This really only
		works well if the client was compiled with
		QUIT_ON_OPERATOR_KILL which was mandatory policy on
		UMich.Edu hosts.

	LTRACE (Limited TRACE)
		Reports only link and oper traces even when O:line is
		active. Displays only Oper, Serv, Link, and Class reports
		even if the O-line is active.  Useful for just showing
		pertinent info of a specific server. Note however that if
		the target server is not running this option then you will
		still receive a normal trace output.  Defining this will
		remove "STATS p" funtionality since the two are basically
		redundant.

	LWALLOPS
		This is actually a compatibility command which really calls
		m_locops().

	STATS_NOTICE
		Notify opers on STATS request.  Some people find this
		invasive and with the STAT command on PACE throttle the
		server shouldn't suffer but lusers stat for different
		reasons and many times it's been a prelude to some other
		form of attack.  Wrestle with your own morals before
		defining.

	SHOW_FAILED_OPER_ID
		If FAILED_OPER_NOTICE is defined, also notify when a client
		fails to oper because of a identity mismatch (wrong host or
		nick)

	SHOW_FAILED_OPER_PASSWD
		If FAILED_OPER_NOTICE is defined, also show the attempted
		passwd.  Once again, this may be morally offensive.

	WINTRHAWK
		Enable WintrHawk's style of reporting things.  This is most
		evident in TRACE and LTRACE which won't report idletimes
		otherwise.


[2] Bugfixes/changes:

	Fixed *_WHEN_SPLIT bug whereby a server was still considered split
	even though the network had reached SPLIT_SMALLNET_SIZE (but hadn't
	yet surpassed it).

	Added capability for defining OPER_UMODES, LOCOP_UMODES, and
	DEFAULT_SERVER_SPLIT_RECOVERY_TIME from config.h.

	Fixed m_trace() so that it now reports correct idletimes and added
	WINTRHAWK styling option.

	Updated opers.txt with mod1 commands.

	Added a ChangeLog |8^)

	Added some code for K-line files but it's not yet functional
============================================================================


version hybrid-6-b37    13-Jan-1999

* removed M: line port & address activation on startup
  you *must* use at least one P: line in your config file now -- FlashMan
* completely rewrote get_client_name() to clean up the conditionals mess
  makes things look prettier overall -- FlashMan
* RPL_YOURHOST is now given to the client as server_name[sockhost/port]
  that the client connected to -- for virtual addresses and such -- FlashMan
* Removed SHOW_UH define from config.h -- no longer needed -- FlashMan




---------------------------------------------------------------------------
+hybrid-6bXX (12/24/1998)
* NAMES now only works for a single target
* WHOWAS now only works for a single target
* For server compiled with NO_CHANOPS_WHEN_SPLIT, the server now starts
  up in the same state as if it was split--not allowing chanops.
* U: lines, server cluster lines.. see example.conf (Dianora)
* applied a pile of fixes for alphas made by jailbird, Dustin Marquess
 (jailbird@alcatraz.fdf.net)
* non chanops cannot see +e
* removed ANTI_IP_SPOOF (Dianora)
* redid semantics of LITTLE_I_LINES. Clients who are i lined
  can be opped, they can do everything a normal op can do,
  but cannot op anyone else (Dianora)
* removed REJECT_IPHONE code and refined X line code (Dianora)
* fixed bad dns problem (kalt)
* fixed m_topic (Dianora)
* fixed m_motd oper notice in the wrong place (Dianora)
* fixed m_lusers, added send_lusers() (Dianora)
* Fixed install script to try to create IRCDDIR if it doesn't exist
* non-opers can now /trace nickname properly (Rodder)
* These commands are flood controlled: VERSION, INFO, LINKS, STATS, HELP,
  LUSERS, ADMIN, MOTD, WHOIS (remote only)
* These functions are local-only for non-opers:
  INFO, LINK, STATS (except 'p'), HELP
* removed pacing from m_time() (Dianora)
* fixed remote m_info() for opers (Dianora)
* added OPER_MOTD code, when oper opers up they get an unique motd (Dianora)
* track maximum dbuf usage in stats Z
* OS/2 mods from Roger Haskins (nth.tech@iname.com) (Rodder)
* spare_fd kludge to fix rehash DNS on Solaris (Rodder)
* fixed stderr logging (ircd -s) for report_error() when SYSLOG undef'd (Rodder)
* ircd now understands .include "filename" in ircd.conf file (Dianora)
* modified configure.in for use with zlib (Rodder)
* added CAPAB code, understands EX ZIP QS (orabidoo/Dianora)
* reworked set_mode() completely in channel.c (orabidoo/Dianora)
* privmsg/notice @#channel will send to all chanops
* added +e (orabidoo)
* Q lines are back, quarantine nick, X line reject gecos info (Dianora)
* allow users who are invited to walk through any bans/limits (dr)
* disallow class -1 in conf file (dr)
* allow mode outside channel to see mode limit (dr)
* added knock command to ask for invites to +i channel (dr)
* disabled the ability to set a ban including a prefixed colon (Dianora)
* added kline matching on ip (CIDR) you can now kline
  user@ip.ip.ip.ip/mask (Dianora/good)
* d-line now recognizes CIDR notation as well (Dianora/good) 
* added ANTI_SPAMBOT_EXTRA (read config.h) added heuristics to catch
  spambots (Dianora)
* added ANTI_SPAM_EXIT_MESSAGE no quit message from client, if client
  is less than 5 minutes on irc (ThaDragon)
* unkline will unkline temporary klines now as well (Dianora)
* added oper priv field in normally unused port field of O line
  possible flags "ORUGT"
  K enables, k disables, local kill and kline 
  O enables, o disables, global kill,
  R enables, r disables, remote operator commands, squit/connect
  U enables, u disables, unkline
  G enables, g disables, gline
  N enables, n disables, the use of umode +n
  defaults for global O if no flags is OKRUG, for local o, KU
  with K flags not being shown normally, only k flag (Dianora)
* E lines replaced by ^ in front of username in I line
* F lines replaced by > in front of username in I line
* B lines replaced by & in front of username in I line
* "^>&" can be combined with any combination of "+!-" characters (Dianora)
* = as a prefix char will spoof that user, see example.conf (Dianora)
* will not allow any user with username including '!' '*' '?'
  or high bit/control characters to user the server (Dianora)
* added LIMIT_UH code (Dianora)
* fixed missing USE_SYLOG in ircd.c (ThemBones)
* use Count.local instead of sptr->fd in s_user for SET MAX (ThemBones)
* reworked s_err.c/numeric.h (Dianora)
* added hash debug on /quote hash (Dianora)
* report user doing /motd, removed STATS_FLAG (Dianora)
* added delay between motd requests (Dianora)
* fixed REJECT_HOLD code, fripping backwards if (Dianora)
* added +-! special I line prefix character ($ is not applicable to hybrid)
  (comstud/Dianora)
* ripped out dich_conf replaced with mtrie_conf (Dianora)
* added /quote set autoconn ALL 0/1 enable/disable autoconns
* added /quote set autoconn servername 0/1 enable/disable this server
  or /quote set autoconn ALL 0/1 enable/disable all autoconns (Dianora)

-----------------------------------------------------------------------
see doc/ChangeLog.old for changes in older releases


+hybrid-5.3 (6/13/98)
* added NO_CHANOPS_WHEN_SPLIT code back in (Rodder/Dianora)
* fixed SEPARATE_QUOTE_KLINES_BY_DATE so it compiles (Rodder)
* removed LITTLE_I_LINES from config.h for now (Rodder)
* should compile on Linux/glibc now (Rodder)

+hybrid-5.2p1 (5/12/98)
* removed uneeded variable in aClient (Dianora)
* added missing #ifdef's for USE_SYSLOG (Dianora)
* reverted to old check_pings() to fix high cpu usage (Rodder)
* fixed DEBUGMODE (Dianora)

+hybrid-5.2 (4/21/98) - The inevitable bug fix release
-fixes
* changed many of the defaults in config.h
* removed ident_fdlist it was never used anyway (comstud)
* fixed quote kline for 10 character user names (Dianora)
* obscure bug with KICK message in a desync channel situation (Dianora)
* bug with max channel name fixed (comstud/Dianora)
* stop spam from links command i.e. beeps (Dianora)
* bug with default +i not showing MODE to user initially (Rodder)
* ANTI_IP_SPOOF moved to "broken" section of conf (Rodder)
* ident lookups now work properly for all interfaces of
  multihomed (or "VIF"'d) machines, including Solaris 2.6 (Rodder)
* stats l/L no longer shows -i clients to non-opers (Rodder)
* exorcised evil timedelta variable
* Fixed oper wallops broadcasting instead of routing (Dianora)
* Covered up bogus "Got Ident" messages in read_authports() (Rodder)
* Fixed missing RPL_ENDOFTRACE for non-opered clients (Dianora)
* #undef IDLE_FROM_MSG fixed, ping/pong/ison do not reset idle time (Dianora)

-feature adds
* bumped HTM code to not kick in until 40K/s by default
* stop people from laming up the kline conf file with # in comment (Dianora)
* added comstuds SEPARATE_QUOTE_KLINES_BY_DATE
* use block allocator in FLUD code (Shadowfax)
* added HTM quiet or HTM noisy option -- see NOISY_HTM in config.h
  for initial setting (Dianora)
* added LOCOPS, each type of wallops/operwall/locops is now flagged (Dianora)
* added signon time to RPL_WHOISIDLE (Dianora)
* allow local opers to see kills requested by riss (Dianora)
* added ANTI_SPAMBOT code, read config.h (Dianora)
* added fixklines to tools dir, use it to check kline.conf for #'s inside
  of K-line comments (Dianora)
* added OLD_Y_LIMIT in config.h.dist to go back to old Y/I line behaviour
  (Dianora)
* M: line passwd field now used to specify address to bind to on
  machines with multiple interfaces.  (Rodder)
* P: line passwd field now used to specify address to bind to on  
  machines with multiple interfaces. (Rodder)
* added /quote set SPAMNUM SPAMTIME to control ANTI_SPAMBOT behaviour (Dianora)
* hybrid option flags removed from m_version and replaced
  by (for opers) full listing of server defines in m_info (Rodder)
* poll() code mods ported from CSr30 (comstud) by cbongo
* m_whois() rewritten to use hash table when possible (Dianora)
* spambot sign on code added (ThemBones)
* i line (LITTLE_I_LINE) support, restricted i lines (Dianora)
* NO_CHANOPS_WHEN_SPLIT delays channel hacking until rejoin (Dianora)
* ANTI_SPAMBOT on sign on code (ThemBones)
* only allow 4 kicked nicks per kick (Dianora)
* sped up kline processing, redid check_pings in ircd.c (Dianora) 
* Server now checks for sane TS when connecting to other server,
  see TS_MAX_DELTA and TS_WARN_DELTA in config.h (Rodder)
* Server checks for backwards spinning clock and complains if
  found (Rodder)
* Check for error when timeofday is set (Shadowfax)
* Announce TS changes after TS induced deops (Shadowfax)
* stop redistributing away information to other servers
* Prepared for TS4 mixed net by checking validity of channel mode changes
  only at the local server (orabidoo)

+hybrid-5 (9/26/97)
* LOTS AND LOTS OF CHANGES IN CONFIG.H
* reorganized source tree, eliminating common subdir
* reworked hash.c (Dianora)
* reworked parse.c, tree prefix command lookups (Dianora/orabidoo)
* all code is now function prototyped (Dianora)
* improved bad host/nick handling, i.e. dns spoofers (ThemBones)
* sped up send_umode_out in s_user.c (ThemBones)
* sped up whowas processing, removed away from whowas (Dianora)
* redid m_kline/cluster in s_serv.c (Dianora)
* redid dline/kline handling (Dianora/Rodder/ThemBones)
* removed lame #ifdefs in poll() (Dianora)
* always defined D_LINES/E_LINES/F_LINES (Dianora)
* TS_ONLY server now (Dianora) 
* cleaned up s_auth.c (Dianora/ThemBones)
* changed BAN_INFO handling (Dianora)
* sanity testing in res.c (Dianora)
* added orabidoo's scache code (orabidoo/Dianora)
* added KLINE_WITH_REASON kline reason on klines/connects (Dianora)
* added NON_REDUNDANT_KLINE code (Dianora)
* added ANTI_IP_SPOOF code (Dianora)
* added temporary kline code (Dianora)
* added Jolo's block allocator into list.c (Jolo/Dianora)
* added ANTI_NICK_FLOOD code (Dianora) 
* removed UNIXPORT code (Dianora)
* removed lame unused code in match.c (Jolo)
* corrected many type errors, ran through purify (Jolo)
* removed unused variables (Dianora)
* folded in Shadowfax's FLUD code (Shadowfax/Dianora)
* folded in Shadowfax's LOCKFILE code (Shadowfax/Dianora/Rodder/ThemBones)
* added optional GLINE code (Dianora)
* stats K now works for normal users (Dianora)
* quote UNKLINE code as a option added (Dianora/common)
* Reworked ACKPATCH, removed ONE kludge and use confeq field of Y instead,
  used hash table of ip's (Dianora)
* removed UNIXPORT support (Dianora)
* added support for oper WALLOPS back in.  Use /quote OPERWALL to send operwalls.
* reworked version.c.SH to track build number (Rodder)
* make clean removes more junk (Rodder)
* added check for adequate FD_SETSIZE
* created tools subdir (Rodder)
* added "Unauthorized connection" back in, under umode +c (Dianora/Rodder)
* modified autoconf for Solaris 2.6 (Rodder)
* modified LUSERS to ignore masks (Rodder)
* fixed mysterious exit() in fdlist.c from fd leak in s_auth.c (Dianorans)
* fixed overrun bugs in res.c (Dianora/Johan/Shadowfax)

-----------------------------------------------------------------------------
+hybrid-4.3 (8/19/97) - more bug fixes
* typo that caused immediate crash on HPUX fixed
* IP/hostname mismatch code fixed, warns the user instead of opers
* typo fixed in missing klinefile error message

+hybrid-4.2 (8/4/97) - minor bug fix, one new feature
* rcs version string was clobbering server version string
* Bans can now match by IP for hosts that resolv (db)
  IP_BAN_ALL define added to config.h

+hybrid-4 (7/28/97)
* LOTS OF NEW STUFF IN CONFIG.H, GO READ IT!!  THE WHOLE THING!!
  EVEN IF YOU ARE UPGRADING TO THIS FROM A HYBRID-4 BETA!!
* patch for yet another NICK bug
* patch for m_server() bug
* patch for TS3 bug
* switched to GNU autoconf (thanks ns!)
* WALLOPS now only go to real opers
* ircsprintf() mod to check for NULL args (db)
* fixed possible overflow res.c (db)
# seperate klines file  - see config.h (db)
* quote_dline support - see config.h (db)
* fixed timezone snafu in date()
* added RFC1035_ANAL define reject _ and / in hostnames
* removed old DELAY_NICK define..  broken and unneeded
* modified s_err.c and created s_err.h.  See CUSTOM_ERR in include/config.h
* m_server() now quietly ignores clients that try to use SERVER
* removed NOTE code, removed SUMMON code, gutted USERS
* added automatic timestamps to comments of quote KLINE and DLINE
* changed failure notice for clients bouncing off ACKPATCH
  to "Only one connection at a time allowed from your hostname"
* cleanup to channel.c
* format() mod to check for NULL args (di)
* removed more useless crap (UPHOST, VMS, etc) from config.h
* #undef F_LINES fixed
* oper WALLOPS changed to OPERWALL (code taken from csr30)
* BSDI 3.0 FD_ALLOC support (db)
# changed output of STATS D
* Removed Q: line support
* cleaned up find_conf_ip (db)
* fixed crypt() usage to work on systems with longer salts
  (ie FreeBSD without DES libs)
* various spelling fixes (db)
* N: line checking in m_server() (db)
* WARN_NO_NLINE define added to config.h

-----------------------------------------------------------------------------
+hybrid-3 (6/17/97):
* Added USRIP command.  This command returns user@ip in a USERHOST
  reply for local clients only.  Requests for remote nicks are treated
  as though the nick doesn't exist.
* Switched to Dianora's faster dich_conf.c
* Check for invalid characters (see RFC1035) in hostnames
* Fixed problem with coring due to invalid hostnames on non-local users
* TSora version 3
* Turned D_LINE support back on
* Numerous changes to Config script, may actually work now
* Additional OS defs in Makefile
* Minor cleanup in include/config.h
# created new INSTALL document

-----------------------------------------------------------------------------
+hybrid-2 (4/12/97):
This is ircd2.8/th.v5a.3 with the WHO, WHOWAS, and IsMember() code
from Comstud's irc2.8.21CSr29.  Please send email to Jon Lusky
<lusky@vol.com> if you find problems with it.

Relevant excerpt from irc2.8.21+CSr29/README.CS:
3) /whowas code totally rewritten.  This code is better than Avalon's
   ever was.  You can now raise NICKNAMEHISTORYLENGTH in config.h to
   a value that makes sense with today's number of clients.  Without
   rewriting, you could expect server lockup, mostly during splits.
   These changes should lower CPU usage quite a bit, especially during
   splits.
4) /who code tweaked.  IsMember() = CPU hog...IsMember() has been changed
   and m_who does less find_user_link()s now...much less.  This is
   a big reducer of CPU usage.  Also another "bug" was removed from
   m_who that can possibly cause server lockups.  The possibility still
   remains, though...not sure how to improve it further without totally
   breaking /who.
5) This goes with #4, but...
   /who nickname was optimized tremendously.  However, this breaks /who
   if you do /who username and username happens to match a nickname.
   Oh well...too bad.

-----------------------------------------------------------------------------
+hybrid-1 never really existed

